<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Github User Fetcher: duk_bi_string.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Github User Fetcher<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">C/C++ Application with Server and GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('duktape-1_85_82_2src-separate_2duk__bi__string_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">duk_bi_string.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="duktape-1_85_82_2src-separate_2duk__internal_8h_source.html">duk_internal.h</a>&quot;</code><br />
</div>
<p><a href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a521e093155da42720b62a95db6e0de4f" id="r_a521e093155da42720b62a95db6e0de4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a521e093155da42720b62a95db6e0de4f">duk_bi_string_constructor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a521e093155da42720b62a95db6e0de4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dc149cc70f0ea0a6637be537a5e4d53" id="r_a6dc149cc70f0ea0a6637be537a5e4d53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6dc149cc70f0ea0a6637be537a5e4d53">duk_bi_string_constructor_from_char_code</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a6dc149cc70f0ea0a6637be537a5e4d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afddcb5162c3dfcfc3b7ea8e5318315cd" id="r_afddcb5162c3dfcfc3b7ea8e5318315cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afddcb5162c3dfcfc3b7ea8e5318315cd">duk_bi_string_prototype_to_string</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:afddcb5162c3dfcfc3b7ea8e5318315cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a118299785b22816b8de04a4f34595004" id="r_a118299785b22816b8de04a4f34595004"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a118299785b22816b8de04a4f34595004">duk_bi_string_prototype_char_at</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a118299785b22816b8de04a4f34595004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414c5763077707a5002a8feaa1c4030e" id="r_a414c5763077707a5002a8feaa1c4030e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a414c5763077707a5002a8feaa1c4030e">duk_bi_string_prototype_char_code_at</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a414c5763077707a5002a8feaa1c4030e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c1c34ef9962a6b55e171f7702b3c49a" id="r_a4c1c34ef9962a6b55e171f7702b3c49a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c1c34ef9962a6b55e171f7702b3c49a">duk_bi_string_prototype_substring</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a4c1c34ef9962a6b55e171f7702b3c49a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d4eb525b2a847fbd191f81f1f8326fa" id="r_a8d4eb525b2a847fbd191f81f1f8326fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d4eb525b2a847fbd191f81f1f8326fa">duk_bi_string_prototype_substr</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a8d4eb525b2a847fbd191f81f1f8326fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50df3b44d3be608d5d2f90ce54cc073e" id="r_a50df3b44d3be608d5d2f90ce54cc073e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50df3b44d3be608d5d2f90ce54cc073e">duk_bi_string_prototype_slice</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a50df3b44d3be608d5d2f90ce54cc073e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5516b54bf62b122588cbe8372b69492b" id="r_a5516b54bf62b122588cbe8372b69492b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5516b54bf62b122588cbe8372b69492b">duk_bi_string_prototype_caseconv_shared</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a5516b54bf62b122588cbe8372b69492b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74059b1d1bd89693fb59c40e5d9759a" id="r_ae74059b1d1bd89693fb59c40e5d9759a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae74059b1d1bd89693fb59c40e5d9759a">duk_bi_string_prototype_indexof_shared</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:ae74059b1d1bd89693fb59c40e5d9759a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9417cf44229f55f71ce55a5d07c83ee" id="r_ab9417cf44229f55f71ce55a5d07c83ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9417cf44229f55f71ce55a5d07c83ee">duk_bi_string_prototype_replace</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:ab9417cf44229f55f71ce55a5d07c83ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08ad4a47ff76268630eb9ffa322ccf44" id="r_a08ad4a47ff76268630eb9ffa322ccf44"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08ad4a47ff76268630eb9ffa322ccf44">duk_bi_string_prototype_split</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a08ad4a47ff76268630eb9ffa322ccf44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61f43d2ba758344535f6cf34af4bff63" id="r_a61f43d2ba758344535f6cf34af4bff63"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61f43d2ba758344535f6cf34af4bff63">duk__to_regexp_helper</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> <a class="el" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> force_new)</td></tr>
<tr class="separator:a61f43d2ba758344535f6cf34af4bff63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a618537d27c9d5d13bed00b6b69b1a42a" id="r_a618537d27c9d5d13bed00b6b69b1a42a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a618537d27c9d5d13bed00b6b69b1a42a">duk_bi_string_prototype_search</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a618537d27c9d5d13bed00b6b69b1a42a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1a68f37830fd0fb50f60957da27933" id="r_a9f1a68f37830fd0fb50f60957da27933"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f1a68f37830fd0fb50f60957da27933">duk_bi_string_prototype_match</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a9f1a68f37830fd0fb50f60957da27933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc09ce6123152872779cc0597e684c4" id="r_a7cc09ce6123152872779cc0597e684c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cc09ce6123152872779cc0597e684c4">duk_bi_string_prototype_concat</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a7cc09ce6123152872779cc0597e684c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af089bb036b4d05e9ec0661d27f5d2964" id="r_af089bb036b4d05e9ec0661d27f5d2964"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af089bb036b4d05e9ec0661d27f5d2964">duk_bi_string_prototype_trim</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:af089bb036b4d05e9ec0661d27f5d2964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbadd72691970cc7d44b5de4dcf92457" id="r_afbadd72691970cc7d44b5de4dcf92457"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afbadd72691970cc7d44b5de4dcf92457">duk_bi_string_prototype_locale_compare</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:afbadd72691970cc7d44b5de4dcf92457"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a61f43d2ba758344535f6cf34af4bff63" name="a61f43d2ba758344535f6cf34af4bff63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61f43d2ba758344535f6cf34af4bff63">&#9670;&#160;</a></span>duk__to_regexp_helper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__to_regexp_helper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>index</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>force_new</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01092">1092</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1092</span>                                                                                              {</div>
<div class="line"><span class="lineno"> 1093</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h;</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>    <span class="comment">/* Shared helper for match() steps 3-4, search() steps 3-4. */</span></div>
<div class="line"><span class="lineno"> 1096</span> </div>
<div class="line"><span class="lineno"> 1097</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_variable" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>    <span class="keywordflow">if</span> (force_new) {</div>
<div class="line"><span class="lineno"> 1100</span>        <span class="keywordflow">goto</span> do_new;</div>
<div class="line"><span class="lineno"> 1101</span>    }</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span>    h = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2fd067d472c0b9ca7be27f504cb0e2">duk_get_hobject_with_class</a>(ctx, <a class="code hl_variable" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0ee364551cd1301005bd72e8ba3a157c">DUK_HOBJECT_CLASS_REGEXP</a>);</div>
<div class="line"><span class="lineno"> 1104</span>    <span class="keywordflow">if</span> (!h) {</div>
<div class="line"><span class="lineno"> 1105</span>        <span class="keywordflow">goto</span> do_new;</div>
<div class="line"><span class="lineno"> 1106</span>    }</div>
<div class="line"><span class="lineno"> 1107</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span> do_new:</div>
<div class="line"><span class="lineno"> 1110</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7013e79df7f81ea6201933b88c1d9994">duk_push_hobject_bidx</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a85acee46c6e704e4f6b2c318cade03b0">DUK_BIDX_REGEXP_CONSTRUCTOR</a>);</div>
<div class="line"><span class="lineno"> 1111</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, <a class="code hl_variable" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a>);</div>
<div class="line"><span class="lineno"> 1112</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3cac40b8b87d5582d7af0dc91be46441">duk_new</a>(ctx, 1);  <span class="comment">/* [ ... RegExp val ] -&gt; [ ... res ] */</span></div>
<div class="line"><span class="lineno"> 1113</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a690921ea90be3a0cb5483cb80f9c3439">duk_replace</a>(ctx, <a class="code hl_variable" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a>);</div>
<div class="line"><span class="lineno"> 1114</span>}</div>
<div class="ttc" id="adeprecated_2gthread_8h_html_ac9be6c0781aab4af4c0d61c77a938911"><div class="ttname"><a href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a></div><div class="ttdeci">guint index</div><div class="ttdef"><b>Definition</b> <a href="deprecated_2gthread_8h_source.html#l00001">deprecated/gthread.h:1</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0ee364551cd1301005bd72e8ba3a157c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0ee364551cd1301005bd72e8ba3a157c">DUK_HOBJECT_CLASS_REGEXP</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_REGEXP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04702">duktape-1.5.2/src-noline/duktape.c:4702</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3cac40b8b87d5582d7af0dc91be46441"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3cac40b8b87d5582d7af0dc91be46441">duk_new</a></div><div class="ttdeci">DUK_EXTERNAL void duk_new(duk_context *ctx, duk_idx_t nargs)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12549">duktape-1.5.2/src-noline/duktape.c:12549</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a52bc112231cf556000de414bca74c712"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a></div><div class="ttdeci">#define DUK_ASSERT(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">duktape-1.5.2/src-noline/duktape.c:7755</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a690921ea90be3a0cb5483cb80f9c3439"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a690921ea90be3a0cb5483cb80f9c3439">duk_replace</a></div><div class="ttdeci">DUK_EXTERNAL void duk_replace(duk_context *ctx, duk_idx_t to_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15780">duktape-1.5.2/src-noline/duktape.c:15780</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7013e79df7f81ea6201933b88c1d9994"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7013e79df7f81ea6201933b88c1d9994">duk_push_hobject_bidx</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_hobject_bidx(duk_context *ctx, duk_small_int_t builtin_idx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19075">duktape-1.5.2/src-noline/duktape.c:19075</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8566105ab847d4151b62c29ceab53a0d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a></div><div class="ttdeci">DUK_EXTERNAL void duk_dup(duk_context *ctx, duk_idx_t from_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duktape-1.5.2/src-noline/duktape.c:15702</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a85acee46c6e704e4f6b2c318cade03b0"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a85acee46c6e704e4f6b2c318cade03b0">DUK_BIDX_REGEXP_CONSTRUCTOR</a></div><div class="ttdeci">#define DUK_BIDX_REGEXP_CONSTRUCTOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01645">duktape-1.5.2/src-noline/duktape.c:1645</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aee2fd067d472c0b9ca7be27f504cb0e2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2fd067d472c0b9ca7be27f504cb0e2">duk_get_hobject_with_class</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_get_hobject_with_class(duk_context *ctx, duk_idx_t index, duk_small_uint_t classnum)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16541">duktape-1.5.2/src-noline/duktape.c:16541</a></div></div>
<div class="ttc" id="astructduk__hobject_html"><div class="ttname"><a href="structduk__hobject.html">duk_hobject</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05328">duktape-1.5.2/src-noline/duktape.c:5328</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01645">DUK_BIDX_REGEXP_CONSTRUCTOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16541">duk_get_hobject_with_class()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04702">DUK_HOBJECT_CLASS_REGEXP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12549">duk_new()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19075">duk_push_hobject_bidx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15780">duk_replace()</a>, and <a class="el" href="deprecated_2gthread_8h_source.html#l00001">index</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01164">duk_bi_string_prototype_match()</a>, and <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01118">duk_bi_string_prototype_search()</a>.</p>

</div>
</div>
<a id="a521e093155da42720b62a95db6e0de4f" name="a521e093155da42720b62a95db6e0de4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a521e093155da42720b62a95db6e0de4f">&#9670;&#160;</a></span>duk_bi_string_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00020">20</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   20</span>                                                                   {</div>
<div class="line"><span class="lineno">   21</span>    <span class="comment">/* String constructor needs to distinguish between an argument not given at all</span></div>
<div class="line"><span class="lineno">   22</span><span class="comment">     * vs. given as &#39;undefined&#39;.  We&#39;re a vararg function to handle this properly.</span></div>
<div class="line"><span class="lineno">   23</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">   24</span> </div>
<div class="line"><span class="lineno">   25</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx) == 0) {</div>
<div class="line"><span class="lineno">   26</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a42b9810a4cfe02e7f9ff037960edff65">duk_push_hstring_stridx</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8203e3cac3140d5fd71912fd11acbcef">DUK_STRIDX_EMPTY_STRING</a>);</div>
<div class="line"><span class="lineno">   27</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   28</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, 0);</div>
<div class="line"><span class="lineno">   29</span>    }</div>
<div class="line"><span class="lineno">   30</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a>(ctx, 0));</div>
<div class="line"><span class="lineno">   31</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a>(ctx, 1);</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9b9ef102c56eca816cb236e3c2dac030">duk_is_constructor_call</a>(ctx)) {</div>
<div class="line"><span class="lineno">   34</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab50dbd6676f214ef04cd8a09b66ffa55">duk_push_object_helper</a>(ctx,</div>
<div class="line"><span class="lineno">   35</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno">   36</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6f009d755b5f667eee9cf2bcf572a02c">DUK_HOBJECT_FLAG_EXOTIC_STRINGOBJ</a> |</div>
<div class="line"><span class="lineno">   37</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae1452c73af06f9928aacc02ab9db951b">DUK_HOBJECT_CLASS_STRING</a>),</div>
<div class="line"><span class="lineno">   38</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a54ce0c48ba51a440153245a405e9598d">DUK_BIDX_STRING_PROTOTYPE</a>);</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>        <span class="comment">/* String object internal value is immutable */</span></div>
<div class="line"><span class="lineno">   41</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">   42</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad56b7a318e093d42e552c2cf25d492e8">duk_xdef_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a888d08439b9e5acb8d2c173e02fc166a">DUK_STRIDX_INT_VALUE</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a41e3f139e0538302108235e4f3db02d3">DUK_PROPDESC_FLAGS_NONE</a>);</div>
<div class="line"><span class="lineno">   43</span>    }</div>
<div class="line"><span class="lineno">   44</span>    <span class="comment">/* Note: unbalanced stack on purpose */</span></div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   47</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a41e3f139e0538302108235e4f3db02d3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a41e3f139e0538302108235e4f3db02d3">DUK_PROPDESC_FLAGS_NONE</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAGS_NONE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04880">duktape-1.5.2/src-noline/duktape.c:4880</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a42b9810a4cfe02e7f9ff037960edff65"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a42b9810a4cfe02e7f9ff037960edff65">duk_push_hstring_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_hstring_stridx(duk_context *ctx, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19052">duktape-1.5.2/src-noline/duktape.c:19052</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a54ce0c48ba51a440153245a405e9598d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a54ce0c48ba51a440153245a405e9598d">DUK_BIDX_STRING_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_STRING_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01638">duktape-1.5.2/src-noline/duktape.c:1638</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5e79d13530031f2f54f993cd89668356"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_AS_FLAGS(v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">duktape-1.5.2/src-noline/duktape.c:4688</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6f009d755b5f667eee9cf2bcf572a02c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6f009d755b5f667eee9cf2bcf572a02c">DUK_HOBJECT_FLAG_EXOTIC_STRINGOBJ</a></div><div class="ttdeci">#define DUK_HOBJECT_FLAG_EXOTIC_STRINGOBJ</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04667">duktape-1.5.2/src-noline/duktape.c:4667</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a808471cbdda897175b2e4d50528c430d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a></div><div class="ttdeci">DUK_EXTERNAL void duk_set_top(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15216">duktape-1.5.2/src-noline/duktape.c:15216</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8203e3cac3140d5fd71912fd11acbcef"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8203e3cac3140d5fd71912fd11acbcef">DUK_STRIDX_EMPTY_STRING</a></div><div class="ttdeci">#define DUK_STRIDX_EMPTY_STRING</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00921">duktape-1.5.2/src-noline/duktape.c:921</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a888d08439b9e5acb8d2c173e02fc166a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a888d08439b9e5acb8d2c173e02fc166a">DUK_STRIDX_INT_VALUE</a></div><div class="ttdeci">#define DUK_STRIDX_INT_VALUE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01173">duktape-1.5.2/src-noline/duktape.c:1173</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8c8653fcd951809042c23c42e534c421"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_get_top(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duktape-1.5.2/src-noline/duktape.c:15204</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9b9ef102c56eca816cb236e3c2dac030"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9b9ef102c56eca816cb236e3c2dac030">duk_is_constructor_call</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_constructor_call(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12775">duktape-1.5.2/src-noline/duktape.c:12775</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab3861bb2fd293559d606a43da9dca18c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a></div><div class="ttdeci">#define DUK_HOBJECT_FLAG_EXTENSIBLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">duktape-1.5.2/src-noline/duktape.c:4652</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab50dbd6676f214ef04cd8a09b66ffa55"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab50dbd6676f214ef04cd8a09b66ffa55">duk_push_object_helper</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_idx_t duk_push_object_helper(duk_context *ctx, duk_uint_t hobject_flags_and_class, duk_small_int_t prototype_bidx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18394">duktape-1.5.2/src-noline/duktape.c:18394</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac44e324c8cc1777c335c7d59a50a4798"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_to_string(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duktape-1.5.2/src-noline/duktape.c:17089</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad56b7a318e093d42e552c2cf25d492e8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad56b7a318e093d42e552c2cf25d492e8">duk_xdef_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_xdef_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx, duk_small_uint_t desc_flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14559">duktape-1.5.2/src-noline/duktape.c:14559</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ada14d1be1c027a164a237f1402c321ab"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_string(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duktape-1.5.2/src-noline/duktape.c:17666</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae1452c73af06f9928aacc02ab9db951b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae1452c73af06f9928aacc02ab9db951b">DUK_HOBJECT_CLASS_STRING</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_STRING</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04703">duktape-1.5.2/src-noline/duktape.c:4703</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01638">DUK_BIDX_STRING_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duk_get_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04703">DUK_HOBJECT_CLASS_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04667">DUK_HOBJECT_FLAG_EXOTIC_STRINGOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12775">duk_is_constructor_call()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duk_is_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04880">DUK_PROPDESC_FLAGS_NONE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19052">duk_push_hstring_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18394">duk_push_object_helper()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15216">duk_set_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00921">DUK_STRIDX_EMPTY_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01173">DUK_STRIDX_INT_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14559">duk_xdef_prop_stridx()</a>.</p>

</div>
</div>
<a id="a6dc149cc70f0ea0a6637be537a5e4d53" name="a6dc149cc70f0ea0a6637be537a5e4d53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc149cc70f0ea0a6637be537a5e4d53">&#9670;&#160;</a></span>duk_bi_string_constructor_from_char_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_constructor_from_char_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00049">49</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>                                                                                  {</div>
<div class="line"><span class="lineno">   50</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">   51</span>    <a class="code hl_struct" href="structduk__bufwriter__ctx.html">duk_bufwriter_ctx</a> bw_alloc;</div>
<div class="line"><span class="lineno">   52</span>    <a class="code hl_struct" href="structduk__bufwriter__ctx.html">duk_bufwriter_ctx</a> *bw;</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> i, n;</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a329a1d1bc4322591fb4577cb9cf47244">duk_ucodepoint_t</a> cp;</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>    <span class="comment">/* XXX: It would be nice to build the string directly but ToUint16()</span></div>
<div class="line"><span class="lineno">   57</span><span class="comment">     * coercion is needed so a generic helper would not be very</span></div>
<div class="line"><span class="lineno">   58</span><span class="comment">     * helpful (perhaps coerce the value stack first here and then</span></div>
<div class="line"><span class="lineno">   59</span><span class="comment">     * build a string from a duk_tval number sequence in one go?).</span></div>
<div class="line"><span class="lineno">   60</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>    n = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx);</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    bw = &amp;bw_alloc;</div>
<div class="line"><span class="lineno">   65</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9a6df96e851ef85bdc9e862e052ca324">DUK_BW_INIT_PUSHBUF</a>(thr, bw, n);  <span class="comment">/* initial estimate for ASCII only codepoints */</span></div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {</div>
<div class="line"><span class="lineno">   68</span>        <span class="comment">/* XXX: could improve bufwriter handling to write multiple codepoints</span></div>
<div class="line"><span class="lineno">   69</span><span class="comment">         * with one ensure call but the relative benefit would be quite small.</span></div>
<div class="line"><span class="lineno">   70</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span><span class="preprocessor">#if defined(DUK_USE_NONSTD_STRING_FROMCHARCODE_32BIT)</span></div>
<div class="line"><span class="lineno">   73</span>        <span class="comment">/* ToUint16() coercion is mandatory in the E5.1 specification, but</span></div>
<div class="line"><span class="lineno">   74</span><span class="comment">         * this non-compliant behavior makes more sense because we support</span></div>
<div class="line"><span class="lineno">   75</span><span class="comment">         * non-BMP codepoints.  Don&#39;t use CESU-8 because that&#39;d create</span></div>
<div class="line"><span class="lineno">   76</span><span class="comment">         * surrogate pairs.</span></div>
<div class="line"><span class="lineno">   77</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>        cp = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a329a1d1bc4322591fb4577cb9cf47244">duk_ucodepoint_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, i);</div>
<div class="line"><span class="lineno">   80</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af7bb31939c350b49a4d56eb121dc20f9">DUK_BW_WRITE_ENSURE_XUTF8</a>(thr, bw, cp);</div>
<div class="line"><span class="lineno">   81</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">   82</span>        cp = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a329a1d1bc4322591fb4577cb9cf47244">duk_ucodepoint_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac60cde3472ad3683efffc4e154653ad8">duk_to_uint16</a>(ctx, i);</div>
<div class="line"><span class="lineno">   83</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af9f6acaaf1317d4e441a0b9b2d635ff5">DUK_BW_WRITE_ENSURE_CESU8</a>(thr, bw, cp);</div>
<div class="line"><span class="lineno">   84</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   85</span>    }</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3884e6073e87ecb186fa619eca68fd56">DUK_BW_COMPACT</a>(thr, bw);</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   90</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a329a1d1bc4322591fb4577cb9cf47244"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a329a1d1bc4322591fb4577cb9cf47244">duk_ucodepoint_t</a></div><div class="ttdeci">duk_uint_t duk_ucodepoint_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01869">duktape-1.5.2/src-noline/duk_config.h:1869</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a3e3bb369382aab50155c1d18bdf73923"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></div><div class="ttdeci">duk_int_t duk_idx_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01830">duktape-1.5.2/src-noline/duk_config.h:1830</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3884e6073e87ecb186fa619eca68fd56"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3884e6073e87ecb186fa619eca68fd56">DUK_BW_COMPACT</a></div><div class="ttdeci">#define DUK_BW_COMPACT(thr, bw_ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01858">duktape-1.5.2/src-noline/duktape.c:1858</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9a6df96e851ef85bdc9e862e052ca324"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9a6df96e851ef85bdc9e862e052ca324">DUK_BW_INIT_PUSHBUF</a></div><div class="ttdeci">#define DUK_BW_INIT_PUSHBUF(thr, bw_ctx, sz)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01852">duktape-1.5.2/src-noline/duktape.c:1852</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa418fc23b85532f124eb2e54696278e2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a></div><div class="ttdeci">DUK_EXTERNAL duk_uint32_t duk_to_uint32(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duktape-1.5.2/src-noline/duktape.c:16844</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac60cde3472ad3683efffc4e154653ad8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac60cde3472ad3683efffc4e154653ad8">duk_to_uint16</a></div><div class="ttdeci">DUK_EXTERNAL duk_uint16_t duk_to_uint16(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16861">duktape-1.5.2/src-noline/duktape.c:16861</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af7bb31939c350b49a4d56eb121dc20f9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af7bb31939c350b49a4d56eb121dc20f9">DUK_BW_WRITE_ENSURE_XUTF8</a></div><div class="ttdeci">#define DUK_BW_WRITE_ENSURE_XUTF8(thr, bw_ctx, cp)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02115">duktape-1.5.2/src-noline/duktape.c:2115</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af9f6acaaf1317d4e441a0b9b2d635ff5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af9f6acaaf1317d4e441a0b9b2d635ff5">DUK_BW_WRITE_ENSURE_CESU8</a></div><div class="ttdeci">#define DUK_BW_WRITE_ENSURE_CESU8(thr, bw_ctx, cp)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02119">duktape-1.5.2/src-noline/duktape.c:2119</a></div></div>
<div class="ttc" id="astructduk__bufwriter__ctx_html"><div class="ttname"><a href="structduk__bufwriter__ctx.html">duk_bufwriter_ctx</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01840">duktape-1.5.2/src-noline/duktape.c:1840</a></div></div>
<div class="ttc" id="astructduk__hthread_html"><div class="ttname"><a href="structduk__hthread.html">duk_hthread</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06190">duktape-1.5.2/src-noline/duktape.c:6190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01858">DUK_BW_COMPACT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01852">DUK_BW_INIT_PUSHBUF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02119">DUK_BW_WRITE_ENSURE_CESU8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02115">DUK_BW_WRITE_ENSURE_XUTF8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duk_get_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16861">duk_to_uint16()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duk_to_uint32()</a>.</p>

</div>
</div>
<a id="a5516b54bf62b122588cbe8372b69492b" name="a5516b54bf62b122588cbe8372b69492b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5516b54bf62b122588cbe8372b69492b">&#9670;&#160;</a></span>duk_bi_string_prototype_caseconv_shared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_caseconv_shared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00301">301</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  301</span>                                                                                 {</div>
<div class="line"><span class="lineno">  302</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  303</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> uppercase = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  306</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae8dd7e3fd105af6fc81acb5f5c9188a4">duk_unicode_case_convert_string</a>(thr, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>) uppercase);</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  308</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a041e9b0b2d41c5af8429259808290726"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a></div><div class="ttdeci">int duk_small_int_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01807">duktape-1.5.2/src-noline/duk_config.h:1807</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_af32ca4c30431e819676401ce2b11c2e7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></div><div class="ttdeci">duk_small_int_t duk_bool_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01825">duktape-1.5.2/src-noline/duk_config.h:1825</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa080098098debb1636b604bd4359d575"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hstring * duk_push_this_coercible_to_string(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duktape-1.5.2/src-noline/duktape.c:18195</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acf451d0ba0fad208572ab5f5c9f092b9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a></div><div class="ttdeci">DUK_EXTERNAL duk_int_t duk_get_current_magic(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duktape-1.5.2/src-noline/duktape.c:12817</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae8dd7e3fd105af6fc81acb5f5c9188a4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae8dd7e3fd105af6fc81acb5f5c9188a4">duk_unicode_case_convert_string</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_unicode_case_convert_string(duk_hthread *thr, duk_bool_t uppercase)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l10889">duktape-1.5.2/src-noline/duktape.c:10889</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l10889">duk_unicode_case_convert_string()</a>.</p>

</div>
</div>
<a id="a118299785b22816b8de04a4f34595004" name="a118299785b22816b8de04a4f34595004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a118299785b22816b8de04a4f34595004">&#9670;&#160;</a></span>duk_bi_string_prototype_char_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_char_at </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00133">133</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  133</span>                                                                         {</div>
<div class="line"><span class="lineno">  134</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> pos;</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>    <span class="comment">/* XXX: faster implementation */</span></div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  139</span>    pos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  140</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a>(ctx, -1, pos, pos + 1);</div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  142</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9dbc0fdd27e7326d21cbf56e6d40d8a5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a></div><div class="ttdeci">duk_int_fast32_t duk_int_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01785">duktape-1.5.2/src-noline/duk_config.h:1785</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab502fa806af442421cb8cb8b4a66c5dc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a></div><div class="ttdeci">DUK_EXTERNAL void duk_substring(duk_context *ctx, duk_idx_t index, duk_size_t start_offset, duk_size_t end_offset)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duktape-1.5.2/src-noline/duktape.c:19721</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af160d8202dc25eefbc1b56aa2fc95632"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a></div><div class="ttdeci">DUK_EXTERNAL duk_int_t duk_to_int(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duktape-1.5.2/src-noline/duktape.c:16809</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duk_substring()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>.</p>

</div>
</div>
<a id="a414c5763077707a5002a8feaa1c4030e" name="a414c5763077707a5002a8feaa1c4030e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a414c5763077707a5002a8feaa1c4030e">&#9670;&#160;</a></span>duk_bi_string_prototype_char_code_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_char_code_at </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00144">144</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>                                                                              {</div>
<div class="line"><span class="lineno">  145</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  146</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> pos;</div>
<div class="line"><span class="lineno">  147</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h;</div>
<div class="line"><span class="lineno">  148</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> clamped;</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">/* XXX: faster implementation */</span></div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arg=%!T&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, 0)));</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    h = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    pos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0e9e73284a0070d6d9201d0ac0af100e">duk_to_int_clamped_raw</a>(ctx,</div>
<div class="line"><span class="lineno">  158</span>                                 0 <span class="comment">/*index*/</span>,</div>
<div class="line"><span class="lineno">  159</span>                                 0 <span class="comment">/*min(incl)*/</span>,</div>
<div class="line"><span class="lineno">  160</span>                                 <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h) - 1 <span class="comment">/*max(incl)*/</span>,</div>
<div class="line"><span class="lineno">  161</span>                                 &amp;clamped <span class="comment">/*out_clamped*/</span>);</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> (clamped) {</div>
<div class="line"><span class="lineno">  163</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#adfdc813bcf5608f46220047c48a13800">DUK_DOUBLE_NAN</a>);</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  165</span>    }</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeec241c8da1fbeaa28b17454e282b8f7">duk_push_u32</a>(ctx, (duk_uint32_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db5e572bfd10b6d65de217760902d13">duk_hstring_char_code_at_raw</a>(thr, h, pos));</div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  169</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_adfdc813bcf5608f46220047c48a13800"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#adfdc813bcf5608f46220047c48a13800">DUK_DOUBLE_NAN</a></div><div class="ttdeci">#define DUK_DOUBLE_NAN</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02096">duktape-1.5.2/src-noline/duk_config.h:2096</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0e9e73284a0070d6d9201d0ac0af100e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0e9e73284a0070d6d9201d0ac0af100e">duk_to_int_clamped_raw</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_int_t duk_to_int_clamped_raw(duk_context *ctx, duk_idx_t index, duk_int_t minval, duk_int_t maxval, duk_bool_t *out_clamped)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17017">duktape-1.5.2/src-noline/duktape.c:17017</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2db20d2d3b36d8491ed171cf503488bb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a></div><div class="ttdeci">#define DUK_DDD(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">duktape-1.5.2/src-noline/duktape.c:7497</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2db5e572bfd10b6d65de217760902d13"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db5e572bfd10b6d65de217760902d13">duk_hstring_char_code_at_raw</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_ucodepoint_t duk_hstring_char_code_at_raw(duk_hthread *thr, duk_hstring *h, duk_uint_t pos)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l53074">duktape-1.5.2/src-noline/duktape.c:53074</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4a5456d628992ecc1075eaf902052bd7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a></div><div class="ttdeci">#define DUK_HSTRING_GET_CHARLEN(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">duktape-1.5.2/src-noline/duktape.c:4509</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa6e5d41ceaba6832e5ede737f0a35fb9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a></div><div class="ttdeci">#define DUK_DDDPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">duktape-1.5.2/src-noline/duktape.c:7509</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aac0625b8415e35481f15cd16e70b3b9b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_number(duk_context *ctx, duk_double_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17909">duktape-1.5.2/src-noline/duktape.c:17909</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aeec241c8da1fbeaa28b17454e282b8f7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeec241c8da1fbeaa28b17454e282b8f7">duk_push_u32</a></div><div class="ttdeci">#define duk_push_u32(ctx, val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04264">duktape-1.5.2/src-noline/duktape.c:4264</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_afa34aa8c7f880082f9de613ef2bc3c58"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_tval * duk_get_tval(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duktape-1.5.2/src-noline/duktape.c:15121</a></div></div>
<div class="ttc" id="agmacros_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="gmacros_8h_source.html#l00924">gmacros.h:924</a></div></div>
<div class="ttc" id="astructduk__hstring_html"><div class="ttname"><a href="structduk__hstring.html">duk_hstring</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04546">duktape-1.5.2/src-noline/duktape.c:4546</a></div></div>
<div class="ttc" id="astructduk__tval__struct_html"><div class="ttname"><a href="structduk__tval__struct.html">duk_tval_struct</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00616">duktape-1.5.2/src-noline/duktape.c:616</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02096">DUK_DOUBLE_NAN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l53074">duk_hstring_char_code_at_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17909">duk_push_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04264">duk_push_u32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17017">duk_to_int_clamped_raw()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a7cc09ce6123152872779cc0597e684c4" name="a7cc09ce6123152872779cc0597e684c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cc09ce6123152872779cc0597e684c4">&#9670;&#160;</a></span>duk_bi_string_prototype_concat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_concat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01242">1242</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1242</span>                                                                        {</div>
<div class="line"><span class="lineno"> 1243</span>    <span class="comment">/* duk_concat() coerces arguments with ToString() in correct order */</span></div>
<div class="line"><span class="lineno"> 1244</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno"> 1245</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a86e82045aad43776c7280e8e689c5158">duk_insert</a>(ctx, 0);  <span class="comment">/* this is relatively expensive */</span></div>
<div class="line"><span class="lineno"> 1246</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a00c687deccc7d13d7dc56c4b26f1067a">duk_concat</a>(ctx, <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx));</div>
<div class="line"><span class="lineno"> 1247</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1248</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a00c687deccc7d13d7dc56c4b26f1067a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a00c687deccc7d13d7dc56c4b26f1067a">duk_concat</a></div><div class="ttdeci">DUK_EXTERNAL void duk_concat(duk_context *ctx, duk_idx_t count)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19640">duktape-1.5.2/src-noline/duktape.c:19640</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a86e82045aad43776c7280e8e689c5158"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a86e82045aad43776c7280e8e689c5158">duk_insert</a></div><div class="ttdeci">DUK_EXTERNAL void duk_insert(duk_context *ctx, duk_idx_t to_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15740">duktape-1.5.2/src-noline/duktape.c:15740</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19640">duk_concat()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duk_get_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15740">duk_insert()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>.</p>

</div>
</div>
<a id="ae74059b1d1bd89693fb59c40e5d9759a" name="ae74059b1d1bd89693fb59c40e5d9759a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae74059b1d1bd89693fb59c40e5d9759a">&#9670;&#160;</a></span>duk_bi_string_prototype_indexof_shared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_indexof_shared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00314">314</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  314</span>                                                                                {</div>
<div class="line"><span class="lineno">  315</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  316</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_this;</div>
<div class="line"><span class="lineno">  317</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_search;</div>
<div class="line"><span class="lineno">  318</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> clen_this;</div>
<div class="line"><span class="lineno">  319</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> cpos;</div>
<div class="line"><span class="lineno">  320</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> bpos;</div>
<div class="line"><span class="lineno">  321</span>    <span class="keyword">const</span> duk_uint8_t *p_start, *p_end, *p;</div>
<div class="line"><span class="lineno">  322</span>    <span class="keyword">const</span> duk_uint8_t *q_start;</div>
<div class="line"><span class="lineno">  323</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> q_blen;</div>
<div class="line"><span class="lineno">  324</span>    duk_uint8_t firstbyte;</div>
<div class="line"><span class="lineno">  325</span>    duk_uint8_t t;</div>
<div class="line"><span class="lineno">  326</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> is_lastindexof = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);  <span class="comment">/* 0=indexOf, 1=lastIndexOf */</span></div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    h_this = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  329</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  330</span>    clen_this = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h_this);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    h_search = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  333</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_search != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  334</span>    q_start = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_search);</div>
<div class="line"><span class="lineno">  335</span>    q_blen = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_search);</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, 1);</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa9a3586da7e447207421c4615a5d4940">duk_is_nan</a>(ctx, 1) &amp;&amp; is_lastindexof) {</div>
<div class="line"><span class="lineno">  339</span>        <span class="comment">/* indexOf: NaN should cause pos to be zero.</span></div>
<div class="line"><span class="lineno">  340</span><span class="comment">         * lastIndexOf: NaN should cause pos to be +Infinity</span></div>
<div class="line"><span class="lineno">  341</span><span class="comment">         * (and later be clamped to len).</span></div>
<div class="line"><span class="lineno">  342</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  343</span>        cpos = clen_this;</div>
<div class="line"><span class="lineno">  344</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  345</span>        cpos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 1, 0, clen_this);</div>
<div class="line"><span class="lineno">  346</span>    }</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <span class="comment">/* Empty searchstring always matches; cpos must be clamped here.</span></div>
<div class="line"><span class="lineno">  349</span><span class="comment">     * (If q_blen were &lt; 0 due to clamped coercion, it would also be</span></div>
<div class="line"><span class="lineno">  350</span><span class="comment">     * caught here.)</span></div>
<div class="line"><span class="lineno">  351</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">if</span> (q_blen &lt;= 0) {</div>
<div class="line"><span class="lineno">  353</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, cpos);</div>
<div class="line"><span class="lineno">  354</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  355</span>    }</div>
<div class="line"><span class="lineno">  356</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(q_blen &gt; 0);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    bpos = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a639acb825441f935ef816d817034ef89">duk_heap_strcache_offset_char2byte</a>(thr, h_this, (duk_uint32_t) cpos);</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    p_start = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_this);</div>
<div class="line"><span class="lineno">  361</span>    p_end = p_start + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_this);</div>
<div class="line"><span class="lineno">  362</span>    p = p_start + bpos;</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">/* This loop is optimized for size.  For speed, there should be</span></div>
<div class="line"><span class="lineno">  365</span><span class="comment">     * two separate loops, and we should ensure that memcmp() can be</span></div>
<div class="line"><span class="lineno">  366</span><span class="comment">     * used without an extra &quot;will searchstring fit&quot; check.  Doing</span></div>
<div class="line"><span class="lineno">  367</span><span class="comment">     * the preconditioning for &#39;p&#39; and &#39;p_end&#39; is easy but cpos</span></div>
<div class="line"><span class="lineno">  368</span><span class="comment">     * must be updated if &#39;p&#39; is wound back (backward scanning).</span></div>
<div class="line"><span class="lineno">  369</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    firstbyte = q_start[0];  <span class="comment">/* leading byte of match string */</span></div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">while</span> (p &lt;= p_end &amp;&amp; p &gt;= p_start) {</div>
<div class="line"><span class="lineno">  373</span>        t = *p;</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>        <span class="comment">/* For Ecmascript strings, this check can only match for</span></div>
<div class="line"><span class="lineno">  376</span><span class="comment">         * initial UTF-8 bytes (not continuation bytes).  For other</span></div>
<div class="line"><span class="lineno">  377</span><span class="comment">         * strings all bets are off.</span></div>
<div class="line"><span class="lineno">  378</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">if</span> ((t == firstbyte) &amp;&amp; ((<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (p_end - p) &gt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) q_blen)) {</div>
<div class="line"><span class="lineno">  381</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(q_blen &gt; 0);  <span class="comment">/* no issues with memcmp() zero size, even if broken */</span></div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a>((<span class="keyword">const</span> <span class="keywordtype">void</span> *) p, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) q_start, (<span class="keywordtype">size_t</span>) q_blen) == 0) {</div>
<div class="line"><span class="lineno">  383</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, cpos);</div>
<div class="line"><span class="lineno">  384</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  385</span>            }</div>
<div class="line"><span class="lineno">  386</span>        }</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>        <span class="comment">/* track cpos while scanning */</span></div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">if</span> (is_lastindexof) {</div>
<div class="line"><span class="lineno">  390</span>            <span class="comment">/* when going backwards, we decrement cpos &#39;early&#39;;</span></div>
<div class="line"><span class="lineno">  391</span><span class="comment">             * &#39;p&#39; may point to a continuation byte of the char</span></div>
<div class="line"><span class="lineno">  392</span><span class="comment">             * at offset &#39;cpos&#39;, but that&#39;s OK because we&#39;ll</span></div>
<div class="line"><span class="lineno">  393</span><span class="comment">             * backtrack all the way to the initial byte.</span></div>
<div class="line"><span class="lineno">  394</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  395</span>            <span class="keywordflow">if</span> ((t &amp; 0xc0) != 0x80) {</div>
<div class="line"><span class="lineno">  396</span>                cpos--;</div>
<div class="line"><span class="lineno">  397</span>            }</div>
<div class="line"><span class="lineno">  398</span>            p--;</div>
<div class="line"><span class="lineno">  399</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  400</span>            <span class="keywordflow">if</span> ((t &amp; 0xc0) != 0x80) {</div>
<div class="line"><span class="lineno">  401</span>                cpos++;</div>
<div class="line"><span class="lineno">  402</span>            }</div>
<div class="line"><span class="lineno">  403</span>            p++;</div>
<div class="line"><span class="lineno">  404</span>        }</div>
<div class="line"><span class="lineno">  405</span>    }</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>    <span class="comment">/* Not found.  Empty string case is handled specially above. */</span></div>
<div class="line"><span class="lineno">  408</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  409</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  410</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a5748c5ede90636bdffe6aeda7714bc93"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a></div><div class="ttdeci">#define DUK_MEMCMP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">duktape-1.5.2/src-noline/duk_config.h:1991</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ab0a71934d59f38f195fea2f353032392"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a></div><div class="ttdeci">size_t duk_size_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01770">duktape-1.5.2/src-noline/duk_config.h:1770</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a08a5b25284eaa8cfe960915609061b59"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hstring * duk_to_hstring(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duktape-1.5.2/src-noline/duktape.c:17177</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0d205166ff35a99b65ad9032423e6c42"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a></div><div class="ttdeci">#define DUK_HSTRING_GET_DATA(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">duktape-1.5.2/src-noline/duktape.c:4522</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2a469d9148d5bf602548d99f053ce2d6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_int_t duk_to_int_clamped(duk_context *ctx, duk_idx_t index, duk_int_t minval, duk_int_t maxval)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duktape-1.5.2/src-noline/duktape.c:17080</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5d2b6c5f1be0d673b074d167c9ff7d4d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_int(duk_context *ctx, duk_int_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duktape-1.5.2/src-noline/duktape.c:17923</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a60da7a5524bcdb03fb59734d8ffa6ffc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a></div><div class="ttdeci">DUK_EXTERNAL duk_double_t duk_to_number(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duktape-1.5.2/src-noline/duktape.c:16766</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a639acb825441f935ef816d817034ef89"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a639acb825441f935ef816d817034ef89">duk_heap_strcache_offset_char2byte</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_uint_fast32_t duk_heap_strcache_offset_char2byte(duk_hthread *thr, duk_hstring *h, duk_uint_fast32_t char_offset)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l44448">duktape-1.5.2/src-noline/duktape.c:44448</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8067240555ec3eaebfa234e10a0ff5db"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a></div><div class="ttdeci">#define DUK_HSTRING_GET_BYTELEN(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">duktape-1.5.2/src-noline/duktape.c:4505</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa9a3586da7e447207421c4615a5d4940"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa9a3586da7e447207421c4615a5d4940">duk_is_nan</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_nan(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17648">duktape-1.5.2/src-noline/duktape.c:17648</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l44448">duk_heap_strcache_offset_char2byte()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">DUK_HSTRING_GET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">DUK_HSTRING_GET_DATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17648">duk_is_nan()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">DUK_MEMCMP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duk_to_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duk_to_int_clamped()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duk_to_number()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="afbadd72691970cc7d44b5de4dcf92457" name="afbadd72691970cc7d44b5de4dcf92457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbadd72691970cc7d44b5de4dcf92457">&#9670;&#160;</a></span>duk_bi_string_prototype_locale_compare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_locale_compare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01258">1258</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1258</span>                                                                                {</div>
<div class="line"><span class="lineno"> 1259</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h1;</div>
<div class="line"><span class="lineno"> 1260</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h2;</div>
<div class="line"><span class="lineno"> 1261</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> h1_len, h2_len, prefix_len;</div>
<div class="line"><span class="lineno"> 1262</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> ret = 0;</div>
<div class="line"><span class="lineno"> 1263</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> rc;</div>
<div class="line"><span class="lineno"> 1264</span> </div>
<div class="line"><span class="lineno"> 1265</span>    <span class="comment">/* The current implementation of localeCompare() is simply a codepoint</span></div>
<div class="line"><span class="lineno"> 1266</span><span class="comment">     * by codepoint comparison, implemented with a simple string compare</span></div>
<div class="line"><span class="lineno"> 1267</span><span class="comment">     * because UTF-8 should preserve codepoint ordering (assuming valid</span></div>
<div class="line"><span class="lineno"> 1268</span><span class="comment">     * shortest UTF-8 encoding).</span></div>
<div class="line"><span class="lineno"> 1269</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 1270</span><span class="comment">     * The specification requires that the return value must be related</span></div>
<div class="line"><span class="lineno"> 1271</span><span class="comment">     * to the sort order: e.g. negative means that &#39;this&#39; comes before</span></div>
<div class="line"><span class="lineno"> 1272</span><span class="comment">     * &#39;that&#39; in sort order.  We assume an ascending sort order.</span></div>
<div class="line"><span class="lineno"> 1273</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1274</span> </div>
<div class="line"><span class="lineno"> 1275</span>    <span class="comment">/* XXX: could share code with duk_js_ops.c, duk_js_compare_helper */</span></div>
<div class="line"><span class="lineno"> 1276</span> </div>
<div class="line"><span class="lineno"> 1277</span>    h1 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno"> 1278</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h1 != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>    h2 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1281</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h2 != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>    h1_len = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h1);</div>
<div class="line"><span class="lineno"> 1284</span>    h2_len = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h2);</div>
<div class="line"><span class="lineno"> 1285</span>    prefix_len = (h1_len &lt;= h2_len ? h1_len : h2_len);</div>
<div class="line"><span class="lineno"> 1286</span> </div>
<div class="line"><span class="lineno"> 1287</span>    <span class="comment">/* Zero size compare not an issue with DUK_MEMCMP. */</span></div>
<div class="line"><span class="lineno"> 1288</span>    rc = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a>((<span class="keyword">const</span> <span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h1),</div>
<div class="line"><span class="lineno"> 1289</span>                                      (<span class="keyword">const</span> <span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h2),</div>
<div class="line"><span class="lineno"> 1290</span>                                      (size_t) prefix_len);</div>
<div class="line"><span class="lineno"> 1291</span> </div>
<div class="line"><span class="lineno"> 1292</span>    <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno"> 1293</span>        ret = -1;</div>
<div class="line"><span class="lineno"> 1294</span>        <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1295</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc &gt; 0) {</div>
<div class="line"><span class="lineno"> 1296</span>        ret = 1;</div>
<div class="line"><span class="lineno"> 1297</span>        <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1298</span>    }</div>
<div class="line"><span class="lineno"> 1299</span> </div>
<div class="line"><span class="lineno"> 1300</span>    <span class="comment">/* prefix matches, lengths matter now */</span></div>
<div class="line"><span class="lineno"> 1301</span>    <span class="keywordflow">if</span> (h1_len &gt; h2_len) {</div>
<div class="line"><span class="lineno"> 1302</span>        ret = 1;</div>
<div class="line"><span class="lineno"> 1303</span>        <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1304</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h1_len == h2_len) {</div>
<div class="line"><span class="lineno"> 1305</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ret == 0);</div>
<div class="line"><span class="lineno"> 1306</span>        <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1307</span>    }</div>
<div class="line"><span class="lineno"> 1308</span>    ret = -1;</div>
<div class="line"><span class="lineno"> 1309</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1310</span> </div>
<div class="line"><span class="lineno"> 1311</span> done:</div>
<div class="line"><span class="lineno"> 1312</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) ret);</div>
<div class="line"><span class="lineno"> 1313</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1314</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">DUK_HSTRING_GET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">DUK_HSTRING_GET_DATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">DUK_MEMCMP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duk_to_hstring()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a9f1a68f37830fd0fb50f60957da27933" name="a9f1a68f37830fd0fb50f60957da27933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1a68f37830fd0fb50f60957da27933">&#9670;&#160;</a></span>duk_bi_string_prototype_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_match </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01164">1164</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1164</span>                                                                       {</div>
<div class="line"><span class="lineno"> 1165</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1166</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> global;</div>
<div class="line"><span class="lineno"> 1167</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> prev_last_index;</div>
<div class="line"><span class="lineno"> 1168</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> this_index;</div>
<div class="line"><span class="lineno"> 1169</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> arr_idx;</div>
<div class="line"><span class="lineno"> 1170</span> </div>
<div class="line"><span class="lineno"> 1171</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 1172</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno"> 1173</span>    <a class="code hl_function" href="#a61f43d2ba758344535f6cf34af4bff63">duk__to_regexp_helper</a>(ctx, 0 <span class="comment">/*index*/</span>, 0 <span class="comment">/*force_new*/</span>);</div>
<div class="line"><span class="lineno"> 1174</span>    global = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8f2cb2a34302ba59ac45476e136893a7">duk_get_prop_stridx_boolean</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2241537bfc67f26d8f76ffac8e71d701">DUK_STRIDX_GLOBAL</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1175</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 2);</div>
<div class="line"><span class="lineno"> 1176</span> </div>
<div class="line"><span class="lineno"> 1177</span>    <span class="comment">/* stack[0] = regexp</span></div>
<div class="line"><span class="lineno"> 1178</span><span class="comment">     * stack[1] = string</span></div>
<div class="line"><span class="lineno"> 1179</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span>    <span class="keywordflow">if</span> (!global) {</div>
<div class="line"><span class="lineno"> 1182</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c127ec502269c71d2e10b7934dc71b1">duk_regexp_match</a>(thr);  <span class="comment">/* -&gt; [ res_obj ] */</span></div>
<div class="line"><span class="lineno"> 1183</span>        <span class="keywordflow">return</span> 1;  <span class="comment">/* return &#39;res_obj&#39; */</span></div>
<div class="line"><span class="lineno"> 1184</span>    }</div>
<div class="line"><span class="lineno"> 1185</span> </div>
<div class="line"><span class="lineno"> 1186</span>    <span class="comment">/* Global case is more complex. */</span></div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span>    <span class="comment">/* [ regexp string ] */</span></div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1191</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1192</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acce5984e6f3a97978d46a8280fcc3fed">duk_push_array</a>(ctx);</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>    <span class="comment">/* [ regexp string res_arr ] */</span></div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>    prev_last_index = 0;</div>
<div class="line"><span class="lineno"> 1197</span>    arr_idx = 0;</div>
<div class="line"><span class="lineno"> 1198</span> </div>
<div class="line"><span class="lineno"> 1199</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 1200</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 3);</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1203</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 1204</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c127ec502269c71d2e10b7934dc71b1">duk_regexp_match</a>(thr);  <span class="comment">/* -&gt; [ ... regexp string ] -&gt; [ ... res_obj ] */</span></div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7a1c56508accb1229332beec5458189a">duk_is_object</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno"> 1207</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 1208</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1209</span>        }</div>
<div class="line"><span class="lineno"> 1210</span> </div>
<div class="line"><span class="lineno"> 1211</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1212</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a>(ctx, -1));</div>
<div class="line"><span class="lineno"> 1213</span>        this_index = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1214</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span>        <span class="keywordflow">if</span> (this_index == prev_last_index) {</div>
<div class="line"><span class="lineno"> 1217</span>            this_index++;</div>
<div class="line"><span class="lineno"> 1218</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, this_index);</div>
<div class="line"><span class="lineno"> 1219</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1220</span>        }</div>
<div class="line"><span class="lineno"> 1221</span>        prev_last_index = this_index;</div>
<div class="line"><span class="lineno"> 1222</span> </div>
<div class="line"><span class="lineno"> 1223</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, -1, 0);  <span class="comment">/* match string */</span></div>
<div class="line"><span class="lineno"> 1224</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, 2, arr_idx);</div>
<div class="line"><span class="lineno"> 1225</span>        arr_idx++;</div>
<div class="line"><span class="lineno"> 1226</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* res_obj */</span></div>
<div class="line"><span class="lineno"> 1227</span>    }</div>
<div class="line"><span class="lineno"> 1228</span> </div>
<div class="line"><span class="lineno"> 1229</span>    <span class="keywordflow">if</span> (arr_idx == 0) {</div>
<div class="line"><span class="lineno"> 1230</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5ca681ec14862f1f365b2e93fc050fa2">duk_push_null</a>(ctx);</div>
<div class="line"><span class="lineno"> 1231</span>    }</div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span>    <span class="keywordflow">return</span> 1;  <span class="comment">/* return &#39;res_arr&#39; or &#39;null&#39; */</span></div>
<div class="line"><span class="lineno"> 1234</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a10d47af3b4037f03aed29def292d3dda"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_put_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duktape-1.5.2/src-noline/duktape.c:14404</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1549987aa437dbcc45cfb63722c834d6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_get_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duktape-1.5.2/src-noline/duktape.c:14318</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2241537bfc67f26d8f76ffac8e71d701"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2241537bfc67f26d8f76ffac8e71d701">DUK_STRIDX_GLOBAL</a></div><div class="ttdeci">#define DUK_STRIDX_GLOBAL</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00957">duktape-1.5.2/src-noline/duktape.c:957</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2c127ec502269c71d2e10b7934dc71b1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c127ec502269c71d2e10b7934dc71b1">duk_regexp_match</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_regexp_match(duk_hthread *thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l79315">duktape-1.5.2/src-noline/duktape.c:79315</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2e084d5315f93ecef64a4bdb9ef67ae2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_put_prop_index(duk_context *ctx, duk_idx_t obj_idx, duk_uarridx_t arr_idx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14396">duktape-1.5.2/src-noline/duktape.c:14396</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5ca681ec14862f1f365b2e93fc050fa2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5ca681ec14862f1f365b2e93fc050fa2">duk_push_null</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_null(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17862">duktape-1.5.2/src-noline/duktape.c:17862</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5de9255ebe35cf200f417812e04a027f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a></div><div class="ttdeci">DUK_EXTERNAL duk_int_t duk_get_int(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16040">duktape-1.5.2/src-noline/duktape.c:16040</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a62673f6ee46bd5428e11302ae69e74e7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_number(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17629">duktape-1.5.2/src-noline/duktape.c:17629</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7a1c56508accb1229332beec5458189a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7a1c56508accb1229332beec5458189a">duk_is_object</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_object(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17671">duktape-1.5.2/src-noline/duktape.c:17671</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8f2cb2a34302ba59ac45476e136893a7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8f2cb2a34302ba59ac45476e136893a7">duk_get_prop_stridx_boolean</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_get_prop_stridx_boolean(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx, duk_bool_t *out_has_prop)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14331">duktape-1.5.2/src-noline/duktape.c:14331</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9077276f5224f3985b570a4d82322253"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_get_prop_index(duk_context *ctx, duk_idx_t obj_index, duk_uarridx_t arr_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duktape-1.5.2/src-noline/duktape.c:14310</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a93b63145828da58c68a0930a7bd13780"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a></div><div class="ttdeci">#define DUK_STRIDX_LAST_INDEX</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01020">duktape-1.5.2/src-noline/duktape.c:1020</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab01286cf716e36b9089bd434841ed9eb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a></div><div class="ttdeci">#define DUK_ASSERT_TOP(ctx, n)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">duktape-1.5.2/src-noline/duktape.c:7784</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac8da334e24a5f42f252271161d2116fb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a></div><div class="ttdeci">DUK_EXTERNAL void duk_pop(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duktape-1.5.2/src-noline/duktape.c:19146</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acce5984e6f3a97978d46a8280fcc3fed"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acce5984e6f3a97978d46a8280fcc3fed">duk_push_array</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_push_array(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18458">duktape-1.5.2/src-noline/duktape.c:18458</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-separate_2duk__bi__string_8c_html_a61f43d2ba758344535f6cf34af4bff63"><div class="ttname"><a href="#a61f43d2ba758344535f6cf34af4bff63">duk__to_regexp_helper</a></div><div class="ttdeci">DUK_LOCAL void duk__to_regexp_helper(duk_context *ctx, duk_idx_t index, duk_bool_t force_new)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01092">duktape-1.5.2/src-separate/duk_bi_string.c:1092</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01092">duk__to_regexp_helper()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">DUK_ASSERT_TOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16040">duk_get_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duk_get_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14331">duk_get_prop_stridx_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17629">duk_is_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17671">duk_is_object()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18458">duk_push_array()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17862">duk_push_null()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14396">duk_put_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duk_put_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l79315">duk_regexp_match()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00957">DUK_STRIDX_GLOBAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01020">DUK_STRIDX_LAST_INDEX</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="ab9417cf44229f55f71ce55a5d07c83ee" name="ab9417cf44229f55f71ce55a5d07c83ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9417cf44229f55f71ce55a5d07c83ee">&#9670;&#160;</a></span>duk_bi_string_prototype_replace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_replace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00427">427</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  427</span>                                                                         {</div>
<div class="line"><span class="lineno">  428</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  429</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_input;</div>
<div class="line"><span class="lineno">  430</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_match;</div>
<div class="line"><span class="lineno">  431</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_search;</div>
<div class="line"><span class="lineno">  432</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_re;</div>
<div class="line"><span class="lineno">  433</span>    <a class="code hl_struct" href="structduk__bufwriter__ctx.html">duk_bufwriter_ctx</a> bw_alloc;</div>
<div class="line"><span class="lineno">  434</span>    <a class="code hl_struct" href="structduk__bufwriter__ctx.html">duk_bufwriter_ctx</a> *bw;</div>
<div class="line"><span class="lineno">  435</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  436</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_regexp;</div>
<div class="line"><span class="lineno">  437</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_global;</div>
<div class="line"><span class="lineno">  438</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  439</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_repl_func;</div>
<div class="line"><span class="lineno">  440</span>    duk_uint32_t match_start_coff, match_start_boff;</div>
<div class="line"><span class="lineno">  441</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  442</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> match_caps;</div>
<div class="line"><span class="lineno">  443</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  444</span>    duk_uint32_t prev_match_end_boff;</div>
<div class="line"><span class="lineno">  445</span>    <span class="keyword">const</span> duk_uint8_t *r_start, *r_end, *r;   <span class="comment">/* repl string scan */</span></div>
<div class="line"><span class="lineno">  446</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> tmp_sz;</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 2);</div>
<div class="line"><span class="lineno">  449</span>    h_input = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_input != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    bw = &amp;bw_alloc;</div>
<div class="line"><span class="lineno">  453</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9a6df96e851ef85bdc9e862e052ca324">DUK_BW_INIT_PUSHBUF</a>(thr, bw, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input));  <span class="comment">/* input size is good output starting point */</span></div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 4);</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>    <span class="comment">/* stack[0] = search value</span></div>
<div class="line"><span class="lineno">  458</span><span class="comment">     * stack[1] = replace value</span></div>
<div class="line"><span class="lineno">  459</span><span class="comment">     * stack[2] = input string</span></div>
<div class="line"><span class="lineno">  460</span><span class="comment">     * stack[3] = result buffer</span></div>
<div class="line"><span class="lineno">  461</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>    h_re = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2fd067d472c0b9ca7be27f504cb0e2">duk_get_hobject_with_class</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0ee364551cd1301005bd72e8ba3a157c">DUK_HOBJECT_CLASS_REGEXP</a>);</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">if</span> (h_re) {</div>
<div class="line"><span class="lineno">  465</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  466</span>        is_regexp = 1;</div>
<div class="line"><span class="lineno">  467</span>        is_global = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8f2cb2a34302ba59ac45476e136893a7">duk_get_prop_stridx_boolean</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2241537bfc67f26d8f76ffac8e71d701">DUK_STRIDX_GLOBAL</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>        <span class="keywordflow">if</span> (is_global) {</div>
<div class="line"><span class="lineno">  470</span>            <span class="comment">/* start match from beginning */</span></div>
<div class="line"><span class="lineno">  471</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  472</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno">  473</span>        }</div>
<div class="line"><span class="lineno">  474</span><span class="preprocessor">#else  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  475</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#af880d503c1649d15866355ad3114ad67">DUK_RET_UNSUPPORTED_ERROR</a>;</div>
<div class="line"><span class="lineno">  476</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  477</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  478</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  479</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  480</span>        is_regexp = 0;</div>
<div class="line"><span class="lineno">  481</span>        is_global = 0;</div>
<div class="line"><span class="lineno">  482</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  483</span>    }</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2de7eced0518d6e049d1ba9db4ff2ac4">duk_is_function</a>(ctx, 1)) {</div>
<div class="line"><span class="lineno">  486</span>        is_repl_func = 1;</div>
<div class="line"><span class="lineno">  487</span>        r_start = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  488</span>        r_end = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  489</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  490</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_repl;</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>        is_repl_func = 0;</div>
<div class="line"><span class="lineno">  493</span>        h_repl = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a>(ctx, 1);</div>
<div class="line"><span class="lineno">  494</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_repl != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  495</span>        r_start = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_repl);</div>
<div class="line"><span class="lineno">  496</span>        r_end = r_start + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_repl);</div>
<div class="line"><span class="lineno">  497</span>    }</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    prev_match_end_boff = 0;</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  502</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  503</span><span class="comment">         *  If matching with a regexp:</span></div>
<div class="line"><span class="lineno">  504</span><span class="comment">         *    - non-global RegExp: lastIndex not touched on a match, zeroed</span></div>
<div class="line"><span class="lineno">  505</span><span class="comment">         *      on a non-match</span></div>
<div class="line"><span class="lineno">  506</span><span class="comment">         *    - global RegExp: on match, lastIndex will be updated by regexp</span></div>
<div class="line"><span class="lineno">  507</span><span class="comment">         *      executor to point to next char after the matching part (so that</span></div>
<div class="line"><span class="lineno">  508</span><span class="comment">         *      characters in the matching part are not matched again)</span></div>
<div class="line"><span class="lineno">  509</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno">  510</span><span class="comment">         *  If matching with a string:</span></div>
<div class="line"><span class="lineno">  511</span><span class="comment">         *    - always non-global match, find first occurrence</span></div>
<div class="line"><span class="lineno">  512</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno">  513</span><span class="comment">         *  We need:</span></div>
<div class="line"><span class="lineno">  514</span><span class="comment">         *    - The character offset of start-of-match for the replacer function</span></div>
<div class="line"><span class="lineno">  515</span><span class="comment">         *    - The byte offsets for start-of-match and end-of-match to implement</span></div>
<div class="line"><span class="lineno">  516</span><span class="comment">         *      the replacement values $&amp;, $`, and $&#39;, and to copy non-matching</span></div>
<div class="line"><span class="lineno">  517</span><span class="comment">         *      input string portions (including header and trailer) verbatim.</span></div>
<div class="line"><span class="lineno">  518</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno">  519</span><span class="comment">         *  NOTE: the E5.1 specification is a bit vague how the RegExp should</span></div>
<div class="line"><span class="lineno">  520</span><span class="comment">         *  behave in the replacement process; e.g. is matching done first for</span></div>
<div class="line"><span class="lineno">  521</span><span class="comment">         *  all matches (in the global RegExp case) before any replacer calls</span></div>
<div class="line"><span class="lineno">  522</span><span class="comment">         *  are made?  See: test-bi-string-proto-replace.js for discussion.</span></div>
<div class="line"><span class="lineno">  523</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 4);</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordflow">if</span> (is_regexp) {</div>
<div class="line"><span class="lineno">  529</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  530</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 2);</div>
<div class="line"><span class="lineno">  531</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c127ec502269c71d2e10b7934dc71b1">duk_regexp_match</a>(thr);  <span class="comment">/* [ ... regexp input ] -&gt; [ res_obj ] */</span></div>
<div class="line"><span class="lineno">  532</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7a1c56508accb1229332beec5458189a">duk_is_object</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno">  533</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  534</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  535</span>            }</div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, -1, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4aec4c226ec06f9cfa25ae7f8218f155">DUK_STRIDX_INDEX</a>);</div>
<div class="line"><span class="lineno">  538</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a>(ctx, -1));</div>
<div class="line"><span class="lineno">  539</span>            match_start_coff = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  540</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, -1, 0);</div>
<div class="line"><span class="lineno">  543</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a>(ctx, -1));</div>
<div class="line"><span class="lineno">  544</span>            h_match = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  545</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_match != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  546</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* h_match is borrowed, remains reachable through match_obj */</span></div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_match) == 0) {</div>
<div class="line"><span class="lineno">  549</span>                <span class="comment">/* This should be equivalent to match() algorithm step 8.f.iii.2:</span></div>
<div class="line"><span class="lineno">  550</span><span class="comment">                 * detect an empty match and allow it, but don&#39;t allow it twice.</span></div>
<div class="line"><span class="lineno">  551</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno">  552</span>                duk_uint32_t last_index;</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno">  555</span>                last_index = (duk_uint32_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa9bb0452322fce223ad4ab041c59398e">duk_get_uint</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  556</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;empty match, bump lastIndex: %ld -&gt; %ld&quot;</span>,</div>
<div class="line"><span class="lineno">  557</span>                                     (<span class="keywordtype">long</span>) last_index, (<span class="keywordtype">long</span>) (last_index + 1)));</div>
<div class="line"><span class="lineno">  558</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  559</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, last_index + 1);</div>
<div class="line"><span class="lineno">  560</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno">  561</span>            }</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a>(ctx, -1) &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a48e45512fcecab8de9e5703d222e9ddf">DUK_INT_MAX</a>);  <span class="comment">/* string limits */</span></div>
<div class="line"><span class="lineno">  564</span>            match_caps = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  565</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  566</span><span class="preprocessor">#else  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  567</span>        {  <span class="comment">/* unconditionally */</span></div>
<div class="line"><span class="lineno">  568</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  569</span>            <span class="keyword">const</span> duk_uint8_t *p_start, *p_end, *p;   <span class="comment">/* input string scan */</span></div>
<div class="line"><span class="lineno">  570</span>            <span class="keyword">const</span> duk_uint8_t *q_start;               <span class="comment">/* match string */</span></div>
<div class="line"><span class="lineno">  571</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> q_blen;</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  574</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!is_global);  <span class="comment">/* single match always */</span></div>
<div class="line"><span class="lineno">  575</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>            p_start = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input);</div>
<div class="line"><span class="lineno">  578</span>            p_end = p_start + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input);</div>
<div class="line"><span class="lineno">  579</span>            p = p_start;</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>            h_search = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  582</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_search != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  583</span>            q_start = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_search);</div>
<div class="line"><span class="lineno">  584</span>            q_blen = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_search);</div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>            p_end -= q_blen;  <span class="comment">/* ensure full memcmp() fits in while */</span></div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>            match_start_coff = 0;</div>
<div class="line"><span class="lineno">  589</span> </div>
<div class="line"><span class="lineno">  590</span>            <span class="keywordflow">while</span> (p &lt;= p_end) {</div>
<div class="line"><span class="lineno">  591</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(p + q_blen &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input) + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input));</div>
<div class="line"><span class="lineno">  592</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a>((<span class="keyword">const</span> <span class="keywordtype">void</span> *) p, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) q_start, (<span class="keywordtype">size_t</span>) q_blen) == 0) {</div>
<div class="line"><span class="lineno">  593</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  594</span>                    h_match = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  595</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_match != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  596</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  597</span>                    match_caps = 0;</div>
<div class="line"><span class="lineno">  598</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  599</span>                    <span class="keywordflow">goto</span> found;</div>
<div class="line"><span class="lineno">  600</span>                }</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>                <span class="comment">/* track utf-8 non-continuation bytes */</span></div>
<div class="line"><span class="lineno">  603</span>                <span class="keywordflow">if</span> ((p[0] &amp; 0xc0) != 0x80) {</div>
<div class="line"><span class="lineno">  604</span>                    match_start_coff++;</div>
<div class="line"><span class="lineno">  605</span>                }</div>
<div class="line"><span class="lineno">  606</span>                p++;</div>
<div class="line"><span class="lineno">  607</span>            }</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>            <span class="comment">/* not found */</span></div>
<div class="line"><span class="lineno">  610</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  611</span>        }</div>
<div class="line"><span class="lineno">  612</span>     found:</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>        <span class="comment">/* stack[0] = search value</span></div>
<div class="line"><span class="lineno">  615</span><span class="comment">         * stack[1] = replace value</span></div>
<div class="line"><span class="lineno">  616</span><span class="comment">         * stack[2] = input string</span></div>
<div class="line"><span class="lineno">  617</span><span class="comment">         * stack[3] = result buffer</span></div>
<div class="line"><span class="lineno">  618</span><span class="comment">         * stack[4] = regexp match OR match string</span></div>
<div class="line"><span class="lineno">  619</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  620</span> </div>
<div class="line"><span class="lineno">  621</span>        match_start_boff = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a639acb825441f935ef816d817034ef89">duk_heap_strcache_offset_char2byte</a>(thr, h_input, match_start_coff);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>        tmp_sz = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (match_start_boff - prev_match_end_boff);</div>
<div class="line"><span class="lineno">  624</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac70843df44f72edd63494858cbc47bd3">DUK_BW_WRITE_ENSURE_BYTES</a>(thr, bw, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input) + prev_match_end_boff, tmp_sz);</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>        prev_match_end_boff = match_start_boff + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_match);</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>        <span class="keywordflow">if</span> (is_repl_func) {</div>
<div class="line"><span class="lineno">  629</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_args;</div>
<div class="line"><span class="lineno">  630</span>            <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_repl;</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>            <span class="comment">/* regexp res_obj is at index 4 */</span></div>
<div class="line"><span class="lineno">  633</span> </div>
<div class="line"><span class="lineno">  634</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 1);</div>
<div class="line"><span class="lineno">  635</span>            idx_args = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx);</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  638</span>            <span class="keywordflow">if</span> (is_regexp) {</div>
<div class="line"><span class="lineno">  639</span>                <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> idx;</div>
<div class="line"><span class="lineno">  640</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47979f7fbd8af168f735efc020c09d62">duk_require_stack</a>(ctx, match_caps + 2);</div>
<div class="line"><span class="lineno">  641</span>                <span class="keywordflow">for</span> (idx = 0; idx &lt; match_caps; idx++) {</div>
<div class="line"><span class="lineno">  642</span>                    <span class="comment">/* match followed by capture(s) */</span></div>
<div class="line"><span class="lineno">  643</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 4, idx);</div>
<div class="line"><span class="lineno">  644</span>                }</div>
<div class="line"><span class="lineno">  645</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  646</span><span class="preprocessor">#else  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  647</span>            {  <span class="comment">/* unconditionally */</span></div>
<div class="line"><span class="lineno">  648</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  649</span>                <span class="comment">/* match == search string, by definition */</span></div>
<div class="line"><span class="lineno">  650</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  651</span>            }</div>
<div class="line"><span class="lineno">  652</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, match_start_coff);</div>
<div class="line"><span class="lineno">  653</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 2);</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>            <span class="comment">/* [ ... replacer match [captures] match_char_offset input ] */</span></div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab7781c0c62f694e9a356cdb8decdaa78">duk_call</a>(ctx, <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx) - idx_args);</div>
<div class="line"><span class="lineno">  658</span>            h_repl = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a>(ctx, -1);  <span class="comment">/* -&gt; [ ... repl_value ] */</span></div>
<div class="line"><span class="lineno">  659</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_repl != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9766caa85ee9e87087ecfba12ae1d6de">DUK_BW_WRITE_ENSURE_HSTRING</a>(thr, bw, h_repl);</div>
<div class="line"><span class="lineno">  662</span> </div>
<div class="line"><span class="lineno">  663</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* repl_value */</span></div>
<div class="line"><span class="lineno">  664</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  665</span>            r = r_start;</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>            <span class="keywordflow">while</span> (r &lt; r_end) {</div>
<div class="line"><span class="lineno">  668</span>                <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> ch1;</div>
<div class="line"><span class="lineno">  669</span>                <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> ch2;</div>
<div class="line"><span class="lineno">  670</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  671</span>                <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> ch3;</div>
<div class="line"><span class="lineno">  672</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  673</span>                <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> <a class="code hl_variable" href="lua-5_81_85_2src_2lparser_8c.html#a3584754acc5e91c03d6fc91359eefd78">left</a>;</div>
<div class="line"><span class="lineno">  674</span> </div>
<div class="line"><span class="lineno">  675</span>                ch1 = *r++;</div>
<div class="line"><span class="lineno">  676</span>                <span class="keywordflow">if</span> (ch1 != <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#addd989d5454856ce82e7fe27892af003">DUK_ASC_DOLLAR</a>) {</div>
<div class="line"><span class="lineno">  677</span>                    <span class="keywordflow">goto</span> repl_write;</div>
<div class="line"><span class="lineno">  678</span>                }</div>
<div class="line"><span class="lineno">  679</span>                <a class="code hl_variable" href="lua-5_81_85_2src_2lparser_8c.html#a3584754acc5e91c03d6fc91359eefd78">left</a> = r_end - r;</div>
<div class="line"><span class="lineno">  680</span> </div>
<div class="line"><span class="lineno">  681</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="lua-5_81_85_2src_2lparser_8c.html#a3584754acc5e91c03d6fc91359eefd78">left</a> &lt;= 0) {</div>
<div class="line"><span class="lineno">  682</span>                    <span class="keywordflow">goto</span> repl_write;</div>
<div class="line"><span class="lineno">  683</span>                }</div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span>                ch2 = r[0];</div>
<div class="line"><span class="lineno">  686</span>                <span class="keywordflow">switch</span> ((<span class="keywordtype">int</span>) ch2) {</div>
<div class="line"><span class="lineno">  687</span>                <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#addd989d5454856ce82e7fe27892af003">DUK_ASC_DOLLAR</a>: {</div>
<div class="line"><span class="lineno">  688</span>                    ch1 = (1 &lt;&lt; 8) + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#addd989d5454856ce82e7fe27892af003">DUK_ASC_DOLLAR</a>;</div>
<div class="line"><span class="lineno">  689</span>                    <span class="keywordflow">goto</span> repl_write;</div>
<div class="line"><span class="lineno">  690</span>                }</div>
<div class="line"><span class="lineno">  691</span>                <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a190ecb222db2bfcc1af0f598b8edd69e">DUK_ASC_AMP</a>: {</div>
<div class="line"><span class="lineno">  692</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9766caa85ee9e87087ecfba12ae1d6de">DUK_BW_WRITE_ENSURE_HSTRING</a>(thr, bw, h_match);</div>
<div class="line"><span class="lineno">  693</span>                    r++;</div>
<div class="line"><span class="lineno">  694</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  695</span>                }</div>
<div class="line"><span class="lineno">  696</span>                <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac702986ebd69e7924dd708c1374d1004">DUK_ASC_GRAVE</a>: {</div>
<div class="line"><span class="lineno">  697</span>                    tmp_sz = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) match_start_boff;</div>
<div class="line"><span class="lineno">  698</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac70843df44f72edd63494858cbc47bd3">DUK_BW_WRITE_ENSURE_BYTES</a>(thr, bw, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input), tmp_sz);</div>
<div class="line"><span class="lineno">  699</span>                    r++;</div>
<div class="line"><span class="lineno">  700</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  701</span>                }</div>
<div class="line"><span class="lineno">  702</span>                <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a80d8130be53605bd5e50d21c38cae2dd">DUK_ASC_SINGLEQUOTE</a>: {</div>
<div class="line"><span class="lineno">  703</span>                    duk_uint32_t match_end_boff;</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>                    <span class="comment">/* Use match charlen instead of bytelen, just in case the input and</span></div>
<div class="line"><span class="lineno">  706</span><span class="comment">                     * match codepoint encodings would have different lengths.</span></div>
<div class="line"><span class="lineno">  707</span><span class="comment">                     */</span></div>
<div class="line"><span class="lineno">  708</span>                    match_end_boff = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a639acb825441f935ef816d817034ef89">duk_heap_strcache_offset_char2byte</a>(thr,</div>
<div class="line"><span class="lineno">  709</span>                                                                        h_input,</div>
<div class="line"><span class="lineno">  710</span>                                                                        match_start_coff + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h_match));</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>                    tmp_sz = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input) - match_end_boff);</div>
<div class="line"><span class="lineno">  713</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac70843df44f72edd63494858cbc47bd3">DUK_BW_WRITE_ENSURE_BYTES</a>(thr, bw, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input) + match_end_boff, tmp_sz);</div>
<div class="line"><span class="lineno">  714</span>                    r++;</div>
<div class="line"><span class="lineno">  715</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  716</span>                }</div>
<div class="line"><span class="lineno">  717</span>                <span class="keywordflow">default</span>: {</div>
<div class="line"><span class="lineno">  718</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  719</span>                    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> capnum, captmp, capadv;</div>
<div class="line"><span class="lineno">  720</span>                    <span class="comment">/* XXX: optional check, match_caps is zero if no regexp,</span></div>
<div class="line"><span class="lineno">  721</span><span class="comment">                     * so dollar will be interpreted literally anyway.</span></div>
<div class="line"><span class="lineno">  722</span><span class="comment">                     */</span></div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>                    <span class="keywordflow">if</span> (!is_regexp) {</div>
<div class="line"><span class="lineno">  725</span>                        <span class="keywordflow">goto</span> repl_write;</div>
<div class="line"><span class="lineno">  726</span>                    }</div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  728</span>                    <span class="keywordflow">if</span> (!(ch2 &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab4d9a00a239eb7c602c13a42b4661c16">DUK_ASC_0</a> &amp;&amp; ch2 &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2f3c1795a5cfd23daa252fd9fe9aaf71">DUK_ASC_9</a>)) {</div>
<div class="line"><span class="lineno">  729</span>                        <span class="keywordflow">goto</span> repl_write;</div>
<div class="line"><span class="lineno">  730</span>                    }</div>
<div class="line"><span class="lineno">  731</span>                    capnum = ch2 - <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab4d9a00a239eb7c602c13a42b4661c16">DUK_ASC_0</a>;</div>
<div class="line"><span class="lineno">  732</span>                    capadv = 1;</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="lua-5_81_85_2src_2lparser_8c.html#a3584754acc5e91c03d6fc91359eefd78">left</a> &gt;= 2) {</div>
<div class="line"><span class="lineno">  735</span>                        ch3 = r[1];</div>
<div class="line"><span class="lineno">  736</span>                        <span class="keywordflow">if</span> (ch3 &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab4d9a00a239eb7c602c13a42b4661c16">DUK_ASC_0</a> &amp;&amp; ch3 &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2f3c1795a5cfd23daa252fd9fe9aaf71">DUK_ASC_9</a>) {</div>
<div class="line"><span class="lineno">  737</span>                            captmp = capnum * 10 + (ch3 - <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab4d9a00a239eb7c602c13a42b4661c16">DUK_ASC_0</a>);</div>
<div class="line"><span class="lineno">  738</span>                            <span class="keywordflow">if</span> (captmp &lt; match_caps) {</div>
<div class="line"><span class="lineno">  739</span>                                capnum = captmp;</div>
<div class="line"><span class="lineno">  740</span>                                capadv = 2;</div>
<div class="line"><span class="lineno">  741</span>                            }</div>
<div class="line"><span class="lineno">  742</span>                        }</div>
<div class="line"><span class="lineno">  743</span>                    }</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>                    <span class="keywordflow">if</span> (capnum &gt; 0 &amp;&amp; capnum &lt; match_caps) {</div>
<div class="line"><span class="lineno">  746</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(is_regexp != 0);  <span class="comment">/* match_caps == 0 without regexps */</span></div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>                        <span class="comment">/* regexp res_obj is at offset 4 */</span></div>
<div class="line"><span class="lineno">  749</span>                        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 4, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) capnum);</div>
<div class="line"><span class="lineno">  750</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno">  751</span>                            <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_tmp_str;</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>                            h_tmp_str = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  754</span>                            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_tmp_str != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span>                            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9766caa85ee9e87087ecfba12ae1d6de">DUK_BW_WRITE_ENSURE_HSTRING</a>(thr, bw, h_tmp_str);</div>
<div class="line"><span class="lineno">  757</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  758</span>                            <span class="comment">/* undefined -&gt; skip (replaced with empty) */</span></div>
<div class="line"><span class="lineno">  759</span>                        }</div>
<div class="line"><span class="lineno">  760</span>                        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  761</span>                        r += capadv;</div>
<div class="line"><span class="lineno">  762</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  763</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  764</span>                        <span class="keywordflow">goto</span> repl_write;</div>
<div class="line"><span class="lineno">  765</span>                    }</div>
<div class="line"><span class="lineno">  766</span><span class="preprocessor">#else  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  767</span>                    <span class="keywordflow">goto</span> repl_write;  <span class="comment">/* unconditionally */</span></div>
<div class="line"><span class="lineno">  768</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  769</span>                }  <span class="comment">/* default case */</span></div>
<div class="line"><span class="lineno">  770</span>                }  <span class="comment">/* switch (ch2) */</span></div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span>             repl_write:</div>
<div class="line"><span class="lineno">  773</span>                <span class="comment">/* ch1 = (r_increment &lt;&lt; 8) + byte */</span></div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a209a612848d3359b6933ecfb70f14ceb">DUK_BW_WRITE_ENSURE_U8</a>(thr, bw, (duk_uint8_t) (ch1 &amp; 0xff));</div>
<div class="line"><span class="lineno">  776</span>                r += ch1 &gt;&gt; 8;</div>
<div class="line"><span class="lineno">  777</span>            }  <span class="comment">/* while repl */</span></div>
<div class="line"><span class="lineno">  778</span>        }  <span class="comment">/* if (is_repl_func) */</span></div>
<div class="line"><span class="lineno">  779</span> </div>
<div class="line"><span class="lineno">  780</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* pop regexp res_obj or match string */</span></div>
<div class="line"><span class="lineno">  781</span> </div>
<div class="line"><span class="lineno">  782</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  783</span>        <span class="keywordflow">if</span> (!is_global) {</div>
<div class="line"><span class="lineno">  784</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  785</span>        {  <span class="comment">/* unconditionally; is_global==0 */</span></div>
<div class="line"><span class="lineno">  786</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  787</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  788</span>        }</div>
<div class="line"><span class="lineno">  789</span>    }</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>    <span class="comment">/* trailer */</span></div>
<div class="line"><span class="lineno">  792</span>    tmp_sz = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input) - prev_match_end_boff);</div>
<div class="line"><span class="lineno">  793</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac70843df44f72edd63494858cbc47bd3">DUK_BW_WRITE_ENSURE_BYTES</a>(thr, bw, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input) + prev_match_end_boff, tmp_sz);</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 4);</div>
<div class="line"><span class="lineno">  796</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3884e6073e87ecb186fa619eca68fd56">DUK_BW_COMPACT</a>(thr, bw);</div>
<div class="line"><span class="lineno">  797</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  798</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  799</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a48e45512fcecab8de9e5703d222e9ddf"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a48e45512fcecab8de9e5703d222e9ddf">DUK_INT_MAX</a></div><div class="ttdeci">#define DUK_INT_MAX</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01788">duktape-1.5.2/src-noline/duk_config.h:1788</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a66a83b11b322fb452d3677f28ee7067f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a></div><div class="ttdeci">duk_uint_t duk_uarridx_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01842">duktape-1.5.2/src-noline/duk_config.h:1842</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a190ecb222db2bfcc1af0f598b8edd69e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a190ecb222db2bfcc1af0f598b8edd69e">DUK_ASC_AMP</a></div><div class="ttdeci">#define DUK_ASC_AMP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08076">duktape-1.5.2/src-noline/duktape.c:8076</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a209a612848d3359b6933ecfb70f14ceb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a209a612848d3359b6933ecfb70f14ceb">DUK_BW_WRITE_ENSURE_U8</a></div><div class="ttdeci">#define DUK_BW_WRITE_ENSURE_U8(thr, bw_ctx, val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02091">duktape-1.5.2/src-noline/duktape.c:2091</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2de7eced0518d6e049d1ba9db4ff2ac4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2de7eced0518d6e049d1ba9db4ff2ac4">duk_is_function</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_function(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17703">duktape-1.5.2/src-noline/duktape.c:17703</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2f3c1795a5cfd23daa252fd9fe9aaf71"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2f3c1795a5cfd23daa252fd9fe9aaf71">DUK_ASC_9</a></div><div class="ttdeci">#define DUK_ASC_9</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08095">duktape-1.5.2/src-noline/duktape.c:8095</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3ed5f27e2216e110734e3bbe7c91d00c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a></div><div class="ttdeci">DUK_EXTERNAL duk_size_t duk_get_length(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16575">duktape-1.5.2/src-noline/duktape.c:16575</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a47979f7fbd8af168f735efc020c09d62"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47979f7fbd8af168f735efc020c09d62">duk_require_stack</a></div><div class="ttdeci">DUK_EXTERNAL void duk_require_stack(duk_context *ctx, duk_idx_t extra)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15612">duktape-1.5.2/src-noline/duktape.c:15612</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4aec4c226ec06f9cfa25ae7f8218f155"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4aec4c226ec06f9cfa25ae7f8218f155">DUK_STRIDX_INDEX</a></div><div class="ttdeci">#define DUK_STRIDX_INDEX</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01026">duktape-1.5.2/src-noline/duktape.c:1026</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a80d8130be53605bd5e50d21c38cae2dd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a80d8130be53605bd5e50d21c38cae2dd">DUK_ASC_SINGLEQUOTE</a></div><div class="ttdeci">#define DUK_ASC_SINGLEQUOTE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08077">duktape-1.5.2/src-noline/duktape.c:8077</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9766caa85ee9e87087ecfba12ae1d6de"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9766caa85ee9e87087ecfba12ae1d6de">DUK_BW_WRITE_ENSURE_HSTRING</a></div><div class="ttdeci">#define DUK_BW_WRITE_ENSURE_HSTRING(thr, bw_ctx, val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02142">duktape-1.5.2/src-noline/duktape.c:2142</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa9bb0452322fce223ad4ab041c59398e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa9bb0452322fce223ad4ab041c59398e">duk_get_uint</a></div><div class="ttdeci">DUK_EXTERNAL duk_uint_t duk_get_uint(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16046">duktape-1.5.2/src-noline/duktape.c:16046</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab4d9a00a239eb7c602c13a42b4661c16"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab4d9a00a239eb7c602c13a42b4661c16">DUK_ASC_0</a></div><div class="ttdeci">#define DUK_ASC_0</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08086">duktape-1.5.2/src-noline/duktape.c:8086</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab7781c0c62f694e9a356cdb8decdaa78"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab7781c0c62f694e9a356cdb8decdaa78">duk_call</a></div><div class="ttdeci">DUK_EXTERNAL void duk_call(duk_context *ctx, duk_idx_t nargs)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12362">duktape-1.5.2/src-noline/duktape.c:12362</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac702986ebd69e7924dd708c1374d1004"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac702986ebd69e7924dd708c1374d1004">DUK_ASC_GRAVE</a></div><div class="ttdeci">#define DUK_ASC_GRAVE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08134">duktape-1.5.2/src-noline/duktape.c:8134</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac70843df44f72edd63494858cbc47bd3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac70843df44f72edd63494858cbc47bd3">DUK_BW_WRITE_ENSURE_BYTES</a></div><div class="ttdeci">#define DUK_BW_WRITE_ENSURE_BYTES(thr, bw_ctx, valptr, valsz)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02124">duktape-1.5.2/src-noline/duktape.c:2124</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad68f683c683ab08b6eec9d84bdc36e56"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hstring * duk_get_hstring(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16288">duktape-1.5.2/src-noline/duktape.c:16288</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_addd989d5454856ce82e7fe27892af003"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#addd989d5454856ce82e7fe27892af003">DUK_ASC_DOLLAR</a></div><div class="ttdeci">#define DUK_ASC_DOLLAR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08074">duktape-1.5.2/src-noline/duktape.c:8074</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_af880d503c1649d15866355ad3114ad67"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#af880d503c1649d15866355ad3114ad67">DUK_RET_UNSUPPORTED_ERROR</a></div><div class="ttdeci">#define DUK_RET_UNSUPPORTED_ERROR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00350">duktape-1.5.2/src-noline/duktape.h:350</a></div></div>
<div class="ttc" id="alua-5_81_85_2src_2lparser_8c_html_a3584754acc5e91c03d6fc91359eefd78"><div class="ttname"><a href="lua-5_81_85_2src_2lparser_8c.html#a3584754acc5e91c03d6fc91359eefd78">left</a></div><div class="ttdeci">lu_byte left</div><div class="ttdef"><b>Definition</b> <a href="lua-5_81_85_2src_2lparser_8c_source.html#l00811">lua-5.1.5/src/lparser.c:811</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08086">DUK_ASC_0</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08095">DUK_ASC_9</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08076">DUK_ASC_AMP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08074">DUK_ASC_DOLLAR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08134">DUK_ASC_GRAVE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08077">DUK_ASC_SINGLEQUOTE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">DUK_ASSERT_TOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01858">DUK_BW_COMPACT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01852">DUK_BW_INIT_PUSHBUF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02124">DUK_BW_WRITE_ENSURE_BYTES</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02142">DUK_BW_WRITE_ENSURE_HSTRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02091">DUK_BW_WRITE_ENSURE_U8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12362">duk_call()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16541">duk_get_hobject_with_class()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16288">duk_get_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16040">duk_get_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16575">duk_get_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duk_get_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14331">duk_get_prop_stridx_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duk_get_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16046">duk_get_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l44448">duk_heap_strcache_offset_char2byte()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04702">DUK_HOBJECT_CLASS_REGEXP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">DUK_HSTRING_GET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">DUK_HSTRING_GET_DATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01788">DUK_INT_MAX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17703">duk_is_function()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17629">duk_is_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17671">duk_is_object()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duk_is_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">DUK_MEMCMP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duk_put_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l79315">duk_regexp_match()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15612">duk_require_stack()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00350">DUK_RET_UNSUPPORTED_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00957">DUK_STRIDX_GLOBAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01026">DUK_STRIDX_INDEX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01020">DUK_STRIDX_LAST_INDEX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duk_to_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, <a class="el" href="lua-5_81_85_2src_2lparser_8c_source.html#l00811">left</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a618537d27c9d5d13bed00b6b69b1a42a" name="a618537d27c9d5d13bed00b6b69b1a42a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a618537d27c9d5d13bed00b6b69b1a42a">&#9670;&#160;</a></span>duk_bi_string_prototype_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01118">1118</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1118</span>                                                                        {</div>
<div class="line"><span class="lineno"> 1119</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1120</span> </div>
<div class="line"><span class="lineno"> 1121</span>    <span class="comment">/* Easiest way to implement the search required by the specification</span></div>
<div class="line"><span class="lineno"> 1122</span><span class="comment">     * is to do a RegExp test() with lastIndex forced to zero.  To avoid</span></div>
<div class="line"><span class="lineno"> 1123</span><span class="comment">     * side effects on the argument, &quot;clone&quot; the RegExp if a RegExp was</span></div>
<div class="line"><span class="lineno"> 1124</span><span class="comment">     * given as input.</span></div>
<div class="line"><span class="lineno"> 1125</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 1126</span><span class="comment">     * The global flag of the RegExp should be ignored; setting lastIndex</span></div>
<div class="line"><span class="lineno"> 1127</span><span class="comment">     * to zero (which happens when &quot;cloning&quot; the RegExp) should have an</span></div>
<div class="line"><span class="lineno"> 1128</span><span class="comment">     * equivalent effect.</span></div>
<div class="line"><span class="lineno"> 1129</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1130</span> </div>
<div class="line"><span class="lineno"> 1131</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 1132</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);  <span class="comment">/* at index 1 */</span></div>
<div class="line"><span class="lineno"> 1133</span>    <a class="code hl_function" href="#a61f43d2ba758344535f6cf34af4bff63">duk__to_regexp_helper</a>(ctx, 0 <span class="comment">/*index*/</span>, 1 <span class="comment">/*force_new*/</span>);</div>
<div class="line"><span class="lineno"> 1134</span> </div>
<div class="line"><span class="lineno"> 1135</span>    <span class="comment">/* stack[0] = regexp</span></div>
<div class="line"><span class="lineno"> 1136</span><span class="comment">     * stack[1] = string</span></div>
<div class="line"><span class="lineno"> 1137</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1138</span> </div>
<div class="line"><span class="lineno"> 1139</span>    <span class="comment">/* Avoid using RegExp.prototype methods, as they&#39;re writable and</span></div>
<div class="line"><span class="lineno"> 1140</span><span class="comment">     * configurable and may have been changed.</span></div>
<div class="line"><span class="lineno"> 1141</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1144</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 1);  <span class="comment">/* [ ... re_obj input ] */</span></div>
<div class="line"><span class="lineno"> 1145</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c127ec502269c71d2e10b7934dc71b1">duk_regexp_match</a>(thr);  <span class="comment">/* -&gt; [ ... res_obj ] */</span></div>
<div class="line"><span class="lineno"> 1146</span> </div>
<div class="line"><span class="lineno"> 1147</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7a1c56508accb1229332beec5458189a">duk_is_object</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno"> 1148</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1149</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1150</span>    }</div>
<div class="line"><span class="lineno"> 1151</span> </div>
<div class="line"><span class="lineno"> 1152</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, -1, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4aec4c226ec06f9cfa25ae7f8218f155">DUK_STRIDX_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1153</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a>(ctx, -1));</div>
<div class="line"><span class="lineno"> 1154</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1155</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01092">duk__to_regexp_helper()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">DUK_ASSERT_TOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17629">duk_is_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17671">duk_is_object()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l79315">duk_regexp_match()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01026">DUK_STRIDX_INDEX</a>.</p>

</div>
</div>
<a id="a50df3b44d3be608d5d2f90ce54cc073e" name="a50df3b44d3be608d5d2f90ce54cc073e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50df3b44d3be608d5d2f90ce54cc073e">&#9670;&#160;</a></span>duk_bi_string_prototype_slice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_slice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00261">261</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  261</span>                                                                       {</div>
<div class="line"><span class="lineno">  262</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h;</div>
<div class="line"><span class="lineno">  263</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> start_pos, end_pos;</div>
<div class="line"><span class="lineno">  264</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> len;</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    h = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  267</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  268</span>    len = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>    <span class="comment">/* [ start end str ] */</span></div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    start_pos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 0, -len, len);</div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">if</span> (start_pos &lt; 0) {</div>
<div class="line"><span class="lineno">  274</span>        start_pos = len + start_pos;</div>
<div class="line"><span class="lineno">  275</span>    }</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 1)) {</div>
<div class="line"><span class="lineno">  277</span>        end_pos = len;</div>
<div class="line"><span class="lineno">  278</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  279</span>        end_pos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 1, -len, len);</div>
<div class="line"><span class="lineno">  280</span>        <span class="keywordflow">if</span> (end_pos &lt; 0) {</div>
<div class="line"><span class="lineno">  281</span>            end_pos = len + end_pos;</div>
<div class="line"><span class="lineno">  282</span>        }</div>
<div class="line"><span class="lineno">  283</span>    }</div>
<div class="line"><span class="lineno">  284</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_pos &gt;= 0 &amp;&amp; start_pos &lt;= len);</div>
<div class="line"><span class="lineno">  285</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_pos &gt;= 0 &amp;&amp; end_pos &lt;= len);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordflow">if</span> (end_pos &lt; start_pos) {</div>
<div class="line"><span class="lineno">  288</span>        end_pos = start_pos;</div>
<div class="line"><span class="lineno">  289</span>    }</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_pos &gt;= start_pos);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a>(ctx, -1, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) start_pos, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) end_pos);</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  295</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a10838caaff9e74b1e3904c78df71d53a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_undefined(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duktape-1.5.2/src-noline/duktape.c:17600</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duk_substring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duk_to_int_clamped()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a08ad4a47ff76268630eb9ffa322ccf44" name="a08ad4a47ff76268630eb9ffa322ccf44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08ad4a47ff76268630eb9ffa322ccf44">&#9670;&#160;</a></span>duk_bi_string_prototype_split()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_split </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00809">809</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  809</span>                                                                       {</div>
<div class="line"><span class="lineno">  810</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  811</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_input;</div>
<div class="line"><span class="lineno">  812</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_sep;</div>
<div class="line"><span class="lineno">  813</span>    duk_uint32_t limit;</div>
<div class="line"><span class="lineno">  814</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno">  815</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  816</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_regexp;</div>
<div class="line"><span class="lineno">  817</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  818</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> matched;  <span class="comment">/* set to 1 if any match exists (needed for empty input special case) */</span></div>
<div class="line"><span class="lineno">  819</span>    duk_uint32_t prev_match_end_coff, prev_match_end_boff;</div>
<div class="line"><span class="lineno">  820</span>    duk_uint32_t match_start_boff, match_start_coff;</div>
<div class="line"><span class="lineno">  821</span>    duk_uint32_t match_end_boff, match_end_coff;</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>    h_input = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  826</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_input != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  827</span> </div>
<div class="line"><span class="lineno">  828</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acce5984e6f3a97978d46a8280fcc3fed">duk_push_array</a>(ctx);</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 1)) {</div>
<div class="line"><span class="lineno">  831</span>        limit = 0xffffffffUL;</div>
<div class="line"><span class="lineno">  832</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  833</span>        limit = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, 1);</div>
<div class="line"><span class="lineno">  834</span>    }</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>    <span class="keywordflow">if</span> (limit == 0) {</div>
<div class="line"><span class="lineno">  837</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  838</span>    }</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>    <span class="comment">/* If the separator is a RegExp, make a &quot;clone&quot; of it.  The specification</span></div>
<div class="line"><span class="lineno">  841</span><span class="comment">     * algorithm calls [[Match]] directly for specific indices; we emulate this</span></div>
<div class="line"><span class="lineno">  842</span><span class="comment">     * by tweaking lastIndex and using a &quot;force global&quot; variant of duk_regexp_match()</span></div>
<div class="line"><span class="lineno">  843</span><span class="comment">     * which will use global-style matching even when the RegExp itself is non-global.</span></div>
<div class="line"><span class="lineno">  844</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  845</span> </div>
<div class="line"><span class="lineno">  846</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 0)) {</div>
<div class="line"><span class="lineno">  847</span>        <span class="comment">/* The spec algorithm first does &quot;R = ToString(separator)&quot; before checking</span></div>
<div class="line"><span class="lineno">  848</span><span class="comment">         * whether separator is undefined.  Since this is side effect free, we can</span></div>
<div class="line"><span class="lineno">  849</span><span class="comment">         * skip the ToString() here.</span></div>
<div class="line"><span class="lineno">  850</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  851</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 2);</div>
<div class="line"><span class="lineno">  852</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, 3, 0);</div>
<div class="line"><span class="lineno">  853</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  854</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2fd067d472c0b9ca7be27f504cb0e2">duk_get_hobject_with_class</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0ee364551cd1301005bd72e8ba3a157c">DUK_HOBJECT_CLASS_REGEXP</a>) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno">  855</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  856</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7013e79df7f81ea6201933b88c1d9994">duk_push_hobject_bidx</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a85acee46c6e704e4f6b2c318cade03b0">DUK_BIDX_REGEXP_CONSTRUCTOR</a>);</div>
<div class="line"><span class="lineno">  857</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  858</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3cac40b8b87d5582d7af0dc91be46441">duk_new</a>(ctx, 1);  <span class="comment">/* [ ... RegExp val ] -&gt; [ ... res ] */</span></div>
<div class="line"><span class="lineno">  859</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a690921ea90be3a0cb5483cb80f9c3439">duk_replace</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  860</span>        <span class="comment">/* lastIndex is initialized to zero by new RegExp() */</span></div>
<div class="line"><span class="lineno">  861</span>        is_regexp = 1;</div>
<div class="line"><span class="lineno">  862</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  863</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#af880d503c1649d15866355ad3114ad67">DUK_RET_UNSUPPORTED_ERROR</a>;</div>
<div class="line"><span class="lineno">  864</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  865</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  866</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  867</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  868</span>        is_regexp = 0;</div>
<div class="line"><span class="lineno">  869</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  870</span>    }</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>    <span class="comment">/* stack[0] = separator (string or regexp)</span></div>
<div class="line"><span class="lineno">  873</span><span class="comment">     * stack[1] = limit</span></div>
<div class="line"><span class="lineno">  874</span><span class="comment">     * stack[2] = input string</span></div>
<div class="line"><span class="lineno">  875</span><span class="comment">     * stack[3] = result array</span></div>
<div class="line"><span class="lineno">  876</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>    prev_match_end_boff = 0;</div>
<div class="line"><span class="lineno">  879</span>    prev_match_end_coff = 0;</div>
<div class="line"><span class="lineno">  880</span>    arr_idx = 0;</div>
<div class="line"><span class="lineno">  881</span>    matched = 0;</div>
<div class="line"><span class="lineno">  882</span> </div>
<div class="line"><span class="lineno">  883</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  884</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  885</span><span class="comment">         *  The specification uses RegExp [[Match]] to attempt match at specific</span></div>
<div class="line"><span class="lineno">  886</span><span class="comment">         *  offsets.  We don&#39;t have such a primitive, so we use an actual RegExp</span></div>
<div class="line"><span class="lineno">  887</span><span class="comment">         *  and tweak lastIndex.  Since the RegExp may be non-global, we use a</span></div>
<div class="line"><span class="lineno">  888</span><span class="comment">         *  special variant which forces global-like behavior for matching.</span></div>
<div class="line"><span class="lineno">  889</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 4);</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno">  894</span>        <span class="keywordflow">if</span> (is_regexp) {</div>
<div class="line"><span class="lineno">  895</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  896</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 2);</div>
<div class="line"><span class="lineno">  897</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae87669e47372d337f52e5a14d9113317">duk_regexp_match_force_global</a>(thr);  <span class="comment">/* [ ... regexp input ] -&gt; [ res_obj ] */</span></div>
<div class="line"><span class="lineno">  898</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7a1c56508accb1229332beec5458189a">duk_is_object</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno">  899</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  900</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  901</span>            }</div>
<div class="line"><span class="lineno">  902</span>            matched = 1;</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, -1, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4aec4c226ec06f9cfa25ae7f8218f155">DUK_STRIDX_INDEX</a>);</div>
<div class="line"><span class="lineno">  905</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a>(ctx, -1));</div>
<div class="line"><span class="lineno">  906</span>            match_start_coff = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  907</span>            match_start_boff = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a639acb825441f935ef816d817034ef89">duk_heap_strcache_offset_char2byte</a>(thr, h_input, match_start_coff);</div>
<div class="line"><span class="lineno">  908</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  909</span> </div>
<div class="line"><span class="lineno">  910</span>            <span class="keywordflow">if</span> (match_start_coff == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h_input)) {</div>
<div class="line"><span class="lineno">  911</span>                <span class="comment">/* don&#39;t allow an empty match at the end of the string */</span></div>
<div class="line"><span class="lineno">  912</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  913</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  914</span>            }</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno">  917</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a>(ctx, -1));</div>
<div class="line"><span class="lineno">  918</span>            match_end_coff = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  919</span>            match_end_boff = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a639acb825441f935ef816d817034ef89">duk_heap_strcache_offset_char2byte</a>(thr, h_input, match_end_coff);</div>
<div class="line"><span class="lineno">  920</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  921</span> </div>
<div class="line"><span class="lineno">  922</span>            <span class="comment">/* empty match -&gt; bump and continue */</span></div>
<div class="line"><span class="lineno">  923</span>            <span class="keywordflow">if</span> (prev_match_end_boff == match_end_boff) {</div>
<div class="line"><span class="lineno">  924</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, match_end_coff + 1);</div>
<div class="line"><span class="lineno">  925</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a93b63145828da58c68a0930a7bd13780">DUK_STRIDX_LAST_INDEX</a>);</div>
<div class="line"><span class="lineno">  926</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  927</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  928</span>            }</div>
<div class="line"><span class="lineno">  929</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  930</span><span class="preprocessor">#else  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  931</span>        {  <span class="comment">/* unconditionally */</span></div>
<div class="line"><span class="lineno">  932</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  933</span>            <span class="keyword">const</span> duk_uint8_t *p_start, *p_end, *p;   <span class="comment">/* input string scan */</span></div>
<div class="line"><span class="lineno">  934</span>            <span class="keyword">const</span> duk_uint8_t *q_start;               <span class="comment">/* match string */</span></div>
<div class="line"><span class="lineno">  935</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> q_blen, q_clen;</div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span>            p_start = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input);</div>
<div class="line"><span class="lineno">  938</span>            p_end = p_start + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input);</div>
<div class="line"><span class="lineno">  939</span>            p = p_start + prev_match_end_boff;</div>
<div class="line"><span class="lineno">  940</span> </div>
<div class="line"><span class="lineno">  941</span>            h_sep = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  942</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_sep != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  943</span>            q_start = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_sep);</div>
<div class="line"><span class="lineno">  944</span>            q_blen = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_sep);</div>
<div class="line"><span class="lineno">  945</span>            q_clen = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h_sep);</div>
<div class="line"><span class="lineno">  946</span> </div>
<div class="line"><span class="lineno">  947</span>            p_end -= q_blen;  <span class="comment">/* ensure full memcmp() fits in while */</span></div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>            match_start_coff = prev_match_end_coff;</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>            <span class="keywordflow">if</span> (q_blen == 0) {</div>
<div class="line"><span class="lineno">  952</span>                <span class="comment">/* Handle empty separator case: it will always match, and always</span></div>
<div class="line"><span class="lineno">  953</span><span class="comment">                 * triggers the check in step 13.c.iii initially.  Note that we</span></div>
<div class="line"><span class="lineno">  954</span><span class="comment">                 * must skip to either end of string or start of first codepoint,</span></div>
<div class="line"><span class="lineno">  955</span><span class="comment">                 * skipping over any continuation bytes!</span></div>
<div class="line"><span class="lineno">  956</span><span class="comment">                 *</span></div>
<div class="line"><span class="lineno">  957</span><span class="comment">                 * Don&#39;t allow an empty string to match at the end of the input.</span></div>
<div class="line"><span class="lineno">  958</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span>                matched = 1;  <span class="comment">/* empty separator can always match */</span></div>
<div class="line"><span class="lineno">  961</span> </div>
<div class="line"><span class="lineno">  962</span>                match_start_coff++;</div>
<div class="line"><span class="lineno">  963</span>                p++;</div>
<div class="line"><span class="lineno">  964</span>                <span class="keywordflow">while</span> (p &lt; p_end) {</div>
<div class="line"><span class="lineno">  965</span>                    <span class="keywordflow">if</span> ((p[0] &amp; 0xc0) != 0x80) {</div>
<div class="line"><span class="lineno">  966</span>                        <span class="keywordflow">goto</span> found;</div>
<div class="line"><span class="lineno">  967</span>                    }</div>
<div class="line"><span class="lineno">  968</span>                    p++;</div>
<div class="line"><span class="lineno">  969</span>                }</div>
<div class="line"><span class="lineno">  970</span>                <span class="keywordflow">goto</span> not_found;</div>
<div class="line"><span class="lineno">  971</span>            }</div>
<div class="line"><span class="lineno">  972</span> </div>
<div class="line"><span class="lineno">  973</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(q_blen &gt; 0 &amp;&amp; q_clen &gt; 0);</div>
<div class="line"><span class="lineno">  974</span>            <span class="keywordflow">while</span> (p &lt;= p_end) {</div>
<div class="line"><span class="lineno">  975</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(p + q_blen &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input) + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input));</div>
<div class="line"><span class="lineno">  976</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(q_blen &gt; 0);  <span class="comment">/* no issues with empty memcmp() */</span></div>
<div class="line"><span class="lineno">  977</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a>((<span class="keyword">const</span> <span class="keywordtype">void</span> *) p, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) q_start, (<span class="keywordtype">size_t</span>) q_blen) == 0) {</div>
<div class="line"><span class="lineno">  978</span>                    <span class="comment">/* never an empty match, so step 13.c.iii can&#39;t be triggered */</span></div>
<div class="line"><span class="lineno">  979</span>                    <span class="keywordflow">goto</span> found;</div>
<div class="line"><span class="lineno">  980</span>                }</div>
<div class="line"><span class="lineno">  981</span> </div>
<div class="line"><span class="lineno">  982</span>                <span class="comment">/* track utf-8 non-continuation bytes */</span></div>
<div class="line"><span class="lineno">  983</span>                <span class="keywordflow">if</span> ((p[0] &amp; 0xc0) != 0x80) {</div>
<div class="line"><span class="lineno">  984</span>                    match_start_coff++;</div>
<div class="line"><span class="lineno">  985</span>                }</div>
<div class="line"><span class="lineno">  986</span>                p++;</div>
<div class="line"><span class="lineno">  987</span>            }</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>         not_found:</div>
<div class="line"><span class="lineno">  990</span>            <span class="comment">/* not found */</span></div>
<div class="line"><span class="lineno">  991</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  992</span> </div>
<div class="line"><span class="lineno">  993</span>         found:</div>
<div class="line"><span class="lineno">  994</span>            matched = 1;</div>
<div class="line"><span class="lineno">  995</span>            match_start_boff = (duk_uint32_t) (p - p_start);</div>
<div class="line"><span class="lineno">  996</span>            match_end_coff = (duk_uint32_t) (match_start_coff + q_clen);  <span class="comment">/* constrained by string length */</span></div>
<div class="line"><span class="lineno">  997</span>            match_end_boff = (duk_uint32_t) (match_start_boff + q_blen);  <span class="comment">/* ditto */</span></div>
<div class="line"><span class="lineno">  998</span> </div>
<div class="line"><span class="lineno">  999</span>            <span class="comment">/* empty match (may happen with empty separator) -&gt; bump and continue */</span></div>
<div class="line"><span class="lineno"> 1000</span>            <span class="keywordflow">if</span> (prev_match_end_boff == match_end_boff) {</div>
<div class="line"><span class="lineno"> 1001</span>                prev_match_end_boff++;</div>
<div class="line"><span class="lineno"> 1002</span>                prev_match_end_coff++;</div>
<div class="line"><span class="lineno"> 1003</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1004</span>            }</div>
<div class="line"><span class="lineno"> 1005</span>        }  <span class="comment">/* if (is_regexp) */</span></div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>        <span class="comment">/* stack[0] = separator (string or regexp)</span></div>
<div class="line"><span class="lineno"> 1008</span><span class="comment">         * stack[1] = limit</span></div>
<div class="line"><span class="lineno"> 1009</span><span class="comment">         * stack[2] = input string</span></div>
<div class="line"><span class="lineno"> 1010</span><span class="comment">         * stack[3] = result array</span></div>
<div class="line"><span class="lineno"> 1011</span><span class="comment">         * stack[4] = regexp res_obj (if is_regexp)</span></div>
<div class="line"><span class="lineno"> 1012</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1013</span> </div>
<div class="line"><span class="lineno"> 1014</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;split; match_start b=%ld,c=%ld, match_end b=%ld,c=%ld, prev_end b=%ld,c=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1015</span>                             (<span class="keywordtype">long</span>) match_start_boff, (<span class="keywordtype">long</span>) match_start_coff,</div>
<div class="line"><span class="lineno"> 1016</span>                             (<span class="keywordtype">long</span>) match_end_boff, (<span class="keywordtype">long</span>) match_end_coff,</div>
<div class="line"><span class="lineno"> 1017</span>                             (<span class="keywordtype">long</span>) prev_match_end_boff, (<span class="keywordtype">long</span>) prev_match_end_coff));</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5250fadf8e185170821f9a9e486a8985">duk_push_lstring</a>(ctx,</div>
<div class="line"><span class="lineno"> 1020</span>                         (<span class="keyword">const</span> <span class="keywordtype">char</span> *) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input) + prev_match_end_boff),</div>
<div class="line"><span class="lineno"> 1021</span>                         (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (match_start_boff - prev_match_end_boff));</div>
<div class="line"><span class="lineno"> 1022</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, 3, arr_idx);</div>
<div class="line"><span class="lineno"> 1023</span>        arr_idx++;</div>
<div class="line"><span class="lineno"> 1024</span>        <span class="keywordflow">if</span> (arr_idx &gt;= limit) {</div>
<div class="line"><span class="lineno"> 1025</span>            <span class="keywordflow">goto</span> hit_limit;</div>
<div class="line"><span class="lineno"> 1026</span>        }</div>
<div class="line"><span class="lineno"> 1027</span> </div>
<div class="line"><span class="lineno"> 1028</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno"> 1029</span>        <span class="keywordflow">if</span> (is_regexp) {</div>
<div class="line"><span class="lineno"> 1030</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> i, len;</div>
<div class="line"><span class="lineno"> 1031</span> </div>
<div class="line"><span class="lineno"> 1032</span>            len = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a>(ctx, 4);</div>
<div class="line"><span class="lineno"> 1033</span>            <span class="keywordflow">for</span> (i = 1; i &lt; len; i++) {</div>
<div class="line"><span class="lineno"> 1034</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a7bdfaa2a12bfeaf747dfb1e4670bd550">DUK_UARRIDX_MAX</a>);  <span class="comment">/* cannot have &gt;4G captures */</span></div>
<div class="line"><span class="lineno"> 1035</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 4, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) i);</div>
<div class="line"><span class="lineno"> 1036</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, 3, arr_idx);</div>
<div class="line"><span class="lineno"> 1037</span>                arr_idx++;</div>
<div class="line"><span class="lineno"> 1038</span>                <span class="keywordflow">if</span> (arr_idx &gt;= limit) {</div>
<div class="line"><span class="lineno"> 1039</span>                    <span class="keywordflow">goto</span> hit_limit;</div>
<div class="line"><span class="lineno"> 1040</span>                }</div>
<div class="line"><span class="lineno"> 1041</span>            }</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 1044</span>            <span class="comment">/* lastIndex already set up for next match */</span></div>
<div class="line"><span class="lineno"> 1045</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1046</span><span class="preprocessor">#else  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1047</span>        {  <span class="comment">/* unconditionally */</span></div>
<div class="line"><span class="lineno"> 1048</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_REGEXP_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1049</span>            <span class="comment">/* no action */</span></div>
<div class="line"><span class="lineno"> 1050</span>        }</div>
<div class="line"><span class="lineno"> 1051</span> </div>
<div class="line"><span class="lineno"> 1052</span>        prev_match_end_boff = match_end_boff;</div>
<div class="line"><span class="lineno"> 1053</span>        prev_match_end_coff = match_end_coff;</div>
<div class="line"><span class="lineno"> 1054</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1055</span>    }  <span class="comment">/* for */</span></div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>    <span class="comment">/* Combined step 11 (empty string special case) and 14-15. */</span></div>
<div class="line"><span class="lineno"> 1058</span> </div>
<div class="line"><span class="lineno"> 1059</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;split trailer; prev_end b=%ld,c=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1060</span>                         (<span class="keywordtype">long</span>) prev_match_end_boff, (<span class="keywordtype">long</span>) prev_match_end_coff));</div>
<div class="line"><span class="lineno"> 1061</span> </div>
<div class="line"><span class="lineno"> 1062</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h_input) &gt; 0 || !matched) {</div>
<div class="line"><span class="lineno"> 1063</span>        <span class="comment">/* Add trailer if:</span></div>
<div class="line"><span class="lineno"> 1064</span><span class="comment">         *   a) non-empty input</span></div>
<div class="line"><span class="lineno"> 1065</span><span class="comment">         *   b) empty input and no (zero size) match found (step 11)</span></div>
<div class="line"><span class="lineno"> 1066</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1067</span> </div>
<div class="line"><span class="lineno"> 1068</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5250fadf8e185170821f9a9e486a8985">duk_push_lstring</a>(ctx,</div>
<div class="line"><span class="lineno"> 1069</span>                         (<span class="keyword">const</span> <span class="keywordtype">char</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(h_input) + prev_match_end_boff,</div>
<div class="line"><span class="lineno"> 1070</span>                         (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(h_input) - prev_match_end_boff));</div>
<div class="line"><span class="lineno"> 1071</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, 3, arr_idx);</div>
<div class="line"><span class="lineno"> 1072</span>        <span class="comment">/* No arr_idx update or limit check */</span></div>
<div class="line"><span class="lineno"> 1073</span>    }</div>
<div class="line"><span class="lineno"> 1074</span> </div>
<div class="line"><span class="lineno"> 1075</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1076</span> </div>
<div class="line"><span class="lineno"> 1077</span> hit_limit:</div>
<div class="line"><span class="lineno"> 1078</span><span class="preprocessor">#ifdef DUK_USE_REGEXP_SUPPORT</span></div>
<div class="line"><span class="lineno"> 1079</span>    <span class="keywordflow">if</span> (is_regexp) {</div>
<div class="line"><span class="lineno"> 1080</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 1081</span>    }</div>
<div class="line"><span class="lineno"> 1082</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1083</span> </div>
<div class="line"><span class="lineno"> 1084</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1085</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a7bdfaa2a12bfeaf747dfb1e4670bd550"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a7bdfaa2a12bfeaf747dfb1e4670bd550">DUK_UARRIDX_MAX</a></div><div class="ttdeci">#define DUK_UARRIDX_MAX</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01844">duktape-1.5.2/src-noline/duk_config.h:1844</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9170138f330dbcaabfae9d2c59cc9684"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a></div><div class="ttdeci">#define DUK_UNREF(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">duktape-1.5.2/src-noline/duk_config.h:2494</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5250fadf8e185170821f9a9e486a8985"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5250fadf8e185170821f9a9e486a8985">duk_push_lstring</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_push_lstring(duk_context *ctx, const char *str, duk_size_t len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18004">duktape-1.5.2/src-noline/duktape.c:18004</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae87669e47372d337f52e5a14d9113317"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae87669e47372d337f52e5a14d9113317">duk_regexp_match_force_global</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_regexp_match_force_global(duk_hthread *thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l79322">duktape-1.5.2/src-noline/duktape.c:79322</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">DUK_ASSERT_TOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01645">DUK_BIDX_REGEXP_CONSTRUCTOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16541">duk_get_hobject_with_class()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16288">duk_get_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16040">duk_get_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16575">duk_get_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duk_get_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l44448">duk_heap_strcache_offset_char2byte()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04702">DUK_HOBJECT_CLASS_REGEXP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">DUK_HSTRING_GET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">DUK_HSTRING_GET_DATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17629">duk_is_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17671">duk_is_object()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">DUK_MEMCMP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12549">duk_new()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18458">duk_push_array()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19075">duk_push_hobject_bidx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18004">duk_push_lstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14396">duk_put_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duk_put_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l79322">duk_regexp_match_force_global()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15780">duk_replace()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00350">DUK_RET_UNSUPPORTED_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01026">DUK_STRIDX_INDEX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01020">DUK_STRIDX_LAST_INDEX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duk_to_uint32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01844">DUK_UARRIDX_MAX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a8d4eb525b2a847fbd191f81f1f8326fa" name="a8d4eb525b2a847fbd191f81f1f8326fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d4eb525b2a847fbd191f81f1f8326fa">&#9670;&#160;</a></span>duk_bi_string_prototype_substr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_substr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00212">212</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  212</span>                                                                        {</div>
<div class="line"><span class="lineno">  213</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h;</div>
<div class="line"><span class="lineno">  214</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> start_pos, end_pos;</div>
<div class="line"><span class="lineno">  215</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> len;</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="comment">/* Unlike non-obsolete String calls, substr() algorithm in E5.1</span></div>
<div class="line"><span class="lineno">  218</span><span class="comment">     * specification will happily coerce undefined and null to strings</span></div>
<div class="line"><span class="lineno">  219</span><span class="comment">     * (&quot;undefined&quot; and &quot;null&quot;).</span></div>
<div class="line"><span class="lineno">  220</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1512c1813016de46ee80d93f9a0704fb">duk_push_this</a>(ctx);</div>
<div class="line"><span class="lineno">  222</span>    h = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  223</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  224</span>    len = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h);</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="comment">/* [ start length str ] */</span></div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="comment">/* The implementation for computing of start_pos and end_pos differs</span></div>
<div class="line"><span class="lineno">  229</span><span class="comment">     * from the standard algorithm, but is intended to result in the exactly</span></div>
<div class="line"><span class="lineno">  230</span><span class="comment">     * same behavior.  This is not always obvious.</span></div>
<div class="line"><span class="lineno">  231</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>    <span class="comment">/* combines steps 2 and 5; -len ensures max() not needed for step 5 */</span></div>
<div class="line"><span class="lineno">  234</span>    start_pos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 0, -len, len);</div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">if</span> (start_pos &lt; 0) {</div>
<div class="line"><span class="lineno">  236</span>        start_pos = len + start_pos;</div>
<div class="line"><span class="lineno">  237</span>    }</div>
<div class="line"><span class="lineno">  238</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_pos &gt;= 0 &amp;&amp; start_pos &lt;= len);</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    <span class="comment">/* combines steps 3, 6; step 7 is not needed */</span></div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 1)) {</div>
<div class="line"><span class="lineno">  242</span>        end_pos = len;</div>
<div class="line"><span class="lineno">  243</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  244</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_pos &lt;= len);</div>
<div class="line"><span class="lineno">  245</span>        end_pos = start_pos + <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 1, 0, len - start_pos);</div>
<div class="line"><span class="lineno">  246</span>    }</div>
<div class="line"><span class="lineno">  247</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_pos &gt;= 0 &amp;&amp; start_pos &lt;= len);</div>
<div class="line"><span class="lineno">  248</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_pos &gt;= 0 &amp;&amp; end_pos &lt;= len);</div>
<div class="line"><span class="lineno">  249</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_pos &gt;= start_pos);</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a>(ctx, -1, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) start_pos, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) end_pos);</div>
<div class="line"><span class="lineno">  252</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  253</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1512c1813016de46ee80d93f9a0704fb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1512c1813016de46ee80d93f9a0704fb">duk_push_this</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_this(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18171">duktape-1.5.2/src-noline/duktape.c:18171</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18171">duk_push_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duk_substring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duk_to_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duk_to_int_clamped()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a4c1c34ef9962a6b55e171f7702b3c49a" name="a4c1c34ef9962a6b55e171f7702b3c49a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c1c34ef9962a6b55e171f7702b3c49a">&#9670;&#160;</a></span>duk_bi_string_prototype_substring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_substring </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00179">179</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  179</span>                                                                           {</div>
<div class="line"><span class="lineno">  180</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h;</div>
<div class="line"><span class="lineno">  181</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> start_pos, end_pos;</div>
<div class="line"><span class="lineno">  182</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> len;</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    h = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno">  185</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  186</span>    len = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="comment">/* [ start end str ] */</span></div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    start_pos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 0, 0, len);</div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 1)) {</div>
<div class="line"><span class="lineno">  192</span>        end_pos = len;</div>
<div class="line"><span class="lineno">  193</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  194</span>        end_pos = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 1, 0, len);</div>
<div class="line"><span class="lineno">  195</span>    }</div>
<div class="line"><span class="lineno">  196</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_pos &gt;= 0 &amp;&amp; start_pos &lt;= len);</div>
<div class="line"><span class="lineno">  197</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_pos &gt;= 0 &amp;&amp; end_pos &lt;= len);</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">if</span> (start_pos &gt; end_pos) {</div>
<div class="line"><span class="lineno">  200</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> tmp = start_pos;</div>
<div class="line"><span class="lineno">  201</span>        start_pos = end_pos;</div>
<div class="line"><span class="lineno">  202</span>        end_pos = tmp;</div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_pos &gt;= start_pos);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a>(ctx, -1, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) start_pos, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) end_pos);</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  209</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duk_substring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duk_to_int_clamped()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="afddcb5162c3dfcfc3b7ea8e5318315cd" name="afddcb5162c3dfcfc3b7ea8e5318315cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afddcb5162c3dfcfc3b7ea8e5318315cd">&#9670;&#160;</a></span>duk_bi_string_prototype_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_to_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l00096">96</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   96</span>                                                                           {</div>
<div class="line"><span class="lineno">   97</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1512c1813016de46ee80d93f9a0704fb">duk_push_this</a>(ctx);</div>
<div class="line"><span class="lineno">  100</span>    tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  101</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a770ba3e37db78ca2d94032c47bddb9a6">DUK_TVAL_IS_STRING</a>(tv)) {</div>
<div class="line"><span class="lineno">  104</span>        <span class="comment">/* return as is */</span></div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  106</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv)) {</div>
<div class="line"><span class="lineno">  107</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv);</div>
<div class="line"><span class="lineno">  108</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>        <span class="comment">/* Must be a &quot;string object&quot;, i.e. class &quot;String&quot; */</span></div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acde769ef46c9a27fec925b1345d342ae">DUK_HOBJECT_GET_CLASS_NUMBER</a>(h) != <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae1452c73af06f9928aacc02ab9db951b">DUK_HOBJECT_CLASS_STRING</a>) {</div>
<div class="line"><span class="lineno">  112</span>            <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno">  113</span>        }</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, -1, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a888d08439b9e5acb8d2c173e02fc166a">DUK_STRIDX_INT_VALUE</a>);</div>
<div class="line"><span class="lineno">  116</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a>(ctx, -1));</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  119</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno">  121</span>    }</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>    <span class="comment">/* never here, but fall through */</span></div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span> type_error:</div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  127</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2a196d761c3a7789fcc2ac3cf61ad601"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a></div><div class="ttdeci">#define DUK_TVAL_GET_OBJECT(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">duktape-1.5.2/src-noline/duktape.c:787</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3e6da5a54e90086602a9d6f44997d640"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a></div><div class="ttdeci">#define DUK_TVAL_IS_OBJECT(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">duktape-1.5.2/src-noline/duktape.c:811</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a770ba3e37db78ca2d94032c47bddb9a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a770ba3e37db78ca2d94032c47bddb9a6">DUK_TVAL_IS_STRING</a></div><div class="ttdeci">#define DUK_TVAL_IS_STRING(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00810">duktape-1.5.2/src-noline/duktape.c:810</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aae4918883d66d1a21907da22171fb1c6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_tval * duk_require_tval(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duktape-1.5.2/src-noline/duktape.c:15149</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acde769ef46c9a27fec925b1345d342ae"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acde769ef46c9a27fec925b1345d342ae">DUK_HOBJECT_GET_CLASS_NUMBER</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_CLASS_NUMBER(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04675">duktape-1.5.2/src-noline/duktape.c:4675</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a56f85f8e2627dbcfa5575c3b57ad652b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a></div><div class="ttdeci">#define DUK_RET_TYPE_ERROR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">duktape-1.5.2/src-noline/duktape.h:361</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04703">DUK_HOBJECT_CLASS_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04675">DUK_HOBJECT_GET_CLASS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duk_is_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18171">duk_push_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01173">DUK_STRIDX_INT_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00810">DUK_TVAL_IS_STRING</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="af089bb036b4d05e9ec0661d27f5d2964" name="af089bb036b4d05e9ec0661d27f5d2964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af089bb036b4d05e9ec0661d27f5d2964">&#9670;&#160;</a></span>duk_bi_string_prototype_trim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_string_prototype_trim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html#l01250">1250</a> of file <a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c_source.html">duktape-1.5.2/src-separate/duk_bi_string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1250</span>                                                                      {</div>
<div class="line"><span class="lineno"> 1251</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1252</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa080098098debb1636b604bd4359d575">duk_push_this_coercible_to_string</a>(ctx);</div>
<div class="line"><span class="lineno"> 1253</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a850ded34001ccedd2eb05fcba0c58cbd">duk_trim</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1254</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 1255</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1256</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a850ded34001ccedd2eb05fcba0c58cbd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a850ded34001ccedd2eb05fcba0c58cbd">duk_trim</a></div><div class="ttdeci">DUK_EXTERNAL void duk_trim(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19768">duktape-1.5.2/src-noline/duktape.c:19768</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">DUK_ASSERT_TOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18195">duk_push_this_coercible_to_string()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19768">duk_trim()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1e03628437b642463b7b6eb98fac43e1.html">vendor</a></li><li class="navelem"><a class="el" href="dir_84591d08937a968859b7757c3b203700.html">civetweb</a></li><li class="navelem"><a class="el" href="dir_34c971402fa1824d9c500953fc75cb63.html">third_party</a></li><li class="navelem"><a class="el" href="dir_463c33e0ae291ddbfec061ad19861570.html">duktape-1.5.2</a></li><li class="navelem"><a class="el" href="dir_e6ae68e9a9f72807e14f61863ae5cc0a.html">src-separate</a></li><li class="navelem"><a class="el" href="duktape-1_85_82_2src-separate_2duk__bi__string_8c.html">duk_bi_string.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
