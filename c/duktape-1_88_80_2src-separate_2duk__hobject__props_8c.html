<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Github User Fetcher: duk_hobject_props.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Github User Fetcher<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">C/C++ Application with Server and GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('duktape-1_88_80_2src-separate_2duk__hobject__props_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">duk_hobject_props.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="duktape-1_88_80_2src-separate_2duk__internal_8h_source.html">duk_internal.h</a>&quot;</code><br />
</div>
<p><a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0c2007579f63eb1bbcaad5f491159557" id="r_a0c2007579f63eb1bbcaad5f491159557"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a236c56414436d1429cc0253986b40d62">DUK_HSTRING_NO_ARRAY_INDEX</a></td></tr>
<tr class="separator:a0c2007579f63eb1bbcaad5f491159557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6286b0f2c1cfd532a5f7047877afec54" id="r_a6286b0f2c1cfd532a5f7047877afec54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(hash,  h_size)&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9d8e7a838a03b56798fb64a6e6db3fca">DUK_HOBJECT_HASH_INITIAL</a>((hash),(h_size))</td></tr>
<tr class="separator:a6286b0f2c1cfd532a5f7047877afec54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d41695de6e417ad8ee1d548fe2c03fd" id="r_a8d41695de6e417ad8ee1d548fe2c03fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(hash)&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1ed6e360826e2b37f9651587d4af9d3f">DUK_HOBJECT_HASH_PROBE_STEP</a>((hash))</td></tr>
<tr class="separator:a8d41695de6e417ad8ee1d548fe2c03fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b856316cf6be3a188fe326c601a6604" id="r_a9b856316cf6be3a188fe326c601a6604"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b856316cf6be3a188fe326c601a6604">DUK__HASH_UNUSED</a>&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47d9372188bd5ae88c402e34949b62f3">DUK_HOBJECT_HASHIDX_UNUSED</a></td></tr>
<tr class="separator:a9b856316cf6be3a188fe326c601a6604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa731720f3ca3ca6d52941e2c782aa2b0" id="r_aa731720f3ca3ca6d52941e2c782aa2b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa731720f3ca3ca6d52941e2c782aa2b0">DUK__HASH_DELETED</a>&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acc58f0419c9614e8ae076d8442c12b55">DUK_HOBJECT_HASHIDX_DELETED</a></td></tr>
<tr class="separator:aa731720f3ca3ca6d52941e2c782aa2b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef2819bab4dfb076e2c0c1ab8abbe717" id="r_aef2819bab4dfb076e2c0c1ab8abbe717"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:aef2819bab4dfb076e2c0c1ab8abbe717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87a8c4290f84e0f8d4b1e87987e4e040" id="r_a87a8c4290f84e0f8d4b1e87987e4e040"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87a8c4290f84e0f8d4b1e87987e4e040">DUK__VALSTACK_PROXY_LOOKUP</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:a87a8c4290f84e0f8d4b1e87987e4e040"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a698c6dae810ac2322c3d92c190280d53" id="r_a698c6dae810ac2322c3d92c190280d53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a698c6dae810ac2322c3d92c190280d53">duk__check_arguments_map_for_get</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *temp_desc)</td></tr>
<tr class="separator:a698c6dae810ac2322c3d92c190280d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e776ca49c709a2cc9cdd6b16d750286" id="r_a0e776ca49c709a2cc9cdd6b16d750286"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e776ca49c709a2cc9cdd6b16d750286">duk__check_arguments_map_for_put</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *temp_desc, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> throw_flag)</td></tr>
<tr class="separator:a0e776ca49c709a2cc9cdd6b16d750286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe72e0663606a8884a99bbe50ed2ffbe" id="r_afe72e0663606a8884a99bbe50ed2ffbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe72e0663606a8884a99bbe50ed2ffbe">duk__check_arguments_map_for_delete</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *temp_desc)</td></tr>
<tr class="separator:afe72e0663606a8884a99bbe50ed2ffbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189bf5afb9ac8c810ffe9333953e16a9" id="r_a189bf5afb9ac8c810ffe9333953e16a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a189bf5afb9ac8c810ffe9333953e16a9">duk__handle_put_array_length_smaller</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, duk_uint32_t old_len, duk_uint32_t new_len, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> force_flag, duk_uint32_t *out_result_len)</td></tr>
<tr class="separator:a189bf5afb9ac8c810ffe9333953e16a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a29efa5165f88eb4891e96a7320d104" id="r_a3a29efa5165f88eb4891e96a7320d104"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a29efa5165f88eb4891e96a7320d104">duk__handle_put_array_length</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:a3a29efa5165f88eb4891e96a7320d104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40cdd9303bf1e8ed2b789b96a58e938" id="r_af40cdd9303bf1e8ed2b789b96a58e938"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af40cdd9303bf1e8ed2b789b96a58e938">duk__get_propdesc</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *out_desc, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> flags)</td></tr>
<tr class="separator:af40cdd9303bf1e8ed2b789b96a58e938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e08d30c98abda4341dd026697ae68c" id="r_aa6e08d30c98abda4341dd026697ae68c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, duk_uint32_t arr_idx, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *out_desc, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> flags)</td></tr>
<tr class="separator:aa6e08d30c98abda4341dd026697ae68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1c43ff4dda58761bcee283534131aa4" id="r_ae1c43ff4dda58761bcee283534131aa4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1c43ff4dda58761bcee283534131aa4">duk__get_old_array_length</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *temp_desc)</td></tr>
<tr class="separator:ae1c43ff4dda58761bcee283534131aa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8f68bcfbc1bf7ab5162b82e783422dd" id="r_ab8f68bcfbc1bf7ab5162b82e783422dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv)</td></tr>
<tr class="separator:ab8f68bcfbc1bf7ab5162b82e783422dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73da7a1cccb15fa2b83f4df268badf2a" id="r_a73da7a1cccb15fa2b83f4df268badf2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv, <a class="el" href="structduk__hstring.html">duk_hstring</a> **out_h)</td></tr>
<tr class="separator:a73da7a1cccb15fa2b83f4df268badf2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6fda73a2a8716acfbd629877d4ba838" id="r_af6fda73a2a8716acfbd629877d4ba838"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6fda73a2a8716acfbd629877d4ba838">duk__key_is_lightfunc_ownprop</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key)</td></tr>
<tr class="separator:af6fda73a2a8716acfbd629877d4ba838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07fa0e3f4569d277ec525956eadb356" id="r_ae07fa0e3f4569d277ec525956eadb356"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae07fa0e3f4569d277ec525956eadb356">duk__get_default_h_size</a> (duk_uint32_t e_size)</td></tr>
<tr class="separator:ae07fa0e3f4569d277ec525956eadb356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a454f4a4dcf2d4dfa749c8e7c99d81f86" id="r_a454f4a4dcf2d4dfa749c8e7c99d81f86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a454f4a4dcf2d4dfa749c8e7c99d81f86">duk__get_min_grow_e</a> (duk_uint32_t e_size)</td></tr>
<tr class="separator:a454f4a4dcf2d4dfa749c8e7c99d81f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7a1fe2471cd8f35b47ae5c7c7d43c6" id="r_a2c7a1fe2471cd8f35b47ae5c7c7d43c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c7a1fe2471cd8f35b47ae5c7c7d43c6">duk__get_min_grow_a</a> (duk_uint32_t a_size)</td></tr>
<tr class="separator:a2c7a1fe2471cd8f35b47ae5c7c7d43c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10edf852bd0f95f83754f0a477416f3" id="r_aa10edf852bd0f95f83754f0a477416f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa10edf852bd0f95f83754f0a477416f3">duk__count_used_e_keys</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:aa10edf852bd0f95f83754f0a477416f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d4488861df17ffd227dfe1a10466c1" id="r_af0d4488861df17ffd227dfe1a10466c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0d4488861df17ffd227dfe1a10466c1">duk__compute_a_stats</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, duk_uint32_t *out_used, duk_uint32_t *out_min_size)</td></tr>
<tr class="separator:af0d4488861df17ffd227dfe1a10466c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2eacd468eb7c3aaa3456cf895745dc" id="r_a6f2eacd468eb7c3aaa3456cf895745dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f2eacd468eb7c3aaa3456cf895745dc">duk__abandon_array_density_check</a> (duk_uint32_t a_used, duk_uint32_t a_size)</td></tr>
<tr class="separator:a6f2eacd468eb7c3aaa3456cf895745dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfe34789f89c4cbe2cc1574e09669698" id="r_acfe34789f89c4cbe2cc1574e09669698"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acfe34789f89c4cbe2cc1574e09669698">duk__abandon_array_slow_check_required</a> (duk_uint32_t arr_idx, duk_uint32_t old_size)</td></tr>
<tr class="separator:acfe34789f89c4cbe2cc1574e09669698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22218a49bd740fa5a47497ce3c547a9" id="r_ae22218a49bd740fa5a47497ce3c547a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae22218a49bd740fa5a47497ce3c547a9">duk_hobject_proxy_check</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hobject.html">duk_hobject</a> **out_target, <a class="el" href="structduk__hobject.html">duk_hobject</a> **out_handler)</td></tr>
<tr class="separator:ae22218a49bd740fa5a47497ce3c547a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70aedf9f40c1604f7b773c1a30954791" id="r_a70aedf9f40c1604f7b773c1a30954791"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hobject.html">duk_hobject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70aedf9f40c1604f7b773c1a30954791">duk_hobject_resolve_proxy_target</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:a70aedf9f40c1604f7b773c1a30954791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad75bcd78c56fd6f6e62cb28ecc423325" id="r_ad75bcd78c56fd6f6e62cb28ecc423325"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad75bcd78c56fd6f6e62cb28ecc423325">duk__proxy_check_prop</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> stridx_trap, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key, <a class="el" href="structduk__hobject.html">duk_hobject</a> **out_target)</td></tr>
<tr class="separator:ad75bcd78c56fd6f6e62cb28ecc423325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a451066618c91472f9df793d04870b7b8" id="r_a451066618c91472f9df793d04870b7b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a451066618c91472f9df793d04870b7b8">duk__realloc_props</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, duk_uint32_t new_e_size, duk_uint32_t new_a_size, duk_uint32_t new_h_size, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> abandon_array)</td></tr>
<tr class="separator:a451066618c91472f9df793d04870b7b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a194d4afbeffa8442ee8152dfce54a58d" id="r_a194d4afbeffa8442ee8152dfce54a58d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a194d4afbeffa8442ee8152dfce54a58d">duk__grow_props_for_new_entry_item</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:a194d4afbeffa8442ee8152dfce54a58d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f28a6dc20ab155914e7ba6a0a812b56" id="r_a9f28a6dc20ab155914e7ba6a0a812b56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f28a6dc20ab155914e7ba6a0a812b56">duk__grow_props_for_array_item</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, duk_uint32_t highest_arr_idx)</td></tr>
<tr class="separator:a9f28a6dc20ab155914e7ba6a0a812b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a504cd329f8e1aed37715da8972fb6f7c" id="r_a504cd329f8e1aed37715da8972fb6f7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:a504cd329f8e1aed37715da8972fb6f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f484a66f29098f6c8a7a48de397df1" id="r_a55f484a66f29098f6c8a7a48de397df1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55f484a66f29098f6c8a7a48de397df1">duk_hobject_compact_props</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:a55f484a66f29098f6c8a7a48de397df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a617a5abde25d36082238ba6c779da1cc" id="r_a617a5abde25d36082238ba6c779da1cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a617a5abde25d36082238ba6c779da1cc">duk_hobject_find_existing_entry</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *e_idx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *h_idx)</td></tr>
<tr class="separator:a617a5abde25d36082238ba6c779da1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673b9ceeb9130ed7ea44e7aae8a56ea7" id="r_a673b9ceeb9130ed7ea44e7aae8a56ea7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a673b9ceeb9130ed7ea44e7aae8a56ea7">duk_hobject_find_existing_entry_tval_ptr</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key)</td></tr>
<tr class="separator:a673b9ceeb9130ed7ea44e7aae8a56ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d624f592bb8ad0082ea754c4e7b328" id="r_a67d624f592bb8ad0082ea754c4e7b328"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67d624f592bb8ad0082ea754c4e7b328">duk_hobject_find_existing_entry_tval_ptr_and_attrs</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *out_attrs)</td></tr>
<tr class="separator:a67d624f592bb8ad0082ea754c4e7b328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ecbb5ab3ebfc0e5b2c944c1bf52278b" id="r_a4ecbb5ab3ebfc0e5b2c944c1bf52278b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ecbb5ab3ebfc0e5b2c944c1bf52278b">duk_hobject_find_existing_array_entry_tval_ptr</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a> i)</td></tr>
<tr class="separator:a4ecbb5ab3ebfc0e5b2c944c1bf52278b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f516582bc333e12262483674371d5ba" id="r_a4f516582bc333e12262483674371d5ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f516582bc333e12262483674371d5ba">duk__alloc_entry_checked</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key)</td></tr>
<tr class="separator:a4f516582bc333e12262483674371d5ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc78a81915be8b03cb3777014329b52f" id="r_afc78a81915be8b03cb3777014329b52f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc78a81915be8b03cb3777014329b52f">duk_hobject_get_internal_value</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_out)</td></tr>
<tr class="separator:afc78a81915be8b03cb3777014329b52f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c76d363b542675feff902618db61f7d" id="r_a2c76d363b542675feff902618db61f7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c76d363b542675feff902618db61f7d">duk_hobject_get_internal_value_string</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:a2c76d363b542675feff902618db61f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a11c8ac838949396f84bf9f60595f4b" id="r_a2a11c8ac838949396f84bf9f60595f4b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a11c8ac838949396f84bf9f60595f4b">duk__lookup_arguments_map</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *temp_desc, <a class="el" href="structduk__hobject.html">duk_hobject</a> **out_map, <a class="el" href="structduk__hobject.html">duk_hobject</a> **out_varenv)</td></tr>
<tr class="separator:a2a11c8ac838949396f84bf9f60595f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbb71022d83eb7ff4b1dd26bfe31c562" id="r_adbb71022d83eb7ff4b1dd26bfe31c562"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *out_desc, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> flags)</td></tr>
<tr class="separator:adbb71022d83eb7ff4b1dd26bfe31c562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3406041a565e860ecee0ed4ba946e7c1" id="r_a3406041a565e860ecee0ed4ba946e7c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3406041a565e860ecee0ed4ba946e7c1">duk__getprop_shallow_fastpath_array_tval</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key)</td></tr>
<tr class="separator:a3406041a565e860ecee0ed4ba946e7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43e8e6ca7cbcc3fa724988f3c39e7122" id="r_a43e8e6ca7cbcc3fa724988f3c39e7122"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43e8e6ca7cbcc3fa724988f3c39e7122">duk__putprop_shallow_fastpath_array_tval</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_val, <a class="el" href="structduk__propdesc.html">duk_propdesc</a> *temp_desc)</td></tr>
<tr class="separator:a43e8e6ca7cbcc3fa724988f3c39e7122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a171173685e8bd5907581054cfdb63463" id="r_a171173685e8bd5907581054cfdb63463"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a171173685e8bd5907581054cfdb63463">duk__getprop_fastpath_bufobj_tval</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key)</td></tr>
<tr class="separator:a171173685e8bd5907581054cfdb63463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8dbd6e748306626201ae4c51a25e489" id="r_ad8dbd6e748306626201ae4c51a25e489"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8dbd6e748306626201ae4c51a25e489">duk__putprop_fastpath_bufobj_tval</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_val)</td></tr>
<tr class="separator:ad8dbd6e748306626201ae4c51a25e489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6765f4aad506c8c78abeab4211b7f844" id="r_a6765f4aad506c8c78abeab4211b7f844"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6765f4aad506c8c78abeab4211b7f844">duk_hobject_getprop</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key)</td></tr>
<tr class="separator:a6765f4aad506c8c78abeab4211b7f844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96c00dcb0a6804437ee3ba824ce9e9a3" id="r_a96c00dcb0a6804437ee3ba824ce9e9a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96c00dcb0a6804437ee3ba824ce9e9a3">duk_hobject_hasprop</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key)</td></tr>
<tr class="separator:a96c00dcb0a6804437ee3ba824ce9e9a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aeae7083225409ac72f20e7f86e3be2" id="r_a8aeae7083225409ac72f20e7f86e3be2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8aeae7083225409ac72f20e7f86e3be2">duk_hobject_hasprop_raw</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key)</td></tr>
<tr class="separator:a8aeae7083225409ac72f20e7f86e3be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a136e0edb9109ee45bb22e772dfddd8c7" id="r_a136e0edb9109ee45bb22e772dfddd8c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a136e0edb9109ee45bb22e772dfddd8c7">duk__to_new_array_length_checked</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr)</td></tr>
<tr class="separator:a136e0edb9109ee45bb22e772dfddd8c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af29ad1e562367c2439a8c906a2e06b25" id="r_af29ad1e562367c2439a8c906a2e06b25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af29ad1e562367c2439a8c906a2e06b25">duk_hobject_putprop</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_val, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> throw_flag)</td></tr>
<tr class="separator:af29ad1e562367c2439a8c906a2e06b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cbfe4b6b55490815c2b8a1b5e57612f" id="r_a6cbfe4b6b55490815c2b8a1b5e57612f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cbfe4b6b55490815c2b8a1b5e57612f">duk_hobject_delprop_raw</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> flags)</td></tr>
<tr class="separator:a6cbfe4b6b55490815c2b8a1b5e57612f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896862dcb9150ed9a5e0347a13a0aab3" id="r_a896862dcb9150ed9a5e0347a13a0aab3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a896862dcb9150ed9a5e0347a13a0aab3">duk_hobject_delprop</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_obj, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *tv_key, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> throw_flag)</td></tr>
<tr class="separator:a896862dcb9150ed9a5e0347a13a0aab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca98f6ca754be4286c93afa511d437a" id="r_aaca98f6ca754be4286c93afa511d437a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaca98f6ca754be4286c93afa511d437a">duk_hobject_define_property_internal</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> flags)</td></tr>
<tr class="separator:aaca98f6ca754be4286c93afa511d437a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7411f402c7cfc8673351a3b7794b6c44" id="r_a7411f402c7cfc8673351a3b7794b6c44"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7411f402c7cfc8673351a3b7794b6c44">duk_hobject_define_property_internal_arridx</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a> arr_idx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> flags)</td></tr>
<tr class="separator:a7411f402c7cfc8673351a3b7794b6c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4969b4f3de459469fa29e4460d3d1d68" id="r_a4969b4f3de459469fa29e4460d3d1d68"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4969b4f3de459469fa29e4460d3d1d68">duk_hobject_define_accessor_internal</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="structduk__hobject.html">duk_hobject</a> *getter, <a class="el" href="structduk__hobject.html">duk_hobject</a> *setter, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> propflags)</td></tr>
<tr class="separator:a4969b4f3de459469fa29e4460d3d1d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4866a2fa7c6b2423f64aaa46642108e" id="r_ad4866a2fa7c6b2423f64aaa46642108e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4866a2fa7c6b2423f64aaa46642108e">duk_hobject_set_length</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, duk_uint32_t length)</td></tr>
<tr class="separator:ad4866a2fa7c6b2423f64aaa46642108e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21499ead2f48da6d75ba97456faf615a" id="r_a21499ead2f48da6d75ba97456faf615a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21499ead2f48da6d75ba97456faf615a">duk_hobject_set_length_zero</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:a21499ead2f48da6d75ba97456faf615a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9a390fc94ad5e5d6701b7b2ce07d543" id="r_ab9a390fc94ad5e5d6701b7b2ce07d543"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> duk_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9a390fc94ad5e5d6701b7b2ce07d543">duk_hobject_get_length</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj)</td></tr>
<tr class="separator:ab9a390fc94ad5e5d6701b7b2ce07d543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc83f55ea46e4e0dd48c54586a90334a" id="r_acc83f55ea46e4e0dd48c54586a90334a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc83f55ea46e4e0dd48c54586a90334a">duk_hobject_object_get_own_property_descriptor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:acc83f55ea46e4e0dd48c54586a90334a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a4994010b478b931e2aa54532a13dd" id="r_ab7a4994010b478b931e2aa54532a13dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7a4994010b478b931e2aa54532a13dd">duk_hobject_prepare_property_descriptor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_in, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> *out_defprop_flags, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> *out_idx_value, <a class="el" href="structduk__hobject.html">duk_hobject</a> **out_getter, <a class="el" href="structduk__hobject.html">duk_hobject</a> **out_setter)</td></tr>
<tr class="separator:ab7a4994010b478b931e2aa54532a13dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac30156a503810bc0497c3f3c815587c5" id="r_ac30156a503810bc0497c3f3c815587c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac30156a503810bc0497c3f3c815587c5">duk_hobject_define_property_helper</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> defprop_flags, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="structduk__hstring.html">duk_hstring</a> *key, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_value, <a class="el" href="structduk__hobject.html">duk_hobject</a> *get, <a class="el" href="structduk__hobject.html">duk_hobject</a> *set)</td></tr>
<tr class="separator:ac30156a503810bc0497c3f3c815587c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb8ef6048d33dddf42aa611b4f1bf1b5" id="r_abb8ef6048d33dddf42aa611b4f1bf1b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb8ef6048d33dddf42aa611b4f1bf1b5">duk_hobject_object_ownprop_helper</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> required_desc_flags)</td></tr>
<tr class="separator:abb8ef6048d33dddf42aa611b4f1bf1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ecb47e15a5e726fb93fdb8b35fb5bb" id="r_af5ecb47e15a5e726fb93fdb8b35fb5bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5ecb47e15a5e726fb93fdb8b35fb5bb">duk_hobject_object_seal_freeze_helper</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_freeze)</td></tr>
<tr class="separator:af5ecb47e15a5e726fb93fdb8b35fb5bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a817fd5cf1d8a37fdf069a1e5d22583db" id="r_a817fd5cf1d8a37fdf069a1e5d22583db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a817fd5cf1d8a37fdf069a1e5d22583db">duk_hobject_object_is_sealed_frozen_helper</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, <a class="el" href="structduk__hobject.html">duk_hobject</a> *obj, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_frozen)</td></tr>
<tr class="separator:a817fd5cf1d8a37fdf069a1e5d22583db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa731720f3ca3ca6d52941e2c782aa2b0" name="aa731720f3ca3ca6d52941e2c782aa2b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa731720f3ca3ca6d52941e2c782aa2b0">&#9670;&#160;</a></span>DUK__HASH_DELETED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__HASH_DELETED&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acc58f0419c9614e8ae076d8442c12b55">DUK_HOBJECT_HASHIDX_DELETED</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00060">60</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>.</p>

</div>
</div>
<a id="a6286b0f2c1cfd532a5f7047877afec54" name="a6286b0f2c1cfd532a5f7047877afec54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6286b0f2c1cfd532a5f7047877afec54">&#9670;&#160;</a></span>DUK__HASH_INITIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__HASH_INITIAL</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">hash, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">h_size</span>&#160;)&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9d8e7a838a03b56798fb64a6e6db3fca">DUK_HOBJECT_HASH_INITIAL</a>((hash),(h_size))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00055">55</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>.</p>

</div>
</div>
<a id="a8d41695de6e417ad8ee1d548fe2c03fd" name="a8d41695de6e417ad8ee1d548fe2c03fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d41695de6e417ad8ee1d548fe2c03fd">&#9670;&#160;</a></span>DUK__HASH_PROBE_STEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__HASH_PROBE_STEP</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">hash</span></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1ed6e360826e2b37f9651587d4af9d3f">DUK_HOBJECT_HASH_PROBE_STEP</a>((hash))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00056">56</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>.</p>

</div>
</div>
<a id="a9b856316cf6be3a188fe326c601a6604" name="a9b856316cf6be3a188fe326c601a6604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b856316cf6be3a188fe326c601a6604">&#9670;&#160;</a></span>DUK__HASH_UNUSED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__HASH_UNUSED&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47d9372188bd5ae88c402e34949b62f3">DUK_HOBJECT_HASHIDX_UNUSED</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00059">59</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>.</p>

</div>
</div>
<a id="a0c2007579f63eb1bbcaad5f491159557" name="a0c2007579f63eb1bbcaad5f491159557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c2007579f63eb1bbcaad5f491159557">&#9670;&#160;</a></span>DUK__NO_ARRAY_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__NO_ARRAY_INDEX&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a236c56414436d1429cc0253986b40d62">DUK_HSTRING_NO_ARRAY_INDEX</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">52</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duk__get_old_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02097">duk__getprop_fastpath_bufobj_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01969">duk__getprop_shallow_fastpath_array_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02938">duk__handle_put_array_length_smaller()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02148">duk__putprop_fastpath_bufobj_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02031">duk__putprop_shallow_fastpath_array_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duk__tval_number_to_arr_idx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duk_hobject_define_property_internal()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04634">duk_hobject_define_property_internal_arridx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">duk_hobject_delprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a87a8c4290f84e0f8d4b1e87987e4e040" name="a87a8c4290f84e0f8d4b1e87987e4e040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87a8c4290f84e0f8d4b1e87987e4e040">&#9670;&#160;</a></span>DUK__VALSTACK_PROXY_LOOKUP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__VALSTACK_PROXY_LOOKUP&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00070">70</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">duk__proxy_check_prop()</a>.</p>

</div>
</div>
<a id="aef2819bab4dfb076e2c0c1ab8abbe717" name="aef2819bab4dfb076e2c0c1ab8abbe717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef2819bab4dfb076e2c0c1ab8abbe717">&#9670;&#160;</a></span>DUK__VALSTACK_SPACE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__VALSTACK_SPACE&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">65</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01523">duk__check_arguments_map_for_delete()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01441">duk__check_arguments_map_for_get()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01479">duk__check_arguments_map_for_put()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duk__get_old_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01901">duk__get_propdesc()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03121">duk__handle_put_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02938">duk__handle_put_array_length_smaller()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01384">duk__lookup_arguments_map()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04691">duk_hobject_define_accessor_internal()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duk_hobject_define_property_internal()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">duk_hobject_delprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">duk_hobject_get_own_propdesc()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02707">duk_hobject_hasprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02843">duk_hobject_hasprop_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04773">duk_hobject_object_get_own_property_descriptor()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05869">duk_hobject_object_seal_freeze_helper()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a504cd329f8e1aed37715da8972fb6f7c" name="a504cd329f8e1aed37715da8972fb6f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a504cd329f8e1aed37715da8972fb6f7c">&#9670;&#160;</a></span>duk__abandon_array_checked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__abandon_array_checked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">993</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  993</span>                                                                              {</div>
<div class="line"><span class="lineno">  994</span>    duk_uint32_t new_e_size;</div>
<div class="line"><span class="lineno">  995</span>    duk_uint32_t new_a_size;</div>
<div class="line"><span class="lineno">  996</span>    duk_uint32_t new_h_size;</div>
<div class="line"><span class="lineno">  997</span>    duk_uint32_t e_used;  <span class="comment">/* actually used, non-NULL keys */</span></div>
<div class="line"><span class="lineno">  998</span>    duk_uint32_t a_used;</div>
<div class="line"><span class="lineno">  999</span>    duk_uint32_t a_size;</div>
<div class="line"><span class="lineno"> 1000</span> </div>
<div class="line"><span class="lineno"> 1001</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1002</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1003</span> </div>
<div class="line"><span class="lineno"> 1004</span>    e_used = <a class="code hl_function" href="#aa10edf852bd0f95f83754f0a477416f3">duk__count_used_e_keys</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 1005</span>    <a class="code hl_function" href="#af0d4488861df17ffd227dfe1a10466c1">duk__compute_a_stats</a>(thr, obj, &amp;a_used, &amp;a_size);</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1008</span><span class="comment">     *  Must guarantee all actually used array entries will fit into</span></div>
<div class="line"><span class="lineno"> 1009</span><span class="comment">     *  new entry part.  Add one growth step to ensure we don&#39;t run out</span></div>
<div class="line"><span class="lineno"> 1010</span><span class="comment">     *  of space right away.</span></div>
<div class="line"><span class="lineno"> 1011</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1012</span> </div>
<div class="line"><span class="lineno"> 1013</span>    new_e_size = e_used + a_used;</div>
<div class="line"><span class="lineno"> 1014</span>    new_e_size = new_e_size + <a class="code hl_function" href="#a454f4a4dcf2d4dfa749c8e7c99d81f86">duk__get_min_grow_e</a>(new_e_size);</div>
<div class="line"><span class="lineno"> 1015</span>    new_a_size = 0;</div>
<div class="line"><span class="lineno"> 1016</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_HASH_PART)</span></div>
<div class="line"><span class="lineno"> 1017</span>    new_h_size = <a class="code hl_function" href="#ae07fa0e3f4569d277ec525956eadb356">duk__get_default_h_size</a>(new_e_size);</div>
<div class="line"><span class="lineno"> 1018</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1019</span>    new_h_size = 0;</div>
<div class="line"><span class="lineno"> 1020</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1021</span> </div>
<div class="line"><span class="lineno"> 1022</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;abandon array part for hobject %p, &quot;</span></div>
<div class="line"><span class="lineno"> 1023</span>                       <span class="stringliteral">&quot;array stats before: e_used=%ld, a_used=%ld, a_size=%ld; &quot;</span></div>
<div class="line"><span class="lineno"> 1024</span>                       <span class="stringliteral">&quot;resize to e_size=%ld, a_size=%ld, h_size=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1025</span>                       (<span class="keywordtype">void</span> *) obj, (<span class="keywordtype">long</span>) e_used, (<span class="keywordtype">long</span>) a_used, (<span class="keywordtype">long</span>) a_size,</div>
<div class="line"><span class="lineno"> 1026</span>                       (<span class="keywordtype">long</span>) new_e_size, (<span class="keywordtype">long</span>) new_a_size, (<span class="keywordtype">long</span>) new_h_size));</div>
<div class="line"><span class="lineno"> 1027</span> </div>
<div class="line"><span class="lineno"> 1028</span>    <a class="code hl_function" href="#a451066618c91472f9df793d04870b7b8">duk__realloc_props</a>(thr, obj, new_e_size, new_a_size, new_h_size, 1);</div>
<div class="line"><span class="lineno"> 1029</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a52bc112231cf556000de414bca74c712"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a></div><div class="ttdeci">#define DUK_ASSERT(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">duktape-1.5.2/src-noline/duktape.c:7755</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6c3a2adb6e09294c7e65f69821e5e81a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a></div><div class="ttdeci">#define DUK_DD(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">duktape-1.5.2/src-noline/duktape.c:7496</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa66ca9adc2b4187c5d549a9b117b03d3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a></div><div class="ttdeci">#define DUK_DDPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">duktape-1.5.2/src-noline/duktape.c:7508</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a451066618c91472f9df793d04870b7b8"><div class="ttname"><a href="#a451066618c91472f9df793d04870b7b8">duk__realloc_props</a></div><div class="ttdeci">DUK_LOCAL void duk__realloc_props(duk_hthread *thr, duk_hobject *obj, duk_uint32_t new_e_size, duk_uint32_t new_a_size, duk_uint32_t new_h_size, duk_bool_t abandon_array)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duktape-1.8.0/src-separate/duk_hobject_props.c:488</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a454f4a4dcf2d4dfa749c8e7c99d81f86"><div class="ttname"><a href="#a454f4a4dcf2d4dfa749c8e7c99d81f86">duk__get_min_grow_e</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__get_min_grow_e(duk_uint32_t e_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00193">duktape-1.8.0/src-separate/duk_hobject_props.c:193</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_aa10edf852bd0f95f83754f0a477416f3"><div class="ttname"><a href="#aa10edf852bd0f95f83754f0a477416f3">duk__count_used_e_keys</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__count_used_e_keys(duk_hthread *thr, duk_hobject *obj)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00215">duktape-1.8.0/src-separate/duk_hobject_props.c:215</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_ae07fa0e3f4569d277ec525956eadb356"><div class="ttname"><a href="#ae07fa0e3f4569d277ec525956eadb356">duk__get_default_h_size</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__get_default_h_size(duk_uint32_t e_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00174">duktape-1.8.0/src-separate/duk_hobject_props.c:174</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_af0d4488861df17ffd227dfe1a10466c1"><div class="ttname"><a href="#af0d4488861df17ffd227dfe1a10466c1">duk__compute_a_stats</a></div><div class="ttdeci">DUK_LOCAL void duk__compute_a_stats(duk_hthread *thr, duk_hobject *obj, duk_uint32_t *out_used, duk_uint32_t *out_min_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00237">duktape-1.8.0/src-separate/duk_hobject_props.c:237</a></div></div>
<div class="ttc" id="agmacros_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="gmacros_8h_source.html#l00924">gmacros.h:924</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00237">duk__compute_a_stats()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00215">duk__count_used_e_keys()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00174">duk__get_default_h_size()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00193">duk__get_min_grow_e()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05869">duk_hobject_object_seal_freeze_helper()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a6f2eacd468eb7c3aaa3456cf895745dc" name="a6f2eacd468eb7c3aaa3456cf895745dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f2eacd468eb7c3aaa3456cf895745dc">&#9670;&#160;</a></span>duk__abandon_array_density_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__abandon_array_density_check </td>
          <td>(</td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>a_used</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>a_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00267">267</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  267</span>                                                                                                {</div>
<div class="line"><span class="lineno">  268</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  269</span><span class="comment">     *  Array abandon check; abandon if:</span></div>
<div class="line"><span class="lineno">  270</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  271</span><span class="comment">     *    new_used / new_size &lt; limit</span></div>
<div class="line"><span class="lineno">  272</span><span class="comment">     *    new_used &lt; limit * new_size        || limit is 3 bits fixed point</span></div>
<div class="line"><span class="lineno">  273</span><span class="comment">     *    new_used &lt; limit&#39; / 8 * new_size   || *8</span></div>
<div class="line"><span class="lineno">  274</span><span class="comment">     *    8*new_used &lt; limit&#39; * new_size     || :8</span></div>
<div class="line"><span class="lineno">  275</span><span class="comment">     *    new_used &lt; limit&#39; * (new_size / 8)</span></div>
<div class="line"><span class="lineno">  276</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  277</span><span class="comment">     *  Here, new_used = a_used, new_size = a_size.</span></div>
<div class="line"><span class="lineno">  278</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  279</span><span class="comment">     *  Note: some callers use approximate values for a_used and/or a_size</span></div>
<div class="line"><span class="lineno">  280</span><span class="comment">     *  (e.g. dropping a &#39;+1&#39; term).  This doesn&#39;t affect the usefulness</span></div>
<div class="line"><span class="lineno">  281</span><span class="comment">     *  of the check, but may confuse debugging.</span></div>
<div class="line"><span class="lineno">  282</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">return</span> (a_used &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a31e719eee9d2b6c88568906b67114ad1">DUK_HOBJECT_A_ABANDON_LIMIT</a> * (a_size &gt;&gt; 3));</div>
<div class="line"><span class="lineno">  285</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a31e719eee9d2b6c88568906b67114ad1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a31e719eee9d2b6c88568906b67114ad1">DUK_HOBJECT_A_ABANDON_LIMIT</a></div><div class="ttdeci">#define DUK_HOBJECT_A_ABANDON_LIMIT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05264">duktape-1.5.2/src-noline/duktape.c:5264</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05264">DUK_HOBJECT_A_ABANDON_LIMIT</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01043">duk_hobject_compact_props()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="acfe34789f89c4cbe2cc1574e09669698" name="acfe34789f89c4cbe2cc1574e09669698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfe34789f89c4cbe2cc1574e09669698">&#9670;&#160;</a></span>duk__abandon_array_slow_check_required()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__abandon_array_slow_check_required </td>
          <td>(</td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>arr_idx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>old_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00288">288</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  288</span>                                                                                                         {</div>
<div class="line"><span class="lineno">  289</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  290</span><span class="comment">     *  In a fast check we assume old_size equals old_used (i.e., existing</span></div>
<div class="line"><span class="lineno">  291</span><span class="comment">     *  array is fully dense).</span></div>
<div class="line"><span class="lineno">  292</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  293</span><span class="comment">     *  Slow check if:</span></div>
<div class="line"><span class="lineno">  294</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  295</span><span class="comment">     *    (new_size - old_size) / old_size &gt; limit</span></div>
<div class="line"><span class="lineno">  296</span><span class="comment">     *    new_size - old_size &gt; limit * old_size</span></div>
<div class="line"><span class="lineno">  297</span><span class="comment">     *    new_size &gt; (1 + limit) * old_size        || limit&#39; is 3 bits fixed point</span></div>
<div class="line"><span class="lineno">  298</span><span class="comment">     *    new_size &gt; (1 + (limit&#39; / 8)) * old_size || * 8</span></div>
<div class="line"><span class="lineno">  299</span><span class="comment">     *    8 * new_size &gt; (8 + limit&#39;) * old_size   || : 8</span></div>
<div class="line"><span class="lineno">  300</span><span class="comment">     *    new_size &gt; (8 + limit&#39;) * (old_size / 8)</span></div>
<div class="line"><span class="lineno">  301</span><span class="comment">     *    new_size &gt; limit&#39;&#39; * (old_size / 8)      || limit&#39;&#39; = 9 -&gt; max 25% increase</span></div>
<div class="line"><span class="lineno">  302</span><span class="comment">     *    arr_idx + 1 &gt; limit&#39;&#39; * (old_size / 8)</span></div>
<div class="line"><span class="lineno">  303</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  304</span><span class="comment">     *  This check doesn&#39;t work well for small values, so old_size is rounded</span></div>
<div class="line"><span class="lineno">  305</span><span class="comment">     *  up for the check (and the &#39;+ 1&#39; of arr_idx can be ignored in practice):</span></div>
<div class="line"><span class="lineno">  306</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  307</span><span class="comment">     *    arr_idx &gt; limit&#39;&#39; * ((old_size + 7) / 8)</span></div>
<div class="line"><span class="lineno">  308</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">return</span> (arr_idx &gt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae61d1b9d8f81fe06fb938c03d13d24ef">DUK_HOBJECT_A_FAST_RESIZE_LIMIT</a> * ((old_size + 7) &gt;&gt; 3));</div>
<div class="line"><span class="lineno">  311</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae61d1b9d8f81fe06fb938c03d13d24ef"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae61d1b9d8f81fe06fb938c03d13d24ef">DUK_HOBJECT_A_FAST_RESIZE_LIMIT</a></div><div class="ttdeci">#define DUK_HOBJECT_A_FAST_RESIZE_LIMIT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05260">duktape-1.5.2/src-noline/duktape.c:5260</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05260">DUK_HOBJECT_A_FAST_RESIZE_LIMIT</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a4f516582bc333e12262483674371d5ba" name="a4f516582bc333e12262483674371d5ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f516582bc333e12262483674371d5ba">&#9670;&#160;</a></span>duk__alloc_entry_checked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__alloc_entry_checked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">1252</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1252</span>                                                                                                    {</div>
<div class="line"><span class="lineno"> 1253</span>    duk_uint32_t idx;</div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1256</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1257</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1258</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj) &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 1259</span> </div>
<div class="line"><span class="lineno"> 1260</span><span class="preprocessor">#ifdef DUK_USE_ASSERTIONS</span></div>
<div class="line"><span class="lineno"> 1261</span>    <span class="comment">/* key must not already exist in entry part */</span></div>
<div class="line"><span class="lineno"> 1262</span>    {</div>
<div class="line"><span class="lineno"> 1263</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno"> 1264</span>        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj); i++) {</div>
<div class="line"><span class="lineno"> 1265</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i) != key);</div>
<div class="line"><span class="lineno"> 1266</span>        }</div>
<div class="line"><span class="lineno"> 1267</span>    }</div>
<div class="line"><span class="lineno"> 1268</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj) &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 1271</span>        <span class="comment">/* only need to guarantee 1 more slot, but allocation growth is in chunks */</span></div>
<div class="line"><span class="lineno"> 1272</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;entry part full, allocate space for one more entry&quot;</span>));</div>
<div class="line"><span class="lineno"> 1273</span>        <a class="code hl_function" href="#a194d4afbeffa8442ee8152dfce54a58d">duk__grow_props_for_new_entry_item</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 1274</span>    }</div>
<div class="line"><span class="lineno"> 1275</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj) &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 1276</span>    idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1578f345b6865d38d79618faff9a7d63">DUK_HOBJECT_POSTINC_ENEXT</a>(obj);</div>
<div class="line"><span class="lineno"> 1277</span> </div>
<div class="line"><span class="lineno"> 1278</span>    <span class="comment">/* previous value is assumed to be garbage, so don&#39;t touch it */</span></div>
<div class="line"><span class="lineno"> 1279</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5834598368cfb5ec8a082b93e996988f">DUK_HOBJECT_E_SET_KEY</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, idx, key);</div>
<div class="line"><span class="lineno"> 1280</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6efa0bbb0ab468fe5c7c57719088f682">DUK_HSTRING_INCREF</a>(thr, key);</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_HASH_PART)</span></div>
<div class="line"><span class="lineno"> 1283</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj) &gt; 0)) {</div>
<div class="line"><span class="lineno"> 1284</span>        duk_uint32_t n;</div>
<div class="line"><span class="lineno"> 1285</span>        duk_uint32_t i, step;</div>
<div class="line"><span class="lineno"> 1286</span>        duk_uint32_t *h_base = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae0e450f7792d72dfa458de50d9dbbde2">DUK_HOBJECT_H_GET_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj);</div>
<div class="line"><span class="lineno"> 1287</span> </div>
<div class="line"><span class="lineno"> 1288</span>        n = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj);</div>
<div class="line"><span class="lineno"> 1289</span>        i = <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key), n);</div>
<div class="line"><span class="lineno"> 1290</span>        step = <a class="code hl_define" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key));</div>
<div class="line"><span class="lineno"> 1291</span> </div>
<div class="line"><span class="lineno"> 1292</span>        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 1293</span>            duk_uint32_t t = h_base[i];</div>
<div class="line"><span class="lineno"> 1294</span>            <span class="keywordflow">if</span> (t == <a class="code hl_define" href="#a9b856316cf6be3a188fe326c601a6604">DUK__HASH_UNUSED</a> || t == <a class="code hl_define" href="#aa731720f3ca3ca6d52941e2c782aa2b0">DUK__HASH_DELETED</a>) {</div>
<div class="line"><span class="lineno"> 1295</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;duk__alloc_entry_checked() inserted key into hash part, %ld -&gt; %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1296</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) idx));</div>
<div class="line"><span class="lineno"> 1297</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(i &gt;= 0);  <span class="comment">/* unsigned */</span></div>
<div class="line"><span class="lineno"> 1298</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 1299</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 1300</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 1301</span>                h_base[i] = idx;</div>
<div class="line"><span class="lineno"> 1302</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1303</span>            }</div>
<div class="line"><span class="lineno"> 1304</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;duk__alloc_entry_checked() miss %ld&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno"> 1305</span>            i = (i + step) % n;</div>
<div class="line"><span class="lineno"> 1306</span> </div>
<div class="line"><span class="lineno"> 1307</span>            <span class="comment">/* guaranteed to find an empty slot */</span></div>
<div class="line"><span class="lineno"> 1308</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i != (duk_uint32_t) <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key), <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj)));</div>
<div class="line"><span class="lineno"> 1309</span>        }</div>
<div class="line"><span class="lineno"> 1310</span>    }</div>
<div class="line"><span class="lineno"> 1311</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_HOBJECT_HASH_PART */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1312</span> </div>
<div class="line"><span class="lineno"> 1313</span>    <span class="comment">/* Note: we could return the hash index here too, but it&#39;s not</span></div>
<div class="line"><span class="lineno"> 1314</span><span class="comment">     * needed right now.</span></div>
<div class="line"><span class="lineno"> 1315</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1316</span> </div>
<div class="line"><span class="lineno"> 1317</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 1318</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 1319</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj));</div>
<div class="line"><span class="lineno"> 1320</span>    <span class="keywordflow">return</span> idx;</div>
<div class="line"><span class="lineno"> 1321</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a6615c9d227b3ed8f7a543fd8e3c5e4c9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a></div><div class="ttdeci">#define DUK_UNLIKELY(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">duktape-1.5.2/src-noline/duk_config.h:2518</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_afb6f9b695c07e55f671ddef49a2c0fbd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a></div><div class="ttdeci">duk_uint32_t duk_uint_fast32_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01631">duktape-1.5.2/src-noline/duk_config.h:1631</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1578f345b6865d38d79618faff9a7d63"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1578f345b6865d38d79618faff9a7d63">DUK_HOBJECT_POSTINC_ENEXT</a></div><div class="ttdeci">#define DUK_HOBJECT_POSTINC_ENEXT(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05179">duktape-1.5.2/src-noline/duktape.c:5179</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a27f3be40c7bdaa1631648a94df571d94"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_ENEXT(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">duktape-1.5.2/src-noline/duktape.c:5177</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2db20d2d3b36d8491ed171cf503488bb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a></div><div class="ttdeci">#define DUK_DDD(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">duktape-1.5.2/src-noline/duktape.c:7497</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4fd3ba16ed0f7569ba4717fa1e4df113"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_KEY(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">duktape-1.5.2/src-noline/duktape.c:5080</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5714704a21829a0ddc9de7c966cac20e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a></div><div class="ttdeci">#define DUK_HSTRING_GET_HASH(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">duktape-1.5.2/src-noline/duktape.c:4482</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5834598368cfb5ec8a082b93e996988f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5834598368cfb5ec8a082b93e996988f">DUK_HOBJECT_E_SET_KEY</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SET_KEY(heap, h, i, k)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05097">duktape-1.5.2/src-noline/duktape.c:5097</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5b32dd67a8481ffa404a403c0cfac2a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a></div><div class="ttdeci">#define DUK_ASSERT_DISABLE(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07764">duktape-1.5.2/src-noline/duktape.c:7764</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6efa0bbb0ab468fe5c7c57719088f682"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6efa0bbb0ab468fe5c7c57719088f682">DUK_HSTRING_INCREF</a></div><div class="ttdeci">#define DUK_HSTRING_INCREF(thr, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03820">duktape-1.5.2/src-noline/duktape.c:3820</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7bb67f1ac90abec3c6ece13a1e2a0ee4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_HSIZE(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05183">duktape-1.5.2/src-noline/duktape.c:5183</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa6e5d41ceaba6832e5ede737f0a35fb9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a></div><div class="ttdeci">#define DUK_DDDPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">duktape-1.5.2/src-noline/duktape.c:7509</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_adb942fc1cb079deca59b5322d139462a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_ESIZE(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05175">duktape-1.5.2/src-noline/duktape.c:5175</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae0e450f7792d72dfa458de50d9dbbde2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae0e450f7792d72dfa458de50d9dbbde2">DUK_HOBJECT_H_GET_BASE</a></div><div class="ttdeci">#define DUK_HOBJECT_H_GET_BASE(heap, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05007">duktape-1.5.2/src-noline/duktape.c:5007</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a194d4afbeffa8442ee8152dfce54a58d"><div class="ttname"><a href="#a194d4afbeffa8442ee8152dfce54a58d">duk__grow_props_for_new_entry_item</a></div><div class="ttdeci">DUK_LOCAL void duk__grow_props_for_new_entry_item(duk_hthread *thr, duk_hobject *obj)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00939">duktape-1.8.0/src-separate/duk_hobject_props.c:939</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a6286b0f2c1cfd532a5f7047877afec54"><div class="ttname"><a href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a></div><div class="ttdeci">#define DUK__HASH_INITIAL(hash, h_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00055">duktape-1.8.0/src-separate/duk_hobject_props.c:55</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a8d41695de6e417ad8ee1d548fe2c03fd"><div class="ttname"><a href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a></div><div class="ttdeci">#define DUK__HASH_PROBE_STEP(hash)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00056">duktape-1.8.0/src-separate/duk_hobject_props.c:56</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a9b856316cf6be3a188fe326c601a6604"><div class="ttname"><a href="#a9b856316cf6be3a188fe326c601a6604">DUK__HASH_UNUSED</a></div><div class="ttdeci">#define DUK__HASH_UNUSED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00059">duktape-1.8.0/src-separate/duk_hobject_props.c:59</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_aa731720f3ca3ca6d52941e2c782aa2b0"><div class="ttname"><a href="#aa731720f3ca3ca6d52941e2c782aa2b0">DUK__HASH_DELETED</a></div><div class="ttdeci">#define DUK__HASH_DELETED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00060">duktape-1.8.0/src-separate/duk_hobject_props.c:60</a></div></div>
<div class="ttc" id="astructduk__hthread_html_a1c6d2e1f36b0b7011f0e52343ca5ed05"><div class="ttname"><a href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">duk_hthread::heap</a></div><div class="ttdeci">duk_heap * heap</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duktape-1.5.2/src-noline/duktape.c:6202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00939">duk__grow_props_for_new_entry_item()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00060">DUK__HASH_DELETED</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00055">DUK__HASH_INITIAL</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00056">DUK__HASH_PROBE_STEP</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00059">DUK__HASH_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07764">DUK_ASSERT_DISABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">DUK_HOBJECT_E_GET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05097">DUK_HOBJECT_E_SET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05175">DUK_HOBJECT_GET_ESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05183">DUK_HOBJECT_GET_HSIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05007">DUK_HOBJECT_H_GET_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05179">DUK_HOBJECT_POSTINC_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">DUK_HSTRING_GET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03820">DUK_HSTRING_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duk_hobject_define_property_internal()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="afe72e0663606a8884a99bbe50ed2ffbe" name="afe72e0663606a8884a99bbe50ed2ffbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe72e0663606a8884a99bbe50ed2ffbe">&#9670;&#160;</a></span>duk__check_arguments_map_for_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> void duk__check_arguments_map_for_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>temp_desc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01523">1523</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1523</span>                                                                                                                                  {</div>
<div class="line"><span class="lineno"> 1524</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 1525</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *map;</div>
<div class="line"><span class="lineno"> 1526</span> </div>
<div class="line"><span class="lineno"> 1527</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a>(thr, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae59a606f81742a80cdf6a51096353e0d">DUK_HTHREAD_STRING_INT_MAP</a>(thr), temp_desc, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 1530</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments: key not mapped, no exotic delete behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 1531</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1532</span>    }</div>
<div class="line"><span class="lineno"> 1533</span> </div>
<div class="line"><span class="lineno"> 1534</span>    map = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1535</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(map != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1536</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* map is reachable through obj */</span></div>
<div class="line"><span class="lineno"> 1537</span> </div>
<div class="line"><span class="lineno"> 1538</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; have &#39;map&#39;, delete key %!O from map (if exists)); ignore result&quot;</span>,</div>
<div class="line"><span class="lineno"> 1539</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key));</div>
<div class="line"><span class="lineno"> 1540</span> </div>
<div class="line"><span class="lineno"> 1541</span>    <span class="comment">/* Note: no recursion issue, we can trust &#39;map&#39; to behave */</span></div>
<div class="line"><span class="lineno"> 1542</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaefaa05831189cc781395b1f683c7efd">DUK_HOBJECT_HAS_EXOTIC_BEHAVIOR</a>(map));</div>
<div class="line"><span class="lineno"> 1543</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;map before deletion: %!O&quot;</span>, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) map));</div>
<div class="line"><span class="lineno"> 1544</span>    (void) <a class="code hl_function" href="#a6cbfe4b6b55490815c2b8a1b5e57612f">duk_hobject_delprop_raw</a>(thr, map, key, 0);  <span class="comment">/* ignore result */</span></div>
<div class="line"><span class="lineno"> 1545</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;map after deletion: %!O&quot;</span>, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) map));</div>
<div class="line"><span class="lineno"> 1546</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a11bee89b8ec58fdddc9de03af4475bdc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_require_hobject(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16305">duktape-1.5.2/src-noline/duktape.c:16305</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a23aff6b1a38be73f90b2415a8b4acc62"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a></div><div class="ttdeci">#define DUK_GETDESC_FLAG_PUSH_VALUE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">duktape-1.5.2/src-noline/duktape.c:4892</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a802bd8a4d2388ccfc575a06fef65c247"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a></div><div class="ttdeci">#define DUK_ASSERT_VALSTACK_SPACE(thr, n)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">duktape-1.5.2/src-noline/duktape.c:7811</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaefaa05831189cc781395b1f683c7efd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaefaa05831189cc781395b1f683c7efd">DUK_HOBJECT_HAS_EXOTIC_BEHAVIOR</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_EXOTIC_BEHAVIOR(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04801">duktape-1.5.2/src-noline/duktape.c:4801</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac8da334e24a5f42f252271161d2116fb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a></div><div class="ttdeci">DUK_EXTERNAL void duk_pop(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duktape-1.5.2/src-noline/duktape.c:19146</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae59a606f81742a80cdf6a51096353e0d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae59a606f81742a80cdf6a51096353e0d">DUK_HTHREAD_STRING_INT_MAP</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_INT_MAP(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01205">duktape-1.5.2/src-noline/duktape.c:1205</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a6cbfe4b6b55490815c2b8a1b5e57612f"><div class="ttname"><a href="#a6cbfe4b6b55490815c2b8a1b5e57612f">duk_hobject_delprop_raw</a></div><div class="ttdeci">DUK_INTERNAL duk_bool_t duk_hobject_delprop_raw(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_small_uint_t flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duktape-1.8.0/src-separate/duk_hobject_props.c:4142</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_adbb71022d83eb7ff4b1dd26bfe31c562"><div class="ttname"><a href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a></div><div class="ttdeci">DUK_INTERNAL duk_bool_t duk_hobject_get_own_propdesc(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_propdesc *out_desc, duk_small_uint_t flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">duktape-1.8.0/src-separate/duk_hobject_props.c:1872</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_aef2819bab4dfb076e2c0c1ab8abbe717"><div class="ttname"><a href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a></div><div class="ttdeci">#define DUK__VALSTACK_SPACE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">duktape-1.8.0/src-separate/duk_hobject_props.c:65</a></div></div>
<div class="ttc" id="astructduk__heaphdr_html"><div class="ttname"><a href="structduk__heaphdr.html">duk_heaphdr</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03479">duktape-1.5.2/src-noline/duktape.c:3479</a></div></div>
<div class="ttc" id="astructduk__hobject_html"><div class="ttname"><a href="structduk__hobject.html">duk_hobject</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05328">duktape-1.5.2/src-noline/duktape.c:5328</a></div></div>
<div class="ttc" id="astructduk__hthread_html"><div class="ttname"><a href="structduk__hthread.html">duk_hthread</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06190">duktape-1.5.2/src-noline/duktape.c:6190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">DUK_GETDESC_FLAG_PUSH_VALUE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">duk_hobject_get_own_propdesc()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04801">DUK_HOBJECT_HAS_EXOTIC_BEHAVIOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01205">DUK_HTHREAD_STRING_INT_MAP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16305">duk_require_hobject()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>.</p>

</div>
</div>
<a id="a698c6dae810ac2322c3d92c190280d53" name="a698c6dae810ac2322c3d92c190280d53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698c6dae810ac2322c3d92c190280d53">&#9670;&#160;</a></span>duk__check_arguments_map_for_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__check_arguments_map_for_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>temp_desc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01441">1441</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1441</span>                                                                                                                                     {</div>
<div class="line"><span class="lineno"> 1442</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 1443</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *map;</div>
<div class="line"><span class="lineno"> 1444</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *varenv;</div>
<div class="line"><span class="lineno"> 1445</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *varname;</div>
<div class="line"><span class="lineno"> 1446</span> </div>
<div class="line"><span class="lineno"> 1447</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a2a11c8ac838949396f84bf9f60595f4b">duk__lookup_arguments_map</a>(thr, obj, key, temp_desc, &amp;map, &amp;varenv)) {</div>
<div class="line"><span class="lineno"> 1450</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments: key not mapped, no exotic get behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 1451</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1452</span>    }</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>    <span class="comment">/* [... varname] */</span></div>
<div class="line"><span class="lineno"> 1455</span> </div>
<div class="line"><span class="lineno"> 1456</span>    varname = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada73fbe26eab23a90817c3c2a596950a">duk_require_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1457</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(varname != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1458</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* varname is still reachable */</span></div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments object automatic getvar for a bound variable; &quot;</span></div>
<div class="line"><span class="lineno"> 1461</span>                         <span class="stringliteral">&quot;key=%!O, varname=%!O&quot;</span>,</div>
<div class="line"><span class="lineno"> 1462</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key,</div>
<div class="line"><span class="lineno"> 1463</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) varname));</div>
<div class="line"><span class="lineno"> 1464</span> </div>
<div class="line"><span class="lineno"> 1465</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0473e58e8e53745c26233762335c5fc8">duk_js_getvar_envrec</a>(thr, varenv, varname, 1 <span class="comment">/*throw*/</span>);</div>
<div class="line"><span class="lineno"> 1466</span> </div>
<div class="line"><span class="lineno"> 1467</span>    <span class="comment">/* [... value this_binding] */</span></div>
<div class="line"><span class="lineno"> 1468</span> </div>
<div class="line"><span class="lineno"> 1469</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 1470</span> </div>
<div class="line"><span class="lineno"> 1471</span>    <span class="comment">/* leave result on stack top */</span></div>
<div class="line"><span class="lineno"> 1472</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1473</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0473e58e8e53745c26233762335c5fc8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0473e58e8e53745c26233762335c5fc8">duk_js_getvar_envrec</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_js_getvar_envrec(duk_hthread *thr, duk_hobject *env, duk_hstring *name, duk_bool_t throw_flag)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l72371">duktape-1.5.2/src-noline/duktape.c:72371</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ada73fbe26eab23a90817c3c2a596950a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada73fbe26eab23a90817c3c2a596950a">duk_require_hstring</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hstring * duk_require_hstring(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16292">duktape-1.5.2/src-noline/duktape.c:16292</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a2a11c8ac838949396f84bf9f60595f4b"><div class="ttname"><a href="#a2a11c8ac838949396f84bf9f60595f4b">duk__lookup_arguments_map</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__lookup_arguments_map(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_propdesc *temp_desc, duk_hobject **out_map, duk_hobject **out_varenv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01384">duktape-1.8.0/src-separate/duk_hobject_props.c:1384</a></div></div>
<div class="ttc" id="astructduk__hstring_html"><div class="ttname"><a href="structduk__hstring.html">duk_hstring</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04546">duktape-1.5.2/src-noline/duktape.c:4546</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01384">duk__lookup_arguments_map()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l72371">duk_js_getvar_envrec()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16292">duk_require_hstring()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>.</p>

</div>
</div>
<a id="a0e776ca49c709a2cc9cdd6b16d750286" name="a0e776ca49c709a2cc9cdd6b16d750286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e776ca49c709a2cc9cdd6b16d750286">&#9670;&#160;</a></span>duk__check_arguments_map_for_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> void duk__check_arguments_map_for_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>temp_desc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>throw_flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01479">1479</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1479</span>                                                                                                                                                      {</div>
<div class="line"><span class="lineno"> 1480</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 1481</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *map;</div>
<div class="line"><span class="lineno"> 1482</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *varenv;</div>
<div class="line"><span class="lineno"> 1483</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *varname;</div>
<div class="line"><span class="lineno"> 1484</span> </div>
<div class="line"><span class="lineno"> 1485</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 1486</span> </div>
<div class="line"><span class="lineno"> 1487</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a2a11c8ac838949396f84bf9f60595f4b">duk__lookup_arguments_map</a>(thr, obj, key, temp_desc, &amp;map, &amp;varenv)) {</div>
<div class="line"><span class="lineno"> 1488</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments: key not mapped, no exotic put behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 1489</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1490</span>    }</div>
<div class="line"><span class="lineno"> 1491</span> </div>
<div class="line"><span class="lineno"> 1492</span>    <span class="comment">/* [... put_value varname] */</span></div>
<div class="line"><span class="lineno"> 1493</span> </div>
<div class="line"><span class="lineno"> 1494</span>    varname = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada73fbe26eab23a90817c3c2a596950a">duk_require_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1495</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(varname != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1496</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* varname is still reachable */</span></div>
<div class="line"><span class="lineno"> 1497</span> </div>
<div class="line"><span class="lineno"> 1498</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments object automatic putvar for a bound variable; &quot;</span></div>
<div class="line"><span class="lineno"> 1499</span>                         <span class="stringliteral">&quot;key=%!O, varname=%!O, value=%!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 1500</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key,</div>
<div class="line"><span class="lineno"> 1501</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) varname,</div>
<div class="line"><span class="lineno"> 1502</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 1503</span> </div>
<div class="line"><span class="lineno"> 1504</span>    <span class="comment">/* [... put_value] */</span></div>
<div class="line"><span class="lineno"> 1505</span> </div>
<div class="line"><span class="lineno"> 1506</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1507</span><span class="comment">     *  Note: although arguments object variable mappings are only established</span></div>
<div class="line"><span class="lineno"> 1508</span><span class="comment">     *  for non-strict functions (and a call to a non-strict function created</span></div>
<div class="line"><span class="lineno"> 1509</span><span class="comment">     *  the arguments object in question), an inner strict function may be doing</span></div>
<div class="line"><span class="lineno"> 1510</span><span class="comment">     *  the actual property write.  Hence the throw_flag applied here comes from</span></div>
<div class="line"><span class="lineno"> 1511</span><span class="comment">     *  the property write call.</span></div>
<div class="line"><span class="lineno"> 1512</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1513</span> </div>
<div class="line"><span class="lineno"> 1514</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1ea8f329a2fdc51e4d7c96fcfb960623">duk_js_putvar_envrec</a>(thr, varenv, varname, <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1), throw_flag);</div>
<div class="line"><span class="lineno"> 1515</span> </div>
<div class="line"><span class="lineno"> 1516</span>    <span class="comment">/* [... put_value] */</span></div>
<div class="line"><span class="lineno"> 1517</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1ea8f329a2fdc51e4d7c96fcfb960623"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1ea8f329a2fdc51e4d7c96fcfb960623">duk_js_putvar_envrec</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_js_putvar_envrec(duk_hthread *thr, duk_hobject *env, duk_hstring *name, duk_tval *val, duk_bool_t strict)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l72500">duktape-1.5.2/src-noline/duktape.c:72500</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aae4918883d66d1a21907da22171fb1c6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_tval * duk_require_tval(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duktape-1.5.2/src-noline/duktape.c:15149</a></div></div>
<div class="ttc" id="astructduk__tval__struct_html"><div class="ttname"><a href="structduk__tval__struct.html">duk_tval_struct</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00616">duktape-1.5.2/src-noline/duktape.c:616</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01384">duk__lookup_arguments_map()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l72500">duk_js_putvar_envrec()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16292">duk_require_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="af0d4488861df17ffd227dfe1a10466c1" name="af0d4488861df17ffd227dfe1a10466c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d4488861df17ffd227dfe1a10466c1">&#9670;&#160;</a></span>duk__compute_a_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__compute_a_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t *</td>          <td class="paramname"><span class="paramname"><em>out_used</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t *</td>          <td class="paramname"><span class="paramname"><em>out_min_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00237">237</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  237</span>                                                                                                                            {</div>
<div class="line"><span class="lineno">  238</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno">  239</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> used = 0;</div>
<div class="line"><span class="lineno">  240</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> highest_idx = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a>) -1;  <span class="comment">/* see below */</span></div>
<div class="line"><span class="lineno">  241</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *<a class="code hl_class" href="classa.html">a</a>;</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  244</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_used != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  245</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_min_size != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  246</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <a class="code hl_class" href="classa.html">a</a> = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a311299b96f140e073342851f5854b384">DUK_HOBJECT_A_GET_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj);</div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj); i++) {</div>
<div class="line"><span class="lineno">  250</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv = <a class="code hl_class" href="classa.html">a</a>++;</div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv)) {</div>
<div class="line"><span class="lineno">  252</span>            used++;</div>
<div class="line"><span class="lineno">  253</span>            highest_idx = i;</div>
<div class="line"><span class="lineno">  254</span>        }</div>
<div class="line"><span class="lineno">  255</span>    }</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">/* Initial value for highest_idx is -1 coerced to unsigned.  This</span></div>
<div class="line"><span class="lineno">  258</span><span class="comment">     * is a bit odd, but (highest_idx + 1) will then wrap to 0 below</span></div>
<div class="line"><span class="lineno">  259</span><span class="comment">     * for out_min_size as intended.</span></div>
<div class="line"><span class="lineno">  260</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>    *out_used = used;</div>
<div class="line"><span class="lineno">  263</span>    *out_min_size = highest_idx + 1;  <span class="comment">/* 0 if no used entries */</span></div>
<div class="line"><span class="lineno">  264</span>}</div>
<div class="ttc" id="aclassa_html"><div class="ttname"><a href="classa.html">a</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9170138f330dbcaabfae9d2c59cc9684"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a></div><div class="ttdeci">#define DUK_UNREF(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">duktape-1.5.2/src-noline/duk_config.h:2494</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a311299b96f140e073342851f5854b384"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a311299b96f140e073342851f5854b384">DUK_HOBJECT_A_GET_BASE</a></div><div class="ttdeci">#define DUK_HOBJECT_A_GET_BASE(heap, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05001">duktape-1.5.2/src-noline/duktape.c:5001</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a554cd6556044245d2a08c4b65a1424ff"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_ASIZE(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">duktape-1.5.2/src-noline/duktape.c:5180</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a56ce1ca0ef174e2cce709d285e47f09b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a></div><div class="ttdeci">#define DUK_TVAL_IS_UNUSED(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">duktape-1.5.2/src-noline/duktape.c:794</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05001">DUK_HOBJECT_A_GET_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">DUK_TVAL_IS_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01043">duk_hobject_compact_props()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="aa10edf852bd0f95f83754f0a477416f3" name="aa10edf852bd0f95f83754f0a477416f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa10edf852bd0f95f83754f0a477416f3">&#9670;&#160;</a></span>duk__count_used_e_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__count_used_e_keys </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00215">215</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  215</span>                                                                                  {</div>
<div class="line"><span class="lineno">  216</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno">  217</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> n = 0;</div>
<div class="line"><span class="lineno">  218</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> **e;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    e = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c77043b6516dd5a4439b72b66cb2ec0">DUK_HOBJECT_E_GET_KEY_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj);</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj); i++) {</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">if</span> (*e++) {</div>
<div class="line"><span class="lineno">  226</span>            n++;</div>
<div class="line"><span class="lineno">  227</span>        }</div>
<div class="line"><span class="lineno">  228</span>    }</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">return</span> (duk_uint32_t) n;</div>
<div class="line"><span class="lineno">  230</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2c77043b6516dd5a4439b72b66cb2ec0"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c77043b6516dd5a4439b72b66cb2ec0">DUK_HOBJECT_E_GET_KEY_BASE</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_KEY_BASE(heap, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04988">duktape-1.5.2/src-noline/duktape.c:4988</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04988">DUK_HOBJECT_E_GET_KEY_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00939">duk__grow_props_for_new_entry_item()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01043">duk_hobject_compact_props()</a>.</p>

</div>
</div>
<a id="ae07fa0e3f4569d277ec525956eadb356" name="ae07fa0e3f4569d277ec525956eadb356"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae07fa0e3f4569d277ec525956eadb356">&#9670;&#160;</a></span>duk__get_default_h_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__get_default_h_size </td>
          <td>(</td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>e_size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00174">174</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  174</span>                                                                    {</div>
<div class="line"><span class="lineno">  175</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_size &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a982bd80b8ade0824925b6595d0c5edec">DUK_HOBJECT_MAX_PROPERTIES</a>);</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span> (e_size &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac42784b25b30f952b9d2c58e3a930d9a">DUK_HOBJECT_E_USE_HASH_LIMIT</a>) {</div>
<div class="line"><span class="lineno">  178</span>        duk_uint32_t res;</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>        <span class="comment">/* result: hash_prime(floor(1.2 * e_size)) */</span></div>
<div class="line"><span class="lineno">  181</span>        res = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#add081b8d394737cd2d305367a92db894">duk_util_get_hash_prime</a>(e_size + e_size / <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c7658e9b47ff42793a66bcf75afa98c">DUK_HOBJECT_H_SIZE_DIVISOR</a>);</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        <span class="comment">/* if fails, e_size will be zero = not an issue, except performance-wise */</span></div>
<div class="line"><span class="lineno">  184</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(res == 0 || res &gt; e_size);</div>
<div class="line"><span class="lineno">  185</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  186</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  188</span>    }</div>
<div class="line"><span class="lineno">  189</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6c7658e9b47ff42793a66bcf75afa98c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c7658e9b47ff42793a66bcf75afa98c">DUK_HOBJECT_H_SIZE_DIVISOR</a></div><div class="ttdeci">#define DUK_HOBJECT_H_SIZE_DIVISOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05257">duktape-1.5.2/src-noline/duktape.c:5257</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a982bd80b8ade0824925b6595d0c5edec"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a982bd80b8ade0824925b6595d0c5edec">DUK_HOBJECT_MAX_PROPERTIES</a></div><div class="ttdeci">#define DUK_HOBJECT_MAX_PROPERTIES</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05250">duktape-1.5.2/src-noline/duktape.c:5250</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac42784b25b30f952b9d2c58e3a930d9a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac42784b25b30f952b9d2c58e3a930d9a">DUK_HOBJECT_E_USE_HASH_LIMIT</a></div><div class="ttdeci">#define DUK_HOBJECT_E_USE_HASH_LIMIT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05254">duktape-1.5.2/src-noline/duktape.c:5254</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_add081b8d394737cd2d305367a92db894"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#add081b8d394737cd2d305367a92db894">duk_util_get_hash_prime</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_uint32_t duk_util_get_hash_prime(duk_uint32_t size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l11326">duktape-1.5.2/src-noline/duktape.c:11326</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05254">DUK_HOBJECT_E_USE_HASH_LIMIT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05257">DUK_HOBJECT_H_SIZE_DIVISOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05250">DUK_HOBJECT_MAX_PROPERTIES</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l11326">duk_util_get_hash_prime()</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00939">duk__grow_props_for_new_entry_item()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01043">duk_hobject_compact_props()</a>.</p>

</div>
</div>
<a id="a2c7a1fe2471cd8f35b47ae5c7c7d43c6" name="a2c7a1fe2471cd8f35b47ae5c7c7d43c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c7a1fe2471cd8f35b47ae5c7c7d43c6">&#9670;&#160;</a></span>duk__get_min_grow_a()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__get_min_grow_a </td>
          <td>(</td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>a_size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00204">204</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  204</span>                                                                {</div>
<div class="line"><span class="lineno">  205</span>    duk_uint32_t res;</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) a_size &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a982bd80b8ade0824925b6595d0c5edec">DUK_HOBJECT_MAX_PROPERTIES</a>);</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>    res = (a_size + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0e15d3b83a307a2f4f9a78c9f5b871f6">DUK_HOBJECT_A_MIN_GROW_ADD</a>) / <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaebb74c0519b0ad20be18db5dcf06f40">DUK_HOBJECT_A_MIN_GROW_DIVISOR</a>;</div>
<div class="line"><span class="lineno">  210</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(res &gt;= 1);  <span class="comment">/* important for callers */</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  212</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ab0a71934d59f38f195fea2f353032392"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a></div><div class="ttdeci">size_t duk_size_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01770">duktape-1.5.2/src-noline/duk_config.h:1770</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0e15d3b83a307a2f4f9a78c9f5b871f6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0e15d3b83a307a2f4f9a78c9f5b871f6">DUK_HOBJECT_A_MIN_GROW_ADD</a></div><div class="ttdeci">#define DUK_HOBJECT_A_MIN_GROW_ADD</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05282">duktape-1.5.2/src-noline/duktape.c:5282</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaebb74c0519b0ad20be18db5dcf06f40"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaebb74c0519b0ad20be18db5dcf06f40">DUK_HOBJECT_A_MIN_GROW_DIVISOR</a></div><div class="ttdeci">#define DUK_HOBJECT_A_MIN_GROW_DIVISOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05283">duktape-1.5.2/src-noline/duktape.c:5283</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05282">DUK_HOBJECT_A_MIN_GROW_ADD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05283">DUK_HOBJECT_A_MIN_GROW_DIVISOR</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05250">DUK_HOBJECT_MAX_PROPERTIES</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00969">duk__grow_props_for_array_item()</a>.</p>

</div>
</div>
<a id="a454f4a4dcf2d4dfa749c8e7c99d81f86" name="a454f4a4dcf2d4dfa749c8e7c99d81f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a454f4a4dcf2d4dfa749c8e7c99d81f86">&#9670;&#160;</a></span>duk__get_min_grow_e()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__get_min_grow_e </td>
          <td>(</td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>e_size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00193">193</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  193</span>                                                                {</div>
<div class="line"><span class="lineno">  194</span>    duk_uint32_t res;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_size &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a982bd80b8ade0824925b6595d0c5edec">DUK_HOBJECT_MAX_PROPERTIES</a>);</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    res = (e_size + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae7f055c35434430b90db4a0ac030a201">DUK_HOBJECT_E_MIN_GROW_ADD</a>) / <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa521cb0ad7a89be51f5022776d167ee8">DUK_HOBJECT_E_MIN_GROW_DIVISOR</a>;</div>
<div class="line"><span class="lineno">  199</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(res &gt;= 1);  <span class="comment">/* important for callers */</span></div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  201</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa521cb0ad7a89be51f5022776d167ee8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa521cb0ad7a89be51f5022776d167ee8">DUK_HOBJECT_E_MIN_GROW_DIVISOR</a></div><div class="ttdeci">#define DUK_HOBJECT_E_MIN_GROW_DIVISOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05279">duktape-1.5.2/src-noline/duktape.c:5279</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae7f055c35434430b90db4a0ac030a201"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae7f055c35434430b90db4a0ac030a201">DUK_HOBJECT_E_MIN_GROW_ADD</a></div><div class="ttdeci">#define DUK_HOBJECT_E_MIN_GROW_ADD</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05278">duktape-1.5.2/src-noline/duktape.c:5278</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05278">DUK_HOBJECT_E_MIN_GROW_ADD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05279">DUK_HOBJECT_E_MIN_GROW_DIVISOR</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05250">DUK_HOBJECT_MAX_PROPERTIES</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00939">duk__grow_props_for_new_entry_item()</a>.</p>

</div>
</div>
<a id="ae1c43ff4dda58761bcee283534131aa4" name="ae1c43ff4dda58761bcee283534131aa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1c43ff4dda58761bcee283534131aa4">&#9670;&#160;</a></span>duk__get_old_array_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__get_old_array_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>temp_desc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">2864</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2864</span>                                                                                                              {</div>
<div class="line"><span class="lineno"> 2865</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 2866</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 2867</span>    duk_uint32_t res;</div>
<div class="line"><span class="lineno"> 2868</span> </div>
<div class="line"><span class="lineno"> 2869</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 2870</span> </div>
<div class="line"><span class="lineno"> 2871</span>    <span class="comment">/* This function is only called for objects with array exotic behavior.</span></div>
<div class="line"><span class="lineno"> 2872</span><span class="comment">     * The [[DefineOwnProperty]] algorithm for arrays requires that</span></div>
<div class="line"><span class="lineno"> 2873</span><span class="comment">     * &#39;length&#39; can never have a value outside the unsigned 32-bit range,</span></div>
<div class="line"><span class="lineno"> 2874</span><span class="comment">     * attempt to write such a value is a RangeError.  Here we can thus</span></div>
<div class="line"><span class="lineno"> 2875</span><span class="comment">     * assert for this.  When Duktape internals go around the official</span></div>
<div class="line"><span class="lineno"> 2876</span><span class="comment">     * property write interface (doesn&#39;t happen often) this assumption is</span></div>
<div class="line"><span class="lineno"> 2877</span><span class="comment">     * easy to accidentally break, so such code must be written carefully.</span></div>
<div class="line"><span class="lineno"> 2878</span><span class="comment">     * See test-bi-array-push-maxlen.js.</span></div>
<div class="line"><span class="lineno"> 2879</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2880</span> </div>
<div class="line"><span class="lineno"> 2881</span>    rc = <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr), <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>, temp_desc, 0 <span class="comment">/*flags*/</span>);  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 2882</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 2883</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);  <span class="comment">/* arrays MUST have a &#39;length&#39; property */</span></div>
<div class="line"><span class="lineno"> 2884</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(temp_desc-&gt;<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 2885</span> </div>
<div class="line"><span class="lineno"> 2886</span>    tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, temp_desc-&gt;<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 2887</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));  <span class="comment">/* array &#39;length&#39; is always a number, as we coerce it */</span></div>
<div class="line"><span class="lineno"> 2888</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acd5944082624896104ade7ec0673e939">DUK_TVAL_GET_NUMBER</a>(tv) &gt;= 0.0);</div>
<div class="line"><span class="lineno"> 2889</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acd5944082624896104ade7ec0673e939">DUK_TVAL_GET_NUMBER</a>(tv) &lt;= (<span class="keywordtype">double</span>) 0xffffffffUL);</div>
<div class="line"><span class="lineno"> 2890</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) (duk_uint32_t) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acd5944082624896104ade7ec0673e939">DUK_TVAL_GET_NUMBER</a>(tv) == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acd5944082624896104ade7ec0673e939">DUK_TVAL_GET_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno"> 2891</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 2892</span>    <span class="comment">/* Downgrade checks are not made everywhere, so &#39;length&#39; is not always</span></div>
<div class="line"><span class="lineno"> 2893</span><span class="comment">     * a fastint (it is a number though).  This can be removed once length</span></div>
<div class="line"><span class="lineno"> 2894</span><span class="comment">     * is always guaranteed to be a fastint.</span></div>
<div class="line"><span class="lineno"> 2895</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2896</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(DUK_TVAL_IS_FASTINT(tv) || <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8d8b5d01641ce05598f17b1f50ad5d8d">DUK_TVAL_IS_DOUBLE</a>(tv));</div>
<div class="line"><span class="lineno"> 2897</span>    <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv)) {</div>
<div class="line"><span class="lineno"> 2898</span>        res = (duk_uint32_t) DUK_TVAL_GET_FASTINT_U32(tv);</div>
<div class="line"><span class="lineno"> 2899</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2900</span>        res = (duk_uint32_t) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed61a1cbad3fa128471de0da27bb4ada">DUK_TVAL_GET_DOUBLE</a>(tv);</div>
<div class="line"><span class="lineno"> 2901</span>    }</div>
<div class="line"><span class="lineno"> 2902</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2903</span>    res = (duk_uint32_t) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acd5944082624896104ade7ec0673e939">DUK_TVAL_GET_NUMBER</a>(tv);</div>
<div class="line"><span class="lineno"> 2904</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_FASTINT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2905</span> </div>
<div class="line"><span class="lineno"> 2906</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 2907</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a63e15ff4dd1c9ad036a030a80346cdc3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a></div><div class="ttdeci">double duk_double_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01877">duktape-1.5.2/src-noline/duk_config.h:1877</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_af32ca4c30431e819676401ce2b11c2e7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></div><div class="ttdeci">duk_small_int_t duk_bool_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01825">duktape-1.5.2/src-noline/duk_config.h:1825</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a120c58805068a35f79222a10bc73f165"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a></div><div class="ttdeci">#define DUK_TVAL_IS_NUMBER(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">duktape-1.5.2/src-noline/duktape.c:805</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2eb0ddd26878c9e6e7c6d3e9fdb86e4f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_VALUE_TVAL_PTR(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">duktape-1.5.2/src-noline/duktape.c:5085</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8d8b5d01641ce05598f17b1f50ad5d8d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8d8b5d01641ce05598f17b1f50ad5d8d">DUK_TVAL_IS_DOUBLE</a></div><div class="ttdeci">#define DUK_TVAL_IS_DOUBLE(v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00806">duktape-1.5.2/src-noline/duktape.c:806</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acd5944082624896104ade7ec0673e939"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acd5944082624896104ade7ec0673e939">DUK_TVAL_GET_NUMBER</a></div><div class="ttdeci">#define DUK_TVAL_GET_NUMBER(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00776">duktape-1.5.2/src-noline/duktape.c:776</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_adb697ff71db1fabd8005b7eed482833b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_LENGTH(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">duktape-1.5.2/src-noline/duktape.c:1136</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aed61a1cbad3fa128471de0da27bb4ada"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed61a1cbad3fa128471de0da27bb4ada">DUK_TVAL_GET_DOUBLE</a></div><div class="ttdeci">#define DUK_TVAL_GET_DOUBLE(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00777">duktape-1.5.2/src-noline/duktape.c:777</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a0c2007579f63eb1bbcaad5f491159557"><div class="ttname"><a href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a></div><div class="ttdeci">#define DUK__NO_ARRAY_INDEX</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">duktape-1.8.0/src-separate/duk_hobject_props.c:52</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_aa6e08d30c98abda4341dd026697ae68c"><div class="ttname"><a href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a></div><div class="ttdeci">DUK_LOCAL_DECL duk_bool_t duk__get_own_propdesc_raw(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_uint32_t arr_idx, duk_propdesc *out_desc, duk_small_uint_t flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duktape-1.8.0/src-separate/duk_hobject_props.c:1587</a></div></div>
<div class="ttc" id="astructduk__propdesc_html_a7616514410fd9dcb9f37b54bf7ccb78c"><div class="ttname"><a href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">duk_propdesc::e_idx</a></div><div class="ttdeci">duk_int_t e_idx</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duktape-1.5.2/src-noline/duktape.c:5323</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">DUK_HTHREAD_STRING_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00777">DUK_TVAL_GET_DOUBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00776">DUK_TVAL_GET_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00806">DUK_TVAL_IS_DOUBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03121">duk__handle_put_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02031">duk__putprop_shallow_fastpath_array_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="aa6e08d30c98abda4341dd026697ae68c" name="aa6e08d30c98abda4341dd026697ae68c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6e08d30c98abda4341dd026697ae68c">&#9670;&#160;</a></span>duk__get_own_propdesc_raw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__get_own_propdesc_raw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>arr_idx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>out_desc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">1587</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1587</span>                                                                                                                                                                           {</div>
<div class="line"><span class="lineno"> 1588</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 1589</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 1590</span> </div>
<div class="line"><span class="lineno"> 1591</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;duk_hobject_get_own_propdesc: thr=%p, obj=%p, key=%p, out_desc=%p, flags=%lx, &quot;</span></div>
<div class="line"><span class="lineno"> 1592</span>                         <span class="stringliteral">&quot;arr_idx=%ld (obj -&gt; %!O, key -&gt; %!O)&quot;</span>,</div>
<div class="line"><span class="lineno"> 1593</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) obj, (<span class="keywordtype">void</span> *) key, (<span class="keywordtype">void</span> *) out_desc,</div>
<div class="line"><span class="lineno"> 1594</span>                         (<span class="keywordtype">long</span>) flags, (<span class="keywordtype">long</span>) arr_idx,</div>
<div class="line"><span class="lineno"> 1595</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key));</div>
<div class="line"><span class="lineno"> 1596</span> </div>
<div class="line"><span class="lineno"> 1597</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1598</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1599</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1600</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1601</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1602</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_desc != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1603</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 1604</span> </div>
<div class="line"><span class="lineno"> 1605</span>    <span class="comment">/* XXX: optimize this filling behavior later */</span></div>
<div class="line"><span class="lineno"> 1606</span>    out_desc-&gt;flags = 0;</div>
<div class="line"><span class="lineno"> 1607</span>    out_desc-&gt;get = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1608</span>    out_desc-&gt;set = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1609</span>    out_desc-&gt;e_idx = -1;</div>
<div class="line"><span class="lineno"> 1610</span>    out_desc-&gt;h_idx = -1;</div>
<div class="line"><span class="lineno"> 1611</span>    out_desc-&gt;a_idx = -1;</div>
<div class="line"><span class="lineno"> 1612</span> </div>
<div class="line"><span class="lineno"> 1613</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1614</span><span class="comment">     *  Array part</span></div>
<div class="line"><span class="lineno"> 1615</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1616</span> </div>
<div class="line"><span class="lineno"> 1617</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj) &amp;&amp; arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>) {</div>
<div class="line"><span class="lineno"> 1618</span>        <span class="keywordflow">if</span> (arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 1619</span>            tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;heap, obj, arr_idx);</div>
<div class="line"><span class="lineno"> 1620</span>            <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv)) {</div>
<div class="line"><span class="lineno"> 1621</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; found in array part&quot;</span>));</div>
<div class="line"><span class="lineno"> 1622</span>                <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1623</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv);</div>
<div class="line"><span class="lineno"> 1624</span>                }</div>
<div class="line"><span class="lineno"> 1625</span>                <span class="comment">/* implicit attributes */</span></div>
<div class="line"><span class="lineno"> 1626</span>                out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a> |</div>
<div class="line"><span class="lineno"> 1627</span>                                  <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a> |</div>
<div class="line"><span class="lineno"> 1628</span>                                  <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a>;</div>
<div class="line"><span class="lineno"> 1629</span>                out_desc-&gt;a_idx = arr_idx;</div>
<div class="line"><span class="lineno"> 1630</span>                <span class="keywordflow">goto</span> prop_found;</div>
<div class="line"><span class="lineno"> 1631</span>            }</div>
<div class="line"><span class="lineno"> 1632</span>        }</div>
<div class="line"><span class="lineno"> 1633</span>        <span class="comment">/* assume array part is comprehensive (contains all array indexed elements</span></div>
<div class="line"><span class="lineno"> 1634</span><span class="comment">         * or none of them); hence no need to check the entries part here.</span></div>
<div class="line"><span class="lineno"> 1635</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1636</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; not found as a concrete property (has array part, &quot;</span></div>
<div class="line"><span class="lineno"> 1637</span>                             <span class="stringliteral">&quot;should be there if present)&quot;</span>));</div>
<div class="line"><span class="lineno"> 1638</span>        <span class="keywordflow">goto</span> prop_not_found_concrete;</div>
<div class="line"><span class="lineno"> 1639</span>    }</div>
<div class="line"><span class="lineno"> 1640</span> </div>
<div class="line"><span class="lineno"> 1641</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1642</span><span class="comment">     *  Entries part</span></div>
<div class="line"><span class="lineno"> 1643</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1644</span> </div>
<div class="line"><span class="lineno"> 1645</span>    <a class="code hl_function" href="#a617a5abde25d36082238ba6c779da1cc">duk_hobject_find_existing_entry</a>(thr-&gt;heap, obj, key, &amp;out_desc-&gt;e_idx, &amp;out_desc-&gt;h_idx);</div>
<div class="line"><span class="lineno"> 1646</span>    <span class="keywordflow">if</span> (out_desc-&gt;e_idx &gt;= 0) {</div>
<div class="line"><span class="lineno"> 1647</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx = out_desc-&gt;e_idx;</div>
<div class="line"><span class="lineno"> 1648</span>        out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad2b534c718f0bed901cab77d6ff97cef">DUK_HOBJECT_E_GET_FLAGS</a>(thr-&gt;heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 1649</span>        <span class="keywordflow">if</span> (out_desc-&gt;flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 1650</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; found accessor property in entry part&quot;</span>));</div>
<div class="line"><span class="lineno"> 1651</span>            out_desc-&gt;get = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad51f0d74d82c3d23e28d43b5c6943a0f">DUK_HOBJECT_E_GET_VALUE_GETTER</a>(thr-&gt;heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 1652</span>            out_desc-&gt;set = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4d8c928185f0fc7ff5ba5cf58ef35b99">DUK_HOBJECT_E_GET_VALUE_SETTER</a>(thr-&gt;heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 1653</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1654</span>                <span class="comment">/* a dummy undefined value is pushed to make valstack</span></div>
<div class="line"><span class="lineno"> 1655</span><span class="comment">                 * behavior uniform for caller</span></div>
<div class="line"><span class="lineno"> 1656</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno"> 1657</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e54c2f552800058d06a34af260ead0f">duk_push_undefined</a>(ctx);</div>
<div class="line"><span class="lineno"> 1658</span>            }</div>
<div class="line"><span class="lineno"> 1659</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1660</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; found plain property in entry part&quot;</span>));</div>
<div class="line"><span class="lineno"> 1661</span>            tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 1662</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1663</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv);</div>
<div class="line"><span class="lineno"> 1664</span>            }</div>
<div class="line"><span class="lineno"> 1665</span>        }</div>
<div class="line"><span class="lineno"> 1666</span>        <span class="keywordflow">goto</span> prop_found;</div>
<div class="line"><span class="lineno"> 1667</span>    }</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1670</span><span class="comment">     *  Not found as a concrete property, check whether a String object</span></div>
<div class="line"><span class="lineno"> 1671</span><span class="comment">     *  virtual property matches.</span></div>
<div class="line"><span class="lineno"> 1672</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1673</span> </div>
<div class="line"><span class="lineno"> 1674</span> prop_not_found_concrete:</div>
<div class="line"><span class="lineno"> 1675</span> </div>
<div class="line"><span class="lineno"> 1676</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a38f5df103ffad8e8be01c26f17a67044">DUK_HOBJECT_HAS_EXOTIC_STRINGOBJ</a>(obj)) {</div>
<div class="line"><span class="lineno"> 1677</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;string object exotic property get for key: %!O, arr_idx: %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1678</span>                             (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 1679</span> </div>
<div class="line"><span class="lineno"> 1680</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>) {</div>
<div class="line"><span class="lineno"> 1681</span>            <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_val;</div>
<div class="line"><span class="lineno"> 1682</span> </div>
<div class="line"><span class="lineno"> 1683</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array index exists&quot;</span>));</div>
<div class="line"><span class="lineno"> 1684</span> </div>
<div class="line"><span class="lineno"> 1685</span>            h_val = <a class="code hl_function" href="#a2c76d363b542675feff902618db61f7d">duk_hobject_get_internal_value_string</a>(thr-&gt;heap, obj);</div>
<div class="line"><span class="lineno"> 1686</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val);</div>
<div class="line"><span class="lineno"> 1687</span>            <span class="keywordflow">if</span> (arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h_val)) {</div>
<div class="line"><span class="lineno"> 1688</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; found, array index inside string&quot;</span>));</div>
<div class="line"><span class="lineno"> 1689</span>                <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1690</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad6689700af6d15006d6985ccd6093fef">duk_push_hstring</a>(ctx, h_val);</div>
<div class="line"><span class="lineno"> 1691</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a>(ctx, -1, arr_idx, arr_idx + 1);  <span class="comment">/* [str] -&gt; [substr] */</span></div>
<div class="line"><span class="lineno"> 1692</span>                }</div>
<div class="line"><span class="lineno"> 1693</span>                out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a> |  <span class="comment">/* E5 Section 15.5.5.2 */</span></div>
<div class="line"><span class="lineno"> 1694</span>                                  <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;</div>
<div class="line"><span class="lineno"> 1695</span> </div>
<div class="line"><span class="lineno"> 1696</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj));</div>
<div class="line"><span class="lineno"> 1697</span>                <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be e.g. arguments exotic, since exotic &#39;traits&#39; are mutually exclusive */</span></div>
<div class="line"><span class="lineno"> 1698</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1699</span>                <span class="comment">/* index is above internal string length -&gt; property is fully normal */</span></div>
<div class="line"><span class="lineno"> 1700</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array index outside string -&gt; normal property&quot;</span>));</div>
<div class="line"><span class="lineno"> 1701</span>            }</div>
<div class="line"><span class="lineno"> 1702</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 1703</span>            <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_val;</div>
<div class="line"><span class="lineno"> 1704</span> </div>
<div class="line"><span class="lineno"> 1705</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; found, key is &#39;length&#39;, length exotic behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 1706</span> </div>
<div class="line"><span class="lineno"> 1707</span>            h_val = <a class="code hl_function" href="#a2c76d363b542675feff902618db61f7d">duk_hobject_get_internal_value_string</a>(thr-&gt;heap, obj);</div>
<div class="line"><span class="lineno"> 1708</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1709</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1710</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h_val));</div>
<div class="line"><span class="lineno"> 1711</span>            }</div>
<div class="line"><span class="lineno"> 1712</span>            out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;  <span class="comment">/* E5 Section 15.5.5.1 */</span></div>
<div class="line"><span class="lineno"> 1713</span> </div>
<div class="line"><span class="lineno"> 1714</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj));</div>
<div class="line"><span class="lineno"> 1715</span>            <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be arguments exotic */</span></div>
<div class="line"><span class="lineno"> 1716</span>        }</div>
<div class="line"><span class="lineno"> 1717</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(obj)) {</div>
<div class="line"><span class="lineno"> 1718</span>        <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 1719</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> byte_off;</div>
<div class="line"><span class="lineno"> 1720</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_size;</div>
<div class="line"><span class="lineno"> 1721</span> </div>
<div class="line"><span class="lineno"> 1722</span>        h_bufobj = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) obj;</div>
<div class="line"><span class="lineno"> 1723</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno"> 1724</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;bufferobject property get for key: %!O, arr_idx: %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1725</span>                             (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 1726</span> </div>
<div class="line"><span class="lineno"> 1727</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>) {</div>
<div class="line"><span class="lineno"> 1728</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array index exists&quot;</span>));</div>
<div class="line"><span class="lineno"> 1729</span> </div>
<div class="line"><span class="lineno"> 1730</span>            <span class="comment">/* Careful with wrapping: arr_idx upshift may easily wrap, whereas</span></div>
<div class="line"><span class="lineno"> 1731</span><span class="comment">             * length downshift won&#39;t.</span></div>
<div class="line"><span class="lineno"> 1732</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1733</span>            <span class="keywordflow">if</span> (arr_idx &lt; (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;&gt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>)) {</div>
<div class="line"><span class="lineno"> 1734</span>                byte_off = arr_idx &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;  <span class="comment">/* no wrap assuming h_bufobj-&gt;length is valid */</span></div>
<div class="line"><span class="lineno"> 1735</span>                elem_size = 1 &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 1736</span>                <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1737</span>                    duk_uint8_t *data;</div>
<div class="line"><span class="lineno"> 1738</span> </div>
<div class="line"><span class="lineno"> 1739</span>                    <span class="keywordflow">if</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_bufobj, byte_off + elem_size)) {</div>
<div class="line"><span class="lineno"> 1740</span>                        data = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;heap, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) + h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> + byte_off;</div>
<div class="line"><span class="lineno"> 1741</span>                        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a02c9a7adb2cc34d1aa73bfe7654ccd87">duk_hbufferobject_push_validated_read</a>(ctx, h_bufobj, data, elem_size);</div>
<div class="line"><span class="lineno"> 1742</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1743</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;bufferobject access out of underlying buffer, ignoring (read zero)&quot;</span>));</div>
<div class="line"><span class="lineno"> 1744</span>                        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1745</span>                    }</div>
<div class="line"><span class="lineno"> 1746</span>                }</div>
<div class="line"><span class="lineno"> 1747</span>                out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a> |</div>
<div class="line"><span class="lineno"> 1748</span>                                  <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a> |</div>
<div class="line"><span class="lineno"> 1749</span>                                  <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj));</div>
<div class="line"><span class="lineno"> 1752</span>                <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be e.g. arguments exotic, since exotic &#39;traits&#39; are mutually exclusive */</span></div>
<div class="line"><span class="lineno"> 1753</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1754</span>                <span class="comment">/* index is above internal buffer length -&gt; property is fully normal */</span></div>
<div class="line"><span class="lineno"> 1755</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array index outside buffer -&gt; normal property&quot;</span>));</div>
<div class="line"><span class="lineno"> 1756</span>            }</div>
<div class="line"><span class="lineno"> 1757</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 1758</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; found, key is &#39;length&#39;, length exotic behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 1759</span> </div>
<div class="line"><span class="lineno"> 1760</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1761</span>                <span class="comment">/* Length in elements: take into account shift, but</span></div>
<div class="line"><span class="lineno"> 1762</span><span class="comment">                 * intentionally don&#39;t check the underlying buffer here.</span></div>
<div class="line"><span class="lineno"> 1763</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno"> 1764</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;&gt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>);</div>
<div class="line"><span class="lineno"> 1765</span>            }</div>
<div class="line"><span class="lineno"> 1766</span>            out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;</div>
<div class="line"><span class="lineno"> 1767</span> </div>
<div class="line"><span class="lineno"> 1768</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj));</div>
<div class="line"><span class="lineno"> 1769</span>            <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be arguments exotic */</span></div>
<div class="line"><span class="lineno"> 1770</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4121da520b7e14dd0314834a7792d559">DUK_HTHREAD_STRING_BYTE_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 1771</span>            <span class="comment">/* If neutered must return 0; length is zeroed during</span></div>
<div class="line"><span class="lineno"> 1772</span><span class="comment">             * neutering.</span></div>
<div class="line"><span class="lineno"> 1773</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1774</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1775</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>);</div>
<div class="line"><span class="lineno"> 1776</span>            }</div>
<div class="line"><span class="lineno"> 1777</span>            out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;</div>
<div class="line"><span class="lineno"> 1778</span>            <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be arguments exotic */</span></div>
<div class="line"><span class="lineno"> 1779</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf5e0c594f28422489a653531fc91634">DUK_HTHREAD_STRING_BYTE_OFFSET</a>(thr)) {</div>
<div class="line"><span class="lineno"> 1780</span>            <span class="comment">/* If neutered must return 0; offset is zeroed during</span></div>
<div class="line"><span class="lineno"> 1781</span><span class="comment">             * neutering.</span></div>
<div class="line"><span class="lineno"> 1782</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1783</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1784</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a>);</div>
<div class="line"><span class="lineno"> 1785</span>            }</div>
<div class="line"><span class="lineno"> 1786</span>            out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;</div>
<div class="line"><span class="lineno"> 1787</span>            <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be arguments exotic */</span></div>
<div class="line"><span class="lineno"> 1788</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a01789bdab29bc7250d310ba52598d06e">DUK_HTHREAD_STRING_BYTES_PER_ELEMENT</a>(thr)) {</div>
<div class="line"><span class="lineno"> 1789</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1790</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, 1 &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>);</div>
<div class="line"><span class="lineno"> 1791</span>            }</div>
<div class="line"><span class="lineno"> 1792</span>            out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;</div>
<div class="line"><span class="lineno"> 1793</span>            <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be arguments exotic */</span></div>
<div class="line"><span class="lineno"> 1794</span>        }</div>
<div class="line"><span class="lineno"> 1795</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1d01d6ad1126f24eb80fa196bd69ca1b">DUK_HOBJECT_HAS_EXOTIC_DUKFUNC</a>(obj)) {</div>
<div class="line"><span class="lineno"> 1796</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;duktape/c object exotic property get for key: %!O, arr_idx: %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1797</span>                             (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 1798</span> </div>
<div class="line"><span class="lineno"> 1799</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 1800</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; found, key is &#39;length&#39;, length exotic behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 1801</span> </div>
<div class="line"><span class="lineno"> 1802</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) {</div>
<div class="line"><span class="lineno"> 1803</span>                duk_int16_t func_nargs = ((<a class="code hl_struct" href="structduk__hnativefunction.html">duk_hnativefunction</a> *) obj)-&gt;nargs;</div>
<div class="line"><span class="lineno"> 1804</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, func_nargs == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaae3106313271cfd3f3586b12e1cf254">DUK_HNATIVEFUNCTION_NARGS_VARARGS</a> ? 0 : func_nargs);</div>
<div class="line"><span class="lineno"> 1805</span>            }</div>
<div class="line"><span class="lineno"> 1806</span>            out_desc-&gt;flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>;  <span class="comment">/* not enumerable */</span></div>
<div class="line"><span class="lineno"> 1807</span> </div>
<div class="line"><span class="lineno"> 1808</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj));</div>
<div class="line"><span class="lineno"> 1809</span>            <span class="keywordflow">return</span> 1;  <span class="comment">/* cannot be arguments exotic */</span></div>
<div class="line"><span class="lineno"> 1810</span>        }</div>
<div class="line"><span class="lineno"> 1811</span>    }</div>
<div class="line"><span class="lineno"> 1812</span> </div>
<div class="line"><span class="lineno"> 1813</span>    <span class="comment">/* Array properties have exotic behavior but they are concrete,</span></div>
<div class="line"><span class="lineno"> 1814</span><span class="comment">     * so no special handling here.</span></div>
<div class="line"><span class="lineno"> 1815</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 1816</span><span class="comment">     * Arguments exotic behavior (E5 Section 10.6, [[GetOwnProperty]]</span></div>
<div class="line"><span class="lineno"> 1817</span><span class="comment">     * is only relevant as a post-check implemented below; hence no</span></div>
<div class="line"><span class="lineno"> 1818</span><span class="comment">     * check here.</span></div>
<div class="line"><span class="lineno"> 1819</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1820</span> </div>
<div class="line"><span class="lineno"> 1821</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1822</span><span class="comment">     *  Not found as concrete or virtual</span></div>
<div class="line"><span class="lineno"> 1823</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1824</span> </div>
<div class="line"><span class="lineno"> 1825</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; not found (virtual, entry part, or array part)&quot;</span>));</div>
<div class="line"><span class="lineno"> 1826</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1827</span> </div>
<div class="line"><span class="lineno"> 1828</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1829</span><span class="comment">     *  Found</span></div>
<div class="line"><span class="lineno"> 1830</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 1831</span><span class="comment">     *  Arguments object has exotic post-processing, see E5 Section 10.6,</span></div>
<div class="line"><span class="lineno"> 1832</span><span class="comment">     *  description of [[GetOwnProperty]] variant for arguments.</span></div>
<div class="line"><span class="lineno"> 1833</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1834</span> </div>
<div class="line"><span class="lineno"> 1835</span> prop_found:</div>
<div class="line"><span class="lineno"> 1836</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; property found, checking for arguments exotic post-behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 1837</span> </div>
<div class="line"><span class="lineno"> 1838</span>    <span class="comment">/* Notes:</span></div>
<div class="line"><span class="lineno"> 1839</span><span class="comment">     *  - only numbered indices are relevant, so arr_idx fast reject is good</span></div>
<div class="line"><span class="lineno"> 1840</span><span class="comment">     *    (this is valid unless there are more than 4**32-1 arguments).</span></div>
<div class="line"><span class="lineno"> 1841</span><span class="comment">     *  - since variable lookup has no side effects, this can be skipped if</span></div>
<div class="line"><span class="lineno"> 1842</span><span class="comment">     *    DUK_GETDESC_FLAG_PUSH_VALUE is not set.</span></div>
<div class="line"><span class="lineno"> 1843</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1844</span> </div>
<div class="line"><span class="lineno"> 1845</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1846</span>        arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1847</span>        (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 1848</span>        <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> temp_desc;</div>
<div class="line"><span class="lineno"> 1849</span> </div>
<div class="line"><span class="lineno"> 1850</span>        <span class="comment">/* Magically bound variable cannot be an accessor.  However,</span></div>
<div class="line"><span class="lineno"> 1851</span><span class="comment">         * there may be an accessor property (or a plain property) in</span></div>
<div class="line"><span class="lineno"> 1852</span><span class="comment">         * place with magic behavior removed.  This happens e.g. when</span></div>
<div class="line"><span class="lineno"> 1853</span><span class="comment">         * a magic property is redefined with defineProperty().</span></div>
<div class="line"><span class="lineno"> 1854</span><span class="comment">         * Cannot assert for &quot;not accessor&quot; here.</span></div>
<div class="line"><span class="lineno"> 1855</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1856</span> </div>
<div class="line"><span class="lineno"> 1857</span>        <span class="comment">/* replaces top of stack with new value if necessary */</span></div>
<div class="line"><span class="lineno"> 1858</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>) != 0);</div>
<div class="line"><span class="lineno"> 1859</span> </div>
<div class="line"><span class="lineno"> 1860</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a698c6dae810ac2322c3d92c190280d53">duk__check_arguments_map_for_get</a>(thr, obj, key, &amp;temp_desc)) {</div>
<div class="line"><span class="lineno"> 1861</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; arguments exotic behavior overrides result: %!T -&gt; %!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 1862</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -2),</div>
<div class="line"><span class="lineno"> 1863</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 1864</span>            <span class="comment">/* [... old_result result] -&gt; [... result] */</span></div>
<div class="line"><span class="lineno"> 1865</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52f537d78760f69d0d94d21728279b50">duk_remove</a>(ctx, -2);</div>
<div class="line"><span class="lineno"> 1866</span>        }</div>
<div class="line"><span class="lineno"> 1867</span>    }</div>
<div class="line"><span class="lineno"> 1868</span> </div>
<div class="line"><span class="lineno"> 1869</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1870</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a2b7ba45bf826058a9b7720b5e258efc6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></div><div class="ttdeci">unsigned int duk_small_uint_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01808">duktape-1.5.2/src-noline/duk_config.h:1808</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9dbc0fdd27e7326d21cbf56e6d40d8a5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a></div><div class="ttdeci">duk_int_fast32_t duk_int_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01785">duktape-1.5.2/src-noline/duk_config.h:1785</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ac176f6049a9cba3519cc353c879e614b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a></div><div class="ttdeci">duk_uint_fast32_t duk_uint_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01786">duktape-1.5.2/src-noline/duk_config.h:1786</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a01789bdab29bc7250d310ba52598d06e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a01789bdab29bc7250d310ba52598d06e">DUK_HTHREAD_STRING_BYTES_PER_ELEMENT</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_BYTES_PER_ELEMENT(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01145">duktape-1.5.2/src-noline/duktape.c:1145</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a02c9a7adb2cc34d1aa73bfe7654ccd87"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a02c9a7adb2cc34d1aa73bfe7654ccd87">duk_hbufferobject_push_validated_read</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_hbufferobject_push_validated_read(duk_context *ctx, duk_hbufferobject *h_bufobj, duk_uint8_t *p, duk_small_uint_t elem_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l21855">duktape-1.5.2/src-noline/duktape.c:21855</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a076d5edf64c2befe0ea6e463c3ba0c62"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a></div><div class="ttdeci">#define DUK_HOBJECT_A_GET_VALUE_PTR(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">duktape-1.5.2/src-noline/duktape.c:5093</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1d01d6ad1126f24eb80fa196bd69ca1b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1d01d6ad1126f24eb80fa196bd69ca1b">DUK_HOBJECT_HAS_EXOTIC_DUKFUNC</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_EXOTIC_DUKFUNC(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04820">duktape-1.5.2/src-noline/duktape.c:4820</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a32ae6fee09b79acb415e7cdfdf47b719"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL(h, off)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">duktape-1.5.2/src-noline/duktape.c:5887</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a38f5df103ffad8e8be01c26f17a67044"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a38f5df103ffad8e8be01c26f17a67044">DUK_HOBJECT_HAS_EXOTIC_STRINGOBJ</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_EXOTIC_STRINGOBJ(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04818">duktape-1.5.2/src-noline/duktape.c:4818</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4121da520b7e14dd0314834a7792d559"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4121da520b7e14dd0314834a7792d559">DUK_HTHREAD_STRING_BYTE_LENGTH</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_BYTE_LENGTH(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01139">duktape-1.5.2/src-noline/duktape.c:1139</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4239ee1faf78d2cf5ab8c2ab63a29af0"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAG_VIRTUAL</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04868">duktape-1.5.2/src-noline/duktape.c:4868</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4a5456d628992ecc1075eaf902052bd7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a></div><div class="ttdeci">#define DUK_HSTRING_GET_CHARLEN(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">duktape-1.5.2/src-noline/duktape.c:4509</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4d8c928185f0fc7ff5ba5cf58ef35b99"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4d8c928185f0fc7ff5ba5cf58ef35b99">DUK_HOBJECT_E_GET_VALUE_SETTER</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_VALUE_SETTER(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05088">duktape-1.5.2/src-noline/duktape.c:5088</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4df139157e1506881ed1fb3fb3e1c16d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAG_ACCESSOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04867">duktape-1.5.2/src-noline/duktape.c:4867</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a50dbac8614f67a4a6d575791664ebc07"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a></div><div class="ttdeci">#define DUK_DPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">duktape-1.5.2/src-noline/duktape.c:7507</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a52f537d78760f69d0d94d21728279b50"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52f537d78760f69d0d94d21728279b50">duk_remove</a></div><div class="ttdeci">DUK_EXTERNAL void duk_remove(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15820">duktape-1.5.2/src-noline/duktape.c:15820</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a55b936422ab7344b888bbe0478e83aee"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a></div><div class="ttdeci">#define DUK_ASSERT_HBUFFEROBJECT_VALID(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">duktape-1.5.2/src-noline/duktape.c:5829</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5d2b6c5f1be0d673b074d167c9ff7d4d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_int(duk_context *ctx, duk_int_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duktape-1.5.2/src-noline/duktape.c:17923</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6b5e035b4af29940508e6be18879f8aa"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04819">duktape-1.5.2/src-noline/duktape.c:4819</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6df2138c9a52b2c5e9ee9e3f6089a0f5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_ARRAY_PART(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">duktape-1.5.2/src-noline/duktape.c:4810</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7f4ff3d6f73d0aa5f0eee7b7544f49fd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a></div><div class="ttdeci">#define DUK_HOBJECT_IS_BUFFEROBJECT(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">duktape-1.5.2/src-noline/duktape.c:4776</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8a49801d7f77ad3b6f331d82e3887016"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAG_CONFIGURABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">duktape-1.5.2/src-noline/duktape.c:4866</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a91eb3e96b01fcf7f57063da227eba654"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_tval(duk_context *ctx, duk_tval *tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duktape-1.5.2/src-noline/duktape.c:17835</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a97a6adfc8eb4c12296d3c2a4f8dab0a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_uint(duk_context *ctx, duk_uint_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duktape-1.5.2/src-noline/duktape.c:17956</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9e1528b8eb0a41bc4b37a09a77961e6c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a></div><div class="ttdeci">#define DUK_D(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">duktape-1.5.2/src-noline/duktape.c:7495</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9e54c2f552800058d06a34af260ead0f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e54c2f552800058d06a34af260ead0f">duk_push_undefined</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_undefined(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17848">duktape-1.5.2/src-noline/duktape.c:17848</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa61e22ade6447836753cb34b15d7da21"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAG_WRITABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">duktape-1.5.2/src-noline/duktape.c:4864</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaae3106313271cfd3f3586b12e1cf254"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaae3106313271cfd3f3586b12e1cf254">DUK_HNATIVEFUNCTION_NARGS_VARARGS</a></div><div class="ttdeci">#define DUK_HNATIVEFUNCTION_NARGS_VARARGS</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05785">duktape-1.5.2/src-noline/duktape.c:5785</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaf5e0c594f28422489a653531fc91634"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf5e0c594f28422489a653531fc91634">DUK_HTHREAD_STRING_BYTE_OFFSET</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_BYTE_OFFSET(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01142">duktape-1.5.2/src-noline/duktape.c:1142</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab502fa806af442421cb8cb8b4a66c5dc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a></div><div class="ttdeci">DUK_EXTERNAL void duk_substring(duk_context *ctx, duk_idx_t index, duk_size_t start_offset, duk_size_t end_offset)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duktape-1.5.2/src-noline/duktape.c:19721</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_abfc766de028cafab48f978508ad46274"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAG_ENUMERABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04865">duktape-1.5.2/src-noline/duktape.c:4865</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac6a5fcc6d10ec6461df37058dd49b568"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a></div><div class="ttdeci">#define DUK_HBUFFER_GET_DATA_PTR(heap, x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">duktape-1.5.2/src-noline/duktape.c:6477</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad2b534c718f0bed901cab77d6ff97cef"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad2b534c718f0bed901cab77d6ff97cef">DUK_HOBJECT_E_GET_FLAGS</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_FLAGS(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05090">duktape-1.5.2/src-noline/duktape.c:5090</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad51f0d74d82c3d23e28d43b5c6943a0f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad51f0d74d82c3d23e28d43b5c6943a0f">DUK_HOBJECT_E_GET_VALUE_GETTER</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_VALUE_GETTER(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05086">duktape-1.5.2/src-noline/duktape.c:5086</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad6689700af6d15006d6985ccd6093fef"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad6689700af6d15006d6985ccd6093fef">duk_push_hstring</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_hstring(duk_context *ctx, duk_hstring *h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19044">duktape-1.5.2/src-noline/duktape.c:19044</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_afa34aa8c7f880082f9de613ef2bc3c58"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_tval * duk_get_tval(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duktape-1.5.2/src-noline/duktape.c:15121</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a2c76d363b542675feff902618db61f7d"><div class="ttname"><a href="#a2c76d363b542675feff902618db61f7d">duk_hobject_get_internal_value_string</a></div><div class="ttdeci">DUK_INTERNAL duk_hstring * duk_hobject_get_internal_value_string(duk_heap *heap, duk_hobject *obj)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01349">duktape-1.8.0/src-separate/duk_hobject_props.c:1349</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a617a5abde25d36082238ba6c779da1cc"><div class="ttname"><a href="#a617a5abde25d36082238ba6c779da1cc">duk_hobject_find_existing_entry</a></div><div class="ttdeci">DUK_INTERNAL void duk_hobject_find_existing_entry(duk_heap *heap, duk_hobject *obj, duk_hstring *key, duk_int_t *e_idx, duk_int_t *h_idx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duktape-1.8.0/src-separate/duk_hobject_props.c:1106</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a698c6dae810ac2322c3d92c190280d53"><div class="ttname"><a href="#a698c6dae810ac2322c3d92c190280d53">duk__check_arguments_map_for_get</a></div><div class="ttdeci">DUK_LOCAL_DECL duk_bool_t duk__check_arguments_map_for_get(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_propdesc *temp_desc)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01441">duktape-1.8.0/src-separate/duk_hobject_props.c:1441</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html"><div class="ttname"><a href="structduk__hbufferobject.html">duk_hbufferobject</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05901">duktape-1.5.2/src-noline/duktape.c:5901</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_a048ef6abd4eb20f28dacd8c361bad4f0"><div class="ttname"><a href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">duk_hbufferobject::buf</a></div><div class="ttdeci">duk_hbuffer * buf</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duktape-1.5.2/src-noline/duktape.c:5906</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_a53eb36165e0fa60b0238d5426021cc32"><div class="ttname"><a href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">duk_hbufferobject::offset</a></div><div class="ttdeci">duk_uint_t offset</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duktape-1.5.2/src-noline/duktape.c:5921</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_aaa3fd592a16d517b22eedefbaec1b71e"><div class="ttname"><a href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">duk_hbufferobject::length</a></div><div class="ttdeci">duk_uint_t length</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duktape-1.5.2/src-noline/duktape.c:5922</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_aefc78592db50bd2f5b23ac2b9ec87d25"><div class="ttname"><a href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">duk_hbufferobject::shift</a></div><div class="ttdeci">duk_uint8_t shift</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duktape-1.5.2/src-noline/duktape.c:5923</a></div></div>
<div class="ttc" id="astructduk__hnativefunction_html"><div class="ttname"><a href="structduk__hnativefunction.html">duk_hnativefunction</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05788">duktape-1.5.2/src-noline/duktape.c:5788</a></div></div>
<div class="ttc" id="astructduk__propdesc_html"><div class="ttname"><a href="structduk__propdesc.html">duk_propdesc</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05316">duktape-1.5.2/src-noline/duktape.c:5316</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05325">duk_propdesc::a_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01441">duk__check_arguments_map_for_get()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">DUK_D</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">DUK_DPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">DUK_GETDESC_FLAG_PUSH_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">DUK_HBUFFER_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l21855">duk_hbufferobject_push_validated_read()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05785">DUK_HNATIVEFUNCTION_NARGS_VARARGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05090">DUK_HOBJECT_E_GET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05086">DUK_HOBJECT_E_GET_VALUE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05088">DUK_HOBJECT_E_GET_VALUE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01349">duk_hobject_get_internal_value_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04819">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04820">DUK_HOBJECT_HAS_EXOTIC_DUKFUNC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04818">DUK_HOBJECT_HAS_EXOTIC_STRINGOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01139">DUK_HTHREAD_STRING_BYTE_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01142">DUK_HTHREAD_STRING_BYTE_OFFSET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01145">DUK_HTHREAD_STRING_BYTES_PER_ELEMENT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">DUK_HTHREAD_STRING_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04867">DUK_PROPDESC_FLAG_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04865">DUK_PROPDESC_FLAG_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04868">DUK_PROPDESC_FLAG_VIRTUAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19044">duk_push_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duk_push_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17848">duk_push_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15820">duk_remove()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duk_substring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">DUK_TVAL_IS_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duk_propdesc::get</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05324">duk_propdesc::h_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duk_propdesc::set</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duk__get_old_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01901">duk__get_propdesc()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duk_hobject_define_property_internal()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">duk_hobject_delprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">duk_hobject_get_own_propdesc()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02707">duk_hobject_hasprop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="af40cdd9303bf1e8ed2b789b96a58e938" name="af40cdd9303bf1e8ed2b789b96a58e938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af40cdd9303bf1e8ed2b789b96a58e938">&#9670;&#160;</a></span>duk__get_propdesc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__get_propdesc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>out_desc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01901">1901</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1901</span>                                                                                                                                             {</div>
<div class="line"><span class="lineno"> 1902</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *curr;</div>
<div class="line"><span class="lineno"> 1903</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno"> 1904</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> sanity;</div>
<div class="line"><span class="lineno"> 1905</span> </div>
<div class="line"><span class="lineno"> 1906</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1907</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1908</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1909</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1910</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_desc != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1911</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 1912</span> </div>
<div class="line"><span class="lineno"> 1913</span>    arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03576a42a285f85ab3a7af6ec9f069fc">DUK_HSTRING_GET_ARRIDX_FAST</a>(key);</div>
<div class="line"><span class="lineno"> 1914</span> </div>
<div class="line"><span class="lineno"> 1915</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;duk__get_propdesc: thr=%p, obj=%p, key=%p, out_desc=%p, flags=%lx, &quot;</span></div>
<div class="line"><span class="lineno"> 1916</span>                         <span class="stringliteral">&quot;arr_idx=%ld (obj -&gt; %!O, key -&gt; %!O)&quot;</span>,</div>
<div class="line"><span class="lineno"> 1917</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) obj, (<span class="keywordtype">void</span> *) key, (<span class="keywordtype">void</span> *) out_desc,</div>
<div class="line"><span class="lineno"> 1918</span>                         (<span class="keywordtype">long</span>) flags, (<span class="keywordtype">long</span>) arr_idx,</div>
<div class="line"><span class="lineno"> 1919</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key));</div>
<div class="line"><span class="lineno"> 1920</span> </div>
<div class="line"><span class="lineno"> 1921</span>    curr = obj;</div>
<div class="line"><span class="lineno"> 1922</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1923</span>    sanity = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a958816bc82736204d56315f8ca291b77">DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</a>;</div>
<div class="line"><span class="lineno"> 1924</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 1925</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, curr, key, arr_idx, out_desc, flags)) {</div>
<div class="line"><span class="lineno"> 1926</span>            <span class="comment">/* stack contains value (if requested), &#39;out_desc&#39; is set */</span></div>
<div class="line"><span class="lineno"> 1927</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1928</span>        }</div>
<div class="line"><span class="lineno"> 1929</span> </div>
<div class="line"><span class="lineno"> 1930</span>        <span class="comment">/* not found in &#39;curr&#39;, next in prototype chain; impose max depth */</span></div>
<div class="line"><span class="lineno"> 1931</span>        <span class="keywordflow">if</span> (sanity-- == 0) {</div>
<div class="line"><span class="lineno"> 1932</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae35c4a4a9303f2d7401c085afd8ade50">DUK_GETDESC_FLAG_IGNORE_PROTOLOOP</a>) {</div>
<div class="line"><span class="lineno"> 1933</span>                <span class="comment">/* treat like property not found */</span></div>
<div class="line"><span class="lineno"> 1934</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1935</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1936</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a058cd56ed742ea766d26976d56c159d4">DUK_ERROR_RANGE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a873aa40f45b79d866910c45a58ca6c29">DUK_STR_PROTOTYPE_CHAIN_LIMIT</a>);</div>
<div class="line"><span class="lineno"> 1937</span>            }</div>
<div class="line"><span class="lineno"> 1938</span>        }</div>
<div class="line"><span class="lineno"> 1939</span>        curr = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a117b58d5b8a3809139f42327410929b2">DUK_HOBJECT_GET_PROTOTYPE</a>(thr-&gt;heap, curr);</div>
<div class="line"><span class="lineno"> 1940</span>    } <span class="keywordflow">while</span> (curr);</div>
<div class="line"><span class="lineno"> 1941</span> </div>
<div class="line"><span class="lineno"> 1942</span>    <span class="comment">/* out_desc is left untouched (possibly garbage), caller must use return</span></div>
<div class="line"><span class="lineno"> 1943</span><span class="comment">     * value to determine whether out_desc can be looked up</span></div>
<div class="line"><span class="lineno"> 1944</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1945</span> </div>
<div class="line"><span class="lineno"> 1946</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1947</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a03576a42a285f85ab3a7af6ec9f069fc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03576a42a285f85ab3a7af6ec9f069fc">DUK_HSTRING_GET_ARRIDX_FAST</a></div><div class="ttdeci">#define DUK_HSTRING_GET_ARRIDX_FAST(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04535">duktape-1.5.2/src-noline/duktape.c:4535</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a058cd56ed742ea766d26976d56c159d4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a058cd56ed742ea766d26976d56c159d4">DUK_ERROR_RANGE</a></div><div class="ttdeci">#define DUK_ERROR_RANGE(thr, msg)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07875">duktape-1.5.2/src-noline/duktape.c:7875</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a117b58d5b8a3809139f42327410929b2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a117b58d5b8a3809139f42327410929b2">DUK_HOBJECT_GET_PROTOTYPE</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_PROTOTYPE(heap, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05227">duktape-1.5.2/src-noline/duktape.c:5227</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a873aa40f45b79d866910c45a58ca6c29"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a873aa40f45b79d866910c45a58ca6c29">DUK_STR_PROTOTYPE_CHAIN_LIMIT</a></div><div class="ttdeci">#define DUK_STR_PROTOTYPE_CHAIN_LIMIT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02470">duktape-1.5.2/src-noline/duktape.c:2470</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a958816bc82736204d56315f8ca291b77"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a958816bc82736204d56315f8ca291b77">DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</a></div><div class="ttdeci">#define DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05198">duktape-1.5.2/src-noline/duktape.c:5198</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae35c4a4a9303f2d7401c085afd8ade50"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae35c4a4a9303f2d7401c085afd8ade50">DUK_GETDESC_FLAG_IGNORE_PROTOLOOP</a></div><div class="ttdeci">#define DUK_GETDESC_FLAG_IGNORE_PROTOLOOP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04893">duktape-1.5.2/src-noline/duktape.c:4893</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07875">DUK_ERROR_RANGE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04893">DUK_GETDESC_FLAG_IGNORE_PROTOLOOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05227">DUK_HOBJECT_GET_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05198">DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04535">DUK_HSTRING_GET_ARRIDX_FAST</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02470">DUK_STR_PROTOTYPE_CHAIN_LIMIT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02707">duk_hobject_hasprop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02843">duk_hobject_hasprop_raw()</a>.</p>

</div>
</div>
<a id="a171173685e8bd5907581054cfdb63463" name="a171173685e8bd5907581054cfdb63463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a171173685e8bd5907581054cfdb63463">&#9670;&#160;</a></span>duk__getprop_fastpath_bufobj_tval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__getprop_fastpath_bufobj_tval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02097">2097</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2097</span>                                                                                                             {</div>
<div class="line"><span class="lineno"> 2098</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx;</div>
<div class="line"><span class="lineno"> 2099</span>    duk_uint32_t idx;</div>
<div class="line"><span class="lineno"> 2100</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 2101</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> byte_off;</div>
<div class="line"><span class="lineno"> 2102</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_size;</div>
<div class="line"><span class="lineno"> 2103</span>    duk_uint8_t *data;</div>
<div class="line"><span class="lineno"> 2104</span> </div>
<div class="line"><span class="lineno"> 2105</span>    ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 2106</span> </div>
<div class="line"><span class="lineno"> 2107</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(obj)) {</div>
<div class="line"><span class="lineno"> 2108</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2109</span>    }</div>
<div class="line"><span class="lineno"> 2110</span>    h_bufobj = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) obj;</div>
<div class="line"><span class="lineno"> 2111</span> </div>
<div class="line"><span class="lineno"> 2112</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 2113</span>    <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_key)) {</div>
<div class="line"><span class="lineno"> 2114</span>        idx = duk__tval_fastint_to_arr_idx(tv_key);</div>
<div class="line"><span class="lineno"> 2115</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2116</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2117</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8d8b5d01641ce05598f17b1f50ad5d8d">DUK_TVAL_IS_DOUBLE</a>(tv_key)) {</div>
<div class="line"><span class="lineno"> 2118</span>        idx = <a class="code hl_function" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a>(tv_key);</div>
<div class="line"><span class="lineno"> 2119</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2120</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2121</span>    }</div>
<div class="line"><span class="lineno"> 2122</span> </div>
<div class="line"><span class="lineno"> 2123</span>    <span class="comment">/* If index is not valid, idx will be DUK__NO_ARRAY_INDEX which</span></div>
<div class="line"><span class="lineno"> 2124</span><span class="comment">     * is 0xffffffffUL.  We don&#39;t need to check for that explicitly</span></div>
<div class="line"><span class="lineno"> 2125</span><span class="comment">     * because 0xffffffffUL will never be inside bufferobject length.</span></div>
<div class="line"><span class="lineno"> 2126</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2127</span> </div>
<div class="line"><span class="lineno"> 2128</span>    <span class="comment">/* Careful with wrapping (left shifting idx would be unsafe). */</span></div>
<div class="line"><span class="lineno"> 2129</span>    <span class="keywordflow">if</span> (idx &gt;= (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;&gt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>)) {</div>
<div class="line"><span class="lineno"> 2130</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2131</span>    }</div>
<div class="line"><span class="lineno"> 2132</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>);</div>
<div class="line"><span class="lineno"> 2133</span> </div>
<div class="line"><span class="lineno"> 2134</span>    byte_off = idx &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;  <span class="comment">/* no wrap assuming h_bufobj-&gt;length is valid */</span></div>
<div class="line"><span class="lineno"> 2135</span>    elem_size = 1 &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 2136</span> </div>
<div class="line"><span class="lineno"> 2137</span>    <span class="keywordflow">if</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_bufobj, byte_off + elem_size)) {</div>
<div class="line"><span class="lineno"> 2138</span>        data = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) + h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> + byte_off;</div>
<div class="line"><span class="lineno"> 2139</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a02c9a7adb2cc34d1aa73bfe7654ccd87">duk_hbufferobject_push_validated_read</a>(ctx, h_bufobj, data, elem_size);</div>
<div class="line"><span class="lineno"> 2140</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2141</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;bufferobject access out of underlying buffer, ignoring (read zero)&quot;</span>));</div>
<div class="line"><span class="lineno"> 2142</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2143</span>    }</div>
<div class="line"><span class="lineno"> 2144</span> </div>
<div class="line"><span class="lineno"> 2145</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2146</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_ab8f68bcfbc1bf7ab5162b82e783422dd"><div class="ttname"><a href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__tval_number_to_arr_idx(duk_tval *tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duktape-1.8.0/src-separate/duk_hobject_props.c:98</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duk__tval_number_to_arr_idx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">DUK_D</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">DUK_DPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">DUK_HBUFFER_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l21855">duk_hbufferobject_push_validated_read()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00806">DUK_TVAL_IS_DOUBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>.</p>

</div>
</div>
<a id="a3406041a565e860ecee0ed4ba946e7c1" name="a3406041a565e860ecee0ed4ba946e7c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3406041a565e860ecee0ed4ba946e7c1">&#9670;&#160;</a></span>duk__getprop_shallow_fastpath_array_tval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> * duk__getprop_shallow_fastpath_array_tval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01969">1969</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1969</span>                                                                                                                   {</div>
<div class="line"><span class="lineno"> 1970</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 1971</span>    duk_uint32_t idx;</div>
<div class="line"><span class="lineno"> 1972</span> </div>
<div class="line"><span class="lineno"> 1973</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1974</span> </div>
<div class="line"><span class="lineno"> 1975</span>    <span class="keywordflow">if</span> (!(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1976</span>         !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1977</span>         !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a38f5df103ffad8e8be01c26f17a67044">DUK_HOBJECT_HAS_EXOTIC_STRINGOBJ</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1978</span>         !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1979</span>         !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>(obj))) {</div>
<div class="line"><span class="lineno"> 1980</span>        <span class="comment">/* Must have array part and no conflicting exotic behaviors.</span></div>
<div class="line"><span class="lineno"> 1981</span><span class="comment">         * Doesn&#39;t need to have array special behavior, e.g. Arguments</span></div>
<div class="line"><span class="lineno"> 1982</span><span class="comment">         * object has array part.</span></div>
<div class="line"><span class="lineno"> 1983</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1984</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1985</span>    }</div>
<div class="line"><span class="lineno"> 1986</span> </div>
<div class="line"><span class="lineno"> 1987</span>    <span class="comment">/* Arrays never have other exotic behaviors. */</span></div>
<div class="line"><span class="lineno"> 1988</span> </div>
<div class="line"><span class="lineno"> 1989</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;fast path attempt (no exotic string/arguments/buffer &quot;</span></div>
<div class="line"><span class="lineno"> 1990</span>                         <span class="stringliteral">&quot;behavior, object has array part)&quot;</span>));</div>
<div class="line"><span class="lineno"> 1991</span> </div>
<div class="line"><span class="lineno"> 1992</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 1993</span>    <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_key)) {</div>
<div class="line"><span class="lineno"> 1994</span>        idx = duk__tval_fastint_to_arr_idx(tv_key);</div>
<div class="line"><span class="lineno"> 1995</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1996</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1997</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8d8b5d01641ce05598f17b1f50ad5d8d">DUK_TVAL_IS_DOUBLE</a>(tv_key)) {</div>
<div class="line"><span class="lineno"> 1998</span>        idx = <a class="code hl_function" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a>(tv_key);</div>
<div class="line"><span class="lineno"> 1999</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2000</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;key is not a number&quot;</span>));</div>
<div class="line"><span class="lineno"> 2001</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 2002</span>    }</div>
<div class="line"><span class="lineno"> 2003</span> </div>
<div class="line"><span class="lineno"> 2004</span>    <span class="comment">/* If index is not valid, idx will be DUK__NO_ARRAY_INDEX which</span></div>
<div class="line"><span class="lineno"> 2005</span><span class="comment">     * is 0xffffffffUL.  We don&#39;t need to check for that explicitly</span></div>
<div class="line"><span class="lineno"> 2006</span><span class="comment">     * because 0xffffffffUL will never be inside object &#39;a_size&#39;.</span></div>
<div class="line"><span class="lineno"> 2007</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2008</span> </div>
<div class="line"><span class="lineno"> 2009</span>    <span class="keywordflow">if</span> (idx &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 2010</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;key is not an array index or outside array part&quot;</span>));</div>
<div class="line"><span class="lineno"> 2011</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 2012</span>    }</div>
<div class="line"><span class="lineno"> 2013</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx != 0xffffffffUL);</div>
<div class="line"><span class="lineno"> 2014</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>);</div>
<div class="line"><span class="lineno"> 2015</span> </div>
<div class="line"><span class="lineno"> 2016</span>    <span class="comment">/* XXX: for array instances we could take a shortcut here and assume</span></div>
<div class="line"><span class="lineno"> 2017</span><span class="comment">     * Array.prototype doesn&#39;t contain an array index property.</span></div>
<div class="line"><span class="lineno"> 2018</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2019</span> </div>
<div class="line"><span class="lineno"> 2020</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;key is a valid array index and inside array part&quot;</span>));</div>
<div class="line"><span class="lineno"> 2021</span>    tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, idx);</div>
<div class="line"><span class="lineno"> 2022</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv)) {</div>
<div class="line"><span class="lineno"> 2023</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; fast path successful&quot;</span>));</div>
<div class="line"><span class="lineno"> 2024</span>        <span class="keywordflow">return</span> tv;</div>
<div class="line"><span class="lineno"> 2025</span>    }</div>
<div class="line"><span class="lineno"> 2026</span> </div>
<div class="line"><span class="lineno"> 2027</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;fast path attempt failed, fall back to slow path&quot;</span>));</div>
<div class="line"><span class="lineno"> 2028</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 2029</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aad25142dfec683b9edc4b9e31af8d4c7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">duktape-1.5.2/src-noline/duktape.c:4821</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duk__tval_number_to_arr_idx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04819">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04818">DUK_HOBJECT_HAS_EXOTIC_STRINGOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00806">DUK_TVAL_IS_DOUBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">DUK_TVAL_IS_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>.</p>

</div>
</div>
<a id="a9f28a6dc20ab155914e7ba6a0a812b56" name="a9f28a6dc20ab155914e7ba6a0a812b56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f28a6dc20ab155914e7ba6a0a812b56">&#9670;&#160;</a></span>duk__grow_props_for_array_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__grow_props_for_array_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>highest_arr_idx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00969">969</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  969</span>                                                                                                                {</div>
<div class="line"><span class="lineno">  970</span>    duk_uint32_t new_e_size;</div>
<div class="line"><span class="lineno">  971</span>    duk_uint32_t new_a_size;</div>
<div class="line"><span class="lineno">  972</span>    duk_uint32_t new_h_size;</div>
<div class="line"><span class="lineno">  973</span> </div>
<div class="line"><span class="lineno">  974</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  975</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  976</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(highest_arr_idx &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj));</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span>    <span class="comment">/* minimum new length is highest_arr_idx + 1 */</span></div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>    new_e_size = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj);</div>
<div class="line"><span class="lineno">  981</span>    new_h_size = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj);</div>
<div class="line"><span class="lineno">  982</span>    new_a_size = highest_arr_idx + <a class="code hl_function" href="#a2c7a1fe2471cd8f35b47ae5c7c7d43c6">duk__get_min_grow_a</a>(highest_arr_idx);</div>
<div class="line"><span class="lineno">  983</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_a_size &gt;= highest_arr_idx + 1);  <span class="comment">/* duk__get_min_grow_a() is always &gt;= 1 */</span></div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span>    <a class="code hl_function" href="#a451066618c91472f9df793d04870b7b8">duk__realloc_props</a>(thr, obj, new_e_size, new_a_size, new_h_size, 0);</div>
<div class="line"><span class="lineno">  986</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a2c7a1fe2471cd8f35b47ae5c7c7d43c6"><div class="ttname"><a href="#a2c7a1fe2471cd8f35b47ae5c7c7d43c6">duk__get_min_grow_a</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__get_min_grow_a(duk_uint32_t a_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00204">duktape-1.8.0/src-separate/duk_hobject_props.c:204</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00204">duk__get_min_grow_a()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05175">DUK_HOBJECT_GET_ESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05183">DUK_HOBJECT_GET_HSIZE</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duk_hobject_define_property_internal()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04634">duk_hobject_define_property_internal_arridx()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a194d4afbeffa8442ee8152dfce54a58d" name="a194d4afbeffa8442ee8152dfce54a58d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a194d4afbeffa8442ee8152dfce54a58d">&#9670;&#160;</a></span>duk__grow_props_for_new_entry_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__grow_props_for_new_entry_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00939">939</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  939</span>                                                                                      {</div>
<div class="line"><span class="lineno">  940</span>    duk_uint32_t old_e_used;  <span class="comment">/* actually used, non-NULL entries */</span></div>
<div class="line"><span class="lineno">  941</span>    duk_uint32_t new_e_size;</div>
<div class="line"><span class="lineno">  942</span>    duk_uint32_t new_a_size;</div>
<div class="line"><span class="lineno">  943</span>    duk_uint32_t new_h_size;</div>
<div class="line"><span class="lineno">  944</span> </div>
<div class="line"><span class="lineno">  945</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  946</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  947</span> </div>
<div class="line"><span class="lineno">  948</span>    <span class="comment">/* Duktape 0.11.0 and prior tried to optimize the resize by not</span></div>
<div class="line"><span class="lineno">  949</span><span class="comment">     * counting the number of actually used keys prior to the resize.</span></div>
<div class="line"><span class="lineno">  950</span><span class="comment">     * This worked mostly well but also caused weird leak-like behavior</span></div>
<div class="line"><span class="lineno">  951</span><span class="comment">     * as in: test-bug-object-prop-alloc-unbounded.js.  So, now we count</span></div>
<div class="line"><span class="lineno">  952</span><span class="comment">     * the keys explicitly to compute the new entry part size.</span></div>
<div class="line"><span class="lineno">  953</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>    old_e_used = <a class="code hl_function" href="#aa10edf852bd0f95f83754f0a477416f3">duk__count_used_e_keys</a>(thr, obj);</div>
<div class="line"><span class="lineno">  956</span>    new_e_size = old_e_used + <a class="code hl_function" href="#a454f4a4dcf2d4dfa749c8e7c99d81f86">duk__get_min_grow_e</a>(old_e_used);</div>
<div class="line"><span class="lineno">  957</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_HASH_PART)</span></div>
<div class="line"><span class="lineno">  958</span>    new_h_size = <a class="code hl_function" href="#ae07fa0e3f4569d277ec525956eadb356">duk__get_default_h_size</a>(new_e_size);</div>
<div class="line"><span class="lineno">  959</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  960</span>    new_h_size = 0;</div>
<div class="line"><span class="lineno">  961</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  962</span>    new_a_size = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj);</div>
<div class="line"><span class="lineno">  963</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_e_size &gt;= old_e_used + 1);  <span class="comment">/* duk__get_min_grow_e() is always &gt;= 1 */</span></div>
<div class="line"><span class="lineno">  964</span> </div>
<div class="line"><span class="lineno">  965</span>    <a class="code hl_function" href="#a451066618c91472f9df793d04870b7b8">duk__realloc_props</a>(thr, obj, new_e_size, new_a_size, new_h_size, 0);</div>
<div class="line"><span class="lineno">  966</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00215">duk__count_used_e_keys()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00174">duk__get_default_h_size()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00193">duk__get_min_grow_e()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>.</p>

</div>
</div>
<a id="a3a29efa5165f88eb4891e96a7320d104" name="a3a29efa5165f88eb4891e96a7320d104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a29efa5165f88eb4891e96a7320d104">&#9670;&#160;</a></span>duk__handle_put_array_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__handle_put_array_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03121">3121</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3121</span>                                                                                      {</div>
<div class="line"><span class="lineno"> 3122</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 3123</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 3124</span>    duk_uint32_t old_len;</div>
<div class="line"><span class="lineno"> 3125</span>    duk_uint32_t new_len;</div>
<div class="line"><span class="lineno"> 3126</span>    duk_uint32_t result_len;</div>
<div class="line"><span class="lineno"> 3127</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 3128</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 3129</span> </div>
<div class="line"><span class="lineno"> 3130</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;handling a put operation to array &#39;length&#39; exotic property, &quot;</span></div>
<div class="line"><span class="lineno"> 3131</span>                         <span class="stringliteral">&quot;new val: %!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 3132</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 3133</span> </div>
<div class="line"><span class="lineno"> 3134</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3135</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3136</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3137</span> </div>
<div class="line"><span class="lineno"> 3138</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 3139</span> </div>
<div class="line"><span class="lineno"> 3140</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a425cf7bfb0e78f238e1d2dab5bf1c910">duk_is_valid_index</a>(ctx, -1));</div>
<div class="line"><span class="lineno"> 3141</span> </div>
<div class="line"><span class="lineno"> 3142</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3143</span><span class="comment">     *  Get old and new length</span></div>
<div class="line"><span class="lineno"> 3144</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3145</span> </div>
<div class="line"><span class="lineno"> 3146</span>    old_len = <a class="code hl_function" href="#ae1c43ff4dda58761bcee283534131aa4">duk__get_old_array_length</a>(thr, obj, &amp;desc);</div>
<div class="line"><span class="lineno"> 3147</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, -1);  <span class="comment">/* [in_val in_val] */</span></div>
<div class="line"><span class="lineno"> 3148</span>    new_len = <a class="code hl_function" href="#a136e0edb9109ee45bb22e772dfddd8c7">duk__to_new_array_length_checked</a>(thr);  <span class="comment">/* -&gt; [in_val] */</span></div>
<div class="line"><span class="lineno"> 3149</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;old_len=%ld, new_len=%ld&quot;</span>, (<span class="keywordtype">long</span>) old_len, (<span class="keywordtype">long</span>) new_len));</div>
<div class="line"><span class="lineno"> 3150</span> </div>
<div class="line"><span class="lineno"> 3151</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3152</span><span class="comment">     *  Writability check</span></div>
<div class="line"><span class="lineno"> 3153</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3154</span> </div>
<div class="line"><span class="lineno"> 3155</span>    <span class="keywordflow">if</span> (!(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 3156</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;length is not writable, fail&quot;</span>));</div>
<div class="line"><span class="lineno"> 3157</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 3158</span>    }</div>
<div class="line"><span class="lineno"> 3159</span> </div>
<div class="line"><span class="lineno"> 3160</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3161</span><span class="comment">     *  New length not lower than old length =&gt; no changes needed</span></div>
<div class="line"><span class="lineno"> 3162</span><span class="comment">     *  (not even array allocation).</span></div>
<div class="line"><span class="lineno"> 3163</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3164</span> </div>
<div class="line"><span class="lineno"> 3165</span>    <span class="keywordflow">if</span> (new_len &gt;= old_len) {</div>
<div class="line"><span class="lineno"> 3166</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new length is higher than old length, just update length, no deletions&quot;</span>));</div>
<div class="line"><span class="lineno"> 3167</span> </div>
<div class="line"><span class="lineno"> 3168</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 3169</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 3170</span>        tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 3171</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno"> 3172</span>        <span class="comment">/* no decref needed for a number */</span></div>
<div class="line"><span class="lineno"> 3173</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0f10525d790e1c628b226c4719834415">DUK_TVAL_SET_FASTINT_U32</a>(tv, new_len);</div>
<div class="line"><span class="lineno"> 3174</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno"> 3175</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 3176</span>    }</div>
<div class="line"><span class="lineno"> 3177</span> </div>
<div class="line"><span class="lineno"> 3178</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new length is lower than old length, probably must delete entries&quot;</span>));</div>
<div class="line"><span class="lineno"> 3179</span> </div>
<div class="line"><span class="lineno"> 3180</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3181</span><span class="comment">     *  New length lower than old length =&gt; delete elements, then</span></div>
<div class="line"><span class="lineno"> 3182</span><span class="comment">     *  update length.</span></div>
<div class="line"><span class="lineno"> 3183</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 3184</span><span class="comment">     *  Note: even though a bunch of elements have been deleted, the &#39;desc&#39; is</span></div>
<div class="line"><span class="lineno"> 3185</span><span class="comment">     *  still valid as properties haven&#39;t been resized (and entries compacted).</span></div>
<div class="line"><span class="lineno"> 3186</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3187</span> </div>
<div class="line"><span class="lineno"> 3188</span>    rc = <a class="code hl_function" href="#a189bf5afb9ac8c810ffe9333953e16a9">duk__handle_put_array_length_smaller</a>(thr, obj, old_len, new_len, 0 <span class="comment">/*force_flag*/</span>, &amp;result_len);</div>
<div class="line"><span class="lineno"> 3189</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(result_len &gt;= new_len &amp;&amp; result_len &lt;= old_len);</div>
<div class="line"><span class="lineno"> 3190</span> </div>
<div class="line"><span class="lineno"> 3191</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 3192</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 3193</span>    tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 3194</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno"> 3195</span>    <span class="comment">/* no decref needed for a number */</span></div>
<div class="line"><span class="lineno"> 3196</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0f10525d790e1c628b226c4719834415">DUK_TVAL_SET_FASTINT_U32</a>(tv, result_len);</div>
<div class="line"><span class="lineno"> 3197</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno"> 3198</span> </div>
<div class="line"><span class="lineno"> 3199</span>    <span class="comment">/* XXX: shrink array allocation or entries compaction here? */</span></div>
<div class="line"><span class="lineno"> 3200</span> </div>
<div class="line"><span class="lineno"> 3201</span>    <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 3202</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0f10525d790e1c628b226c4719834415"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0f10525d790e1c628b226c4719834415">DUK_TVAL_SET_FASTINT_U32</a></div><div class="ttdeci">#define DUK_TVAL_SET_FASTINT_U32(tv, val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00710">duktape-1.5.2/src-noline/duktape.c:710</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a425cf7bfb0e78f238e1d2dab5bf1c910"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a425cf7bfb0e78f238e1d2dab5bf1c910">duk_is_valid_index</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_valid_index(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15180">duktape-1.5.2/src-noline/duktape.c:15180</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8566105ab847d4151b62c29ceab53a0d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a></div><div class="ttdeci">DUK_EXTERNAL void duk_dup(duk_context *ctx, duk_idx_t from_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duktape-1.5.2/src-noline/duktape.c:15702</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8e27313f9ddb6b9232fd926563182610"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SLOT_IS_ACCESSOR(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">duktape-1.5.2/src-noline/duktape.c:5135</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a136e0edb9109ee45bb22e772dfddd8c7"><div class="ttname"><a href="#a136e0edb9109ee45bb22e772dfddd8c7">duk__to_new_array_length_checked</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__to_new_array_length_checked(duk_hthread *thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02909">duktape-1.8.0/src-separate/duk_hobject_props.c:2909</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a189bf5afb9ac8c810ffe9333953e16a9"><div class="ttname"><a href="#a189bf5afb9ac8c810ffe9333953e16a9">duk__handle_put_array_length_smaller</a></div><div class="ttdeci">DUK_LOCAL_DECL duk_bool_t duk__handle_put_array_length_smaller(duk_hthread *thr, duk_hobject *obj, duk_uint32_t old_len, duk_uint32_t new_len, duk_bool_t force_flag, duk_uint32_t *out_result_len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02938">duktape-1.8.0/src-separate/duk_hobject_props.c:2938</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_ae1c43ff4dda58761bcee283534131aa4"><div class="ttname"><a href="#ae1c43ff4dda58761bcee283534131aa4">duk__get_old_array_length</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__get_old_array_length(duk_hthread *thr, duk_hobject *obj, duk_propdesc *temp_desc)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duktape-1.8.0/src-separate/duk_hobject_props.c:2864</a></div></div>
<div class="ttc" id="astructduk__propdesc_html_aeb56938b08eac3f44434f4dc1e71571f"><div class="ttname"><a href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">duk_propdesc::flags</a></div><div class="ttdeci">duk_small_int_t flags</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duktape-1.5.2/src-noline/duktape.c:5318</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duk__get_old_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02938">duk__handle_put_array_length_smaller()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02909">duk__to_new_array_length_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15180">duk_is_valid_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00710">DUK_TVAL_SET_FASTINT_U32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a189bf5afb9ac8c810ffe9333953e16a9" name="a189bf5afb9ac8c810ffe9333953e16a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a189bf5afb9ac8c810ffe9333953e16a9">&#9670;&#160;</a></span>duk__handle_put_array_length_smaller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a1ced0ec6e2ee7cc7d19311a816a9bd68">DUK_LOCAL_DECL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__handle_put_array_length_smaller </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>old_len</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>new_len</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>force_flag</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t *</td>          <td class="paramname"><span class="paramname"><em>out_result_len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02938">2938</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2943</span>                                                                              {</div>
<div class="line"><span class="lineno"> 2944</span>    duk_uint32_t target_len;</div>
<div class="line"><span class="lineno"> 2945</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno"> 2946</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno"> 2947</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key;</div>
<div class="line"><span class="lineno"> 2948</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 2949</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 2950</span> </div>
<div class="line"><span class="lineno"> 2951</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new array length smaller than old (%ld -&gt; %ld), &quot;</span></div>
<div class="line"><span class="lineno"> 2952</span>                         <span class="stringliteral">&quot;probably need to remove elements&quot;</span>,</div>
<div class="line"><span class="lineno"> 2953</span>                         (<span class="keywordtype">long</span>) old_len, (<span class="keywordtype">long</span>) new_len));</div>
<div class="line"><span class="lineno"> 2954</span> </div>
<div class="line"><span class="lineno"> 2955</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2956</span><span class="comment">     *  New length is smaller than old length, need to delete properties above</span></div>
<div class="line"><span class="lineno"> 2957</span><span class="comment">     *  the new length.</span></div>
<div class="line"><span class="lineno"> 2958</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2959</span><span class="comment">     *  If array part exists, this is straightforward: array entries cannot</span></div>
<div class="line"><span class="lineno"> 2960</span><span class="comment">     *  be non-configurable so this is guaranteed to work.</span></div>
<div class="line"><span class="lineno"> 2961</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2962</span><span class="comment">     *  If array part does not exist, array-indexed values are scattered</span></div>
<div class="line"><span class="lineno"> 2963</span><span class="comment">     *  in the entry part, and some may not be configurable (preventing length</span></div>
<div class="line"><span class="lineno"> 2964</span><span class="comment">     *  from becoming lower than their index + 1).  To handle the algorithm</span></div>
<div class="line"><span class="lineno"> 2965</span><span class="comment">     *  in E5 Section 15.4.5.1, step l correctly, we scan the entire property</span></div>
<div class="line"><span class="lineno"> 2966</span><span class="comment">     *  set twice.</span></div>
<div class="line"><span class="lineno"> 2967</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2968</span> </div>
<div class="line"><span class="lineno"> 2969</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2970</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2971</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_len &lt; old_len);</div>
<div class="line"><span class="lineno"> 2972</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_result_len != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2973</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 2974</span> </div>
<div class="line"><span class="lineno"> 2975</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj)) {</div>
<div class="line"><span class="lineno"> 2976</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2977</span><span class="comment">         *  All defined array-indexed properties are in the array part</span></div>
<div class="line"><span class="lineno"> 2978</span><span class="comment">         *  (we assume the array part is comprehensive), and all array</span></div>
<div class="line"><span class="lineno"> 2979</span><span class="comment">         *  entries are writable, configurable, and enumerable.  Thus,</span></div>
<div class="line"><span class="lineno"> 2980</span><span class="comment">         *  nothing can prevent array entries from being deleted.</span></div>
<div class="line"><span class="lineno"> 2981</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2982</span> </div>
<div class="line"><span class="lineno"> 2983</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;have array part, easy case&quot;</span>));</div>
<div class="line"><span class="lineno"> 2984</span> </div>
<div class="line"><span class="lineno"> 2985</span>        <span class="keywordflow">if</span> (old_len &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 2986</span>            <span class="comment">/* XXX: assertion that entries &gt;= old_len are already unused */</span></div>
<div class="line"><span class="lineno"> 2987</span>            i = old_len;</div>
<div class="line"><span class="lineno"> 2988</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2989</span>            i = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj);</div>
<div class="line"><span class="lineno"> 2990</span>        }</div>
<div class="line"><span class="lineno"> 2991</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 2992</span> </div>
<div class="line"><span class="lineno"> 2993</span>        <span class="keywordflow">while</span> (i &gt; new_len) {</div>
<div class="line"><span class="lineno"> 2994</span>            i--;</div>
<div class="line"><span class="lineno"> 2995</span>            tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno"> 2996</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a383c4206d2d6bbe5f558dcf38bff15f5">DUK_TVAL_SET_UNUSED_UPDREF</a>(thr, tv);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 2997</span>        }</div>
<div class="line"><span class="lineno"> 2998</span> </div>
<div class="line"><span class="lineno"> 2999</span>        *out_result_len = new_len;</div>
<div class="line"><span class="lineno"> 3000</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 3001</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3002</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3003</span><span class="comment">         *  Entries part is a bit more complex</span></div>
<div class="line"><span class="lineno"> 3004</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3005</span> </div>
<div class="line"><span class="lineno"> 3006</span>        <span class="comment">/* Stage 1: find highest preventing non-configurable entry (if any).</span></div>
<div class="line"><span class="lineno"> 3007</span><span class="comment">         * When forcing, ignore non-configurability.</span></div>
<div class="line"><span class="lineno"> 3008</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3009</span> </div>
<div class="line"><span class="lineno"> 3010</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;no array part, slow case&quot;</span>));</div>
<div class="line"><span class="lineno"> 3011</span> </div>
<div class="line"><span class="lineno"> 3012</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array length write, no array part, stage 1: find target_len &quot;</span></div>
<div class="line"><span class="lineno"> 3013</span>                             <span class="stringliteral">&quot;(highest preventing non-configurable entry (if any))&quot;</span>));</div>
<div class="line"><span class="lineno"> 3014</span> </div>
<div class="line"><span class="lineno"> 3015</span>        target_len = new_len;</div>
<div class="line"><span class="lineno"> 3016</span>        <span class="keywordflow">if</span> (force_flag) {</div>
<div class="line"><span class="lineno"> 3017</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array length write, no array part; force flag -&gt; skip stage 1&quot;</span>));</div>
<div class="line"><span class="lineno"> 3018</span>            <span class="keywordflow">goto</span> skip_stage1;</div>
<div class="line"><span class="lineno"> 3019</span>        }</div>
<div class="line"><span class="lineno"> 3020</span>        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj); i++) {</div>
<div class="line"><span class="lineno"> 3021</span>            key = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno"> 3022</span>            <span class="keywordflow">if</span> (!key) {</div>
<div class="line"><span class="lineno"> 3023</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;skip entry index %ld: null key&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno"> 3024</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3025</span>            }</div>
<div class="line"><span class="lineno"> 3026</span>            <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a>(key)) {</div>
<div class="line"><span class="lineno"> 3027</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;skip entry index %ld: key not an array index&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno"> 3028</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3029</span>            }</div>
<div class="line"><span class="lineno"> 3030</span> </div>
<div class="line"><span class="lineno"> 3031</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a>(key));  <span class="comment">/* XXX: macro checks for array index flag, which is unnecessary here */</span></div>
<div class="line"><span class="lineno"> 3032</span>            arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed57897f1a937b3298fcfa0768b332c2">DUK_HSTRING_GET_ARRIDX_SLOW</a>(key);</div>
<div class="line"><span class="lineno"> 3033</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>);</div>
<div class="line"><span class="lineno"> 3034</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx &lt; old_len);  <span class="comment">/* consistency requires this */</span></div>
<div class="line"><span class="lineno"> 3035</span> </div>
<div class="line"><span class="lineno"> 3036</span>            <span class="keywordflow">if</span> (arr_idx &lt; new_len) {</div>
<div class="line"><span class="lineno"> 3037</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;skip entry index %ld: key is array index %ld, below new_len&quot;</span>,</div>
<div class="line"><span class="lineno"> 3038</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3039</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3040</span>            }</div>
<div class="line"><span class="lineno"> 3041</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af05efa1acf3bff311c97375fe8b449d6">DUK_HOBJECT_E_SLOT_IS_CONFIGURABLE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i)) {</div>
<div class="line"><span class="lineno"> 3042</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;skip entry index %ld: key is a relevant array index %ld, but configurable&quot;</span>,</div>
<div class="line"><span class="lineno"> 3043</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3044</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3045</span>            }</div>
<div class="line"><span class="lineno"> 3046</span> </div>
<div class="line"><span class="lineno"> 3047</span>            <span class="comment">/* relevant array index is non-configurable, blocks write */</span></div>
<div class="line"><span class="lineno"> 3048</span>            <span class="keywordflow">if</span> (arr_idx &gt;= target_len) {</div>
<div class="line"><span class="lineno"> 3049</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;entry at index %ld has arr_idx %ld, is not configurable, &quot;</span></div>
<div class="line"><span class="lineno"> 3050</span>                                     <span class="stringliteral">&quot;update target_len %ld -&gt; %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 3051</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) arr_idx, (<span class="keywordtype">long</span>) target_len,</div>
<div class="line"><span class="lineno"> 3052</span>                                     (<span class="keywordtype">long</span>) (arr_idx + 1)));</div>
<div class="line"><span class="lineno"> 3053</span>                target_len = arr_idx + 1;</div>
<div class="line"><span class="lineno"> 3054</span>            }</div>
<div class="line"><span class="lineno"> 3055</span>        }</div>
<div class="line"><span class="lineno"> 3056</span>     skip_stage1:</div>
<div class="line"><span class="lineno"> 3057</span> </div>
<div class="line"><span class="lineno"> 3058</span>        <span class="comment">/* stage 2: delete configurable entries above target length */</span></div>
<div class="line"><span class="lineno"> 3059</span> </div>
<div class="line"><span class="lineno"> 3060</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;old_len=%ld, new_len=%ld, target_len=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 3061</span>                             (<span class="keywordtype">long</span>) old_len, (<span class="keywordtype">long</span>) new_len, (<span class="keywordtype">long</span>) target_len));</div>
<div class="line"><span class="lineno"> 3062</span> </div>
<div class="line"><span class="lineno"> 3063</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array length write, no array part, stage 2: remove &quot;</span></div>
<div class="line"><span class="lineno"> 3064</span>                             <span class="stringliteral">&quot;entries &gt;= target_len&quot;</span>));</div>
<div class="line"><span class="lineno"> 3065</span> </div>
<div class="line"><span class="lineno"> 3066</span>        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj); i++) {</div>
<div class="line"><span class="lineno"> 3067</span>            key = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno"> 3068</span>            <span class="keywordflow">if</span> (!key) {</div>
<div class="line"><span class="lineno"> 3069</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;skip entry index %ld: null key&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno"> 3070</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3071</span>            }</div>
<div class="line"><span class="lineno"> 3072</span>            <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a>(key)) {</div>
<div class="line"><span class="lineno"> 3073</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;skip entry index %ld: key not an array index&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno"> 3074</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3075</span>            }</div>
<div class="line"><span class="lineno"> 3076</span> </div>
<div class="line"><span class="lineno"> 3077</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a>(key));  <span class="comment">/* XXX: macro checks for array index flag, which is unnecessary here */</span></div>
<div class="line"><span class="lineno"> 3078</span>            arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed57897f1a937b3298fcfa0768b332c2">DUK_HSTRING_GET_ARRIDX_SLOW</a>(key);</div>
<div class="line"><span class="lineno"> 3079</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>);</div>
<div class="line"><span class="lineno"> 3080</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx &lt; old_len);  <span class="comment">/* consistency requires this */</span></div>
<div class="line"><span class="lineno"> 3081</span> </div>
<div class="line"><span class="lineno"> 3082</span>            <span class="keywordflow">if</span> (arr_idx &lt; target_len) {</div>
<div class="line"><span class="lineno"> 3083</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;skip entry index %ld: key is array index %ld, below target_len&quot;</span>,</div>
<div class="line"><span class="lineno"> 3084</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3085</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3086</span>            }</div>
<div class="line"><span class="lineno"> 3087</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(force_flag || <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af05efa1acf3bff311c97375fe8b449d6">DUK_HOBJECT_E_SLOT_IS_CONFIGURABLE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i));  <span class="comment">/* stage 1 guarantees */</span></div>
<div class="line"><span class="lineno"> 3088</span> </div>
<div class="line"><span class="lineno"> 3089</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delete entry index %ld: key is array index %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 3090</span>                                 (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3091</span> </div>
<div class="line"><span class="lineno"> 3092</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3093</span><span class="comment">             *  Slow delete, but we don&#39;t care as we&#39;re already in a very slow path.</span></div>
<div class="line"><span class="lineno"> 3094</span><span class="comment">             *  The delete always succeeds: key has no exotic behavior, property</span></div>
<div class="line"><span class="lineno"> 3095</span><span class="comment">             *  is configurable, and no resize occurs.</span></div>
<div class="line"><span class="lineno"> 3096</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3097</span>            rc = <a class="code hl_function" href="#a6cbfe4b6b55490815c2b8a1b5e57612f">duk_hobject_delprop_raw</a>(thr, obj, key, force_flag ? <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a989610c27efa15a41baa94adf43cd30c">DUK_DELPROP_FLAG_FORCE</a> : 0);</div>
<div class="line"><span class="lineno"> 3098</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 3099</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);</div>
<div class="line"><span class="lineno"> 3100</span>        }</div>
<div class="line"><span class="lineno"> 3101</span> </div>
<div class="line"><span class="lineno"> 3102</span>        <span class="comment">/* stage 3: update length (done by caller), decide return code */</span></div>
<div class="line"><span class="lineno"> 3103</span> </div>
<div class="line"><span class="lineno"> 3104</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array length write, no array part, stage 3: update length (done by caller)&quot;</span>));</div>
<div class="line"><span class="lineno"> 3105</span> </div>
<div class="line"><span class="lineno"> 3106</span>        *out_result_len = target_len;</div>
<div class="line"><span class="lineno"> 3107</span> </div>
<div class="line"><span class="lineno"> 3108</span>        <span class="keywordflow">if</span> (target_len == new_len) {</div>
<div class="line"><span class="lineno"> 3109</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;target_len matches new_len, return success&quot;</span>));</div>
<div class="line"><span class="lineno"> 3110</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 3111</span>        }</div>
<div class="line"><span class="lineno"> 3112</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;target_len does not match new_len (some entry prevented &quot;</span></div>
<div class="line"><span class="lineno"> 3113</span>                             <span class="stringliteral">&quot;full length adjustment), return error&quot;</span>));</div>
<div class="line"><span class="lineno"> 3114</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 3115</span>    }</div>
<div class="line"><span class="lineno"> 3116</span> </div>
<div class="line"><span class="lineno"> 3117</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno"> 3118</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a0f457284c000920f86441b7ca7cbfe08"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a></div><div class="ttdeci">#define DUK_UNREACHABLE()</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">duktape-1.5.2/src-noline/duk_config.h:2504</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a383c4206d2d6bbe5f558dcf38bff15f5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a383c4206d2d6bbe5f558dcf38bff15f5">DUK_TVAL_SET_UNUSED_UPDREF</a></div><div class="ttdeci">#define DUK_TVAL_SET_UNUSED_UPDREF</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04005">duktape-1.5.2/src-noline/duktape.c:4005</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a989610c27efa15a41baa94adf43cd30c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a989610c27efa15a41baa94adf43cd30c">DUK_DELPROP_FLAG_FORCE</a></div><div class="ttdeci">#define DUK_DELPROP_FLAG_FORCE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05472">duktape-1.5.2/src-noline/duktape.c:5472</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_abccf8dd63a28559f531dbf155b82d44d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a></div><div class="ttdeci">#define DUK_HSTRING_HAS_ARRIDX(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04445">duktape-1.5.2/src-noline/duktape.c:4445</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aed57897f1a937b3298fcfa0768b332c2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed57897f1a937b3298fcfa0768b332c2">DUK_HSTRING_GET_ARRIDX_SLOW</a></div><div class="ttdeci">#define DUK_HSTRING_GET_ARRIDX_SLOW(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04539">duktape-1.5.2/src-noline/duktape.c:4539</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af05efa1acf3bff311c97375fe8b449d6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af05efa1acf3bff311c97375fe8b449d6">DUK_HOBJECT_E_SLOT_IS_CONFIGURABLE</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SLOT_IS_CONFIGURABLE(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05134">duktape-1.5.2/src-noline/duktape.c:5134</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05472">DUK_DELPROP_FLAG_FORCE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">DUK_HOBJECT_E_GET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05134">DUK_HOBJECT_E_SLOT_IS_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04539">DUK_HSTRING_GET_ARRIDX_SLOW</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04445">DUK_HSTRING_HAS_ARRIDX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04005">DUK_TVAL_SET_UNUSED_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03121">duk__handle_put_array_length()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>.</p>

</div>
</div>
<a id="af6fda73a2a8716acfbd629877d4ba838" name="af6fda73a2a8716acfbd629877d4ba838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6fda73a2a8716acfbd629877d4ba838">&#9670;&#160;</a></span>duk__key_is_lightfunc_ownprop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__key_is_lightfunc_ownprop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00162">162</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  162</span>                                                                                       {</div>
<div class="line"><span class="lineno">  163</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">return</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr) ||</div>
<div class="line"><span class="lineno">  165</span>            key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa481f235a8676eeb64c61eed25249209">DUK_HTHREAD_STRING_NAME</a>(thr));</div>
<div class="line"><span class="lineno">  166</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa481f235a8676eeb64c61eed25249209"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa481f235a8676eeb64c61eed25249209">DUK_HTHREAD_STRING_NAME</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_NAME(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01163">duktape-1.5.2/src-noline/duktape.c:1163</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">DUK_HTHREAD_STRING_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01163">DUK_HTHREAD_STRING_NAME</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">duk_hobject_delprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02707">duk_hobject_hasprop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a2a11c8ac838949396f84bf9f60595f4b" name="a2a11c8ac838949396f84bf9f60595f4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a11c8ac838949396f84bf9f60595f4b">&#9670;&#160;</a></span>duk__lookup_arguments_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__lookup_arguments_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>temp_desc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> **</td>          <td class="paramname"><span class="paramname"><em>out_map</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> **</td>          <td class="paramname"><span class="paramname"><em>out_varenv</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01384">1384</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1389</span>                                                               {</div>
<div class="line"><span class="lineno"> 1390</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 1391</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *map;</div>
<div class="line"><span class="lineno"> 1392</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *varenv;</div>
<div class="line"><span class="lineno"> 1393</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 1396</span> </div>
<div class="line"><span class="lineno"> 1397</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments map lookup: thr=%p, obj=%p, key=%p, temp_desc=%p &quot;</span></div>
<div class="line"><span class="lineno"> 1398</span>                         <span class="stringliteral">&quot;(obj -&gt; %!O, key -&gt; %!O)&quot;</span>,</div>
<div class="line"><span class="lineno"> 1399</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) obj, (<span class="keywordtype">void</span> *) key, (<span class="keywordtype">void</span> *) temp_desc,</div>
<div class="line"><span class="lineno"> 1400</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key));</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a>(thr, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae59a606f81742a80cdf6a51096353e0d">DUK_HTHREAD_STRING_INT_MAP</a>(thr), temp_desc, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 1403</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; no &#39;map&#39;&quot;</span>));</div>
<div class="line"><span class="lineno"> 1404</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1405</span>    }</div>
<div class="line"><span class="lineno"> 1406</span> </div>
<div class="line"><span class="lineno"> 1407</span>    map = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1408</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(map != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1409</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* map is reachable through obj */</span></div>
<div class="line"><span class="lineno"> 1410</span> </div>
<div class="line"><span class="lineno"> 1411</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a>(thr, map, key, temp_desc, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 1412</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; &#39;map&#39; exists, but key not in map&quot;</span>));</div>
<div class="line"><span class="lineno"> 1413</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1414</span>    }</div>
<div class="line"><span class="lineno"> 1415</span> </div>
<div class="line"><span class="lineno"> 1416</span>    <span class="comment">/* [... varname] */</span></div>
<div class="line"><span class="lineno"> 1417</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; &#39;map&#39; exists, and contains key, key is mapped to argument/variable binding %!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 1418</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 1419</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a>(ctx, -1));  <span class="comment">/* guaranteed when building arguments */</span></div>
<div class="line"><span class="lineno"> 1420</span> </div>
<div class="line"><span class="lineno"> 1421</span>    <span class="comment">/* get varenv for varname (callee&#39;s declarative lexical environment) */</span></div>
<div class="line"><span class="lineno"> 1422</span>    rc = <a class="code hl_function" href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a>(thr, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59d32c12a8a9b5e1656b091c11aa807a">DUK_HTHREAD_STRING_INT_VARENV</a>(thr), temp_desc, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>);</div>
<div class="line"><span class="lineno"> 1423</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 1424</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);  <span class="comment">/* arguments MUST have an initialized lexical environment reference */</span></div>
<div class="line"><span class="lineno"> 1425</span>    varenv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1426</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(varenv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1427</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* varenv remains reachable through &#39;obj&#39; */</span></div>
<div class="line"><span class="lineno"> 1428</span> </div>
<div class="line"><span class="lineno"> 1429</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments varenv is: %!dO&quot;</span>, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) varenv));</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>    <span class="comment">/* success: leave varname in stack */</span></div>
<div class="line"><span class="lineno"> 1432</span>    *out_map = map;</div>
<div class="line"><span class="lineno"> 1433</span>    *out_varenv = varenv;</div>
<div class="line"><span class="lineno"> 1434</span>    <span class="keywordflow">return</span> 1;  <span class="comment">/* [... varname] */</span></div>
<div class="line"><span class="lineno"> 1435</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a59d32c12a8a9b5e1656b091c11aa807a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59d32c12a8a9b5e1656b091c11aa807a">DUK_HTHREAD_STRING_INT_VARENV</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_INT_VARENV(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01193">duktape-1.5.2/src-noline/duktape.c:1193</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ada14d1be1c027a164a237f1402c321ab"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_string(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duktape-1.5.2/src-noline/duktape.c:17666</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">DUK_GETDESC_FLAG_PUSH_VALUE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">duk_hobject_get_own_propdesc()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01205">DUK_HTHREAD_STRING_INT_MAP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01193">DUK_HTHREAD_STRING_INT_VARENV</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duk_is_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16305">duk_require_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01441">duk__check_arguments_map_for_get()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01479">duk__check_arguments_map_for_put()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>.</p>

</div>
</div>
<a id="ad75bcd78c56fd6f6e62cb28ecc423325" name="ad75bcd78c56fd6f6e62cb28ecc423325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad75bcd78c56fd6f6e62cb28ecc423325">&#9670;&#160;</a></span>duk__proxy_check_prop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__proxy_check_prop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>stridx_trap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> **</td>          <td class="paramname"><span class="paramname"><em>out_target</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">393</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  393</span>                                                                                                                                                         {</div>
<div class="line"><span class="lineno">  394</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_handler;</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  399</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  400</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_target != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#ae22218a49bd740fa5a47497ce3c547a9">duk_hobject_proxy_check</a>(thr, obj, out_target, &amp;h_handler)) {</div>
<div class="line"><span class="lineno">  403</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  404</span>    }</div>
<div class="line"><span class="lineno">  405</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(*out_target != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  406</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_handler != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>    <span class="comment">/* XXX: At the moment Duktape accesses internal keys like _Finalizer using a</span></div>
<div class="line"><span class="lineno">  409</span><span class="comment">     * normal property set/get which would allow a proxy handler to interfere with</span></div>
<div class="line"><span class="lineno">  410</span><span class="comment">     * such behavior and to get access to internal key strings.  This is not a problem</span></div>
<div class="line"><span class="lineno">  411</span><span class="comment">     * as such because internal key strings can be created in other ways too (e.g.</span></div>
<div class="line"><span class="lineno">  412</span><span class="comment">     * through buffers).  The best fix is to change Duktape internal lookups to</span></div>
<div class="line"><span class="lineno">  413</span><span class="comment">     * skip proxy behavior.  Until that, internal property accesses bypass the</span></div>
<div class="line"><span class="lineno">  414</span><span class="comment">     * proxy and are applied to the target (as if the handler did not exist).</span></div>
<div class="line"><span class="lineno">  415</span><span class="comment">     * This has some side effects, see test-bi-proxy-internal-keys.js.</span></div>
<div class="line"><span class="lineno">  416</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a770ba3e37db78ca2d94032c47bddb9a6">DUK_TVAL_IS_STRING</a>(tv_key)) {</div>
<div class="line"><span class="lineno">  419</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_key = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a668fe43ca9630a9e9c8b9a511798652d">DUK_TVAL_GET_STRING</a>(tv_key);</div>
<div class="line"><span class="lineno">  420</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  421</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa0b320581b741da4c9929dc9ab9555b5">DUK_HSTRING_HAS_INTERNAL</a>(h_key)) {</div>
<div class="line"><span class="lineno">  422</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;internal key, skip proxy handler and apply to target&quot;</span>));</div>
<div class="line"><span class="lineno">  423</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  424</span>        }</div>
<div class="line"><span class="lineno">  425</span>    }</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    <span class="comment">/* The handler is looked up with a normal property lookup; it may be an</span></div>
<div class="line"><span class="lineno">  428</span><span class="comment">     * accessor or the handler object itself may be a proxy object.  If the</span></div>
<div class="line"><span class="lineno">  429</span><span class="comment">     * handler is a proxy, we need to extend the valstack as we make a</span></div>
<div class="line"><span class="lineno">  430</span><span class="comment">     * recursive proxy check without a function call in between (in fact</span></div>
<div class="line"><span class="lineno">  431</span><span class="comment">     * there is no limit to the potential recursion here).</span></div>
<div class="line"><span class="lineno">  432</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  433</span><span class="comment">     * (For sanity, proxy creation rejects another proxy object as either</span></div>
<div class="line"><span class="lineno">  434</span><span class="comment">     * the handler or the target at the moment so recursive proxy cases</span></div>
<div class="line"><span class="lineno">  435</span><span class="comment">     * are not realized now.)</span></div>
<div class="line"><span class="lineno">  436</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>    <span class="comment">/* XXX: C recursion limit if proxies are allowed as handler/target values */</span></div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47979f7fbd8af168f735efc020c09d62">duk_require_stack</a>(ctx, <a class="code hl_define" href="#a87a8c4290f84e0f8d4b1e87987e4e040">DUK__VALSTACK_PROXY_LOOKUP</a>);</div>
<div class="line"><span class="lineno">  441</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, h_handler);</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, -1, stridx_trap)) {</div>
<div class="line"><span class="lineno">  443</span>        <span class="comment">/* -&gt; [ ... handler trap ] */</span></div>
<div class="line"><span class="lineno">  444</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a86e82045aad43776c7280e8e689c5158">duk_insert</a>(ctx, -2);  <span class="comment">/* -&gt; [ ... trap handler ] */</span></div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>        <span class="comment">/* stack prepped for func call: [ ... trap handler ] */</span></div>
<div class="line"><span class="lineno">  447</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  448</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  449</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a09f116a4bcf486b3359afaa1abf4bf66">duk_pop_2</a>(ctx);</div>
<div class="line"><span class="lineno">  450</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  451</span>    }</div>
<div class="line"><span class="lineno">  452</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a09f116a4bcf486b3359afaa1abf4bf66"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a09f116a4bcf486b3359afaa1abf4bf66">duk_pop_2</a></div><div class="ttdeci">DUK_EXTERNAL void duk_pop_2(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19167">duktape-1.5.2/src-noline/duktape.c:19167</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1549987aa437dbcc45cfb63722c834d6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_get_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duktape-1.5.2/src-noline/duktape.c:14318</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a47979f7fbd8af168f735efc020c09d62"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47979f7fbd8af168f735efc020c09d62">duk_require_stack</a></div><div class="ttdeci">DUK_EXTERNAL void duk_require_stack(duk_context *ctx, duk_idx_t extra)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15612">duktape-1.5.2/src-noline/duktape.c:15612</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a668fe43ca9630a9e9c8b9a511798652d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a668fe43ca9630a9e9c8b9a511798652d">DUK_TVAL_GET_STRING</a></div><div class="ttdeci">#define DUK_TVAL_GET_STRING(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00786">duktape-1.5.2/src-noline/duktape.c:786</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a770ba3e37db78ca2d94032c47bddb9a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a770ba3e37db78ca2d94032c47bddb9a6">DUK_TVAL_IS_STRING</a></div><div class="ttdeci">#define DUK_TVAL_IS_STRING(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00810">duktape-1.5.2/src-noline/duktape.c:810</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a86e82045aad43776c7280e8e689c5158"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a86e82045aad43776c7280e8e689c5158">duk_insert</a></div><div class="ttdeci">DUK_EXTERNAL void duk_insert(duk_context *ctx, duk_idx_t to_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15740">duktape-1.5.2/src-noline/duktape.c:15740</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa0b320581b741da4c9929dc9ab9555b5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa0b320581b741da4c9929dc9ab9555b5">DUK_HSTRING_HAS_INTERNAL</a></div><div class="ttdeci">#define DUK_HSTRING_HAS_INTERNAL(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04446">duktape-1.5.2/src-noline/duktape.c:4446</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aca724f007b73483138017f4d32bb6879"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_hobject(duk_context *ctx, duk_hobject *h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duktape-1.5.2/src-noline/duktape.c:19059</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a87a8c4290f84e0f8d4b1e87987e4e040"><div class="ttname"><a href="#a87a8c4290f84e0f8d4b1e87987e4e040">DUK__VALSTACK_PROXY_LOOKUP</a></div><div class="ttdeci">#define DUK__VALSTACK_PROXY_LOOKUP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00070">duktape-1.8.0/src-separate/duk_hobject_props.c:70</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_ae22218a49bd740fa5a47497ce3c547a9"><div class="ttname"><a href="#ae22218a49bd740fa5a47497ce3c547a9">duk_hobject_proxy_check</a></div><div class="ttdeci">DUK_INTERNAL duk_bool_t duk_hobject_proxy_check(duk_hthread *thr, duk_hobject *obj, duk_hobject **out_target, duk_hobject **out_handler)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00318">duktape-1.8.0/src-separate/duk_hobject_props.c:318</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00070">DUK__VALSTACK_PROXY_LOOKUP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00318">duk_hobject_proxy_check()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04446">DUK_HSTRING_HAS_INTERNAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15740">duk_insert()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19167">duk_pop_2()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15612">duk_require_stack()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00786">DUK_TVAL_GET_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00810">DUK_TVAL_IS_STRING</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">duk_hobject_delprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02707">duk_hobject_hasprop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a73da7a1cccb15fa2b83f4df268badf2a" name="a73da7a1cccb15fa2b83f4df268badf2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73da7a1cccb15fa2b83f4df268badf2a">&#9670;&#160;</a></span>duk__push_tval_to_hstring_arr_idx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__push_tval_to_hstring_arr_idx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> **</td>          <td class="paramname"><span class="paramname"><em>out_h</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00143">143</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  143</span>                                                                                                              {</div>
<div class="line"><span class="lineno">  144</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno">  145</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h;</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  148</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  149</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv);</div>
<div class="line"><span class="lineno">  152</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  153</span>    h = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  155</span>    *out_h = h;</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03576a42a285f85ab3a7af6ec9f069fc">DUK_HSTRING_GET_ARRIDX_FAST</a>(h);</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">return</span> arr_idx;</div>
<div class="line"><span class="lineno">  159</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac44e324c8cc1777c335c7d59a50a4798"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_to_string(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duktape-1.5.2/src-noline/duktape.c:17089</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad68f683c683ab08b6eec9d84bdc36e56"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hstring * duk_get_hstring(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16288">duktape-1.5.2/src-noline/duktape.c:16288</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16288">duk_get_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04535">DUK_HSTRING_GET_ARRIDX_FAST</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duk_push_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">duk_hobject_delprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02707">duk_hobject_hasprop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="ad8dbd6e748306626201ae4c51a25e489" name="ad8dbd6e748306626201ae4c51a25e489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8dbd6e748306626201ae4c51a25e489">&#9670;&#160;</a></span>duk__putprop_fastpath_bufobj_tval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__putprop_fastpath_bufobj_tval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02148">2148</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2148</span>                                                                                                                               {</div>
<div class="line"><span class="lineno"> 2149</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx;</div>
<div class="line"><span class="lineno"> 2150</span>    duk_uint32_t idx;</div>
<div class="line"><span class="lineno"> 2151</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 2152</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> byte_off;</div>
<div class="line"><span class="lineno"> 2153</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_size;</div>
<div class="line"><span class="lineno"> 2154</span>    duk_uint8_t *data;</div>
<div class="line"><span class="lineno"> 2155</span> </div>
<div class="line"><span class="lineno"> 2156</span>    ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 2157</span> </div>
<div class="line"><span class="lineno"> 2158</span>    <span class="keywordflow">if</span> (!(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2159</span>          <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv_val))) {</div>
<div class="line"><span class="lineno"> 2160</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2161</span>    }</div>
<div class="line"><span class="lineno"> 2162</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj));  <span class="comment">/* caller ensures; rom objects are never bufferobjects now */</span></div>
<div class="line"><span class="lineno"> 2163</span> </div>
<div class="line"><span class="lineno"> 2164</span>    h_bufobj = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) obj;</div>
<div class="line"><span class="lineno"> 2165</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 2166</span>    <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_key)) {</div>
<div class="line"><span class="lineno"> 2167</span>        idx = duk__tval_fastint_to_arr_idx(tv_key);</div>
<div class="line"><span class="lineno"> 2168</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2169</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2170</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8d8b5d01641ce05598f17b1f50ad5d8d">DUK_TVAL_IS_DOUBLE</a>(tv_key)) {</div>
<div class="line"><span class="lineno"> 2171</span>        idx = <a class="code hl_function" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a>(tv_key);</div>
<div class="line"><span class="lineno"> 2172</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2173</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2174</span>    }</div>
<div class="line"><span class="lineno"> 2175</span> </div>
<div class="line"><span class="lineno"> 2176</span>    <span class="comment">/* If index is not valid, idx will be DUK__NO_ARRAY_INDEX which</span></div>
<div class="line"><span class="lineno"> 2177</span><span class="comment">     * is 0xffffffffUL.  We don&#39;t need to check for that explicitly</span></div>
<div class="line"><span class="lineno"> 2178</span><span class="comment">     * because 0xffffffffUL will never be inside bufferobject length.</span></div>
<div class="line"><span class="lineno"> 2179</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2180</span> </div>
<div class="line"><span class="lineno"> 2181</span>    <span class="comment">/* Careful with wrapping (left shifting idx would be unsafe). */</span></div>
<div class="line"><span class="lineno"> 2182</span>    <span class="keywordflow">if</span> (idx &gt;= (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;&gt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>)) {</div>
<div class="line"><span class="lineno"> 2183</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2184</span>    }</div>
<div class="line"><span class="lineno"> 2185</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>);</div>
<div class="line"><span class="lineno"> 2186</span> </div>
<div class="line"><span class="lineno"> 2187</span>    byte_off = idx &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;  <span class="comment">/* no wrap assuming h_bufobj-&gt;length is valid */</span></div>
<div class="line"><span class="lineno"> 2188</span>    elem_size = 1 &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 2189</span> </div>
<div class="line"><span class="lineno"> 2190</span>    <span class="comment">/* Value is required to be a number in the fast path so there</span></div>
<div class="line"><span class="lineno"> 2191</span><span class="comment">     * are no side effects in write coercion.</span></div>
<div class="line"><span class="lineno"> 2192</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2193</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_val);</div>
<div class="line"><span class="lineno"> 2194</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a>(ctx, -1));</div>
<div class="line"><span class="lineno"> 2195</span> </div>
<div class="line"><span class="lineno"> 2196</span>    <span class="keywordflow">if</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_bufobj, byte_off + elem_size)) {</div>
<div class="line"><span class="lineno"> 2197</span>        data = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) + h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> + byte_off;</div>
<div class="line"><span class="lineno"> 2198</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1472e966ace67a5533431d7e197898ed">duk_hbufferobject_validated_write</a>(ctx, h_bufobj, data, elem_size);</div>
<div class="line"><span class="lineno"> 2199</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2200</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;bufferobject access out of underlying buffer, ignoring (write skipped)&quot;</span>));</div>
<div class="line"><span class="lineno"> 2201</span>    }</div>
<div class="line"><span class="lineno"> 2202</span> </div>
<div class="line"><span class="lineno"> 2203</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2204</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2205</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1472e966ace67a5533431d7e197898ed"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1472e966ace67a5533431d7e197898ed">duk_hbufferobject_validated_write</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_hbufferobject_validated_write(duk_context *ctx, duk_hbufferobject *h_bufobj, duk_uint8_t *p, duk_small_uint_t elem_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l21896">duktape-1.5.2/src-noline/duktape.c:21896</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a62673f6ee46bd5428e11302ae69e74e7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a62673f6ee46bd5428e11302ae69e74e7">duk_is_number</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_number(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17629">duktape-1.5.2/src-noline/duktape.c:17629</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7f18a1ef3baf5de015b53a434aeee31b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a></div><div class="ttdeci">#define DUK_HEAPHDR_HAS_READONLY(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">duktape-1.5.2/src-noline/duktape.c:3666</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duk__tval_number_to_arr_idx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">DUK_D</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">DUK_DPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">DUK_HBUFFER_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l21896">duk_hbufferobject_validated_write()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17629">duk_is_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duk_push_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00806">DUK_TVAL_IS_DOUBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a43e8e6ca7cbcc3fa724988f3c39e7122" name="a43e8e6ca7cbcc3fa724988f3c39e7122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43e8e6ca7cbcc3fa724988f3c39e7122">&#9670;&#160;</a></span>duk__putprop_shallow_fastpath_array_tval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__putprop_shallow_fastpath_array_tval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_val</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>temp_desc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02031">2031</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2031</span>                                                                                                                                                               {</div>
<div class="line"><span class="lineno"> 2032</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 2033</span>    duk_uint32_t idx;</div>
<div class="line"><span class="lineno"> 2034</span>    duk_uint32_t old_len, new_len;</div>
<div class="line"><span class="lineno"> 2035</span> </div>
<div class="line"><span class="lineno"> 2036</span>    <span class="keywordflow">if</span> (!(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2037</span>          <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2038</span>          <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adfd1b77d5152d2f5ef72309ab0bc6c14">DUK_HOBJECT_HAS_EXTENSIBLE</a>(obj))) {</div>
<div class="line"><span class="lineno"> 2039</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2040</span>    }</div>
<div class="line"><span class="lineno"> 2041</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj));  <span class="comment">/* caller ensures */</span></div>
<div class="line"><span class="lineno"> 2042</span> </div>
<div class="line"><span class="lineno"> 2043</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 2044</span>    <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_key)) {</div>
<div class="line"><span class="lineno"> 2045</span>        idx = duk__tval_fastint_to_arr_idx(tv_key);</div>
<div class="line"><span class="lineno"> 2046</span>    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2047</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2048</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8d8b5d01641ce05598f17b1f50ad5d8d">DUK_TVAL_IS_DOUBLE</a>(tv_key)) {</div>
<div class="line"><span class="lineno"> 2049</span>        idx = <a class="code hl_function" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a>(tv_key);</div>
<div class="line"><span class="lineno"> 2050</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2051</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;key is not a number&quot;</span>));</div>
<div class="line"><span class="lineno"> 2052</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2053</span>    }</div>
<div class="line"><span class="lineno"> 2054</span> </div>
<div class="line"><span class="lineno"> 2055</span>    <span class="comment">/* If index is not valid, idx will be DUK__NO_ARRAY_INDEX which</span></div>
<div class="line"><span class="lineno"> 2056</span><span class="comment">     * is 0xffffffffUL.  We don&#39;t need to check for that explicitly</span></div>
<div class="line"><span class="lineno"> 2057</span><span class="comment">     * because 0xffffffffUL will never be inside object &#39;a_size&#39;.</span></div>
<div class="line"><span class="lineno"> 2058</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2059</span> </div>
<div class="line"><span class="lineno"> 2060</span>    <span class="keywordflow">if</span> (idx &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {  <span class="comment">/* for resizing of array part, use slow path */</span></div>
<div class="line"><span class="lineno"> 2061</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2062</span>    }</div>
<div class="line"><span class="lineno"> 2063</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx != 0xffffffffUL);</div>
<div class="line"><span class="lineno"> 2064</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>);</div>
<div class="line"><span class="lineno"> 2065</span> </div>
<div class="line"><span class="lineno"> 2066</span>    old_len = <a class="code hl_function" href="#ae1c43ff4dda58761bcee283534131aa4">duk__get_old_array_length</a>(thr, obj, temp_desc);</div>
<div class="line"><span class="lineno"> 2067</span> </div>
<div class="line"><span class="lineno"> 2068</span>    <span class="keywordflow">if</span> (idx &gt;= old_len) {</div>
<div class="line"><span class="lineno"> 2069</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;write new array entry requires length update &quot;</span></div>
<div class="line"><span class="lineno"> 2070</span>                             <span class="stringliteral">&quot;(arr_idx=%ld, old_len=%ld)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2071</span>                             (<span class="keywordtype">long</span>) idx, (<span class="keywordtype">long</span>) old_len));</div>
<div class="line"><span class="lineno"> 2072</span>        <span class="keywordflow">if</span> (!(temp_desc-&gt;<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 2073</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14c541e1cf1141d70a7710b72402001a">DUK_STR_NOT_WRITABLE</a>);</div>
<div class="line"><span class="lineno"> 2074</span>            <span class="keywordflow">return</span> 0;  <span class="comment">/* not reachable */</span></div>
<div class="line"><span class="lineno"> 2075</span>        }</div>
<div class="line"><span class="lineno"> 2076</span>        new_len = idx + 1;</div>
<div class="line"><span class="lineno"> 2077</span> </div>
<div class="line"><span class="lineno"> 2078</span>        <span class="comment">/* No resize has occurred so temp_desc-&gt;e_idx is still OK */</span></div>
<div class="line"><span class="lineno"> 2079</span>        tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, temp_desc-&gt;<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 2080</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno"> 2081</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0f10525d790e1c628b226c4719834415">DUK_TVAL_SET_FASTINT_U32</a>(tv, new_len);  <span class="comment">/* no need for decref/incref because value is a number */</span></div>
<div class="line"><span class="lineno"> 2082</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2083</span>        ;</div>
<div class="line"><span class="lineno"> 2084</span>    }</div>
<div class="line"><span class="lineno"> 2085</span> </div>
<div class="line"><span class="lineno"> 2086</span>    tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, idx);</div>
<div class="line"><span class="lineno"> 2087</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a>(thr, tv, tv_val);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 2088</span> </div>
<div class="line"><span class="lineno"> 2089</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array fast path success for index %ld&quot;</span>, (<span class="keywordtype">long</span>) idx));</div>
<div class="line"><span class="lineno"> 2090</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2091</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a08c5179e202847bb714783a696959bef"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_EXOTIC_ARRAY(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04817">duktape-1.5.2/src-noline/duktape.c:4817</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a13623e5d472d92f656ad1d9a2875d277"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a></div><div class="ttdeci">#define DUK_ERROR_TYPE(thr, msg)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">duktape-1.5.2/src-noline/duktape.c:7882</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a14c541e1cf1141d70a7710b72402001a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14c541e1cf1141d70a7710b72402001a">DUK_STR_NOT_WRITABLE</a></div><div class="ttdeci">#define DUK_STR_NOT_WRITABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02283">duktape-1.5.2/src-noline/duktape.c:2283</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a707d3bb6b36563e69505b66a9b7335cf"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a></div><div class="ttdeci">#define DUK_TVAL_SET_TVAL_UPDREF</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04029">duktape-1.5.2/src-noline/duktape.c:4029</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_adfd1b77d5152d2f5ef72309ab0bc6c14"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#adfd1b77d5152d2f5ef72309ab0bc6c14">DUK_HOBJECT_HAS_EXTENSIBLE</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_EXTENSIBLE(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04803">duktape-1.5.2/src-noline/duktape.c:4803</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duk__get_old_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duk__tval_number_to_arr_idx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04817">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04803">DUK_HOBJECT_HAS_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02283">DUK_STR_NOT_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00806">DUK_TVAL_IS_DOUBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00710">DUK_TVAL_SET_FASTINT_U32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04029">DUK_TVAL_SET_TVAL_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a451066618c91472f9df793d04870b7b8" name="a451066618c91472f9df793d04870b7b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a451066618c91472f9df793d04870b7b8">&#9670;&#160;</a></span>duk__realloc_props()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__realloc_props </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>new_e_size</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>new_a_size</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>new_h_size</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>abandon_array</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">488</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  493</span>                                                  {</div>
<div class="line"><span class="lineno">  494</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno">  495</span><span class="preprocessor">#ifdef DUK_USE_MARK_AND_SWEEP</span></div>
<div class="line"><span class="lineno">  496</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> prev_mark_and_sweep_base_flags;</div>
<div class="line"><span class="lineno">  497</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  498</span>    duk_uint32_t new_alloc_size;</div>
<div class="line"><span class="lineno">  499</span>    duk_uint32_t new_e_size_adjusted;</div>
<div class="line"><span class="lineno">  500</span>    duk_uint8_t *new_p;</div>
<div class="line"><span class="lineno">  501</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> **new_e_k;</div>
<div class="line"><span class="lineno">  502</span>    <a class="code hl_union" href="unionduk__propvalue.html">duk_propvalue</a> *new_e_pv;</div>
<div class="line"><span class="lineno">  503</span>    duk_uint8_t *new_e_f;</div>
<div class="line"><span class="lineno">  504</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *new_a;</div>
<div class="line"><span class="lineno">  505</span>    duk_uint32_t *new_h;</div>
<div class="line"><span class="lineno">  506</span>    duk_uint32_t new_e_next;</div>
<div class="line"><span class="lineno">  507</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  510</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  511</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  512</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!abandon_array || new_a_size == 0);  <span class="comment">/* if abandon_array, new_a_size must be 0 */</span></div>
<div class="line"><span class="lineno">  513</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj) == 0 &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj) == 0));</div>
<div class="line"><span class="lineno">  514</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_h_size == 0 || new_h_size &gt;= new_e_size);  <span class="comment">/* required to guarantee success of rehashing,</span></div>
<div class="line"><span class="lineno">  515</span><span class="comment">                                                               * intentionally use unadjusted new_e_size</span></div>
<div class="line"><span class="lineno">  516</span><span class="comment">                                                               */</span></div>
<div class="line"><span class="lineno">  517</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj));</div>
<div class="line"><span class="lineno">  518</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  521</span><span class="comment">     *  Pre resize assertions.</span></div>
<div class="line"><span class="lineno">  522</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span><span class="preprocessor">#ifdef DUK_USE_ASSERTIONS</span></div>
<div class="line"><span class="lineno">  525</span>    <span class="comment">/* XXX: pre-checks (such as no duplicate keys) */</span></div>
<div class="line"><span class="lineno">  526</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  529</span><span class="comment">     *  For property layout 1, tweak e_size to ensure that the whole entry</span></div>
<div class="line"><span class="lineno">  530</span><span class="comment">     *  part (key + val + flags) is a suitable multiple for alignment</span></div>
<div class="line"><span class="lineno">  531</span><span class="comment">     *  (platform specific).</span></div>
<div class="line"><span class="lineno">  532</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  533</span><span class="comment">     *  Property layout 2 does not require this tweaking and is preferred</span></div>
<div class="line"><span class="lineno">  534</span><span class="comment">     *  on low RAM platforms requiring alignment.</span></div>
<div class="line"><span class="lineno">  535</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_LAYOUT_2) || defined(DUK_USE_HOBJECT_LAYOUT_3)</span></div>
<div class="line"><span class="lineno">  538</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;using layout 2 or 3, no need to pad e_size: %ld&quot;</span>, (<span class="keywordtype">long</span>) new_e_size));</div>
<div class="line"><span class="lineno">  539</span>    new_e_size_adjusted = new_e_size;</div>
<div class="line"><span class="lineno">  540</span><span class="preprocessor">#elif defined(DUK_USE_HOBJECT_LAYOUT_1) &amp;&amp; (DUK_HOBJECT_ALIGN_TARGET == 1)</span></div>
<div class="line"><span class="lineno">  541</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;using layout 1, but no need to pad e_size: %ld&quot;</span>, (<span class="keywordtype">long</span>) new_e_size));</div>
<div class="line"><span class="lineno">  542</span>    new_e_size_adjusted = new_e_size;</div>
<div class="line"><span class="lineno">  543</span><span class="preprocessor">#elif defined(DUK_USE_HOBJECT_LAYOUT_1) &amp;&amp; ((DUK_HOBJECT_ALIGN_TARGET == 4) || (DUK_HOBJECT_ALIGN_TARGET == 8))</span></div>
<div class="line"><span class="lineno">  544</span>    new_e_size_adjusted = (new_e_size + <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0bb57d0ab1ada5902227f4cf9ae2d1bb">DUK_HOBJECT_ALIGN_TARGET</a> - 1) &amp; (~(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0bb57d0ab1ada5902227f4cf9ae2d1bb">DUK_HOBJECT_ALIGN_TARGET</a> - 1));</div>
<div class="line"><span class="lineno">  545</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;using layout 1, and alignment target is %ld, adjusted e_size: %ld -&gt; %ld&quot;</span>,</div>
<div class="line"><span class="lineno">  546</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0bb57d0ab1ada5902227f4cf9ae2d1bb">DUK_HOBJECT_ALIGN_TARGET</a>, (<span class="keywordtype">long</span>) new_e_size, (<span class="keywordtype">long</span>) new_e_size_adjusted));</div>
<div class="line"><span class="lineno">  547</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_e_size_adjusted &gt;= new_e_size);</div>
<div class="line"><span class="lineno">  548</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  549</span><span class="preprocessor">#error invalid hobject layout defines</span></div>
<div class="line"><span class="lineno">  550</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  553</span><span class="comment">     *  Debug logging after adjustment.</span></div>
<div class="line"><span class="lineno">  554</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;attempt to resize hobject %p props (%ld -&gt; %ld bytes), from {p=%p,e_size=%ld,e_next=%ld,a_size=%ld,h_size=%ld} to &quot;</span></div>
<div class="line"><span class="lineno">  557</span>                         <span class="stringliteral">&quot;{e_size=%ld,a_size=%ld,h_size=%ld}, abandon_array=%ld, unadjusted new_e_size=%ld&quot;</span>,</div>
<div class="line"><span class="lineno">  558</span>                         (<span class="keywordtype">void</span> *) obj,</div>
<div class="line"><span class="lineno">  559</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a16d4e1206492a964d6a0ea05769c8ec7">DUK_HOBJECT_P_COMPUTE_SIZE</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj),</div>
<div class="line"><span class="lineno">  560</span>                                                           <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj),</div>
<div class="line"><span class="lineno">  561</span>                                                           <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj)),</div>
<div class="line"><span class="lineno">  562</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a16d4e1206492a964d6a0ea05769c8ec7">DUK_HOBJECT_P_COMPUTE_SIZE</a>(new_e_size_adjusted, new_a_size, new_h_size),</div>
<div class="line"><span class="lineno">  563</span>                         (<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj),</div>
<div class="line"><span class="lineno">  564</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj),</div>
<div class="line"><span class="lineno">  565</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj),</div>
<div class="line"><span class="lineno">  566</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj),</div>
<div class="line"><span class="lineno">  567</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj),</div>
<div class="line"><span class="lineno">  568</span>                         (<span class="keywordtype">long</span>) new_e_size_adjusted,</div>
<div class="line"><span class="lineno">  569</span>                         (<span class="keywordtype">long</span>) new_a_size,</div>
<div class="line"><span class="lineno">  570</span>                         (<span class="keywordtype">long</span>) new_h_size,</div>
<div class="line"><span class="lineno">  571</span>                         (<span class="keywordtype">long</span>) abandon_array,</div>
<div class="line"><span class="lineno">  572</span>                         (<span class="keywordtype">long</span>) new_e_size));</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  575</span><span class="comment">     *  Property count check.  This is the only point where we ensure that</span></div>
<div class="line"><span class="lineno">  576</span><span class="comment">     *  we don&#39;t get more (allocated) property space that we can handle.</span></div>
<div class="line"><span class="lineno">  577</span><span class="comment">     *  There aren&#39;t hard limits as such, but some algorithms fail (e.g.</span></div>
<div class="line"><span class="lineno">  578</span><span class="comment">     *  finding next higher prime, selecting hash part size) if we get too</span></div>
<div class="line"><span class="lineno">  579</span><span class="comment">     *  close to the 4G property limit.</span></div>
<div class="line"><span class="lineno">  580</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  581</span><span class="comment">     *  Since this works based on allocation size (not actually used size),</span></div>
<div class="line"><span class="lineno">  582</span><span class="comment">     *  the limit is a bit approximate but good enough in practice.</span></div>
<div class="line"><span class="lineno">  583</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>    <span class="keywordflow">if</span> (new_e_size_adjusted + new_a_size &gt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a982bd80b8ade0824925b6595d0c5edec">DUK_HOBJECT_MAX_PROPERTIES</a>) {</div>
<div class="line"><span class="lineno">  586</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5fc109d385b92565eabeee85564cbfd3">DUK_ERROR_ALLOC_DEFMSG</a>(thr);</div>
<div class="line"><span class="lineno">  587</span>    }</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  590</span><span class="comment">     *  Compute new alloc size and alloc new area.</span></div>
<div class="line"><span class="lineno">  591</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  592</span><span class="comment">     *  The new area is allocated as a dynamic buffer and placed into the</span></div>
<div class="line"><span class="lineno">  593</span><span class="comment">     *  valstack for reachability.  The actual buffer is then detached at</span></div>
<div class="line"><span class="lineno">  594</span><span class="comment">     *  the end.</span></div>
<div class="line"><span class="lineno">  595</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  596</span><span class="comment">     *  Note: heap_mark_and_sweep_base_flags are altered here to ensure</span></div>
<div class="line"><span class="lineno">  597</span><span class="comment">     *  no-one touches this object while we&#39;re resizing and rehashing it.</span></div>
<div class="line"><span class="lineno">  598</span><span class="comment">     *  The flags must be reset on every exit path after it.  Finalizers</span></div>
<div class="line"><span class="lineno">  599</span><span class="comment">     *  and compaction is prevented currently for all objects while it</span></div>
<div class="line"><span class="lineno">  600</span><span class="comment">     *  would be enough to restrict it only for the current object.</span></div>
<div class="line"><span class="lineno">  601</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span><span class="preprocessor">#ifdef DUK_USE_MARK_AND_SWEEP</span></div>
<div class="line"><span class="lineno">  604</span>    prev_mark_and_sweep_base_flags = thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a>;</div>
<div class="line"><span class="lineno">  605</span>    thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> |=</div>
<div class="line"><span class="lineno">  606</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5a28b04424e5e385313e2e5821eb3a97">DUK_MS_FLAG_NO_FINALIZERS</a> |         <span class="comment">/* avoid attempts to add/remove object keys */</span></div>
<div class="line"><span class="lineno">  607</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0305cbeb6c7973f1ac43e4c9553fd69b">DUK_MS_FLAG_NO_OBJECT_COMPACTION</a>;   <span class="comment">/* avoid attempt to compact the current object */</span></div>
<div class="line"><span class="lineno">  608</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>    new_alloc_size = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a16d4e1206492a964d6a0ea05769c8ec7">DUK_HOBJECT_P_COMPUTE_SIZE</a>(new_e_size_adjusted, new_a_size, new_h_size);</div>
<div class="line"><span class="lineno">  611</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new hobject allocation size is %ld&quot;</span>, (<span class="keywordtype">long</span>) new_alloc_size));</div>
<div class="line"><span class="lineno">  612</span>    new_e_next = 0;</div>
<div class="line"><span class="lineno">  613</span>    new_e_k = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  614</span>    <span class="keywordflow">if</span> (new_alloc_size == 0) {</div>
<div class="line"><span class="lineno">  615</span>        <span class="comment">/* for zero size, don&#39;t push anything on valstack */</span></div>
<div class="line"><span class="lineno">  616</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_e_size_adjusted == 0);</div>
<div class="line"><span class="lineno">  617</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_a_size == 0);</div>
<div class="line"><span class="lineno">  618</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_h_size == 0);</div>
<div class="line"><span class="lineno">  619</span>        new_p = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  620</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  621</span>        <span class="comment">/* This may trigger mark-and-sweep with arbitrary side effects,</span></div>
<div class="line"><span class="lineno">  622</span><span class="comment">         * including an attempted resize of the object we&#39;re resizing,</span></div>
<div class="line"><span class="lineno">  623</span><span class="comment">         * executing a finalizer which may add or remove properties of</span></div>
<div class="line"><span class="lineno">  624</span><span class="comment">         * the object we&#39;re resizing etc.</span></div>
<div class="line"><span class="lineno">  625</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span><span class="preprocessor">#if 0  </span><span class="comment">/* XXX: inject test */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  628</span>        <span class="keywordflow">if</span> (1) {</div>
<div class="line"><span class="lineno">  629</span>            <span class="keywordflow">goto</span> alloc_failed;</div>
<div class="line"><span class="lineno">  630</span>        }</div>
<div class="line"><span class="lineno">  631</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  632</span>        new_p = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1749cfba8c899b635e9adfb4ee2c647f">DUK_ALLOC</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, new_alloc_size);</div>
<div class="line"><span class="lineno">  633</span>        <span class="keywordflow">if</span> (new_p == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno">  634</span>            <span class="comment">/* NULL always indicates alloc failure because</span></div>
<div class="line"><span class="lineno">  635</span><span class="comment">             * new_alloc_size &gt; 0.</span></div>
<div class="line"><span class="lineno">  636</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  637</span>            <span class="keywordflow">goto</span> alloc_failed;</div>
<div class="line"><span class="lineno">  638</span>        }</div>
<div class="line"><span class="lineno">  639</span>    }</div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span>    <span class="comment">/* Set up pointers to the new property area: this is hidden behind a macro</span></div>
<div class="line"><span class="lineno">  642</span><span class="comment">     * because it is memory layout specific.</span></div>
<div class="line"><span class="lineno">  643</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  644</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6be3191361a369188e2cf9bc22e9c678">DUK_HOBJECT_P_SET_REALLOC_PTRS</a>(new_p, new_e_k, new_e_pv, new_e_f, new_a, new_h,</div>
<div class="line"><span class="lineno">  645</span>                                   new_e_size_adjusted, new_a_size, new_h_size);</div>
<div class="line"><span class="lineno">  646</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(new_h);  <span class="comment">/* happens when hash part dropped */</span></div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>    <span class="comment">/* if new_p == NULL, all of these pointers are NULL */</span></div>
<div class="line"><span class="lineno">  649</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((new_p != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><span class="lineno">  650</span>               (new_e_k == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_e_pv == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_e_f == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  651</span>                new_a == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_h == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new alloc size %ld, new_e_k=%p, new_e_pv=%p, new_e_f=%p, new_a=%p, new_h=%p&quot;</span>,</div>
<div class="line"><span class="lineno">  654</span>                         (<span class="keywordtype">long</span>) new_alloc_size, (<span class="keywordtype">void</span> *) new_e_k, (<span class="keywordtype">void</span> *) new_e_pv, (<span class="keywordtype">void</span> *) new_e_f,</div>
<div class="line"><span class="lineno">  655</span>                         (<span class="keywordtype">void</span> *) new_a, (<span class="keywordtype">void</span> *) new_h));</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  658</span><span class="comment">     *  Migrate array to start of entries if requested.</span></div>
<div class="line"><span class="lineno">  659</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  660</span><span class="comment">     *  Note: from an enumeration perspective the order of entry keys matters.</span></div>
<div class="line"><span class="lineno">  661</span><span class="comment">     *  Array keys should appear wherever they appeared before the array abandon</span></div>
<div class="line"><span class="lineno">  662</span><span class="comment">     *  operation.</span></div>
<div class="line"><span class="lineno">  663</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">if</span> (abandon_array) {</div>
<div class="line"><span class="lineno">  666</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  667</span><span class="comment">         *  Note: assuming new_a_size == 0, and that entry part contains</span></div>
<div class="line"><span class="lineno">  668</span><span class="comment">         *  no conflicting keys, refcounts do not need to be adjusted for</span></div>
<div class="line"><span class="lineno">  669</span><span class="comment">         *  the values, as they remain exactly the same.</span></div>
<div class="line"><span class="lineno">  670</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno">  671</span><span class="comment">         *  The keys, however, need to be interned, incref&#39;d, and be</span></div>
<div class="line"><span class="lineno">  672</span><span class="comment">         *  reachable for GC.  Any intern attempt may trigger a GC and</span></div>
<div class="line"><span class="lineno">  673</span><span class="comment">         *  claim any non-reachable strings, so every key must be reachable</span></div>
<div class="line"><span class="lineno">  674</span><span class="comment">         *  at all times.</span></div>
<div class="line"><span class="lineno">  675</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno">  676</span><span class="comment">         *  A longjmp must not occur here, as the new_p allocation would</span></div>
<div class="line"><span class="lineno">  677</span><span class="comment">         *  be freed without these keys being decref&#39;d, hence the messy</span></div>
<div class="line"><span class="lineno">  678</span><span class="comment">         *  decref handling if intern fails.</span></div>
<div class="line"><span class="lineno">  679</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  680</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_a_size == 0);</div>
<div class="line"><span class="lineno">  681</span> </div>
<div class="line"><span class="lineno">  682</span>        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj); i++) {</div>
<div class="line"><span class="lineno">  683</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv1;</div>
<div class="line"><span class="lineno">  684</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv2;</div>
<div class="line"><span class="lineno">  685</span>            <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key;</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>            tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno">  690</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv1)) {</div>
<div class="line"><span class="lineno">  691</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  692</span>            }</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_p != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_e_k != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  695</span>                       new_e_pv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_e_f != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  698</span><span class="comment">             *  Intern key via the valstack to ensure reachability behaves</span></div>
<div class="line"><span class="lineno">  699</span><span class="comment">             *  properly.  We must avoid longjmp&#39;s here so use non-checked</span></div>
<div class="line"><span class="lineno">  700</span><span class="comment">             *  primitives.</span></div>
<div class="line"><span class="lineno">  701</span><span class="comment">             *</span></div>
<div class="line"><span class="lineno">  702</span><span class="comment">             *  Note: duk_check_stack() potentially reallocs the valstack,</span></div>
<div class="line"><span class="lineno">  703</span><span class="comment">             *  invalidating any duk_tval pointers to valstack.  Callers</span></div>
<div class="line"><span class="lineno">  704</span><span class="comment">             *  must be careful.</span></div>
<div class="line"><span class="lineno">  705</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>            <span class="comment">/* never shrinks; auto-adds DUK_VALSTACK_INTERNAL_EXTRA, which is generous */</span></div>
<div class="line"><span class="lineno">  708</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acadd1efb7e4754c42991d62828e8f59d">duk_check_stack</a>(ctx, 1)) {</div>
<div class="line"><span class="lineno">  709</span>                <span class="keywordflow">goto</span> abandon_error;</div>
<div class="line"><span class="lineno">  710</span>            }</div>
<div class="line"><span class="lineno">  711</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, 1);</div>
<div class="line"><span class="lineno">  712</span>            key = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a587f5f9db6b84ab93099e1d2d510546c">duk_heap_string_intern_u32</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, i);</div>
<div class="line"><span class="lineno">  713</span>            <span class="keywordflow">if</span> (!key) {</div>
<div class="line"><span class="lineno">  714</span>                <span class="keywordflow">goto</span> abandon_error;</div>
<div class="line"><span class="lineno">  715</span>            }</div>
<div class="line"><span class="lineno">  716</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad6689700af6d15006d6985ccd6093fef">duk_push_hstring</a>(ctx, key);  <span class="comment">/* keep key reachable for GC etc; guaranteed not to fail */</span></div>
<div class="line"><span class="lineno">  717</span> </div>
<div class="line"><span class="lineno">  718</span>            <span class="comment">/* key is now reachable in the valstack */</span></div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6efa0bbb0ab468fe5c7c57719088f682">DUK_HSTRING_INCREF</a>(thr, key);   <span class="comment">/* second incref for the entry reference */</span></div>
<div class="line"><span class="lineno">  721</span>            new_e_k[new_e_next] = key;</div>
<div class="line"><span class="lineno">  722</span>            tv2 = &amp;new_e_pv[new_e_next].<a class="code hl_variable" href="structduk__tval__struct.html#a397de34bef5c7769363916277ac51a20">v</a>;  <span class="comment">/* array entries are all plain values */</span></div>
<div class="line"><span class="lineno">  723</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(tv2, tv1);</div>
<div class="line"><span class="lineno">  724</span>            new_e_f[new_e_next] = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a> |</div>
<div class="line"><span class="lineno">  725</span>                                  <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a> |</div>
<div class="line"><span class="lineno">  726</span>                                  <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>;</div>
<div class="line"><span class="lineno">  727</span>            new_e_next++;</div>
<div class="line"><span class="lineno">  728</span> </div>
<div class="line"><span class="lineno">  729</span>            <span class="comment">/* Note: new_e_next matches pushed temp key count, and nothing can</span></div>
<div class="line"><span class="lineno">  730</span><span class="comment">             * fail above between the push and this point.</span></div>
<div class="line"><span class="lineno">  731</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  732</span>        }</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;abandon array: pop %ld key temps from valstack&quot;</span>, (<span class="keywordtype">long</span>) new_e_next));</div>
<div class="line"><span class="lineno">  735</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaccb78cf03473e5aafa6677a4eca8447">duk_pop_n</a>(ctx, new_e_next);</div>
<div class="line"><span class="lineno">  736</span>    }</div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  739</span><span class="comment">     *  Copy keys and values in the entry part (compacting them at the same time).</span></div>
<div class="line"><span class="lineno">  740</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  741</span> </div>
<div class="line"><span class="lineno">  742</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj); i++) {</div>
<div class="line"><span class="lineno">  743</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key;</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  746</span> </div>
<div class="line"><span class="lineno">  747</span>        key = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno">  748</span>        <span class="keywordflow">if</span> (!key) {</div>
<div class="line"><span class="lineno">  749</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  750</span>        }</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_p != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_e_k != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  753</span>                   new_e_pv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_e_f != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>        new_e_k[new_e_next] = key;</div>
<div class="line"><span class="lineno">  756</span>        new_e_pv[new_e_next] = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac981f7f5a4f589188a5f5ff4f1b80e4a">DUK_HOBJECT_E_GET_VALUE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno">  757</span>        new_e_f[new_e_next] = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad2b534c718f0bed901cab77d6ff97cef">DUK_HOBJECT_E_GET_FLAGS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno">  758</span>        new_e_next++;</div>
<div class="line"><span class="lineno">  759</span>    }</div>
<div class="line"><span class="lineno">  760</span>    <span class="comment">/* the entries [new_e_next, new_e_size_adjusted[ are left uninitialized on purpose (ok, not gc reachable) */</span></div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  763</span><span class="comment">     *  Copy array elements to new array part.</span></div>
<div class="line"><span class="lineno">  764</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>    <span class="keywordflow">if</span> (new_a_size &gt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {</div>
<div class="line"><span class="lineno">  767</span>        <span class="comment">/* copy existing entries as is */</span></div>
<div class="line"><span class="lineno">  768</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_p != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; new_a != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  769</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj) &gt; 0) {</div>
<div class="line"><span class="lineno">  770</span>            <span class="comment">/* Avoid zero copy with an invalid pointer.  If obj-&gt;p is NULL,</span></div>
<div class="line"><span class="lineno">  771</span><span class="comment">             * the &#39;new_a&#39; pointer will be invalid which is not allowed even</span></div>
<div class="line"><span class="lineno">  772</span><span class="comment">             * when copy size is zero.</span></div>
<div class="line"><span class="lineno">  773</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  774</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  775</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj) &gt; 0);</div>
<div class="line"><span class="lineno">  776</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) new_a, (<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a311299b96f140e073342851f5854b384">DUK_HOBJECT_A_GET_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj), <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a>) * <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj));</div>
<div class="line"><span class="lineno">  777</span>        }</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>        <span class="comment">/* fill new entries with -unused- (required, gc reachable) */</span></div>
<div class="line"><span class="lineno">  780</span>        <span class="keywordflow">for</span> (i = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj); i &lt; new_a_size; i++) {</div>
<div class="line"><span class="lineno">  781</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv = &amp;new_a[i];</div>
<div class="line"><span class="lineno">  782</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3aedca98523a08787e58e47e8c1e6fa1">DUK_TVAL_SET_UNUSED</a>(tv);</div>
<div class="line"><span class="lineno">  783</span>        }</div>
<div class="line"><span class="lineno">  784</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  785</span><span class="preprocessor">#ifdef DUK_USE_ASSERTIONS</span></div>
<div class="line"><span class="lineno">  786</span>        <span class="comment">/* caller must have decref&#39;d values above new_a_size (if that is necessary) */</span></div>
<div class="line"><span class="lineno">  787</span>        <span class="keywordflow">if</span> (!abandon_array) {</div>
<div class="line"><span class="lineno">  788</span>            <span class="keywordflow">for</span> (i = new_a_size; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj); i++) {</div>
<div class="line"><span class="lineno">  789</span>                <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno">  790</span>                tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>                <span class="comment">/* current assertion is quite strong: decref&#39;s and set to unused */</span></div>
<div class="line"><span class="lineno">  793</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv));</div>
<div class="line"><span class="lineno">  794</span>            }</div>
<div class="line"><span class="lineno">  795</span>        }</div>
<div class="line"><span class="lineno">  796</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  797</span>        <span class="keywordflow">if</span> (new_a_size &gt; 0) {</div>
<div class="line"><span class="lineno">  798</span>            <span class="comment">/* Avoid zero copy with an invalid pointer.  If obj-&gt;p is NULL,</span></div>
<div class="line"><span class="lineno">  799</span><span class="comment">             * the &#39;new_a&#39; pointer will be invalid which is not allowed even</span></div>
<div class="line"><span class="lineno">  800</span><span class="comment">             * when copy size is zero.</span></div>
<div class="line"><span class="lineno">  801</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  802</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  803</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_a_size &gt; 0);</div>
<div class="line"><span class="lineno">  804</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) new_a, (<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a311299b96f140e073342851f5854b384">DUK_HOBJECT_A_GET_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj), <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a>) * new_a_size);</div>
<div class="line"><span class="lineno">  805</span>        }</div>
<div class="line"><span class="lineno">  806</span>    }</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  809</span><span class="comment">     *  Rebuild the hash part always from scratch (guaranteed to finish).</span></div>
<div class="line"><span class="lineno">  810</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  811</span><span class="comment">     *  Any resize of hash part requires rehashing.  In addition, by rehashing</span></div>
<div class="line"><span class="lineno">  812</span><span class="comment">     *  get rid of any elements marked deleted (DUK__HASH_DELETED) which is critical</span></div>
<div class="line"><span class="lineno">  813</span><span class="comment">     *  to ensuring the hash part never fills up.</span></div>
<div class="line"><span class="lineno">  814</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_HASH_PART)</span></div>
<div class="line"><span class="lineno">  817</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(new_h_size &gt; 0)) {</div>
<div class="line"><span class="lineno">  818</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>        <span class="comment">/* fill new_h with u32 0xff = UNUSED */</span></div>
<div class="line"><span class="lineno">  821</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  822</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_h_size &gt; 0);</div>
<div class="line"><span class="lineno">  823</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6fc676d518bd1be6649d3625fdfe4b83">DUK_MEMSET</a>(new_h, 0xff, <span class="keyword">sizeof</span>(duk_uint32_t) * new_h_size);</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_e_next &lt;= new_h_size);  <span class="comment">/* equality not actually possible */</span></div>
<div class="line"><span class="lineno">  826</span>        <span class="keywordflow">for</span> (i = 0; i &lt; new_e_next; i++) {</div>
<div class="line"><span class="lineno">  827</span>            <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key = new_e_k[i];</div>
<div class="line"><span class="lineno">  828</span>            duk_uint32_t j, step;</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  831</span>            j = <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key), new_h_size);</div>
<div class="line"><span class="lineno">  832</span>            step = <a class="code hl_define" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key));</div>
<div class="line"><span class="lineno">  833</span> </div>
<div class="line"><span class="lineno">  834</span>            <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  835</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_h[j] != <a class="code hl_define" href="#aa731720f3ca3ca6d52941e2c782aa2b0">DUK__HASH_DELETED</a>);  <span class="comment">/* should never happen */</span></div>
<div class="line"><span class="lineno">  836</span>                <span class="keywordflow">if</span> (new_h[j] == <a class="code hl_define" href="#a9b856316cf6be3a188fe326c601a6604">DUK__HASH_UNUSED</a>) {</div>
<div class="line"><span class="lineno">  837</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;rebuild hit %ld -&gt; %ld&quot;</span>, (<span class="keywordtype">long</span>) j, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno">  838</span>                    new_h[j] = i;</div>
<div class="line"><span class="lineno">  839</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  840</span>                }</div>
<div class="line"><span class="lineno">  841</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;rebuild miss %ld, step %ld&quot;</span>, (<span class="keywordtype">long</span>) j, (<span class="keywordtype">long</span>) step));</div>
<div class="line"><span class="lineno">  842</span>                j = (j + step) % new_h_size;</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>                <span class="comment">/* guaranteed to finish */</span></div>
<div class="line"><span class="lineno">  845</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(j != (duk_uint32_t) <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key), new_h_size));</div>
<div class="line"><span class="lineno">  846</span>            }</div>
<div class="line"><span class="lineno">  847</span>        }</div>
<div class="line"><span class="lineno">  848</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  849</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;no hash part, no rehash&quot;</span>));</div>
<div class="line"><span class="lineno">  850</span>    }</div>
<div class="line"><span class="lineno">  851</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_HOBJECT_HASH_PART */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  854</span><span class="comment">     *  Nice debug log.</span></div>
<div class="line"><span class="lineno">  855</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  856</span> </div>
<div class="line"><span class="lineno">  857</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;resized hobject %p props (%ld -&gt; %ld bytes), from {p=%p,e_size=%ld,e_next=%ld,a_size=%ld,h_size=%ld} to &quot;</span></div>
<div class="line"><span class="lineno">  858</span>                       <span class="stringliteral">&quot;{p=%p,e_size=%ld,e_next=%ld,a_size=%ld,h_size=%ld}, abandon_array=%ld, unadjusted new_e_size=%ld&quot;</span>,</div>
<div class="line"><span class="lineno">  859</span>                       (<span class="keywordtype">void</span> *) obj,</div>
<div class="line"><span class="lineno">  860</span>                       (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a16d4e1206492a964d6a0ea05769c8ec7">DUK_HOBJECT_P_COMPUTE_SIZE</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj),</div>
<div class="line"><span class="lineno">  861</span>                                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj),</div>
<div class="line"><span class="lineno">  862</span>                                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj)),</div>
<div class="line"><span class="lineno">  863</span>                       (<span class="keywordtype">long</span>) new_alloc_size,</div>
<div class="line"><span class="lineno">  864</span>                       (<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj),</div>
<div class="line"><span class="lineno">  865</span>                       (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj),</div>
<div class="line"><span class="lineno">  866</span>                       (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj),</div>
<div class="line"><span class="lineno">  867</span>                       (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj),</div>
<div class="line"><span class="lineno">  868</span>                       (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj),</div>
<div class="line"><span class="lineno">  869</span>                       (<span class="keywordtype">void</span> *) new_p,</div>
<div class="line"><span class="lineno">  870</span>                       (<span class="keywordtype">long</span>) new_e_size_adjusted,</div>
<div class="line"><span class="lineno">  871</span>                       (<span class="keywordtype">long</span>) new_e_next,</div>
<div class="line"><span class="lineno">  872</span>                       (<span class="keywordtype">long</span>) new_a_size,</div>
<div class="line"><span class="lineno">  873</span>                       (<span class="keywordtype">long</span>) new_h_size,</div>
<div class="line"><span class="lineno">  874</span>                       (<span class="keywordtype">long</span>) abandon_array,</div>
<div class="line"><span class="lineno">  875</span>                       (<span class="keywordtype">long</span>) new_e_size));</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  878</span><span class="comment">     *  All done, switch properties (&#39;p&#39;) allocation to new one.</span></div>
<div class="line"><span class="lineno">  879</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj));  <span class="comment">/* NULL obj-&gt;p is OK */</span></div>
<div class="line"><span class="lineno">  882</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47d9d1441c4b56f4e48023abba38f28c">DUK_HOBJECT_SET_PROPS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, new_p);</div>
<div class="line"><span class="lineno">  883</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5efdb0e79955835a507966c6d429f40f">DUK_HOBJECT_SET_ESIZE</a>(obj, new_e_size_adjusted);</div>
<div class="line"><span class="lineno">  884</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9c5872632f1f48da9d5cf041b1fb66ae">DUK_HOBJECT_SET_ENEXT</a>(obj, new_e_next);</div>
<div class="line"><span class="lineno">  885</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab5b956d003eb706bd0f65b0940c379f6">DUK_HOBJECT_SET_ASIZE</a>(obj, new_a_size);</div>
<div class="line"><span class="lineno">  886</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acbd149d8e8166c8f7f37a1718f76698f">DUK_HOBJECT_SET_HSIZE</a>(obj, new_h_size);</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>    <span class="comment">/* clear array part flag only after switching */</span></div>
<div class="line"><span class="lineno">  889</span>    <span class="keywordflow">if</span> (abandon_array) {</div>
<div class="line"><span class="lineno">  890</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abcb5783793c021c061b2a2027e1f2b60">DUK_HOBJECT_CLEAR_ARRAY_PART</a>(obj);</div>
<div class="line"><span class="lineno">  891</span>    }</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;resize result: %!O&quot;</span>, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj));</div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span><span class="preprocessor">#ifdef DUK_USE_MARK_AND_SWEEP</span></div>
<div class="line"><span class="lineno">  896</span>    thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> = prev_mark_and_sweep_base_flags;</div>
<div class="line"><span class="lineno">  897</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  900</span><span class="comment">     *  Post resize assertions.</span></div>
<div class="line"><span class="lineno">  901</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span><span class="preprocessor">#ifdef DUK_USE_ASSERTIONS</span></div>
<div class="line"><span class="lineno">  904</span>    <span class="comment">/* XXX: post-checks (such as no duplicate keys) */</span></div>
<div class="line"><span class="lineno">  905</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  906</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  909</span><span class="comment">     *  Abandon array failed, need to decref keys already inserted</span></div>
<div class="line"><span class="lineno">  910</span><span class="comment">     *  into the beginning of new_e_k before unwinding valstack.</span></div>
<div class="line"><span class="lineno">  911</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span> abandon_error:</div>
<div class="line"><span class="lineno">  914</span> alloc_failed:</div>
<div class="line"><span class="lineno">  915</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;object property table resize failed&quot;</span>));</div>
<div class="line"><span class="lineno">  916</span> </div>
<div class="line"><span class="lineno">  917</span>    i = new_e_next;</div>
<div class="line"><span class="lineno">  918</span>    <span class="keywordflow">while</span> (i &gt; 0) {</div>
<div class="line"><span class="lineno">  919</span>        i--;</div>
<div class="line"><span class="lineno">  920</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_e_k != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  921</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_e_k[i] != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  922</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6e23c3f2eb0742d6b46085978c7a02ba">DUK_HSTRING_DECREF</a>(thr, new_e_k[i]);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno">  923</span>    }</div>
<div class="line"><span class="lineno">  924</span> </div>
<div class="line"><span class="lineno">  925</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, new_p);  <span class="comment">/* OK for NULL. */</span></div>
<div class="line"><span class="lineno">  926</span> </div>
<div class="line"><span class="lineno">  927</span><span class="preprocessor">#ifdef DUK_USE_MARK_AND_SWEEP</span></div>
<div class="line"><span class="lineno">  928</span>    thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> = prev_mark_and_sweep_base_flags;</div>
<div class="line"><span class="lineno">  929</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5fc109d385b92565eabeee85564cbfd3">DUK_ERROR_ALLOC_DEFMSG</a>(thr);</div>
<div class="line"><span class="lineno">  932</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a6fc676d518bd1be6649d3625fdfe4b83"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6fc676d518bd1be6649d3625fdfe4b83">DUK_MEMSET</a></div><div class="ttdeci">#define DUK_MEMSET</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01994">duktape-1.5.2/src-noline/duk_config.h:1994</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ac7d67e911a142526da07c087049e1c90"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a></div><div class="ttdeci">#define DUK_MEMCPY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">duktape-1.5.2/src-noline/duk_config.h:1984</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0305cbeb6c7973f1ac43e4c9553fd69b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0305cbeb6c7973f1ac43e4c9553fd69b">DUK_MS_FLAG_NO_OBJECT_COMPACTION</a></div><div class="ttdeci">#define DUK_MS_FLAG_NO_OBJECT_COMPACTION</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06720">duktape-1.5.2/src-noline/duktape.c:6720</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a04ff20dec8ac63c2010d16bcfd823d15"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a></div><div class="ttdeci">#define DUK_TVAL_SET_TVAL(v, x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">duktape-1.5.2/src-noline/duktape.c:755</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0bb57d0ab1ada5902227f4cf9ae2d1bb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0bb57d0ab1ada5902227f4cf9ae2d1bb">DUK_HOBJECT_ALIGN_TARGET</a></div><div class="ttdeci">#define DUK_HOBJECT_ALIGN_TARGET</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05270">duktape-1.5.2/src-noline/duktape.c:5270</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a16d4e1206492a964d6a0ea05769c8ec7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a16d4e1206492a964d6a0ea05769c8ec7">DUK_HOBJECT_P_COMPUTE_SIZE</a></div><div class="ttdeci">#define DUK_HOBJECT_P_COMPUTE_SIZE(n_ent, n_arr, n_hash)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05014">duktape-1.5.2/src-noline/duktape.c:5014</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1749cfba8c899b635e9adfb4ee2c647f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1749cfba8c899b635e9adfb4ee2c647f">DUK_ALLOC</a></div><div class="ttdeci">#define DUK_ALLOC(heap, size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06862">duktape-1.5.2/src-noline/duktape.c:6862</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2ad9f50b0b06028542cdaceec420d637"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ad9f50b0b06028542cdaceec420d637">DUK_HOBJECT_GET_PROPS</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_PROPS(heap, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04931">duktape-1.5.2/src-noline/duktape.c:4931</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3aedca98523a08787e58e47e8c1e6fa1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3aedca98523a08787e58e47e8c1e6fa1">DUK_TVAL_SET_UNUSED</a></div><div class="ttdeci">#define DUK_TVAL_SET_UNUSED(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00662">duktape-1.5.2/src-noline/duktape.c:662</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a47d9d1441c4b56f4e48023abba38f28c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a47d9d1441c4b56f4e48023abba38f28c">DUK_HOBJECT_SET_PROPS</a></div><div class="ttdeci">#define DUK_HOBJECT_SET_PROPS(heap, h, x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04933">duktape-1.5.2/src-noline/duktape.c:4933</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a571cb7da08d904b60be353682be305a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a></div><div class="ttdeci">#define DUK_FREE(heap, ptr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06866">duktape-1.5.2/src-noline/duktape.c:6866</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a587f5f9db6b84ab93099e1d2d510546c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a587f5f9db6b84ab93099e1d2d510546c">duk_heap_string_intern_u32</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hstring * duk_heap_string_intern_u32(duk_heap *heap, duk_uint32_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l45671">duktape-1.5.2/src-noline/duktape.c:45671</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5a28b04424e5e385313e2e5821eb3a97"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5a28b04424e5e385313e2e5821eb3a97">DUK_MS_FLAG_NO_FINALIZERS</a></div><div class="ttdeci">#define DUK_MS_FLAG_NO_FINALIZERS</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06721">duktape-1.5.2/src-noline/duktape.c:6721</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5efdb0e79955835a507966c6d429f40f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5efdb0e79955835a507966c6d429f40f">DUK_HOBJECT_SET_ESIZE</a></div><div class="ttdeci">#define DUK_HOBJECT_SET_ESIZE(h, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05176">duktape-1.5.2/src-noline/duktape.c:5176</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5fc109d385b92565eabeee85564cbfd3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5fc109d385b92565eabeee85564cbfd3">DUK_ERROR_ALLOC_DEFMSG</a></div><div class="ttdeci">#define DUK_ERROR_ALLOC_DEFMSG(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07862">duktape-1.5.2/src-noline/duktape.c:7862</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6be3191361a369188e2cf9bc22e9c678"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6be3191361a369188e2cf9bc22e9c678">DUK_HOBJECT_P_SET_REALLOC_PTRS</a></div><div class="ttdeci">#define DUK_HOBJECT_P_SET_REALLOC_PTRS(p_base, set_e_k, set_e_pv, set_e_f, set_a, set_h, n_ent, n_arr, n_hash)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05021">duktape-1.5.2/src-noline/duktape.c:5021</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6e23c3f2eb0742d6b46085978c7a02ba"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6e23c3f2eb0742d6b46085978c7a02ba">DUK_HSTRING_DECREF</a></div><div class="ttdeci">#define DUK_HSTRING_DECREF(thr, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03821">duktape-1.5.2/src-noline/duktape.c:3821</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9c5872632f1f48da9d5cf041b1fb66ae"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9c5872632f1f48da9d5cf041b1fb66ae">DUK_HOBJECT_SET_ENEXT</a></div><div class="ttdeci">#define DUK_HOBJECT_SET_ENEXT(h, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05178">duktape-1.5.2/src-noline/duktape.c:5178</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaccb78cf03473e5aafa6677a4eca8447"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaccb78cf03473e5aafa6677a4eca8447">duk_pop_n</a></div><div class="ttdeci">DUK_EXTERNAL void duk_pop_n(duk_context *ctx, duk_idx_t count)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19088">duktape-1.5.2/src-noline/duktape.c:19088</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab5b956d003eb706bd0f65b0940c379f6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab5b956d003eb706bd0f65b0940c379f6">DUK_HOBJECT_SET_ASIZE</a></div><div class="ttdeci">#define DUK_HOBJECT_SET_ASIZE(h, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05181">duktape-1.5.2/src-noline/duktape.c:5181</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_abcb5783793c021c061b2a2027e1f2b60"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#abcb5783793c021c061b2a2027e1f2b60">DUK_HOBJECT_CLEAR_ARRAY_PART</a></div><div class="ttdeci">#define DUK_HOBJECT_CLEAR_ARRAY_PART(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04850">duktape-1.5.2/src-noline/duktape.c:4850</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac981f7f5a4f589188a5f5ff4f1b80e4a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac981f7f5a4f589188a5f5ff4f1b80e4a">DUK_HOBJECT_E_GET_VALUE</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_VALUE(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05082">duktape-1.5.2/src-noline/duktape.c:5082</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acadd1efb7e4754c42991d62828e8f59d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acadd1efb7e4754c42991d62828e8f59d">duk_check_stack</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_check_stack(duk_context *ctx, duk_idx_t extra)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15590">duktape-1.5.2/src-noline/duktape.c:15590</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acbd149d8e8166c8f7f37a1718f76698f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acbd149d8e8166c8f7f37a1718f76698f">DUK_HOBJECT_SET_HSIZE</a></div><div class="ttdeci">#define DUK_HOBJECT_SET_HSIZE(h, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05184">duktape-1.5.2/src-noline/duktape.c:5184</a></div></div>
<div class="ttc" id="astructduk__heap_html_a7a87c08de7b8e78f276558f447220229"><div class="ttname"><a href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">duk_heap::mark_and_sweep_base_flags</a></div><div class="ttdeci">duk_small_uint_t mark_and_sweep_base_flags</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07028">duktape-1.5.2/src-noline/duktape.c:7028</a></div></div>
<div class="ttc" id="astructduk__tval__struct_html_a397de34bef5c7769363916277ac51a20"><div class="ttname"><a href="structduk__tval__struct.html#a397de34bef5c7769363916277ac51a20">duk_tval_struct::v</a></div><div class="ttdeci">union duk_tval_struct::@18 v</div></div>
<div class="ttc" id="aunionduk__propvalue_html"><div class="ttname"><a href="unionduk__propvalue.html">duk_propvalue</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05307">duktape-1.5.2/src-noline/duktape.c:5307</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00060">DUK__HASH_DELETED</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00055">DUK__HASH_INITIAL</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00056">DUK__HASH_PROBE_STEP</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00059">DUK__HASH_UNUSED</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06862">DUK_ALLOC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15590">duk_check_stack()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">DUK_D</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">DUK_DPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07862">DUK_ERROR_ALLOC_DEFMSG</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06866">DUK_FREE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l45671">duk_heap_string_intern_u32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05001">DUK_HOBJECT_A_GET_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05270">DUK_HOBJECT_ALIGN_TARGET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04850">DUK_HOBJECT_CLEAR_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05090">DUK_HOBJECT_E_GET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">DUK_HOBJECT_E_GET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05082">DUK_HOBJECT_E_GET_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05175">DUK_HOBJECT_GET_ESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05183">DUK_HOBJECT_GET_HSIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04931">DUK_HOBJECT_GET_PROPS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05250">DUK_HOBJECT_MAX_PROPERTIES</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05014">DUK_HOBJECT_P_COMPUTE_SIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05021">DUK_HOBJECT_P_SET_REALLOC_PTRS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05181">DUK_HOBJECT_SET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05178">DUK_HOBJECT_SET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05176">DUK_HOBJECT_SET_ESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05184">DUK_HOBJECT_SET_HSIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04933">DUK_HOBJECT_SET_PROPS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03821">DUK_HSTRING_DECREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">DUK_HSTRING_GET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03820">DUK_HSTRING_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01994">DUK_MEMSET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06721">DUK_MS_FLAG_NO_FINALIZERS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06720">DUK_MS_FLAG_NO_OBJECT_COMPACTION</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19088">duk_pop_n()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04865">DUK_PROPDESC_FLAG_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19044">duk_push_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">DUK_TVAL_IS_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">DUK_TVAL_SET_TVAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00662">DUK_TVAL_SET_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07028">duk_heap::mark_and_sweep_base_flags</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05312">duk_propvalue::v</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00969">duk__grow_props_for_array_item()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00939">duk__grow_props_for_new_entry_item()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01043">duk_hobject_compact_props()</a>.</p>

</div>
</div>
<a id="a136e0edb9109ee45bb22e772dfddd8c7" name="a136e0edb9109ee45bb22e772dfddd8c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a136e0edb9109ee45bb22e772dfddd8c7">&#9670;&#160;</a></span>duk__to_new_array_length_checked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__to_new_array_length_checked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02909">2909</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2909</span>                                                                          {</div>
<div class="line"><span class="lineno"> 2910</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 2911</span>    duk_uint32_t res;</div>
<div class="line"><span class="lineno"> 2912</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a> d;</div>
<div class="line"><span class="lineno"> 2913</span> </div>
<div class="line"><span class="lineno"> 2914</span>    <span class="comment">/* Input value should be on stack top and will be coerced and</span></div>
<div class="line"><span class="lineno"> 2915</span><span class="comment">     * popped.  Refuse to update an Array&#39;s &#39;length&#39; to a value</span></div>
<div class="line"><span class="lineno"> 2916</span><span class="comment">     * outside the 32-bit range.  Negative zero is accepted as zero.</span></div>
<div class="line"><span class="lineno"> 2917</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2918</span> </div>
<div class="line"><span class="lineno"> 2919</span>    <span class="comment">/* XXX: fastint */</span></div>
<div class="line"><span class="lineno"> 2920</span> </div>
<div class="line"><span class="lineno"> 2921</span>    d = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 2922</span>    res = (duk_uint32_t) d;</div>
<div class="line"><span class="lineno"> 2923</span>    <span class="keywordflow">if</span> ((<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) res != d) {</div>
<div class="line"><span class="lineno"> 2924</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a058cd56ed742ea766d26976d56c159d4">DUK_ERROR_RANGE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a192715df48939f096d9a5bd3eaa830f6">DUK_STR_INVALID_ARRAY_LENGTH</a>);</div>
<div class="line"><span class="lineno"> 2925</span>    }</div>
<div class="line"><span class="lineno"> 2926</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2927</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 2928</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a192715df48939f096d9a5bd3eaa830f6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a192715df48939f096d9a5bd3eaa830f6">DUK_STR_INVALID_ARRAY_LENGTH</a></div><div class="ttdeci">#define DUK_STR_INVALID_ARRAY_LENGTH</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02373">duktape-1.5.2/src-noline/duktape.c:2373</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a60da7a5524bcdb03fb59734d8ffa6ffc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a></div><div class="ttdeci">DUK_EXTERNAL duk_double_t duk_to_number(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duktape-1.5.2/src-noline/duktape.c:16766</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07875">DUK_ERROR_RANGE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02373">DUK_STR_INVALID_ARRAY_LENGTH</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duk_to_number()</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03121">duk__handle_put_array_length()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>.</p>

</div>
</div>
<a id="ab8f68bcfbc1bf7ab5162b82e783422dd" name="ab8f68bcfbc1bf7ab5162b82e783422dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8f68bcfbc1bf7ab5162b82e783422dd">&#9670;&#160;</a></span>duk__tval_number_to_arr_idx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> duk_uint32_t duk__tval_number_to_arr_idx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">98</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>                                                                 {</div>
<div class="line"><span class="lineno">   99</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a> dbl;</div>
<div class="line"><span class="lineno">  100</span>    duk_uint32_t idx;</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="comment">/* -0 is accepted here as index 0 because ToString(-0) == &quot;0&quot; which is</span></div>
<div class="line"><span class="lineno">  106</span><span class="comment">     * in canonical form and thus an array index.</span></div>
<div class="line"><span class="lineno">  107</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  108</span>    dbl = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acd5944082624896104ade7ec0673e939">DUK_TVAL_GET_NUMBER</a>(tv);</div>
<div class="line"><span class="lineno">  109</span>    idx = (duk_uint32_t) dbl;</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">if</span> ((<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) idx == dbl) {</div>
<div class="line"><span class="lineno">  111</span>            <span class="comment">/* Is whole and within 32 bit range.  If the value happens to be 0xFFFFFFFF,</span></div>
<div class="line"><span class="lineno">  112</span><span class="comment">         * it&#39;s not a valid array index but will then match DUK__NO_ARRAY_INDEX.</span></div>
<div class="line"><span class="lineno">  113</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">return</span> idx;</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>;</div>
<div class="line"><span class="lineno">  117</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00776">DUK_TVAL_GET_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02097">duk__getprop_fastpath_bufobj_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01969">duk__getprop_shallow_fastpath_array_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02148">duk__putprop_fastpath_bufobj_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02031">duk__putprop_shallow_fastpath_array_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>.</p>

</div>
</div>
<a id="a55f484a66f29098f6c8a7a48de397df1" name="a55f484a66f29098f6c8a7a48de397df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55f484a66f29098f6c8a7a48de397df1">&#9670;&#160;</a></span>duk_hobject_compact_props()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_compact_props </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01043">1043</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1043</span>                                                                                {</div>
<div class="line"><span class="lineno"> 1044</span>    duk_uint32_t e_size;       <span class="comment">/* currently used -&gt; new size */</span></div>
<div class="line"><span class="lineno"> 1045</span>    duk_uint32_t a_size;       <span class="comment">/* currently required */</span></div>
<div class="line"><span class="lineno"> 1046</span>    duk_uint32_t a_used;       <span class="comment">/* actually used */</span></div>
<div class="line"><span class="lineno"> 1047</span>    duk_uint32_t h_size;</div>
<div class="line"><span class="lineno"> 1048</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> abandon_array;</div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1051</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1052</span> </div>
<div class="line"><span class="lineno"> 1053</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 1054</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj)) {</div>
<div class="line"><span class="lineno"> 1055</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;ignore attempt to compact a rom object&quot;</span>));</div>
<div class="line"><span class="lineno"> 1056</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1057</span>    }</div>
<div class="line"><span class="lineno"> 1058</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>    e_size = <a class="code hl_function" href="#aa10edf852bd0f95f83754f0a477416f3">duk__count_used_e_keys</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 1061</span>    <a class="code hl_function" href="#af0d4488861df17ffd227dfe1a10466c1">duk__compute_a_stats</a>(thr, obj, &amp;a_used, &amp;a_size);</div>
<div class="line"><span class="lineno"> 1062</span> </div>
<div class="line"><span class="lineno"> 1063</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;compacting hobject, used e keys %ld, used a keys %ld, min a size %ld, &quot;</span></div>
<div class="line"><span class="lineno"> 1064</span>                       <span class="stringliteral">&quot;resized array density would be: %ld/%ld = %lf&quot;</span>,</div>
<div class="line"><span class="lineno"> 1065</span>                       (<span class="keywordtype">long</span>) e_size, (<span class="keywordtype">long</span>) a_used, (<span class="keywordtype">long</span>) a_size,</div>
<div class="line"><span class="lineno"> 1066</span>                       (<span class="keywordtype">long</span>) a_used, (<span class="keywordtype">long</span>) a_size,</div>
<div class="line"><span class="lineno"> 1067</span>                       (<span class="keywordtype">double</span>) a_used / (<span class="keywordtype">double</span>) a_size));</div>
<div class="line"><span class="lineno"> 1068</span> </div>
<div class="line"><span class="lineno"> 1069</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#a6f2eacd468eb7c3aaa3456cf895745dc">duk__abandon_array_density_check</a>(a_used, a_size)) {</div>
<div class="line"><span class="lineno"> 1070</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;decided to abandon array during compaction, a_used=%ld, a_size=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1071</span>                           (<span class="keywordtype">long</span>) a_used, (<span class="keywordtype">long</span>) a_size));</div>
<div class="line"><span class="lineno"> 1072</span>        abandon_array = 1;</div>
<div class="line"><span class="lineno"> 1073</span>        e_size += a_used;</div>
<div class="line"><span class="lineno"> 1074</span>        a_size = 0;</div>
<div class="line"><span class="lineno"> 1075</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1076</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;decided to keep array during compaction&quot;</span>));</div>
<div class="line"><span class="lineno"> 1077</span>        abandon_array = 0;</div>
<div class="line"><span class="lineno"> 1078</span>    }</div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_HASH_PART)</span></div>
<div class="line"><span class="lineno"> 1081</span>    <span class="keywordflow">if</span> (e_size &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac42784b25b30f952b9d2c58e3a930d9a">DUK_HOBJECT_E_USE_HASH_LIMIT</a>) {</div>
<div class="line"><span class="lineno"> 1082</span>        h_size = <a class="code hl_function" href="#ae07fa0e3f4569d277ec525956eadb356">duk__get_default_h_size</a>(e_size);</div>
<div class="line"><span class="lineno"> 1083</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1084</span>        h_size = 0;</div>
<div class="line"><span class="lineno"> 1085</span>    }</div>
<div class="line"><span class="lineno"> 1086</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1087</span>    h_size = 0;</div>
<div class="line"><span class="lineno"> 1088</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1089</span> </div>
<div class="line"><span class="lineno"> 1090</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;compacting hobject -&gt; new e_size %ld, new a_size=%ld, new h_size=%ld, abandon_array=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1091</span>                       (<span class="keywordtype">long</span>) e_size, (<span class="keywordtype">long</span>) a_size, (<span class="keywordtype">long</span>) h_size, (<span class="keywordtype">long</span>) abandon_array));</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>    <a class="code hl_function" href="#a451066618c91472f9df793d04870b7b8">duk__realloc_props</a>(thr, obj, e_size, a_size, h_size, abandon_array);</div>
<div class="line"><span class="lineno"> 1094</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a6f2eacd468eb7c3aaa3456cf895745dc"><div class="ttname"><a href="#a6f2eacd468eb7c3aaa3456cf895745dc">duk__abandon_array_density_check</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__abandon_array_density_check(duk_uint32_t a_used, duk_uint32_t a_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00267">duktape-1.8.0/src-separate/duk_hobject_props.c:267</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00267">duk__abandon_array_density_check()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00237">duk__compute_a_stats()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00215">duk__count_used_e_keys()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00174">duk__get_default_h_size()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00488">duk__realloc_props()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05254">DUK_HOBJECT_E_USE_HASH_LIMIT</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a4969b4f3de459469fa29e4460d3d1d68" name="a4969b4f3de459469fa29e4460d3d1d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4969b4f3de459469fa29e4460d3d1d68">&#9670;&#160;</a></span>duk_hobject_define_accessor_internal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_define_accessor_internal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>getter</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>setter</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>propflags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04691">4691</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4691</span>                                                                                                                                                                                   {</div>
<div class="line"><span class="lineno"> 4692</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 4693</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 4694</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> h_idx;</div>
<div class="line"><span class="lineno"> 4695</span> </div>
<div class="line"><span class="lineno"> 4696</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;define new accessor (internal): thr=%p, obj=%!O, key=%!O, &quot;</span></div>
<div class="line"><span class="lineno"> 4697</span>                         <span class="stringliteral">&quot;getter=%!O, setter=%!O, flags=0x%02lx&quot;</span>,</div>
<div class="line"><span class="lineno"> 4698</span>                         (<span class="keywordtype">void</span> *) thr, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key,</div>
<div class="line"><span class="lineno"> 4699</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) getter, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) setter,</div>
<div class="line"><span class="lineno"> 4700</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) propflags));</div>
<div class="line"><span class="lineno"> 4701</span> </div>
<div class="line"><span class="lineno"> 4702</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4703</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4704</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4705</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4706</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((propflags &amp; ~<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b013725fb5a479219394243fbf4cf52">DUK_PROPDESC_FLAGS_MASK</a>) == 0);</div>
<div class="line"><span class="lineno"> 4707</span>    <span class="comment">/* setter and/or getter may be NULL */</span></div>
<div class="line"><span class="lineno"> 4708</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj));</div>
<div class="line"><span class="lineno"> 4709</span> </div>
<div class="line"><span class="lineno"> 4710</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 4711</span> </div>
<div class="line"><span class="lineno"> 4712</span>    <span class="comment">/* force the property to &#39;undefined&#39; to create a slot for it */</span></div>
<div class="line"><span class="lineno"> 4713</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e54c2f552800058d06a34af260ead0f">duk_push_undefined</a>(ctx);</div>
<div class="line"><span class="lineno"> 4714</span>    <a class="code hl_function" href="#aaca98f6ca754be4286c93afa511d437a">duk_hobject_define_property_internal</a>(thr, obj, key, propflags);</div>
<div class="line"><span class="lineno"> 4715</span>    <a class="code hl_function" href="#a617a5abde25d36082238ba6c779da1cc">duk_hobject_find_existing_entry</a>(thr-&gt;heap, obj, key, &amp;e_idx, &amp;h_idx);</div>
<div class="line"><span class="lineno"> 4716</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;accessor slot: e_idx=%ld, h_idx=%ld&quot;</span>, (<span class="keywordtype">long</span>) e_idx, (<span class="keywordtype">long</span>) h_idx));</div>
<div class="line"><span class="lineno"> 4717</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 4718</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((duk_uint32_t) e_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj));</div>
<div class="line"><span class="lineno"> 4719</span> </div>
<div class="line"><span class="lineno"> 4720</span>    <span class="comment">/* no need to decref, as previous value is &#39;undefined&#39; */</span></div>
<div class="line"><span class="lineno"> 4721</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aea2e728630bcda2c7e8084f4e2a90de1">DUK_HOBJECT_E_SLOT_SET_ACCESSOR</a>(thr-&gt;heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 4722</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac62485d576bc9c48fb7c012e6848126d">DUK_HOBJECT_E_SET_VALUE_GETTER</a>(thr-&gt;heap, obj, e_idx, getter);</div>
<div class="line"><span class="lineno"> 4723</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c75b3f86ccda136313c7fb73ace5b53">DUK_HOBJECT_E_SET_VALUE_SETTER</a>(thr-&gt;heap, obj, e_idx, setter);</div>
<div class="line"><span class="lineno"> 4724</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2b028c473ecd0ac84f414e3ccaacd1">DUK_HOBJECT_INCREF_ALLOWNULL</a>(thr, getter);</div>
<div class="line"><span class="lineno"> 4725</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2b028c473ecd0ac84f414e3ccaacd1">DUK_HOBJECT_INCREF_ALLOWNULL</a>(thr, setter);</div>
<div class="line"><span class="lineno"> 4726</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7b013725fb5a479219394243fbf4cf52"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b013725fb5a479219394243fbf4cf52">DUK_PROPDESC_FLAGS_MASK</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAGS_MASK</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04869">duktape-1.5.2/src-noline/duktape.c:4869</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8c75b3f86ccda136313c7fb73ace5b53"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c75b3f86ccda136313c7fb73ace5b53">DUK_HOBJECT_E_SET_VALUE_SETTER</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SET_VALUE_SETTER(heap, h, i, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05109">duktape-1.5.2/src-noline/duktape.c:5109</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac62485d576bc9c48fb7c012e6848126d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac62485d576bc9c48fb7c012e6848126d">DUK_HOBJECT_E_SET_VALUE_GETTER</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SET_VALUE_GETTER(heap, h, i, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05106">duktape-1.5.2/src-noline/duktape.c:5106</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aea2e728630bcda2c7e8084f4e2a90de1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aea2e728630bcda2c7e8084f4e2a90de1">DUK_HOBJECT_E_SLOT_SET_ACCESSOR</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SLOT_SET_ACCESSOR(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05140">duktape-1.5.2/src-noline/duktape.c:5140</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aee2b028c473ecd0ac84f414e3ccaacd1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2b028c473ecd0ac84f414e3ccaacd1">DUK_HOBJECT_INCREF_ALLOWNULL</a></div><div class="ttdeci">#define DUK_HOBJECT_INCREF_ALLOWNULL(thr, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03838">duktape-1.5.2/src-noline/duktape.c:3838</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_aaca98f6ca754be4286c93afa511d437a"><div class="ttname"><a href="#aaca98f6ca754be4286c93afa511d437a">duk_hobject_define_property_internal</a></div><div class="ttdeci">DUK_INTERNAL void duk_hobject_define_property_internal(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_small_uint_t flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duktape-1.8.0/src-separate/duk_hobject_props.c:4518</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duk_hobject_define_property_internal()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05106">DUK_HOBJECT_E_SET_VALUE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05109">DUK_HOBJECT_E_SET_VALUE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05140">DUK_HOBJECT_E_SLOT_SET_ACCESSOR</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03838">DUK_HOBJECT_INCREF_ALLOWNULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04869">DUK_PROPDESC_FLAGS_MASK</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17848">duk_push_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="ac30156a503810bc0497c3f3c815587c5" name="ac30156a503810bc0497c3f3c815587c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac30156a503810bc0497c3f3c815587c5">&#9670;&#160;</a></span>duk_hobject_define_property_helper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_define_property_helper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>defprop_flags</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_value</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>get</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>set</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">5007</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 5013</span>                                                          {</div>
<div class="line"><span class="lineno"> 5014</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 5015</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno"> 5016</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv;</div>
<div class="line"><span class="lineno"> 5017</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> has_enumerable;</div>
<div class="line"><span class="lineno"> 5018</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> has_configurable;</div>
<div class="line"><span class="lineno"> 5019</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> has_writable;</div>
<div class="line"><span class="lineno"> 5020</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> has_value;</div>
<div class="line"><span class="lineno"> 5021</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> has_get;</div>
<div class="line"><span class="lineno"> 5022</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> has_set;</div>
<div class="line"><span class="lineno"> 5023</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_enumerable;</div>
<div class="line"><span class="lineno"> 5024</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_configurable;</div>
<div class="line"><span class="lineno"> 5025</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_writable;</div>
<div class="line"><span class="lineno"> 5026</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> throw_flag;</div>
<div class="line"><span class="lineno"> 5027</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> force_flag;</div>
<div class="line"><span class="lineno"> 5028</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> new_flags;</div>
<div class="line"><span class="lineno"> 5029</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> curr;</div>
<div class="line"><span class="lineno"> 5030</span>    duk_uint32_t arridx_new_array_length;  <span class="comment">/* != 0 =&gt; post-update for array &#39;length&#39; (used when key is an array index) */</span></div>
<div class="line"><span class="lineno"> 5031</span>    duk_uint32_t arrlen_old_len;</div>
<div class="line"><span class="lineno"> 5032</span>    duk_uint32_t arrlen_new_len;</div>
<div class="line"><span class="lineno"> 5033</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> pending_write_protect;</div>
<div class="line"><span class="lineno"> 5034</span> </div>
<div class="line"><span class="lineno"> 5035</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5036</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5037</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5038</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5039</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5040</span>    <span class="comment">/* idx_value may be &lt; 0 (no value), set and get may be NULL */</span></div>
<div class="line"><span class="lineno"> 5041</span> </div>
<div class="line"><span class="lineno"> 5042</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 5043</span> </div>
<div class="line"><span class="lineno"> 5044</span>    <span class="comment">/* All the flags fit in 16 bits, so will fit into duk_bool_t. */</span></div>
<div class="line"><span class="lineno"> 5045</span> </div>
<div class="line"><span class="lineno"> 5046</span>    has_writable = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a77796389f5202e6a3a45efffaa7b08ea">DUK_DEFPROP_HAVE_WRITABLE</a>);</div>
<div class="line"><span class="lineno"> 5047</span>    has_enumerable = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#acb50039378c60534e38d3f9aaac57ebf">DUK_DEFPROP_HAVE_ENUMERABLE</a>);</div>
<div class="line"><span class="lineno"> 5048</span>    has_configurable = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#abc7442877bec8197cedb400303a3db4e">DUK_DEFPROP_HAVE_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 5049</span>    has_value = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a46c19e619ca3e5b33b31ba0c30915138">DUK_DEFPROP_HAVE_VALUE</a>);</div>
<div class="line"><span class="lineno"> 5050</span>    has_get = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a17869b75ee0c10258d58c5061edb12fa">DUK_DEFPROP_HAVE_GETTER</a>);</div>
<div class="line"><span class="lineno"> 5051</span>    has_set = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab1987664ebbc37a9494e5e8a84a2ddd4">DUK_DEFPROP_HAVE_SETTER</a>);</div>
<div class="line"><span class="lineno"> 5052</span>    is_writable = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ae1fc0a38b38ae096fdd456ffec060400">DUK_DEFPROP_WRITABLE</a>);</div>
<div class="line"><span class="lineno"> 5053</span>    is_enumerable = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ac11e106e2064f130b786168dd68eef23">DUK_DEFPROP_ENUMERABLE</a>);</div>
<div class="line"><span class="lineno"> 5054</span>    is_configurable = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a6560ba69a124b7fb9ea25794822c7fcd">DUK_DEFPROP_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 5055</span>    throw_flag = 1;   <span class="comment">/* Object.defineProperty() calls [[DefineOwnProperty]] with Throw=true */</span></div>
<div class="line"><span class="lineno"> 5056</span>    force_flag = (defprop_flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a630f95bede9436f4840be233ec39d38d">DUK_DEFPROP_FORCE</a>);</div>
<div class="line"><span class="lineno"> 5057</span> </div>
<div class="line"><span class="lineno"> 5058</span>    arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed57897f1a937b3298fcfa0768b332c2">DUK_HSTRING_GET_ARRIDX_SLOW</a>(key);</div>
<div class="line"><span class="lineno"> 5059</span> </div>
<div class="line"><span class="lineno"> 5060</span>    arridx_new_array_length = 0;</div>
<div class="line"><span class="lineno"> 5061</span>    pending_write_protect = 0;</div>
<div class="line"><span class="lineno"> 5062</span>    arrlen_old_len = 0;</div>
<div class="line"><span class="lineno"> 5063</span>    arrlen_new_len = 0;</div>
<div class="line"><span class="lineno"> 5064</span> </div>
<div class="line"><span class="lineno"> 5065</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;has_enumerable=%ld is_enumerable=%ld &quot;</span></div>
<div class="line"><span class="lineno"> 5066</span>                         <span class="stringliteral">&quot;has_configurable=%ld is_configurable=%ld &quot;</span></div>
<div class="line"><span class="lineno"> 5067</span>                         <span class="stringliteral">&quot;has_writable=%ld is_writable=%ld &quot;</span></div>
<div class="line"><span class="lineno"> 5068</span>                         <span class="stringliteral">&quot;has_value=%ld value=%!T &quot;</span></div>
<div class="line"><span class="lineno"> 5069</span>                         <span class="stringliteral">&quot;has_get=%ld get=%p=%!O &quot;</span></div>
<div class="line"><span class="lineno"> 5070</span>                         <span class="stringliteral">&quot;has_set=%ld set=%p=%!O &quot;</span></div>
<div class="line"><span class="lineno"> 5071</span>                         <span class="stringliteral">&quot;arr_idx=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 5072</span>                         (<span class="keywordtype">long</span>) has_enumerable, (<span class="keywordtype">long</span>) is_enumerable,</div>
<div class="line"><span class="lineno"> 5073</span>                         (<span class="keywordtype">long</span>) has_configurable, (<span class="keywordtype">long</span>) is_configurable,</div>
<div class="line"><span class="lineno"> 5074</span>                         (<span class="keywordtype">long</span>) has_writable, (<span class="keywordtype">long</span>) is_writable,</div>
<div class="line"><span class="lineno"> 5075</span>                         (<span class="keywordtype">long</span>) has_value, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) (idx_value &gt;= 0 ? <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, idx_value) : <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div>
<div class="line"><span class="lineno"> 5076</span>                         (long) has_get, (void *) get, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) get,</div>
<div class="line"><span class="lineno"> 5077</span>                         (long) has_set, (void *) set, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) set,</div>
<div class="line"><span class="lineno"> 5078</span>                         (long) arr_idx));</div>
<div class="line"><span class="lineno"> 5079</span> </div>
<div class="line"><span class="lineno"> 5080</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5081</span><span class="comment">     *  Array exotic behaviors can be implemented at this point.  The local variables</span></div>
<div class="line"><span class="lineno"> 5082</span><span class="comment">     *  are essentially a &#39;value copy&#39; of the input descriptor (Desc), which is modified</span></div>
<div class="line"><span class="lineno"> 5083</span><span class="comment">     *  by the Array [[DefineOwnProperty]] (E5 Section 15.4.5.1).</span></div>
<div class="line"><span class="lineno"> 5084</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5085</span> </div>
<div class="line"><span class="lineno"> 5086</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>(obj)) {</div>
<div class="line"><span class="lineno"> 5087</span>        <span class="keywordflow">goto</span> skip_array_exotic;</div>
<div class="line"><span class="lineno"> 5088</span>    }</div>
<div class="line"><span class="lineno"> 5089</span> </div>
<div class="line"><span class="lineno"> 5090</span>    <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 5091</span>        <span class="comment">/* E5 Section 15.4.5.1, step 3, steps a - i are implemented here, j - n at the end */</span></div>
<div class="line"><span class="lineno"> 5092</span>        <span class="keywordflow">if</span> (!has_value) {</div>
<div class="line"><span class="lineno"> 5093</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;exotic array behavior for &#39;length&#39;, but no value in descriptor -&gt; normal behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 5094</span>            <span class="keywordflow">goto</span> skip_array_exotic;</div>
<div class="line"><span class="lineno"> 5095</span>        }</div>
<div class="line"><span class="lineno"> 5096</span> </div>
<div class="line"><span class="lineno"> 5097</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;exotic array behavior for &#39;length&#39;, value present in descriptor -&gt; exotic behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 5098</span> </div>
<div class="line"><span class="lineno"> 5099</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5100</span><span class="comment">         *  Get old and new length</span></div>
<div class="line"><span class="lineno"> 5101</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 5102</span> </div>
<div class="line"><span class="lineno"> 5103</span>        <span class="comment">/* Note: reuse &#39;curr&#39; as a temp propdesc */</span></div>
<div class="line"><span class="lineno"> 5104</span>        arrlen_old_len = <a class="code hl_function" href="#ae1c43ff4dda58761bcee283534131aa4">duk__get_old_array_length</a>(thr, obj, &amp;curr);</div>
<div class="line"><span class="lineno"> 5105</span> </div>
<div class="line"><span class="lineno"> 5106</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, idx_value);</div>
<div class="line"><span class="lineno"> 5107</span>        arrlen_new_len = <a class="code hl_function" href="#a136e0edb9109ee45bb22e772dfddd8c7">duk__to_new_array_length_checked</a>(thr);</div>
<div class="line"><span class="lineno"> 5108</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeec241c8da1fbeaa28b17454e282b8f7">duk_push_u32</a>(ctx, arrlen_new_len);</div>
<div class="line"><span class="lineno"> 5109</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a690921ea90be3a0cb5483cb80f9c3439">duk_replace</a>(ctx, idx_value);  <span class="comment">/* step 3.e: replace &#39;Desc.[[Value]]&#39; */</span></div>
<div class="line"><span class="lineno"> 5110</span> </div>
<div class="line"><span class="lineno"> 5111</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;old_len=%ld, new_len=%ld&quot;</span>, (<span class="keywordtype">long</span>) arrlen_old_len, (<span class="keywordtype">long</span>) arrlen_new_len));</div>
<div class="line"><span class="lineno"> 5112</span> </div>
<div class="line"><span class="lineno"> 5113</span>        <span class="keywordflow">if</span> (arrlen_new_len &gt;= arrlen_old_len) {</div>
<div class="line"><span class="lineno"> 5114</span>            <span class="comment">/* standard behavior, step 3.f.i */</span></div>
<div class="line"><span class="lineno"> 5115</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new length is same or higher as previous =&gt; standard behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 5116</span>            <span class="keywordflow">goto</span> skip_array_exotic;</div>
<div class="line"><span class="lineno"> 5117</span>        }</div>
<div class="line"><span class="lineno"> 5118</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new length is smaller than previous =&gt; exotic post behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 5119</span> </div>
<div class="line"><span class="lineno"> 5120</span>        <span class="comment">/* XXX: consolidated algorithm step 15.f -&gt; redundant? */</span></div>
<div class="line"><span class="lineno"> 5121</span>        <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>) &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 5122</span>            <span class="comment">/* Note: &#39;curr&#39; refers to &#39;length&#39; propdesc */</span></div>
<div class="line"><span class="lineno"> 5123</span>            <span class="keywordflow">goto</span> fail_not_writable_array_length;</div>
<div class="line"><span class="lineno"> 5124</span>        }</div>
<div class="line"><span class="lineno"> 5125</span> </div>
<div class="line"><span class="lineno"> 5126</span>        <span class="comment">/* steps 3.h and 3.i */</span></div>
<div class="line"><span class="lineno"> 5127</span>        <span class="keywordflow">if</span> (has_writable &amp;&amp; !is_writable) {</div>
<div class="line"><span class="lineno"> 5128</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;desc writable is false, force it back to true, and flag pending write protect&quot;</span>));</div>
<div class="line"><span class="lineno"> 5129</span>            is_writable = 1;</div>
<div class="line"><span class="lineno"> 5130</span>            pending_write_protect = 1;</div>
<div class="line"><span class="lineno"> 5131</span>        }</div>
<div class="line"><span class="lineno"> 5132</span> </div>
<div class="line"><span class="lineno"> 5133</span>        <span class="comment">/* remaining actual steps are carried out if standard DefineOwnProperty succeeds */</span></div>
<div class="line"><span class="lineno"> 5134</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>) {</div>
<div class="line"><span class="lineno"> 5135</span>        <span class="comment">/* XXX: any chance of unifying this with the &#39;length&#39; key handling? */</span></div>
<div class="line"><span class="lineno"> 5136</span> </div>
<div class="line"><span class="lineno"> 5137</span>        <span class="comment">/* E5 Section 15.4.5.1, step 4 */</span></div>
<div class="line"><span class="lineno"> 5138</span>        duk_uint32_t old_len;</div>
<div class="line"><span class="lineno"> 5139</span> </div>
<div class="line"><span class="lineno"> 5140</span>        <span class="comment">/* Note: use &#39;curr&#39; as a temp propdesc */</span></div>
<div class="line"><span class="lineno"> 5141</span>        old_len = <a class="code hl_function" href="#ae1c43ff4dda58761bcee283534131aa4">duk__get_old_array_length</a>(thr, obj, &amp;curr);</div>
<div class="line"><span class="lineno"> 5142</span> </div>
<div class="line"><span class="lineno"> 5143</span>        <span class="keywordflow">if</span> (arr_idx &gt;= old_len) {</div>
<div class="line"><span class="lineno"> 5144</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty requires array length update &quot;</span></div>
<div class="line"><span class="lineno"> 5145</span>                                 <span class="stringliteral">&quot;(arr_idx=%ld, old_len=%ld)&quot;</span>,</div>
<div class="line"><span class="lineno"> 5146</span>                                 (<span class="keywordtype">long</span>) arr_idx, (<span class="keywordtype">long</span>) old_len));</div>
<div class="line"><span class="lineno"> 5147</span> </div>
<div class="line"><span class="lineno"> 5148</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 5149</span>                <span class="comment">/* Note: &#39;curr&#39; refers to &#39;length&#39; propdesc */</span></div>
<div class="line"><span class="lineno"> 5150</span>                <span class="keywordflow">goto</span> fail_not_writable_array_length;</div>
<div class="line"><span class="lineno"> 5151</span>            }</div>
<div class="line"><span class="lineno"> 5152</span> </div>
<div class="line"><span class="lineno"> 5153</span>            <span class="comment">/* actual update happens once write has been completed without</span></div>
<div class="line"><span class="lineno"> 5154</span><span class="comment">             * error below.</span></div>
<div class="line"><span class="lineno"> 5155</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5156</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx != 0xffffffffUL);</div>
<div class="line"><span class="lineno"> 5157</span>            arridx_new_array_length = arr_idx + 1;</div>
<div class="line"><span class="lineno"> 5158</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5159</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty does not require length update &quot;</span></div>
<div class="line"><span class="lineno"> 5160</span>                                 <span class="stringliteral">&quot;(arr_idx=%ld, old_len=%ld) -&gt; standard behavior&quot;</span>,</div>
<div class="line"><span class="lineno"> 5161</span>                                 (<span class="keywordtype">long</span>) arr_idx, (<span class="keywordtype">long</span>) old_len));</div>
<div class="line"><span class="lineno"> 5162</span>        }</div>
<div class="line"><span class="lineno"> 5163</span>    }</div>
<div class="line"><span class="lineno"> 5164</span> skip_array_exotic:</div>
<div class="line"><span class="lineno"> 5165</span> </div>
<div class="line"><span class="lineno"> 5166</span>    <span class="comment">/* XXX: There is currently no support for writing buffer object</span></div>
<div class="line"><span class="lineno"> 5167</span><span class="comment">     * indexed elements here.  Attempt to do so will succeed and</span></div>
<div class="line"><span class="lineno"> 5168</span><span class="comment">     * write a concrete property into the buffer object.  This should</span></div>
<div class="line"><span class="lineno"> 5169</span><span class="comment">     * be fixed at some point but because buffers are a custom feature</span></div>
<div class="line"><span class="lineno"> 5170</span><span class="comment">     * anyway, this is relatively unimportant.</span></div>
<div class="line"><span class="lineno"> 5171</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5172</span> </div>
<div class="line"><span class="lineno"> 5173</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5174</span><span class="comment">     *  Actual Object.defineProperty() default algorithm.</span></div>
<div class="line"><span class="lineno"> 5175</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5176</span> </div>
<div class="line"><span class="lineno"> 5177</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5178</span><span class="comment">     *  First check whether property exists; if not, simple case.  This covers</span></div>
<div class="line"><span class="lineno"> 5179</span><span class="comment">     *  steps 1-4.</span></div>
<div class="line"><span class="lineno"> 5180</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5181</span> </div>
<div class="line"><span class="lineno"> 5182</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, arr_idx, &amp;curr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 5183</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property does not exist&quot;</span>));</div>
<div class="line"><span class="lineno"> 5184</span> </div>
<div class="line"><span class="lineno"> 5185</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adfd1b77d5152d2f5ef72309ab0bc6c14">DUK_HOBJECT_HAS_EXTENSIBLE</a>(obj) &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 5186</span>            <span class="keywordflow">goto</span> fail_not_extensible;</div>
<div class="line"><span class="lineno"> 5187</span>        }</div>
<div class="line"><span class="lineno"> 5188</span> </div>
<div class="line"><span class="lineno"> 5189</span>        <span class="comment">/* XXX: share final setting code for value and flags?  difficult because</span></div>
<div class="line"><span class="lineno"> 5190</span><span class="comment">         * refcount code is different.  Share entry allocation?  But can&#39;t allocate</span></div>
<div class="line"><span class="lineno"> 5191</span><span class="comment">         * until array index checked.</span></div>
<div class="line"><span class="lineno"> 5192</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 5193</span> </div>
<div class="line"><span class="lineno"> 5194</span>        <span class="comment">/* steps 4.a and 4.b are tricky */</span></div>
<div class="line"><span class="lineno"> 5195</span>        <span class="keywordflow">if</span> (has_set || has_get) {</div>
<div class="line"><span class="lineno"> 5196</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 5197</span> </div>
<div class="line"><span class="lineno"> 5198</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;create new accessor property&quot;</span>));</div>
<div class="line"><span class="lineno"> 5199</span> </div>
<div class="line"><span class="lineno"> 5200</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(has_set || set == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5201</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(has_get || get == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5202</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_value);</div>
<div class="line"><span class="lineno"> 5203</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_writable);</div>
<div class="line"><span class="lineno"> 5204</span> </div>
<div class="line"><span class="lineno"> 5205</span>            new_flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>;  <span class="comment">/* defaults, E5 Section 8.6.1, Table 7 */</span></div>
<div class="line"><span class="lineno"> 5206</span>            <span class="keywordflow">if</span> (has_enumerable &amp;&amp; is_enumerable) {</div>
<div class="line"><span class="lineno"> 5207</span>                new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a>;</div>
<div class="line"><span class="lineno"> 5208</span>            }</div>
<div class="line"><span class="lineno"> 5209</span>            <span class="keywordflow">if</span> (has_configurable &amp;&amp; is_configurable) {</div>
<div class="line"><span class="lineno"> 5210</span>                new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>;</div>
<div class="line"><span class="lineno"> 5211</span>            }</div>
<div class="line"><span class="lineno"> 5212</span> </div>
<div class="line"><span class="lineno"> 5213</span>            <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj)) {</div>
<div class="line"><span class="lineno"> 5214</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;accessor cannot go to array part, abandon array&quot;</span>));</div>
<div class="line"><span class="lineno"> 5215</span>                <a class="code hl_function" href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 5216</span>            }</div>
<div class="line"><span class="lineno"> 5217</span> </div>
<div class="line"><span class="lineno"> 5218</span>            <span class="comment">/* write to entry part */</span></div>
<div class="line"><span class="lineno"> 5219</span>            e_idx = <a class="code hl_function" href="#a4f516582bc333e12262483674371d5ba">duk__alloc_entry_checked</a>(thr, obj, key);</div>
<div class="line"><span class="lineno"> 5220</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 5221</span> </div>
<div class="line"><span class="lineno"> 5222</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac62485d576bc9c48fb7c012e6848126d">DUK_HOBJECT_E_SET_VALUE_GETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, e_idx, get);</div>
<div class="line"><span class="lineno"> 5223</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c75b3f86ccda136313c7fb73ace5b53">DUK_HOBJECT_E_SET_VALUE_SETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, e_idx, set);</div>
<div class="line"><span class="lineno"> 5224</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2b028c473ecd0ac84f414e3ccaacd1">DUK_HOBJECT_INCREF_ALLOWNULL</a>(thr, get);</div>
<div class="line"><span class="lineno"> 5225</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2b028c473ecd0ac84f414e3ccaacd1">DUK_HOBJECT_INCREF_ALLOWNULL</a>(thr, set);</div>
<div class="line"><span class="lineno"> 5226</span> </div>
<div class="line"><span class="lineno"> 5227</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, e_idx, new_flags);</div>
<div class="line"><span class="lineno"> 5228</span>            <span class="keywordflow">goto</span> success_exotics;</div>
<div class="line"><span class="lineno"> 5229</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5230</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 5231</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv2;</div>
<div class="line"><span class="lineno"> 5232</span> </div>
<div class="line"><span class="lineno"> 5233</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;create new data property&quot;</span>));</div>
<div class="line"><span class="lineno"> 5234</span> </div>
<div class="line"><span class="lineno"> 5235</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_set);</div>
<div class="line"><span class="lineno"> 5236</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_get);</div>
<div class="line"><span class="lineno"> 5237</span> </div>
<div class="line"><span class="lineno"> 5238</span>            new_flags = 0;  <span class="comment">/* defaults, E5 Section 8.6.1, Table 7 */</span></div>
<div class="line"><span class="lineno"> 5239</span>            <span class="keywordflow">if</span> (has_writable &amp;&amp; is_writable) {</div>
<div class="line"><span class="lineno"> 5240</span>                new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>;</div>
<div class="line"><span class="lineno"> 5241</span>            }</div>
<div class="line"><span class="lineno"> 5242</span>            <span class="keywordflow">if</span> (has_enumerable &amp;&amp; is_enumerable) {</div>
<div class="line"><span class="lineno"> 5243</span>                new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a>;</div>
<div class="line"><span class="lineno"> 5244</span>            }</div>
<div class="line"><span class="lineno"> 5245</span>            <span class="keywordflow">if</span> (has_configurable &amp;&amp; is_configurable) {</div>
<div class="line"><span class="lineno"> 5246</span>                new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>;</div>
<div class="line"><span class="lineno"> 5247</span>            }</div>
<div class="line"><span class="lineno"> 5248</span>            <span class="keywordflow">if</span> (has_value) {</div>
<div class="line"><span class="lineno"> 5249</span>                <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv_tmp = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, idx_value);</div>
<div class="line"><span class="lineno"> 5250</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv, tv_tmp);</div>
<div class="line"><span class="lineno"> 5251</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5252</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a>(&amp;tv);  <span class="comment">/* default value */</span></div>
<div class="line"><span class="lineno"> 5253</span>            }</div>
<div class="line"><span class="lineno"> 5254</span> </div>
<div class="line"><span class="lineno"> 5255</span>            <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj)) {</div>
<div class="line"><span class="lineno"> 5256</span>                <span class="keywordflow">if</span> (new_flags == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a>) {</div>
<div class="line"><span class="lineno"> 5257</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 5258</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new data property attributes match array defaults, attempt to write to array part&quot;</span>));</div>
<div class="line"><span class="lineno"> 5259</span>                    <span class="comment">/* may become sparse...*/</span></div>
<div class="line"><span class="lineno"> 5260</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5261</span>                    <span class="comment">/* XXX: handling for array part missing now; this doesn&#39;t affect</span></div>
<div class="line"><span class="lineno"> 5262</span><span class="comment">                     * compliance but causes array entry writes using defineProperty()</span></div>
<div class="line"><span class="lineno"> 5263</span><span class="comment">                     * to always abandon array part.</span></div>
<div class="line"><span class="lineno"> 5264</span><span class="comment">                     */</span></div>
<div class="line"><span class="lineno"> 5265</span>                }</div>
<div class="line"><span class="lineno"> 5266</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new data property cannot go to array part, abandon array&quot;</span>));</div>
<div class="line"><span class="lineno"> 5267</span>                <a class="code hl_function" href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 5268</span>                <span class="comment">/* fall through */</span></div>
<div class="line"><span class="lineno"> 5269</span>            }</div>
<div class="line"><span class="lineno"> 5270</span> </div>
<div class="line"><span class="lineno"> 5271</span>            <span class="comment">/* write to entry part */</span></div>
<div class="line"><span class="lineno"> 5272</span>            e_idx = <a class="code hl_function" href="#a4f516582bc333e12262483674371d5ba">duk__alloc_entry_checked</a>(thr, obj, key);</div>
<div class="line"><span class="lineno"> 5273</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 5274</span>            tv2 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, e_idx);</div>
<div class="line"><span class="lineno"> 5275</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(tv2, &amp;tv);</div>
<div class="line"><span class="lineno"> 5276</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4cab0e419e53fb6bc4e79f6e8fd384bd">DUK_TVAL_INCREF</a>(thr, tv2);</div>
<div class="line"><span class="lineno"> 5277</span> </div>
<div class="line"><span class="lineno"> 5278</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, e_idx, new_flags);</div>
<div class="line"><span class="lineno"> 5279</span>            <span class="keywordflow">goto</span> success_exotics;</div>
<div class="line"><span class="lineno"> 5280</span>        }</div>
<div class="line"><span class="lineno"> 5281</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno"> 5282</span>    }</div>
<div class="line"><span class="lineno"> 5283</span> </div>
<div class="line"><span class="lineno"> 5284</span>    <span class="comment">/* we currently assume virtual properties are not configurable (as none of them are) */</span></div>
<div class="line"><span class="lineno"> 5285</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0 || curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &gt;= 0) || !(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>));</div>
<div class="line"><span class="lineno"> 5286</span> </div>
<div class="line"><span class="lineno"> 5287</span>    <span class="comment">/* [obj key desc value get set curr_value] */</span></div>
<div class="line"><span class="lineno"> 5288</span> </div>
<div class="line"><span class="lineno"> 5289</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5290</span><span class="comment">     *  Property already exists.  Steps 5-6 detect whether any changes need</span></div>
<div class="line"><span class="lineno"> 5291</span><span class="comment">     *  to be made.</span></div>
<div class="line"><span class="lineno"> 5292</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5293</span> </div>
<div class="line"><span class="lineno"> 5294</span>    <span class="keywordflow">if</span> (has_enumerable) {</div>
<div class="line"><span class="lineno"> 5295</span>        <span class="keywordflow">if</span> (is_enumerable) {</div>
<div class="line"><span class="lineno"> 5296</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a>)) {</div>
<div class="line"><span class="lineno"> 5297</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5298</span>            }</div>
<div class="line"><span class="lineno"> 5299</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5300</span>            <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a>) {</div>
<div class="line"><span class="lineno"> 5301</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5302</span>            }</div>
<div class="line"><span class="lineno"> 5303</span>        }</div>
<div class="line"><span class="lineno"> 5304</span>    }</div>
<div class="line"><span class="lineno"> 5305</span>    <span class="keywordflow">if</span> (has_configurable) {</div>
<div class="line"><span class="lineno"> 5306</span>        <span class="keywordflow">if</span> (is_configurable) {</div>
<div class="line"><span class="lineno"> 5307</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>)) {</div>
<div class="line"><span class="lineno"> 5308</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5309</span>            }</div>
<div class="line"><span class="lineno"> 5310</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5311</span>            <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) {</div>
<div class="line"><span class="lineno"> 5312</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5313</span>            }</div>
<div class="line"><span class="lineno"> 5314</span>        }</div>
<div class="line"><span class="lineno"> 5315</span>    }</div>
<div class="line"><span class="lineno"> 5316</span>    <span class="keywordflow">if</span> (has_value) {</div>
<div class="line"><span class="lineno"> 5317</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tmp1;</div>
<div class="line"><span class="lineno"> 5318</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tmp2;</div>
<div class="line"><span class="lineno"> 5319</span> </div>
<div class="line"><span class="lineno"> 5320</span>        <span class="comment">/* attempt to change from accessor to data property */</span></div>
<div class="line"><span class="lineno"> 5321</span>        <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 5322</span>            <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5323</span>        }</div>
<div class="line"><span class="lineno"> 5324</span> </div>
<div class="line"><span class="lineno"> 5325</span>        tmp1 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);         <span class="comment">/* curr value */</span></div>
<div class="line"><span class="lineno"> 5326</span>        tmp2 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, idx_value);  <span class="comment">/* new value */</span></div>
<div class="line"><span class="lineno"> 5327</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b306580fab6a279a17cd2232f980d96">duk_js_samevalue</a>(tmp1, tmp2)) {</div>
<div class="line"><span class="lineno"> 5328</span>            <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5329</span>        }</div>
<div class="line"><span class="lineno"> 5330</span>    }</div>
<div class="line"><span class="lineno"> 5331</span>    <span class="keywordflow">if</span> (has_writable) {</div>
<div class="line"><span class="lineno"> 5332</span>        <span class="comment">/* attempt to change from accessor to data property */</span></div>
<div class="line"><span class="lineno"> 5333</span>        <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 5334</span>            <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5335</span>        }</div>
<div class="line"><span class="lineno"> 5336</span> </div>
<div class="line"><span class="lineno"> 5337</span>        <span class="keywordflow">if</span> (is_writable) {</div>
<div class="line"><span class="lineno"> 5338</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 5339</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5340</span>            }</div>
<div class="line"><span class="lineno"> 5341</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5342</span>            <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>) {</div>
<div class="line"><span class="lineno"> 5343</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5344</span>            }</div>
<div class="line"><span class="lineno"> 5345</span>        }</div>
<div class="line"><span class="lineno"> 5346</span>    }</div>
<div class="line"><span class="lineno"> 5347</span>    <span class="keywordflow">if</span> (has_set) {</div>
<div class="line"><span class="lineno"> 5348</span>        <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 5349</span>            <span class="keywordflow">if</span> (set != curr.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>) {</div>
<div class="line"><span class="lineno"> 5350</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5351</span>            }</div>
<div class="line"><span class="lineno"> 5352</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5353</span>            <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5354</span>        }</div>
<div class="line"><span class="lineno"> 5355</span>    }</div>
<div class="line"><span class="lineno"> 5356</span>    <span class="keywordflow">if</span> (has_get) {</div>
<div class="line"><span class="lineno"> 5357</span>        <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 5358</span>            <span class="keywordflow">if</span> (get != curr.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>) {</div>
<div class="line"><span class="lineno"> 5359</span>                <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5360</span>            }</div>
<div class="line"><span class="lineno"> 5361</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5362</span>            <span class="keywordflow">goto</span> need_check;</div>
<div class="line"><span class="lineno"> 5363</span>        }</div>
<div class="line"><span class="lineno"> 5364</span>    }</div>
<div class="line"><span class="lineno"> 5365</span> </div>
<div class="line"><span class="lineno"> 5366</span>    <span class="comment">/* property exists, either &#39;desc&#39; is empty, or all values</span></div>
<div class="line"><span class="lineno"> 5367</span><span class="comment">     * match (SameValue)</span></div>
<div class="line"><span class="lineno"> 5368</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5369</span>    <span class="keywordflow">goto</span> success_no_exotics;</div>
<div class="line"><span class="lineno"> 5370</span> </div>
<div class="line"><span class="lineno"> 5371</span> need_check:</div>
<div class="line"><span class="lineno"> 5372</span> </div>
<div class="line"><span class="lineno"> 5373</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5374</span><span class="comment">     *  Some change(s) need to be made.  Steps 7-11.</span></div>
<div class="line"><span class="lineno"> 5375</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5376</span> </div>
<div class="line"><span class="lineno"> 5377</span>    <span class="comment">/* shared checks for all descriptor types */</span></div>
<div class="line"><span class="lineno"> 5378</span>    <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 5379</span>        <span class="keywordflow">if</span> (has_configurable &amp;&amp; is_configurable) {</div>
<div class="line"><span class="lineno"> 5380</span>            <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5381</span>        }</div>
<div class="line"><span class="lineno"> 5382</span>        <span class="keywordflow">if</span> (has_enumerable) {</div>
<div class="line"><span class="lineno"> 5383</span>            <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a>) {</div>
<div class="line"><span class="lineno"> 5384</span>                <span class="keywordflow">if</span> (!is_enumerable) {</div>
<div class="line"><span class="lineno"> 5385</span>                    <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5386</span>                }</div>
<div class="line"><span class="lineno"> 5387</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5388</span>                <span class="keywordflow">if</span> (is_enumerable) {</div>
<div class="line"><span class="lineno"> 5389</span>                    <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5390</span>                }</div>
<div class="line"><span class="lineno"> 5391</span>            }</div>
<div class="line"><span class="lineno"> 5392</span>        }</div>
<div class="line"><span class="lineno"> 5393</span>    }</div>
<div class="line"><span class="lineno"> 5394</span> </div>
<div class="line"><span class="lineno"> 5395</span>    <span class="comment">/* Reject attempt to change virtual properties: not part of the</span></div>
<div class="line"><span class="lineno"> 5396</span><span class="comment">     * standard algorithm, applies currently to e.g. virtual index</span></div>
<div class="line"><span class="lineno"> 5397</span><span class="comment">     * properties of buffer objects (which are virtual but writable).</span></div>
<div class="line"><span class="lineno"> 5398</span><span class="comment">     * (Cannot &quot;force&quot; modification of a virtual property.)</span></div>
<div class="line"><span class="lineno"> 5399</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5400</span>    <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>) {</div>
<div class="line"><span class="lineno"> 5401</span>        <span class="keywordflow">goto</span> fail_virtual;</div>
<div class="line"><span class="lineno"> 5402</span>    }</div>
<div class="line"><span class="lineno"> 5403</span> </div>
<div class="line"><span class="lineno"> 5404</span>    <span class="comment">/* Reject attempt to change a read-only object. */</span></div>
<div class="line"><span class="lineno"> 5405</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 5406</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj)) {</div>
<div class="line"><span class="lineno"> 5407</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;attempt to define property on read-only target object&quot;</span>));</div>
<div class="line"><span class="lineno"> 5408</span>        <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5409</span>    }</div>
<div class="line"><span class="lineno"> 5410</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5411</span> </div>
<div class="line"><span class="lineno"> 5412</span>    <span class="comment">/* descriptor type specific checks */</span></div>
<div class="line"><span class="lineno"> 5413</span>    <span class="keywordflow">if</span> (has_set || has_get) {</div>
<div class="line"><span class="lineno"> 5414</span>        <span class="comment">/* IsAccessorDescriptor(desc) == true */</span></div>
<div class="line"><span class="lineno"> 5415</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_writable);</div>
<div class="line"><span class="lineno"> 5416</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_value);</div>
<div class="line"><span class="lineno"> 5417</span> </div>
<div class="line"><span class="lineno"> 5418</span>        <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 5419</span>            <span class="comment">/* curr and desc are accessors */</span></div>
<div class="line"><span class="lineno"> 5420</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 5421</span>                <span class="keywordflow">if</span> (has_set &amp;&amp; set != curr.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>) {</div>
<div class="line"><span class="lineno"> 5422</span>                    <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5423</span>                }</div>
<div class="line"><span class="lineno"> 5424</span>                <span class="keywordflow">if</span> (has_get &amp;&amp; get != curr.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>) {</div>
<div class="line"><span class="lineno"> 5425</span>                    <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5426</span>                }</div>
<div class="line"><span class="lineno"> 5427</span>            }</div>
<div class="line"><span class="lineno"> 5428</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5429</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 5430</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv1;</div>
<div class="line"><span class="lineno"> 5431</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_tmp;</div>
<div class="line"><span class="lineno"> 5432</span> </div>
<div class="line"><span class="lineno"> 5433</span>            <span class="comment">/* curr is data, desc is accessor */</span></div>
<div class="line"><span class="lineno"> 5434</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 5435</span>                <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5436</span>            }</div>
<div class="line"><span class="lineno"> 5437</span> </div>
<div class="line"><span class="lineno"> 5438</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;convert property to accessor property&quot;</span>));</div>
<div class="line"><span class="lineno"> 5439</span>            <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &gt;= 0) {</div>
<div class="line"><span class="lineno"> 5440</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property to convert is stored in an array entry, abandon array and re-lookup&quot;</span>));</div>
<div class="line"><span class="lineno"> 5441</span>                <a class="code hl_function" href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 5442</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove old value */</span></div>
<div class="line"><span class="lineno"> 5443</span>                rc = <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, arr_idx, &amp;curr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>);</div>
<div class="line"><span class="lineno"> 5444</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 5445</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);</div>
<div class="line"><span class="lineno"> 5446</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0 &amp;&amp; curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &lt; 0);</div>
<div class="line"><span class="lineno"> 5447</span>            }</div>
<div class="line"><span class="lineno"> 5448</span> </div>
<div class="line"><span class="lineno"> 5449</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 5450</span> </div>
<div class="line"><span class="lineno"> 5451</span>            <span class="comment">/* Avoid side effects that might disturb curr.e_idx until</span></div>
<div class="line"><span class="lineno"> 5452</span><span class="comment">             * we&#39;re done editing the slot.</span></div>
<div class="line"><span class="lineno"> 5453</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5454</span>            tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5455</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_tmp, tv1);</div>
<div class="line"><span class="lineno"> 5456</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a>(tv1);</div>
<div class="line"><span class="lineno"> 5457</span> </div>
<div class="line"><span class="lineno"> 5458</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac62485d576bc9c48fb7c012e6848126d">DUK_HOBJECT_E_SET_VALUE_GETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5459</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c75b3f86ccda136313c7fb73ace5b53">DUK_HOBJECT_E_SET_VALUE_SETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5460</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b69a0edebca1f42a05df3bc0572dd1a">DUK_HOBJECT_E_SLOT_CLEAR_WRITABLE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5461</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aea2e728630bcda2c7e8084f4e2a90de1">DUK_HOBJECT_E_SLOT_SET_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5462</span> </div>
<div class="line"><span class="lineno"> 5463</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;flags after data-&gt;accessor conversion: 0x%02lx&quot;</span>,</div>
<div class="line"><span class="lineno"> 5464</span>                                 (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad2b534c718f0bed901cab77d6ff97cef">DUK_HOBJECT_E_GET_FLAGS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>)));</div>
<div class="line"><span class="lineno"> 5465</span> </div>
<div class="line"><span class="lineno"> 5466</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a02d61f73f3161cccb0ab7ec414bce92d">DUK_TVAL_DECREF</a>(thr, &amp;tv_tmp);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 5467</span> </div>
<div class="line"><span class="lineno"> 5468</span>            <span class="comment">/* re-lookup to update curr.flags</span></div>
<div class="line"><span class="lineno"> 5469</span><span class="comment">             * XXX: would be faster to update directly</span></div>
<div class="line"><span class="lineno"> 5470</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5471</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove old value */</span></div>
<div class="line"><span class="lineno"> 5472</span>            rc = <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, arr_idx, &amp;curr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>);</div>
<div class="line"><span class="lineno"> 5473</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 5474</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);</div>
<div class="line"><span class="lineno"> 5475</span>        }</div>
<div class="line"><span class="lineno"> 5476</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (has_value || has_writable) {</div>
<div class="line"><span class="lineno"> 5477</span>        <span class="comment">/* IsDataDescriptor(desc) == true */</span></div>
<div class="line"><span class="lineno"> 5478</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_set);</div>
<div class="line"><span class="lineno"> 5479</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_get);</div>
<div class="line"><span class="lineno"> 5480</span> </div>
<div class="line"><span class="lineno"> 5481</span>        <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 5482</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 5483</span>            <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_get;</div>
<div class="line"><span class="lineno"> 5484</span>            <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_set;</div>
<div class="line"><span class="lineno"> 5485</span> </div>
<div class="line"><span class="lineno"> 5486</span>            <span class="comment">/* curr is accessor, desc is data */</span></div>
<div class="line"><span class="lineno"> 5487</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 5488</span>                <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5489</span>            }</div>
<div class="line"><span class="lineno"> 5490</span> </div>
<div class="line"><span class="lineno"> 5491</span>            <span class="comment">/* curr is accessor -&gt; cannot be in array part */</span></div>
<div class="line"><span class="lineno"> 5492</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0 &amp;&amp; curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &lt; 0);</div>
<div class="line"><span class="lineno"> 5493</span> </div>
<div class="line"><span class="lineno"> 5494</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;convert property to data property&quot;</span>));</div>
<div class="line"><span class="lineno"> 5495</span> </div>
<div class="line"><span class="lineno"> 5496</span>            <span class="comment">/* Avoid side effects that might disturb curr.e_idx until</span></div>
<div class="line"><span class="lineno"> 5497</span><span class="comment">             * we&#39;re done editing the slot.</span></div>
<div class="line"><span class="lineno"> 5498</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5499</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 5500</span>            h_get = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad51f0d74d82c3d23e28d43b5c6943a0f">DUK_HOBJECT_E_GET_VALUE_GETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5501</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac62485d576bc9c48fb7c012e6848126d">DUK_HOBJECT_E_SET_VALUE_GETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5502</span>            h_set = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4d8c928185f0fc7ff5ba5cf58ef35b99">DUK_HOBJECT_E_GET_VALUE_SETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5503</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c75b3f86ccda136313c7fb73ace5b53">DUK_HOBJECT_E_SET_VALUE_SETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5504</span> </div>
<div class="line"><span class="lineno"> 5505</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 5506</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b69a0edebca1f42a05df3bc0572dd1a">DUK_HOBJECT_E_SLOT_CLEAR_WRITABLE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5507</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5882d0f8688710ebb6d70b0f2e9d4553">DUK_HOBJECT_E_SLOT_CLEAR_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5508</span> </div>
<div class="line"><span class="lineno"> 5509</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;flags after accessor-&gt;data conversion: 0x%02lx&quot;</span>,</div>
<div class="line"><span class="lineno"> 5510</span>                                 (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad2b534c718f0bed901cab77d6ff97cef">DUK_HOBJECT_E_GET_FLAGS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>)));</div>
<div class="line"><span class="lineno"> 5511</span> </div>
<div class="line"><span class="lineno"> 5512</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a086fdd75b79afe3307bf17f47e4f0e41">DUK_HOBJECT_DECREF_ALLOWNULL</a>(thr, h_get);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 5513</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a086fdd75b79afe3307bf17f47e4f0e41">DUK_HOBJECT_DECREF_ALLOWNULL</a>(thr, h_set);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 5514</span> </div>
<div class="line"><span class="lineno"> 5515</span>            <span class="comment">/* re-lookup to update curr.flags</span></div>
<div class="line"><span class="lineno"> 5516</span><span class="comment">             * XXX: would be faster to update directly</span></div>
<div class="line"><span class="lineno"> 5517</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5518</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove old value */</span></div>
<div class="line"><span class="lineno"> 5519</span>            rc = <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, arr_idx, &amp;curr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>);</div>
<div class="line"><span class="lineno"> 5520</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 5521</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);</div>
<div class="line"><span class="lineno"> 5522</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5523</span>            <span class="comment">/* curr and desc are data */</span></div>
<div class="line"><span class="lineno"> 5524</span>            <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 5525</span>                <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>) &amp;&amp; has_writable &amp;&amp; is_writable) {</div>
<div class="line"><span class="lineno"> 5526</span>                    <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5527</span>                }</div>
<div class="line"><span class="lineno"> 5528</span>                <span class="comment">/* Note: changing from writable to non-writable is OK */</span></div>
<div class="line"><span class="lineno"> 5529</span>                <span class="keywordflow">if</span> (!(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>) &amp;&amp; has_value) {</div>
<div class="line"><span class="lineno"> 5530</span>                    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tmp1 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);         <span class="comment">/* curr value */</span></div>
<div class="line"><span class="lineno"> 5531</span>                    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tmp2 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, idx_value);  <span class="comment">/* new value */</span></div>
<div class="line"><span class="lineno"> 5532</span>                    <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b306580fab6a279a17cd2232f980d96">duk_js_samevalue</a>(tmp1, tmp2)) {</div>
<div class="line"><span class="lineno"> 5533</span>                        <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 5534</span>                    }</div>
<div class="line"><span class="lineno"> 5535</span>                }</div>
<div class="line"><span class="lineno"> 5536</span>            }</div>
<div class="line"><span class="lineno"> 5537</span>        }</div>
<div class="line"><span class="lineno"> 5538</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5539</span>        <span class="comment">/* IsGenericDescriptor(desc) == true; this means in practice that &#39;desc&#39;</span></div>
<div class="line"><span class="lineno"> 5540</span><span class="comment">         * only has [[Enumerable]] or [[Configurable]] flag updates, which are</span></div>
<div class="line"><span class="lineno"> 5541</span><span class="comment">         * allowed at this point.</span></div>
<div class="line"><span class="lineno"> 5542</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 5543</span> </div>
<div class="line"><span class="lineno"> 5544</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_value &amp;&amp; !has_writable &amp;&amp; !has_get &amp;&amp; !has_set);</div>
<div class="line"><span class="lineno"> 5545</span>    }</div>
<div class="line"><span class="lineno"> 5546</span> </div>
<div class="line"><span class="lineno"> 5547</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5548</span><span class="comment">     *  Start doing property attributes updates.  Steps 12-13.</span></div>
<div class="line"><span class="lineno"> 5549</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 5550</span><span class="comment">     *  Start by computing new attribute flags without writing yet.</span></div>
<div class="line"><span class="lineno"> 5551</span><span class="comment">     *  Property type conversion is done above if necessary.</span></div>
<div class="line"><span class="lineno"> 5552</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5553</span> </div>
<div class="line"><span class="lineno"> 5554</span>    new_flags = curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a>;</div>
<div class="line"><span class="lineno"> 5555</span> </div>
<div class="line"><span class="lineno"> 5556</span>    <span class="keywordflow">if</span> (has_enumerable) {</div>
<div class="line"><span class="lineno"> 5557</span>        <span class="keywordflow">if</span> (is_enumerable) {</div>
<div class="line"><span class="lineno"> 5558</span>            new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abfc766de028cafab48f978508ad46274">DUK_PROPDESC_FLAG_ENUMERABLE</a>;</div>
<div class="line"><span class="lineno"> 5559</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5560</span>            new_flags &amp;= ~DUK_PROPDESC_FLAG_ENUMERABLE;</div>
<div class="line"><span class="lineno"> 5561</span>        }</div>
<div class="line"><span class="lineno"> 5562</span>    }</div>
<div class="line"><span class="lineno"> 5563</span>    <span class="keywordflow">if</span> (has_configurable) {</div>
<div class="line"><span class="lineno"> 5564</span>        <span class="keywordflow">if</span> (is_configurable) {</div>
<div class="line"><span class="lineno"> 5565</span>            new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>;</div>
<div class="line"><span class="lineno"> 5566</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5567</span>            new_flags &amp;= ~DUK_PROPDESC_FLAG_CONFIGURABLE;</div>
<div class="line"><span class="lineno"> 5568</span>        }</div>
<div class="line"><span class="lineno"> 5569</span>    }</div>
<div class="line"><span class="lineno"> 5570</span>    <span class="keywordflow">if</span> (has_writable) {</div>
<div class="line"><span class="lineno"> 5571</span>        <span class="keywordflow">if</span> (is_writable) {</div>
<div class="line"><span class="lineno"> 5572</span>            new_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>;</div>
<div class="line"><span class="lineno"> 5573</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5574</span>            new_flags &amp;= ~DUK_PROPDESC_FLAG_WRITABLE;</div>
<div class="line"><span class="lineno"> 5575</span>        }</div>
<div class="line"><span class="lineno"> 5576</span>    }</div>
<div class="line"><span class="lineno"> 5577</span> </div>
<div class="line"><span class="lineno"> 5578</span>    <span class="comment">/* XXX: write protect after flag? -&gt; any chance of handling it here? */</span></div>
<div class="line"><span class="lineno"> 5579</span> </div>
<div class="line"><span class="lineno"> 5580</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;new flags that we want to write: 0x%02lx&quot;</span>,</div>
<div class="line"><span class="lineno"> 5581</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) new_flags));</div>
<div class="line"><span class="lineno"> 5582</span> </div>
<div class="line"><span class="lineno"> 5583</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5584</span><span class="comment">     *  Check whether we need to abandon an array part (if it exists)</span></div>
<div class="line"><span class="lineno"> 5585</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5586</span> </div>
<div class="line"><span class="lineno"> 5587</span>    <span class="keywordflow">if</span> (curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &gt;= 0) {</div>
<div class="line"><span class="lineno"> 5588</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 5589</span> </div>
<div class="line"><span class="lineno"> 5590</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &lt; 0);</div>
<div class="line"><span class="lineno"> 5591</span> </div>
<div class="line"><span class="lineno"> 5592</span>        <span class="keywordflow">if</span> (new_flags == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a>) {</div>
<div class="line"><span class="lineno"> 5593</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv1, *tv2;</div>
<div class="line"><span class="lineno"> 5594</span> </div>
<div class="line"><span class="lineno"> 5595</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array index, new property attributes match array defaults, update in-place&quot;</span>));</div>
<div class="line"><span class="lineno"> 5596</span> </div>
<div class="line"><span class="lineno"> 5597</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a>);  <span class="comment">/* must have been, since in array part */</span></div>
<div class="line"><span class="lineno"> 5598</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_set);</div>
<div class="line"><span class="lineno"> 5599</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!has_get);</div>
<div class="line"><span class="lineno"> 5600</span> </div>
<div class="line"><span class="lineno"> 5601</span>            tv2 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, idx_value);</div>
<div class="line"><span class="lineno"> 5602</span>            tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a>);</div>
<div class="line"><span class="lineno"> 5603</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a>(thr, tv1, tv2);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 5604</span>            <span class="keywordflow">goto</span> success_exotics;</div>
<div class="line"><span class="lineno"> 5605</span>        }</div>
<div class="line"><span class="lineno"> 5606</span> </div>
<div class="line"><span class="lineno"> 5607</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array index, new property attributes do not match array defaults, abandon array and re-lookup&quot;</span>));</div>
<div class="line"><span class="lineno"> 5608</span>        <a class="code hl_function" href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 5609</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove old value */</span></div>
<div class="line"><span class="lineno"> 5610</span>        rc = <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, arr_idx, &amp;curr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>);</div>
<div class="line"><span class="lineno"> 5611</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 5612</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);</div>
<div class="line"><span class="lineno"> 5613</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0 &amp;&amp; curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &lt; 0);</div>
<div class="line"><span class="lineno"> 5614</span>    }</div>
<div class="line"><span class="lineno"> 5615</span> </div>
<div class="line"><span class="lineno"> 5616</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;updating existing property in entry part&quot;</span>));</div>
<div class="line"><span class="lineno"> 5617</span> </div>
<div class="line"><span class="lineno"> 5618</span>    <span class="comment">/* array case is handled comprehensively above */</span></div>
<div class="line"><span class="lineno"> 5619</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0 &amp;&amp; curr.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &lt; 0);</div>
<div class="line"><span class="lineno"> 5620</span> </div>
<div class="line"><span class="lineno"> 5621</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;update existing property attributes&quot;</span>));</div>
<div class="line"><span class="lineno"> 5622</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, new_flags);</div>
<div class="line"><span class="lineno"> 5623</span> </div>
<div class="line"><span class="lineno"> 5624</span>    <span class="keywordflow">if</span> (has_set) {</div>
<div class="line"><span class="lineno"> 5625</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *tmp;</div>
<div class="line"><span class="lineno"> 5626</span> </div>
<div class="line"><span class="lineno"> 5627</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;update existing property setter&quot;</span>));</div>
<div class="line"><span class="lineno"> 5628</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 5629</span> </div>
<div class="line"><span class="lineno"> 5630</span>        tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4d8c928185f0fc7ff5ba5cf58ef35b99">DUK_HOBJECT_E_GET_VALUE_SETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5631</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(tmp);</div>
<div class="line"><span class="lineno"> 5632</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c75b3f86ccda136313c7fb73ace5b53">DUK_HOBJECT_E_SET_VALUE_SETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, set);</div>
<div class="line"><span class="lineno"> 5633</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2b028c473ecd0ac84f414e3ccaacd1">DUK_HOBJECT_INCREF_ALLOWNULL</a>(thr, set);</div>
<div class="line"><span class="lineno"> 5634</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a086fdd75b79afe3307bf17f47e4f0e41">DUK_HOBJECT_DECREF_ALLOWNULL</a>(thr, tmp);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 5635</span>    }</div>
<div class="line"><span class="lineno"> 5636</span>    <span class="keywordflow">if</span> (has_get) {</div>
<div class="line"><span class="lineno"> 5637</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *tmp;</div>
<div class="line"><span class="lineno"> 5638</span> </div>
<div class="line"><span class="lineno"> 5639</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;update existing property getter&quot;</span>));</div>
<div class="line"><span class="lineno"> 5640</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 5641</span> </div>
<div class="line"><span class="lineno"> 5642</span>        tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad51f0d74d82c3d23e28d43b5c6943a0f">DUK_HOBJECT_E_GET_VALUE_GETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5643</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(tmp);</div>
<div class="line"><span class="lineno"> 5644</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac62485d576bc9c48fb7c012e6848126d">DUK_HOBJECT_E_SET_VALUE_GETTER</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, get);</div>
<div class="line"><span class="lineno"> 5645</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aee2b028c473ecd0ac84f414e3ccaacd1">DUK_HOBJECT_INCREF_ALLOWNULL</a>(thr, get);</div>
<div class="line"><span class="lineno"> 5646</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a086fdd75b79afe3307bf17f47e4f0e41">DUK_HOBJECT_DECREF_ALLOWNULL</a>(thr, tmp);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 5647</span>    }</div>
<div class="line"><span class="lineno"> 5648</span>    <span class="keywordflow">if</span> (has_value) {</div>
<div class="line"><span class="lineno"> 5649</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv1, *tv2;</div>
<div class="line"><span class="lineno"> 5650</span> </div>
<div class="line"><span class="lineno"> 5651</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;update existing property value&quot;</span>));</div>
<div class="line"><span class="lineno"> 5652</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 5653</span> </div>
<div class="line"><span class="lineno"> 5654</span>        tv2 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, idx_value);</div>
<div class="line"><span class="lineno"> 5655</span>        tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5656</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a>(thr, tv1, tv2);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 5657</span>    }</div>
<div class="line"><span class="lineno"> 5658</span> </div>
<div class="line"><span class="lineno"> 5659</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5660</span><span class="comment">     *  Standard algorithm succeeded without errors, check for exotic post-behaviors.</span></div>
<div class="line"><span class="lineno"> 5661</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 5662</span><span class="comment">     *  Arguments exotic behavior in E5 Section 10.6 occurs after the standard</span></div>
<div class="line"><span class="lineno"> 5663</span><span class="comment">     *  [[DefineOwnProperty]] has completed successfully.</span></div>
<div class="line"><span class="lineno"> 5664</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 5665</span><span class="comment">     *  Array exotic behavior in E5 Section 15.4.5.1 is implemented partly</span></div>
<div class="line"><span class="lineno"> 5666</span><span class="comment">     *  prior to the default [[DefineOwnProperty]], but:</span></div>
<div class="line"><span class="lineno"> 5667</span><span class="comment">     *    - for an array index key (e.g. &quot;10&quot;) the final &#39;length&#39; update occurs here</span></div>
<div class="line"><span class="lineno"> 5668</span><span class="comment">     *    - for &#39;length&#39; key the element deletion and &#39;length&#39; update occurs here</span></div>
<div class="line"><span class="lineno"> 5669</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5670</span> </div>
<div class="line"><span class="lineno"> 5671</span> success_exotics:</div>
<div class="line"><span class="lineno"> 5672</span> </div>
<div class="line"><span class="lineno"> 5673</span>    <span class="comment">/* [obj key desc value get set curr_value] */</span></div>
<div class="line"><span class="lineno"> 5674</span> </div>
<div class="line"><span class="lineno"> 5675</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>(obj)) {</div>
<div class="line"><span class="lineno"> 5676</span>        <span class="keywordflow">if</span> (arridx_new_array_length &gt; 0) {</div>
<div class="line"><span class="lineno"> 5677</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tmp;</div>
<div class="line"><span class="lineno"> 5678</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 5679</span> </div>
<div class="line"><span class="lineno"> 5680</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5681</span><span class="comment">             *  Note: zero works as a &quot;no update&quot; marker because the new length</span></div>
<div class="line"><span class="lineno"> 5682</span><span class="comment">             *  can never be zero after a new property is written.</span></div>
<div class="line"><span class="lineno"> 5683</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5684</span> </div>
<div class="line"><span class="lineno"> 5685</span>            <span class="comment">/* E5 Section 15.4.5.1, steps 4.e.i - 4.e.ii */</span></div>
<div class="line"><span class="lineno"> 5686</span> </div>
<div class="line"><span class="lineno"> 5687</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty successful, pending array length update to: %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 5688</span>                                 (<span class="keywordtype">long</span>) arridx_new_array_length));</div>
<div class="line"><span class="lineno"> 5689</span> </div>
<div class="line"><span class="lineno"> 5690</span>            <span class="comment">/* Note: reuse &#39;curr&#39; */</span></div>
<div class="line"><span class="lineno"> 5691</span>            rc = <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr), <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>, &amp;curr, 0 <span class="comment">/*flags*/</span>);  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 5692</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 5693</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);</div>
<div class="line"><span class="lineno"> 5694</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 5695</span> </div>
<div class="line"><span class="lineno"> 5696</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5697</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tmp));</div>
<div class="line"><span class="lineno"> 5698</span>            <span class="comment">/* no need for decref/incref because value is a number */</span></div>
<div class="line"><span class="lineno"> 5699</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0f10525d790e1c628b226c4719834415">DUK_TVAL_SET_FASTINT_U32</a>(tmp, arridx_new_array_length);</div>
<div class="line"><span class="lineno"> 5700</span>        }</div>
<div class="line"><span class="lineno"> 5701</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr) &amp;&amp; arrlen_new_len &lt; arrlen_old_len) {</div>
<div class="line"><span class="lineno"> 5702</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5703</span><span class="comment">             *  E5 Section 15.4.5.1, steps 3.k - 3.n.  The order at the end combines</span></div>
<div class="line"><span class="lineno"> 5704</span><span class="comment">             *  the error case 3.l.iii and the success case 3.m-3.n.</span></div>
<div class="line"><span class="lineno"> 5705</span><span class="comment">             *</span></div>
<div class="line"><span class="lineno"> 5706</span><span class="comment">             *  Note: &#39;length&#39; is always in entries part, so no array abandon issues for</span></div>
<div class="line"><span class="lineno"> 5707</span><span class="comment">             *  &#39;writable&#39; update.</span></div>
<div class="line"><span class="lineno"> 5708</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5709</span> </div>
<div class="line"><span class="lineno"> 5710</span>            <span class="comment">/* XXX: investigate whether write protect can be handled above, if we</span></div>
<div class="line"><span class="lineno"> 5711</span><span class="comment">             * just update length here while ignoring its protected status</span></div>
<div class="line"><span class="lineno"> 5712</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5713</span> </div>
<div class="line"><span class="lineno"> 5714</span>            <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tmp;</div>
<div class="line"><span class="lineno"> 5715</span>            duk_uint32_t result_len;</div>
<div class="line"><span class="lineno"> 5716</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 5717</span> </div>
<div class="line"><span class="lineno"> 5718</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty successful, key is &#39;length&#39;, exotic array behavior, &quot;</span></div>
<div class="line"><span class="lineno"> 5719</span>                                 <span class="stringliteral">&quot;doing array element deletion and length update&quot;</span>));</div>
<div class="line"><span class="lineno"> 5720</span> </div>
<div class="line"><span class="lineno"> 5721</span>            rc = <a class="code hl_function" href="#a189bf5afb9ac8c810ffe9333953e16a9">duk__handle_put_array_length_smaller</a>(thr, obj, arrlen_old_len, arrlen_new_len, force_flag, &amp;result_len);</div>
<div class="line"><span class="lineno"> 5722</span> </div>
<div class="line"><span class="lineno"> 5723</span>            <span class="comment">/* update length (curr points to length, and we assume it&#39;s still valid) */</span></div>
<div class="line"><span class="lineno"> 5724</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(result_len &gt;= arrlen_new_len &amp;&amp; result_len &lt;= arrlen_old_len);</div>
<div class="line"><span class="lineno"> 5725</span> </div>
<div class="line"><span class="lineno"> 5726</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 5727</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 5728</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5729</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tmp));</div>
<div class="line"><span class="lineno"> 5730</span>            <span class="comment">/* no decref needed for a number */</span></div>
<div class="line"><span class="lineno"> 5731</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0f10525d790e1c628b226c4719834415">DUK_TVAL_SET_FASTINT_U32</a>(tmp, result_len);</div>
<div class="line"><span class="lineno"> 5732</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tmp));</div>
<div class="line"><span class="lineno"> 5733</span> </div>
<div class="line"><span class="lineno"> 5734</span>            <span class="keywordflow">if</span> (pending_write_protect) {</div>
<div class="line"><span class="lineno"> 5735</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;setting array length non-writable (pending writability update)&quot;</span>));</div>
<div class="line"><span class="lineno"> 5736</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b69a0edebca1f42a05df3bc0572dd1a">DUK_HOBJECT_E_SLOT_CLEAR_WRITABLE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, curr.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 5737</span>            }</div>
<div class="line"><span class="lineno"> 5738</span> </div>
<div class="line"><span class="lineno"> 5739</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5740</span><span class="comment">             *  XXX: shrink array allocation or entries compaction here?</span></div>
<div class="line"><span class="lineno"> 5741</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 5742</span> </div>
<div class="line"><span class="lineno"> 5743</span>            <span class="keywordflow">if</span> (!rc) {</div>
<div class="line"><span class="lineno"> 5744</span>                <span class="keywordflow">goto</span> fail_array_length_partial;</div>
<div class="line"><span class="lineno"> 5745</span>            }</div>
<div class="line"><span class="lineno"> 5746</span>        }</div>
<div class="line"><span class="lineno"> 5747</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj)) {</div>
<div class="line"><span class="lineno"> 5748</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *map;</div>
<div class="line"><span class="lineno"> 5749</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *varenv;</div>
<div class="line"><span class="lineno"> 5750</span> </div>
<div class="line"><span class="lineno"> 5751</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arridx_new_array_length == 0);</div>
<div class="line"><span class="lineno"> 5752</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>(obj));  <span class="comment">/* traits are separate; in particular, arguments not an array */</span></div>
<div class="line"><span class="lineno"> 5753</span> </div>
<div class="line"><span class="lineno"> 5754</span>        map = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 5755</span>        varenv = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 5756</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a2a11c8ac838949396f84bf9f60595f4b">duk__lookup_arguments_map</a>(thr, obj, key, &amp;curr, &amp;map, &amp;varenv)) {</div>
<div class="line"><span class="lineno"> 5757</span>            <span class="keywordflow">goto</span> success_no_exotics;</div>
<div class="line"><span class="lineno"> 5758</span>        }</div>
<div class="line"><span class="lineno"> 5759</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(map != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5760</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(varenv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5761</span> </div>
<div class="line"><span class="lineno"> 5762</span>        <span class="comment">/* [obj key desc value get set curr_value varname] */</span></div>
<div class="line"><span class="lineno"> 5763</span> </div>
<div class="line"><span class="lineno"> 5764</span>        <span class="keywordflow">if</span> (has_set || has_get) {</div>
<div class="line"><span class="lineno"> 5765</span>            <span class="comment">/* = IsAccessorDescriptor(Desc) */</span></div>
<div class="line"><span class="lineno"> 5766</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty successful, key mapped to arguments &#39;map&#39; &quot;</span></div>
<div class="line"><span class="lineno"> 5767</span>                                 <span class="stringliteral">&quot;changed to an accessor, delete arguments binding&quot;</span>));</div>
<div class="line"><span class="lineno"> 5768</span> </div>
<div class="line"><span class="lineno"> 5769</span>            (void) <a class="code hl_function" href="#a6cbfe4b6b55490815c2b8a1b5e57612f">duk_hobject_delprop_raw</a>(thr, map, key, 0);  <span class="comment">/* ignore result */</span></div>
<div class="line"><span class="lineno"> 5770</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5771</span>            <span class="comment">/* Note: this order matters (final value before deleting map entry must be done) */</span></div>
<div class="line"><span class="lineno"> 5772</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty successful, key mapped to arguments &#39;map&#39;, &quot;</span></div>
<div class="line"><span class="lineno"> 5773</span>                                 <span class="stringliteral">&quot;check for value update / binding deletion&quot;</span>));</div>
<div class="line"><span class="lineno"> 5774</span> </div>
<div class="line"><span class="lineno"> 5775</span>            <span class="keywordflow">if</span> (has_value) {</div>
<div class="line"><span class="lineno"> 5776</span>                <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *varname;</div>
<div class="line"><span class="lineno"> 5777</span> </div>
<div class="line"><span class="lineno"> 5778</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty successful, key mapped to arguments &#39;map&#39;, &quot;</span></div>
<div class="line"><span class="lineno"> 5779</span>                                     <span class="stringliteral">&quot;update bound value (variable/argument)&quot;</span>));</div>
<div class="line"><span class="lineno"> 5780</span> </div>
<div class="line"><span class="lineno"> 5781</span>                varname = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada73fbe26eab23a90817c3c2a596950a">duk_require_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 5782</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(varname != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5783</span> </div>
<div class="line"><span class="lineno"> 5784</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;arguments object automatic putvar for a bound variable; &quot;</span></div>
<div class="line"><span class="lineno"> 5785</span>                                     <span class="stringliteral">&quot;key=%!O, varname=%!O, value=%!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 5786</span>                                     (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key,</div>
<div class="line"><span class="lineno"> 5787</span>                                     (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) varname,</div>
<div class="line"><span class="lineno"> 5788</span>                                     (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, idx_value)));</div>
<div class="line"><span class="lineno"> 5789</span> </div>
<div class="line"><span class="lineno"> 5790</span>                <span class="comment">/* strict flag for putvar comes from our caller (currently: fixed) */</span></div>
<div class="line"><span class="lineno"> 5791</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1ea8f329a2fdc51e4d7c96fcfb960623">duk_js_putvar_envrec</a>(thr, varenv, varname, <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, idx_value), throw_flag);</div>
<div class="line"><span class="lineno"> 5792</span>            }</div>
<div class="line"><span class="lineno"> 5793</span>            <span class="keywordflow">if</span> (has_writable &amp;&amp; !is_writable) {</div>
<div class="line"><span class="lineno"> 5794</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;defineProperty successful, key mapped to arguments &#39;map&#39;, &quot;</span></div>
<div class="line"><span class="lineno"> 5795</span>                                     <span class="stringliteral">&quot;changed to non-writable, delete arguments binding&quot;</span>));</div>
<div class="line"><span class="lineno"> 5796</span> </div>
<div class="line"><span class="lineno"> 5797</span>                (void) <a class="code hl_function" href="#a6cbfe4b6b55490815c2b8a1b5e57612f">duk_hobject_delprop_raw</a>(thr, map, key, 0);  <span class="comment">/* ignore result */</span></div>
<div class="line"><span class="lineno"> 5798</span>            }</div>
<div class="line"><span class="lineno"> 5799</span>        }</div>
<div class="line"><span class="lineno"> 5800</span> </div>
<div class="line"><span class="lineno"> 5801</span>        <span class="comment">/* &#39;varname&#39; is in stack in this else branch, leaving an unbalanced stack below,</span></div>
<div class="line"><span class="lineno"> 5802</span><span class="comment">         * but this doesn&#39;t matter now.</span></div>
<div class="line"><span class="lineno"> 5803</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 5804</span>    }</div>
<div class="line"><span class="lineno"> 5805</span> </div>
<div class="line"><span class="lineno"> 5806</span> success_no_exotics:</div>
<div class="line"><span class="lineno"> 5807</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5808</span> </div>
<div class="line"><span class="lineno"> 5809</span> fail_virtual:</div>
<div class="line"><span class="lineno"> 5810</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab372606fe3281c8e7bede2f73332d318">DUK_STR_PROPERTY_IS_VIRTUAL</a>);</div>
<div class="line"><span class="lineno"> 5811</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5812</span> </div>
<div class="line"><span class="lineno"> 5813</span> fail_not_writable_array_length:</div>
<div class="line"><span class="lineno"> 5814</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b48670793262fa25c9c9d92a01bef79">DUK_STR_ARRAY_LENGTH_NOT_WRITABLE</a>);</div>
<div class="line"><span class="lineno"> 5815</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5816</span> </div>
<div class="line"><span class="lineno"> 5817</span> fail_not_extensible:</div>
<div class="line"><span class="lineno"> 5818</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6d3a8adca37b5f6becfccafd87d6fe79">DUK_STR_NOT_EXTENSIBLE</a>);</div>
<div class="line"><span class="lineno"> 5819</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5820</span> </div>
<div class="line"><span class="lineno"> 5821</span> fail_not_configurable:</div>
<div class="line"><span class="lineno"> 5822</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9fd5ef7ea8638f09a14d13d575bc0580">DUK_STR_NOT_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 5823</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5824</span> </div>
<div class="line"><span class="lineno"> 5825</span> fail_array_length_partial:</div>
<div class="line"><span class="lineno"> 5826</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0bee789cf5bc47e42781ca7f9344ec97">DUK_STR_ARRAY_LENGTH_WRITE_FAILED</a>);</div>
<div class="line"><span class="lineno"> 5827</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5828</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a02d61f73f3161cccb0ab7ec414bce92d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a02d61f73f3161cccb0ab7ec414bce92d">DUK_TVAL_DECREF</a></div><div class="ttdeci">#define DUK_TVAL_DECREF(thr, tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03809">duktape-1.5.2/src-noline/duktape.c:3809</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a086fdd75b79afe3307bf17f47e4f0e41"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a086fdd75b79afe3307bf17f47e4f0e41">DUK_HOBJECT_DECREF_ALLOWNULL</a></div><div class="ttdeci">#define DUK_HOBJECT_DECREF_ALLOWNULL(thr, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03843">duktape-1.5.2/src-noline/duktape.c:3843</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0bee789cf5bc47e42781ca7f9344ec97"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0bee789cf5bc47e42781ca7f9344ec97">DUK_STR_ARRAY_LENGTH_WRITE_FAILED</a></div><div class="ttdeci">#define DUK_STR_ARRAY_LENGTH_WRITE_FAILED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02374">duktape-1.5.2/src-noline/duktape.c:2374</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4b306580fab6a279a17cd2232f980d96"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b306580fab6a279a17cd2232f980d96">duk_js_samevalue</a></div><div class="ttdeci">#define duk_js_samevalue(tv_x, tv_y)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08382">duktape-1.5.2/src-noline/duktape.c:8382</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4b48670793262fa25c9c9d92a01bef79"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b48670793262fa25c9c9d92a01bef79">DUK_STR_ARRAY_LENGTH_NOT_WRITABLE</a></div><div class="ttdeci">#define DUK_STR_ARRAY_LENGTH_NOT_WRITABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02375">duktape-1.5.2/src-noline/duktape.c:2375</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4cab0e419e53fb6bc4e79f6e8fd384bd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4cab0e419e53fb6bc4e79f6e8fd384bd">DUK_TVAL_INCREF</a></div><div class="ttdeci">#define DUK_TVAL_INCREF(thr, tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03808">duktape-1.5.2/src-noline/duktape.c:3808</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5882d0f8688710ebb6d70b0f2e9d4553"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5882d0f8688710ebb6d70b0f2e9d4553">DUK_HOBJECT_E_SLOT_CLEAR_ACCESSOR</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SLOT_CLEAR_ACCESSOR(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05145">duktape-1.5.2/src-noline/duktape.c:5145</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a690921ea90be3a0cb5483cb80f9c3439"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a690921ea90be3a0cb5483cb80f9c3439">duk_replace</a></div><div class="ttdeci">DUK_EXTERNAL void duk_replace(duk_context *ctx, duk_idx_t to_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15780">duktape-1.5.2/src-noline/duktape.c:15780</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6d3a8adca37b5f6becfccafd87d6fe79"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6d3a8adca37b5f6becfccafd87d6fe79">DUK_STR_NOT_EXTENSIBLE</a></div><div class="ttdeci">#define DUK_STR_NOT_EXTENSIBLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02282">duktape-1.5.2/src-noline/duktape.c:2282</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7b69a0edebca1f42a05df3bc0572dd1a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b69a0edebca1f42a05df3bc0572dd1a">DUK_HOBJECT_E_SLOT_CLEAR_WRITABLE</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SLOT_CLEAR_WRITABLE(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05142">duktape-1.5.2/src-noline/duktape.c:5142</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9fd5ef7ea8638f09a14d13d575bc0580"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9fd5ef7ea8638f09a14d13d575bc0580">DUK_STR_NOT_CONFIGURABLE</a></div><div class="ttdeci">#define DUK_STR_NOT_CONFIGURABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02284">duktape-1.5.2/src-noline/duktape.c:2284</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa280e0838a1bf1f155f3c6e9325cf4f2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a></div><div class="ttdeci">#define DUK_HOBJECT_E_SET_FLAGS(heap, h, i, f)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05112">duktape-1.5.2/src-noline/duktape.c:5112</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab372606fe3281c8e7bede2f73332d318"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab372606fe3281c8e7bede2f73332d318">DUK_STR_PROPERTY_IS_VIRTUAL</a></div><div class="ttdeci">#define DUK_STR_PROPERTY_IS_VIRTUAL</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02379">duktape-1.5.2/src-noline/duktape.c:2379</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab6a0eaf676af7e4c9c045ed48d13cd2b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAGS_WEC</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04887">duktape-1.5.2/src-noline/duktape.c:4887</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_adbeffc949a1d3dc7aae2f1cc1aecda88"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a></div><div class="ttdeci">#define DUK_TVAL_SET_UNDEFINED(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00658">duktape-1.5.2/src-noline/duktape.c:658</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aeec241c8da1fbeaa28b17454e282b8f7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeec241c8da1fbeaa28b17454e282b8f7">duk_push_u32</a></div><div class="ttdeci">#define duk_push_u32(ctx, val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04264">duktape-1.5.2/src-noline/duktape.c:4264</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a17869b75ee0c10258d58c5061edb12fa"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a17869b75ee0c10258d58c5061edb12fa">DUK_DEFPROP_HAVE_GETTER</a></div><div class="ttdeci">#define DUK_DEFPROP_HAVE_GETTER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00313">duktape-1.5.2/src-noline/duktape.h:313</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a46c19e619ca3e5b33b31ba0c30915138"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a46c19e619ca3e5b33b31ba0c30915138">DUK_DEFPROP_HAVE_VALUE</a></div><div class="ttdeci">#define DUK_DEFPROP_HAVE_VALUE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00312">duktape-1.5.2/src-noline/duktape.h:312</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a630f95bede9436f4840be233ec39d38d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a630f95bede9436f4840be233ec39d38d">DUK_DEFPROP_FORCE</a></div><div class="ttdeci">#define DUK_DEFPROP_FORCE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00315">duktape-1.5.2/src-noline/duktape.h:315</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a6560ba69a124b7fb9ea25794822c7fcd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a6560ba69a124b7fb9ea25794822c7fcd">DUK_DEFPROP_CONFIGURABLE</a></div><div class="ttdeci">#define DUK_DEFPROP_CONFIGURABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00308">duktape-1.5.2/src-noline/duktape.h:308</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a77796389f5202e6a3a45efffaa7b08ea"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a77796389f5202e6a3a45efffaa7b08ea">DUK_DEFPROP_HAVE_WRITABLE</a></div><div class="ttdeci">#define DUK_DEFPROP_HAVE_WRITABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00309">duktape-1.5.2/src-noline/duktape.h:309</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_ab1987664ebbc37a9494e5e8a84a2ddd4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab1987664ebbc37a9494e5e8a84a2ddd4">DUK_DEFPROP_HAVE_SETTER</a></div><div class="ttdeci">#define DUK_DEFPROP_HAVE_SETTER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00314">duktape-1.5.2/src-noline/duktape.h:314</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_abc7442877bec8197cedb400303a3db4e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#abc7442877bec8197cedb400303a3db4e">DUK_DEFPROP_HAVE_CONFIGURABLE</a></div><div class="ttdeci">#define DUK_DEFPROP_HAVE_CONFIGURABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00311">duktape-1.5.2/src-noline/duktape.h:311</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_ac11e106e2064f130b786168dd68eef23"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#ac11e106e2064f130b786168dd68eef23">DUK_DEFPROP_ENUMERABLE</a></div><div class="ttdeci">#define DUK_DEFPROP_ENUMERABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00307">duktape-1.5.2/src-noline/duktape.h:307</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_acb50039378c60534e38d3f9aaac57ebf"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#acb50039378c60534e38d3f9aaac57ebf">DUK_DEFPROP_HAVE_ENUMERABLE</a></div><div class="ttdeci">#define DUK_DEFPROP_HAVE_ENUMERABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00310">duktape-1.5.2/src-noline/duktape.h:310</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_ae1fc0a38b38ae096fdd456ffec060400"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#ae1fc0a38b38ae096fdd456ffec060400">DUK_DEFPROP_WRITABLE</a></div><div class="ttdeci">#define DUK_DEFPROP_WRITABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00306">duktape-1.5.2/src-noline/duktape.h:306</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a4f516582bc333e12262483674371d5ba"><div class="ttname"><a href="#a4f516582bc333e12262483674371d5ba">duk__alloc_entry_checked</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__alloc_entry_checked(duk_hthread *thr, duk_hobject *obj, duk_hstring *key)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duktape-1.8.0/src-separate/duk_hobject_props.c:1252</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a504cd329f8e1aed37715da8972fb6f7c"><div class="ttname"><a href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a></div><div class="ttdeci">DUK_LOCAL void duk__abandon_array_checked(duk_hthread *thr, duk_hobject *obj)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duktape-1.8.0/src-separate/duk_hobject_props.c:993</a></div></div>
<div class="ttc" id="astructduk__propdesc_html_a1c98a99424e220e54b41e7d1cf820d65"><div class="ttname"><a href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">duk_propdesc::set</a></div><div class="ttdeci">duk_hobject * set</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duktape-1.5.2/src-noline/duktape.c:5320</a></div></div>
<div class="ttc" id="astructduk__propdesc_html_a47fcfb993ae0dccdabdeec5f0c1a9aa9"><div class="ttname"><a href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">duk_propdesc::get</a></div><div class="ttdeci">duk_hobject * get</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duktape-1.5.2/src-noline/duktape.c:5319</a></div></div>
<div class="ttc" id="astructduk__propdesc_html_aa976974c7ed8270f2b9519cab55b0d25"><div class="ttname"><a href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">duk_propdesc::a_idx</a></div><div class="ttdeci">duk_int_t a_idx</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05325">duktape-1.5.2/src-noline/duktape.c:5325</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05325">duk_propdesc::a_idx</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duk__get_old_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02938">duk__handle_put_array_length_smaller()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01384">duk__lookup_arguments_map()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02909">duk__to_new_array_length_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00308">DUK_DEFPROP_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00307">DUK_DEFPROP_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00315">DUK_DEFPROP_FORCE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00311">DUK_DEFPROP_HAVE_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00310">DUK_DEFPROP_HAVE_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00313">DUK_DEFPROP_HAVE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00314">DUK_DEFPROP_HAVE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00312">DUK_DEFPROP_HAVE_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00309">DUK_DEFPROP_HAVE_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00306">DUK_DEFPROP_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">DUK_GETDESC_FLAG_PUSH_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03843">DUK_HOBJECT_DECREF_ALLOWNULL</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05090">DUK_HOBJECT_E_GET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05086">DUK_HOBJECT_E_GET_VALUE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05088">DUK_HOBJECT_E_GET_VALUE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05112">DUK_HOBJECT_E_SET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05106">DUK_HOBJECT_E_SET_VALUE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05109">DUK_HOBJECT_E_SET_VALUE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05145">DUK_HOBJECT_E_SLOT_CLEAR_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05142">DUK_HOBJECT_E_SLOT_CLEAR_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05140">DUK_HOBJECT_E_SLOT_SET_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04819">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04817">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04803">DUK_HOBJECT_HAS_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03838">DUK_HOBJECT_INCREF_ALLOWNULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04539">DUK_HSTRING_GET_ARRIDX_SLOW</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">DUK_HTHREAD_STRING_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l72500">duk_js_putvar_envrec()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08382">duk_js_samevalue</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04867">DUK_PROPDESC_FLAG_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04865">DUK_PROPDESC_FLAG_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04868">DUK_PROPDESC_FLAG_VIRTUAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04887">DUK_PROPDESC_FLAGS_WEC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04264">duk_push_u32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15780">duk_replace()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16292">duk_require_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02375">DUK_STR_ARRAY_LENGTH_NOT_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02374">DUK_STR_ARRAY_LENGTH_WRITE_FAILED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02284">DUK_STR_NOT_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02282">DUK_STR_NOT_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02379">DUK_STR_PROPERTY_IS_VIRTUAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03809">DUK_TVAL_DECREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03808">DUK_TVAL_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00710">DUK_TVAL_SET_FASTINT_U32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">DUK_TVAL_SET_TVAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04029">DUK_TVAL_SET_TVAL_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00658">DUK_TVAL_SET_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duk_propdesc::get</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duk_propdesc::set</a>.</p>

</div>
</div>
<a id="aaca98f6ca754be4286c93afa511d437a" name="aaca98f6ca754be4286c93afa511d437a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaca98f6ca754be4286c93afa511d437a">&#9670;&#160;</a></span>duk_hobject_define_property_internal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_define_property_internal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">4518</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4518</span>                                                                                                                                     {</div>
<div class="line"><span class="lineno"> 4519</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 4520</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 4521</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno"> 4522</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 4523</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv1 = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 4524</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv2 = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 4525</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> propflags = flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b013725fb5a479219394243fbf4cf52">DUK_PROPDESC_FLAGS_MASK</a>;  <span class="comment">/* mask out flags not actually stored */</span></div>
<div class="line"><span class="lineno"> 4526</span> </div>
<div class="line"><span class="lineno"> 4527</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;define new property (internal): thr=%p, obj=%!O, key=%!O, flags=0x%02lx, val=%!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 4528</span>                         (<span class="keywordtype">void</span> *) thr, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key,</div>
<div class="line"><span class="lineno"> 4529</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) flags, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 4530</span> </div>
<div class="line"><span class="lineno"> 4531</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4532</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4533</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4534</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4535</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj));</div>
<div class="line"><span class="lineno"> 4536</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 4537</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a425cf7bfb0e78f238e1d2dab5bf1c910">duk_is_valid_index</a>(ctx, -1));  <span class="comment">/* contains value */</span></div>
<div class="line"><span class="lineno"> 4538</span> </div>
<div class="line"><span class="lineno"> 4539</span>    arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed57897f1a937b3298fcfa0768b332c2">DUK_HSTRING_GET_ARRIDX_SLOW</a>(key);</div>
<div class="line"><span class="lineno"> 4540</span> </div>
<div class="line"><span class="lineno"> 4541</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, arr_idx, &amp;desc, 0 <span class="comment">/*flags*/</span>)) {  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 4542</span>        <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4543</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a784054e22de5ccc97bb0059a4e620536">DUK_PROPDESC_FLAG_NO_OVERWRITE</a>) {</div>
<div class="line"><span class="lineno"> 4544</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property already exists in the entry part -&gt; skip as requested&quot;</span>));</div>
<div class="line"><span class="lineno"> 4545</span>                <span class="keywordflow">goto</span> pop_exit;</div>
<div class="line"><span class="lineno"> 4546</span>            }</div>
<div class="line"><span class="lineno"> 4547</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property already exists in the entry part -&gt; update value and attributes&quot;</span>));</div>
<div class="line"><span class="lineno"> 4548</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>))) {</div>
<div class="line"><span class="lineno"> 4549</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;existing property is an accessor, not supported&quot;</span>));</div>
<div class="line"><span class="lineno"> 4550</span>                <span class="keywordflow">goto</span> error_internal;</div>
<div class="line"><span class="lineno"> 4551</span>            }</div>
<div class="line"><span class="lineno"> 4552</span> </div>
<div class="line"><span class="lineno"> 4553</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, propflags);</div>
<div class="line"><span class="lineno"> 4554</span>            tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 4555</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4556</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a784054e22de5ccc97bb0059a4e620536">DUK_PROPDESC_FLAG_NO_OVERWRITE</a>) {</div>
<div class="line"><span class="lineno"> 4557</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property already exists in the array part -&gt; skip as requested&quot;</span>));</div>
<div class="line"><span class="lineno"> 4558</span>                <span class="keywordflow">goto</span> pop_exit;</div>
<div class="line"><span class="lineno"> 4559</span>            }</div>
<div class="line"><span class="lineno"> 4560</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property already exists in the array part -&gt; update value (assert attributes)&quot;</span>));</div>
<div class="line"><span class="lineno"> 4561</span>            <span class="keywordflow">if</span> (propflags != <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a>) {</div>
<div class="line"><span class="lineno"> 4562</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;existing property in array part, but propflags not WEC (0x%02lx)&quot;</span>,</div>
<div class="line"><span class="lineno"> 4563</span>                                 (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) propflags));</div>
<div class="line"><span class="lineno"> 4564</span>                <span class="keywordflow">goto</span> error_internal;</div>
<div class="line"><span class="lineno"> 4565</span>            }</div>
<div class="line"><span class="lineno"> 4566</span> </div>
<div class="line"><span class="lineno"> 4567</span>            tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a>);</div>
<div class="line"><span class="lineno"> 4568</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4569</span>            <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a784054e22de5ccc97bb0059a4e620536">DUK_PROPDESC_FLAG_NO_OVERWRITE</a>) {</div>
<div class="line"><span class="lineno"> 4570</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property already exists but is virtual -&gt; skip as requested&quot;</span>));</div>
<div class="line"><span class="lineno"> 4571</span>                <span class="keywordflow">goto</span> pop_exit;</div>
<div class="line"><span class="lineno"> 4572</span>            }</div>
<div class="line"><span class="lineno"> 4573</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property already exists but is virtual -&gt; failure&quot;</span>));</div>
<div class="line"><span class="lineno"> 4574</span>            <span class="keywordflow">goto</span> error_virtual;</div>
<div class="line"><span class="lineno"> 4575</span>        }</div>
<div class="line"><span class="lineno"> 4576</span> </div>
<div class="line"><span class="lineno"> 4577</span>        <span class="keywordflow">goto</span> write_value;</div>
<div class="line"><span class="lineno"> 4578</span>    }</div>
<div class="line"><span class="lineno"> 4579</span> </div>
<div class="line"><span class="lineno"> 4580</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj)) {</div>
<div class="line"><span class="lineno"> 4581</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>) {</div>
<div class="line"><span class="lineno"> 4582</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property does not exist, object has array part -&gt; possibly extend array part and write value (assert attributes)&quot;</span>));</div>
<div class="line"><span class="lineno"> 4583</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(propflags == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a>);</div>
<div class="line"><span class="lineno"> 4584</span> </div>
<div class="line"><span class="lineno"> 4585</span>            <span class="comment">/* always grow the array, no sparse / abandon support here */</span></div>
<div class="line"><span class="lineno"> 4586</span>            <span class="keywordflow">if</span> (arr_idx &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 4587</span>                <a class="code hl_function" href="#a9f28a6dc20ab155914e7ba6a0a812b56">duk__grow_props_for_array_item</a>(thr, obj, arr_idx);</div>
<div class="line"><span class="lineno"> 4588</span>            }</div>
<div class="line"><span class="lineno"> 4589</span> </div>
<div class="line"><span class="lineno"> 4590</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 4591</span>            tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;heap, obj, arr_idx);</div>
<div class="line"><span class="lineno"> 4592</span>            <span class="keywordflow">goto</span> write_value;</div>
<div class="line"><span class="lineno"> 4593</span>        }</div>
<div class="line"><span class="lineno"> 4594</span>    }</div>
<div class="line"><span class="lineno"> 4595</span> </div>
<div class="line"><span class="lineno"> 4596</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property does not exist, object belongs in entry part -&gt; allocate new entry and write value and attributes&quot;</span>));</div>
<div class="line"><span class="lineno"> 4597</span>    e_idx = <a class="code hl_function" href="#a4f516582bc333e12262483674371d5ba">duk__alloc_entry_checked</a>(thr, obj, key);  <span class="comment">/* increases key refcount */</span></div>
<div class="line"><span class="lineno"> 4598</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 4599</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a>(thr-&gt;heap, obj, e_idx, propflags);</div>
<div class="line"><span class="lineno"> 4600</span>    tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 4601</span>    <span class="comment">/* new entry: previous value is garbage; set to undefined to share write_value */</span></div>
<div class="line"><span class="lineno"> 4602</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a>(tv1);</div>
<div class="line"><span class="lineno"> 4603</span>    <span class="keywordflow">goto</span> write_value;</div>
<div class="line"><span class="lineno"> 4604</span> </div>
<div class="line"><span class="lineno"> 4605</span> write_value:</div>
<div class="line"><span class="lineno"> 4606</span>    <span class="comment">/* tv1 points to value storage */</span></div>
<div class="line"><span class="lineno"> 4607</span> </div>
<div class="line"><span class="lineno"> 4608</span>    tv2 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);  <span class="comment">/* late lookup, avoid side effects */</span></div>
<div class="line"><span class="lineno"> 4609</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;writing/updating value: %!T -&gt; %!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 4610</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv1, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv2));</div>
<div class="line"><span class="lineno"> 4611</span> </div>
<div class="line"><span class="lineno"> 4612</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a>(thr, tv1, tv2);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 4613</span>    <span class="keywordflow">goto</span> pop_exit;</div>
<div class="line"><span class="lineno"> 4614</span> </div>
<div class="line"><span class="lineno"> 4615</span> pop_exit:</div>
<div class="line"><span class="lineno"> 4616</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove in_val */</span></div>
<div class="line"><span class="lineno"> 4617</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4618</span> </div>
<div class="line"><span class="lineno"> 4619</span> error_internal:</div>
<div class="line"><span class="lineno"> 4620</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50bd040ebe622fdf3fbac5a153dce3b7">DUK_ERROR_INTERNAL_DEFMSG</a>(thr);</div>
<div class="line"><span class="lineno"> 4621</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4622</span> </div>
<div class="line"><span class="lineno"> 4623</span> error_virtual:</div>
<div class="line"><span class="lineno"> 4624</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a341018d0a8befdf2cfefd95c4ad45cce">DUK_STR_REDEFINE_VIRT_PROP</a>);</div>
<div class="line"><span class="lineno"> 4625</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4626</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a341018d0a8befdf2cfefd95c4ad45cce"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a341018d0a8befdf2cfefd95c4ad45cce">DUK_STR_REDEFINE_VIRT_PROP</a></div><div class="ttdeci">#define DUK_STR_REDEFINE_VIRT_PROP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02377">duktape-1.5.2/src-noline/duktape.c:2377</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a50bd040ebe622fdf3fbac5a153dce3b7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50bd040ebe622fdf3fbac5a153dce3b7">DUK_ERROR_INTERNAL_DEFMSG</a></div><div class="ttdeci">#define DUK_ERROR_INTERNAL_DEFMSG(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07856">duktape-1.5.2/src-noline/duktape.c:7856</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a784054e22de5ccc97bb0059a4e620536"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a784054e22de5ccc97bb0059a4e620536">DUK_PROPDESC_FLAG_NO_OVERWRITE</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAG_NO_OVERWRITE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04877">duktape-1.5.2/src-noline/duktape.c:4877</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a9f28a6dc20ab155914e7ba6a0a812b56"><div class="ttname"><a href="#a9f28a6dc20ab155914e7ba6a0a812b56">duk__grow_props_for_array_item</a></div><div class="ttdeci">DUK_LOCAL void duk__grow_props_for_array_item(duk_hthread *thr, duk_hobject *obj, duk_uint32_t highest_arr_idx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00969">duktape-1.8.0/src-separate/duk_hobject_props.c:969</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05325">duk_propdesc::a_idx</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00969">duk__grow_props_for_array_item()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">DUK_D</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">DUK_DPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07856">DUK_ERROR_INTERNAL_DEFMSG</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05112">DUK_HOBJECT_E_SET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04539">DUK_HSTRING_GET_ARRIDX_SLOW</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15180">duk_is_valid_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04877">DUK_PROPDESC_FLAG_NO_OVERWRITE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04869">DUK_PROPDESC_FLAGS_MASK</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04887">DUK_PROPDESC_FLAGS_WEC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02377">DUK_STR_REDEFINE_VIRT_PROP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04029">DUK_TVAL_SET_TVAL_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00658">DUK_TVAL_SET_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04691">duk_hobject_define_accessor_internal()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04634">duk_hobject_define_property_internal_arridx()</a>.</p>

</div>
</div>
<a id="a7411f402c7cfc8673351a3b7794b6c44" name="a7411f402c7cfc8673351a3b7794b6c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7411f402c7cfc8673351a3b7794b6c44">&#9670;&#160;</a></span>duk_hobject_define_property_internal_arridx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_define_property_internal_arridx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a></td>          <td class="paramname"><span class="paramname"><em>arr_idx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04634">4634</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4634</span>                                                                                                                                                 {</div>
<div class="line"><span class="lineno"> 4635</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 4636</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key;</div>
<div class="line"><span class="lineno"> 4637</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv1, *tv2;</div>
<div class="line"><span class="lineno"> 4638</span> </div>
<div class="line"><span class="lineno"> 4639</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;define new property (internal) arr_idx fast path: thr=%p, obj=%!O, &quot;</span></div>
<div class="line"><span class="lineno"> 4640</span>                         <span class="stringliteral">&quot;arr_idx=%ld, flags=0x%02lx, val=%!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 4641</span>                         (<span class="keywordtype">void</span> *) thr, obj, (<span class="keywordtype">long</span>) arr_idx, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) flags,</div>
<div class="line"><span class="lineno"> 4642</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 4643</span> </div>
<div class="line"><span class="lineno"> 4644</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4645</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4646</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4647</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj));</div>
<div class="line"><span class="lineno"> 4648</span> </div>
<div class="line"><span class="lineno"> 4649</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj) &amp;&amp;</div>
<div class="line"><span class="lineno"> 4650</span>        arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 4651</span>        flags == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a>) {</div>
<div class="line"><span class="lineno"> 4652</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a784054e22de5ccc97bb0059a4e620536">DUK_PROPDESC_FLAG_NO_OVERWRITE</a>) == 0);  <span class="comment">/* covered by comparison */</span></div>
<div class="line"><span class="lineno"> 4653</span> </div>
<div class="line"><span class="lineno"> 4654</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;define property to array part (property may or may not exist yet)&quot;</span>));</div>
<div class="line"><span class="lineno"> 4655</span> </div>
<div class="line"><span class="lineno"> 4656</span>        <span class="comment">/* always grow the array, no sparse / abandon support here */</span></div>
<div class="line"><span class="lineno"> 4657</span>        <span class="keywordflow">if</span> (arr_idx &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 4658</span>            <a class="code hl_function" href="#a9f28a6dc20ab155914e7ba6a0a812b56">duk__grow_props_for_array_item</a>(thr, obj, arr_idx);</div>
<div class="line"><span class="lineno"> 4659</span>        }</div>
<div class="line"><span class="lineno"> 4660</span> </div>
<div class="line"><span class="lineno"> 4661</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 4662</span>        tv1 = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;heap, obj, arr_idx);</div>
<div class="line"><span class="lineno"> 4663</span>        tv2 = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4664</span> </div>
<div class="line"><span class="lineno"> 4665</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a>(thr, tv1, tv2);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 4666</span> </div>
<div class="line"><span class="lineno"> 4667</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [ ...val ] -&gt; [ ... ] */</span></div>
<div class="line"><span class="lineno"> 4668</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4669</span>    }</div>
<div class="line"><span class="lineno"> 4670</span> </div>
<div class="line"><span class="lineno"> 4671</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;define property fast path didn&#39;t work, use slow path&quot;</span>));</div>
<div class="line"><span class="lineno"> 4672</span> </div>
<div class="line"><span class="lineno"> 4673</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) arr_idx);</div>
<div class="line"><span class="lineno"> 4674</span>    key = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4675</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4676</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a86e82045aad43776c7280e8e689c5158">duk_insert</a>(ctx, -2);  <span class="comment">/* [ ... val key ] -&gt; [ ... key val ] */</span></div>
<div class="line"><span class="lineno"> 4677</span> </div>
<div class="line"><span class="lineno"> 4678</span>    <a class="code hl_function" href="#aaca98f6ca754be4286c93afa511d437a">duk_hobject_define_property_internal</a>(thr, obj, key, flags);</div>
<div class="line"><span class="lineno"> 4679</span> </div>
<div class="line"><span class="lineno"> 4680</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [ ... key ] -&gt; [ ... ] */</span></div>
<div class="line"><span class="lineno"> 4681</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a08a5b25284eaa8cfe960915609061b59"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hstring * duk_to_hstring(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duktape-1.5.2/src-noline/duktape.c:17177</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00969">duk__grow_props_for_array_item()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04518">duk_hobject_define_property_internal()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15740">duk_insert()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04877">DUK_PROPDESC_FLAG_NO_OVERWRITE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04887">DUK_PROPDESC_FLAGS_WEC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duk_to_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04029">DUK_TVAL_SET_TVAL_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a896862dcb9150ed9a5e0347a13a0aab3" name="a896862dcb9150ed9a5e0347a13a0aab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a896862dcb9150ed9a5e0347a13a0aab3">&#9670;&#160;</a></span>duk_hobject_delprop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_delprop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>throw_flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">4310</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4310</span>                                                                                                                         {</div>
<div class="line"><span class="lineno"> 4311</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 4312</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 4313</span><span class="preprocessor">#if defined(DUK_USE_ES6_PROXY)</span></div>
<div class="line"><span class="lineno"> 4314</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 4315</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4316</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> entry_top;</div>
<div class="line"><span class="lineno"> 4317</span>    duk_uint32_t arr_idx = <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>;</div>
<div class="line"><span class="lineno"> 4318</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 4319</span> </div>
<div class="line"><span class="lineno"> 4320</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delprop: thr=%p, obj=%p, key=%p (obj -&gt; %!T, key -&gt; %!T)&quot;</span>,</div>
<div class="line"><span class="lineno"> 4321</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) tv_obj, (<span class="keywordtype">void</span> *) tv_key,</div>
<div class="line"><span class="lineno"> 4322</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_obj, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key));</div>
<div class="line"><span class="lineno"> 4323</span> </div>
<div class="line"><span class="lineno"> 4324</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4325</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4326</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4327</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4328</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4329</span> </div>
<div class="line"><span class="lineno"> 4330</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 4331</span> </div>
<div class="line"><span class="lineno"> 4332</span>    <span class="comment">/* Storing the entry top is cheaper here to ensure stack is correct at exit,</span></div>
<div class="line"><span class="lineno"> 4333</span><span class="comment">     * as there are several paths out.</span></div>
<div class="line"><span class="lineno"> 4334</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 4335</span>    entry_top = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx);</div>
<div class="line"><span class="lineno"> 4336</span> </div>
<div class="line"><span class="lineno"> 4337</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3a3a2905176249b3cb6415b5ae814b31">DUK_TVAL_IS_UNDEFINED</a>(tv_obj) ||</div>
<div class="line"><span class="lineno"> 4338</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a331b012865abdb3ee153bfebef02dbca">DUK_TVAL_IS_NULL</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 4339</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is undefined or null -&gt; reject&quot;</span>));</div>
<div class="line"><span class="lineno"> 4340</span>        <span class="keywordflow">goto</span> fail_invalid_base_uncond;</div>
<div class="line"><span class="lineno"> 4341</span>    }</div>
<div class="line"><span class="lineno"> 4342</span> </div>
<div class="line"><span class="lineno"> 4343</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_obj);</div>
<div class="line"><span class="lineno"> 4344</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_key);</div>
<div class="line"><span class="lineno"> 4345</span> </div>
<div class="line"><span class="lineno"> 4346</span>    tv_obj = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a>(ctx, -2);</div>
<div class="line"><span class="lineno"> 4347</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 4348</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *obj = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 4349</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4350</span> </div>
<div class="line"><span class="lineno"> 4351</span><span class="preprocessor">#if defined(DUK_USE_ES6_PROXY)</span></div>
<div class="line"><span class="lineno"> 4352</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>(obj))) {</div>
<div class="line"><span class="lineno"> 4353</span>            <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_target;</div>
<div class="line"><span class="lineno"> 4354</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> tmp_bool;</div>
<div class="line"><span class="lineno"> 4355</span> </div>
<div class="line"><span class="lineno"> 4356</span>            <span class="comment">/* Note: proxy handling must happen before key is string coerced. */</span></div>
<div class="line"><span class="lineno"> 4357</span> </div>
<div class="line"><span class="lineno"> 4358</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="#ad75bcd78c56fd6f6e62cb28ecc423325">duk__proxy_check_prop</a>(thr, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a767cda5c658a4ffc7d2bff28ca44a756">DUK_STRIDX_DELETE_PROPERTY</a>, tv_key, &amp;h_target)) {</div>
<div class="line"><span class="lineno"> 4359</span>                <span class="comment">/* -&gt; [ ... obj key trap handler ] */</span></div>
<div class="line"><span class="lineno"> 4360</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; proxy object &#39;deleteProperty&#39; for key %!T&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key));</div>
<div class="line"><span class="lineno"> 4361</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, h_target);  <span class="comment">/* target */</span></div>
<div class="line"><span class="lineno"> 4362</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, -4);  <span class="comment">/* P */</span></div>
<div class="line"><span class="lineno"> 4363</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 2 <span class="comment">/*nargs*/</span>);</div>
<div class="line"><span class="lineno"> 4364</span>                tmp_bool = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4365</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4366</span>                <span class="keywordflow">if</span> (!tmp_bool) {</div>
<div class="line"><span class="lineno"> 4367</span>                    <span class="keywordflow">goto</span> fail_proxy_rejected;  <span class="comment">/* retval indicates delete failed */</span></div>
<div class="line"><span class="lineno"> 4368</span>                }</div>
<div class="line"><span class="lineno"> 4369</span> </div>
<div class="line"><span class="lineno"> 4370</span>                <span class="comment">/* Target object must be checked for a conflicting</span></div>
<div class="line"><span class="lineno"> 4371</span><span class="comment">                 * non-configurable property.</span></div>
<div class="line"><span class="lineno"> 4372</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno"> 4373</span>                tv_key = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4374</span>                arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 4375</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4376</span> </div>
<div class="line"><span class="lineno"> 4377</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, h_target, key, arr_idx, &amp;desc, 0 <span class="comment">/*flags*/</span>)) {  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 4378</span>                    <span class="keywordtype">int</span> desc_reject;</div>
<div class="line"><span class="lineno"> 4379</span> </div>
<div class="line"><span class="lineno"> 4380</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;proxy &#39;deleteProperty&#39;: target has matching property %!O, check for &quot;</span></div>
<div class="line"><span class="lineno"> 4381</span>                                         <span class="stringliteral">&quot;conflicting property; desc.flags=0x%08lx, &quot;</span></div>
<div class="line"><span class="lineno"> 4382</span>                                         <span class="stringliteral">&quot;desc.get=%p, desc.set=%p&quot;</span>,</div>
<div class="line"><span class="lineno"> 4383</span>                                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a>,</div>
<div class="line"><span class="lineno"> 4384</span>                                         (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>, (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>));</div>
<div class="line"><span class="lineno"> 4385</span> </div>
<div class="line"><span class="lineno"> 4386</span>                    desc_reject = !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 4387</span>                    <span class="keywordflow">if</span> (desc_reject) {</div>
<div class="line"><span class="lineno"> 4388</span>                        <span class="comment">/* unconditional */</span></div>
<div class="line"><span class="lineno"> 4389</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#affb31bd71c06bc766cbc175ad9cb13ae">DUK_STR_PROXY_REJECTED</a>);</div>
<div class="line"><span class="lineno"> 4390</span>                    }</div>
<div class="line"><span class="lineno"> 4391</span>                }</div>
<div class="line"><span class="lineno"> 4392</span>                rc = 1;  <span class="comment">/* success */</span></div>
<div class="line"><span class="lineno"> 4393</span>                <span class="keywordflow">goto</span> done_rc;</div>
<div class="line"><span class="lineno"> 4394</span>            }</div>
<div class="line"><span class="lineno"> 4395</span> </div>
<div class="line"><span class="lineno"> 4396</span>            obj = h_target;  <span class="comment">/* resume delete to target */</span></div>
<div class="line"><span class="lineno"> 4397</span>        }</div>
<div class="line"><span class="lineno"> 4398</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_ES6_PROXY */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 4399</span> </div>
<div class="line"><span class="lineno"> 4400</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4401</span>        key = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4402</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4403</span> </div>
<div class="line"><span class="lineno"> 4404</span>        rc = <a class="code hl_function" href="#a6cbfe4b6b55490815c2b8a1b5e57612f">duk_hobject_delprop_raw</a>(thr, obj, key, throw_flag ? <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a24fbf9732244195491871522945b742c">DUK_DELPROP_FLAG_THROW</a> : 0);</div>
<div class="line"><span class="lineno"> 4405</span>        <span class="keywordflow">goto</span> done_rc;</div>
<div class="line"><span class="lineno"> 4406</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a770ba3e37db78ca2d94032c47bddb9a6">DUK_TVAL_IS_STRING</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 4407</span>        <span class="comment">/* XXX: unnecessary string coercion for array indices,</span></div>
<div class="line"><span class="lineno"> 4408</span><span class="comment">         * intentional to keep small.</span></div>
<div class="line"><span class="lineno"> 4409</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4410</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a668fe43ca9630a9e9c8b9a511798652d">DUK_TVAL_GET_STRING</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 4411</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4412</span> </div>
<div class="line"><span class="lineno"> 4413</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4414</span>        key = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4415</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4416</span> </div>
<div class="line"><span class="lineno"> 4417</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 4418</span>            <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 4419</span>        }</div>
<div class="line"><span class="lineno"> 4420</span> </div>
<div class="line"><span class="lineno"> 4421</span>        arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03576a42a285f85ab3a7af6ec9f069fc">DUK_HSTRING_GET_ARRIDX_FAST</a>(key);</div>
<div class="line"><span class="lineno"> 4422</span> </div>
<div class="line"><span class="lineno"> 4423</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 4424</span>            arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h)) {</div>
<div class="line"><span class="lineno"> 4425</span>            <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 4426</span>        }</div>
<div class="line"><span class="lineno"> 4427</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a35257e9c4c8cacc0bf42affe264e0da2">DUK_TVAL_IS_BUFFER</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 4428</span>        <span class="comment">/* XXX: unnecessary string coercion for array indices,</span></div>
<div class="line"><span class="lineno"> 4429</span><span class="comment">         * intentional to keep small; some overlap with string</span></div>
<div class="line"><span class="lineno"> 4430</span><span class="comment">         * handling.</span></div>
<div class="line"><span class="lineno"> 4431</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4432</span>        <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a422dc96860bacd6ed951234bf2eb5ca1">DUK_TVAL_GET_BUFFER</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 4433</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4434</span> </div>
<div class="line"><span class="lineno"> 4435</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4436</span>        key = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4437</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4438</span> </div>
<div class="line"><span class="lineno"> 4439</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 4440</span>            <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 4441</span>        }</div>
<div class="line"><span class="lineno"> 4442</span> </div>
<div class="line"><span class="lineno"> 4443</span>        arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03576a42a285f85ab3a7af6ec9f069fc">DUK_HSTRING_GET_ARRIDX_FAST</a>(key);</div>
<div class="line"><span class="lineno"> 4444</span> </div>
<div class="line"><span class="lineno"> 4445</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 4446</span>            arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a>(h)) {</div>
<div class="line"><span class="lineno"> 4447</span>            <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 4448</span>        }</div>
<div class="line"><span class="lineno"> 4449</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a803cbfe1e33fe5c591d7bec4fd3a6a93">DUK_TVAL_IS_LIGHTFUNC</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 4450</span>        <span class="comment">/* Lightfunc virtual properties are non-configurable, so</span></div>
<div class="line"><span class="lineno"> 4451</span><span class="comment">         * reject if match any of them.</span></div>
<div class="line"><span class="lineno"> 4452</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4453</span> </div>
<div class="line"><span class="lineno"> 4454</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4455</span>        key = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad68f683c683ab08b6eec9d84bdc36e56">duk_get_hstring</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4456</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4457</span> </div>
<div class="line"><span class="lineno"> 4458</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#af6fda73a2a8716acfbd629877d4ba838">duk__key_is_lightfunc_ownprop</a>(thr, key)) {</div>
<div class="line"><span class="lineno"> 4459</span>            <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 4460</span>        }</div>
<div class="line"><span class="lineno"> 4461</span>    }</div>
<div class="line"><span class="lineno"> 4462</span> </div>
<div class="line"><span class="lineno"> 4463</span>    <span class="comment">/* non-object base, no offending virtual property */</span></div>
<div class="line"><span class="lineno"> 4464</span>    rc = 1;</div>
<div class="line"><span class="lineno"> 4465</span>    <span class="keywordflow">goto</span> done_rc;</div>
<div class="line"><span class="lineno"> 4466</span> </div>
<div class="line"><span class="lineno"> 4467</span> done_rc:</div>
<div class="line"><span class="lineno"> 4468</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a>(ctx, entry_top);</div>
<div class="line"><span class="lineno"> 4469</span>    <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 4470</span> </div>
<div class="line"><span class="lineno"> 4471</span> fail_invalid_base_uncond:</div>
<div class="line"><span class="lineno"> 4472</span>    <span class="comment">/* Note: unconditional throw */</span></div>
<div class="line"><span class="lineno"> 4473</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx) == entry_top);</div>
<div class="line"><span class="lineno"> 4474</span><span class="preprocessor">#if defined(DUK_USE_PARANOID_ERRORS)</span></div>
<div class="line"><span class="lineno"> 4475</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ce64309ea8cbabb810926737da126b2">DUK_STR_INVALID_BASE</a>);</div>
<div class="line"><span class="lineno"> 4476</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4477</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9839be13bfece6a773056f3ca73ba830">DUK_ERROR_FMT2</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a02cde94a668a996bb017286a38c7e658">DUK_ERR_TYPE_ERROR</a>, <span class="stringliteral">&quot;cannot delete property %s of %s&quot;</span>,</div>
<div class="line"><span class="lineno"> 4478</span>                   <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_key), <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_obj));</div>
<div class="line"><span class="lineno"> 4479</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4480</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4481</span> </div>
<div class="line"><span class="lineno"> 4482</span><span class="preprocessor">#if defined(DUK_USE_ES6_PROXY)</span></div>
<div class="line"><span class="lineno"> 4483</span> fail_proxy_rejected:</div>
<div class="line"><span class="lineno"> 4484</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4485</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#affb31bd71c06bc766cbc175ad9cb13ae">DUK_STR_PROXY_REJECTED</a>);</div>
<div class="line"><span class="lineno"> 4486</span>    }</div>
<div class="line"><span class="lineno"> 4487</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a>(ctx, entry_top);</div>
<div class="line"><span class="lineno"> 4488</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4489</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4490</span> </div>
<div class="line"><span class="lineno"> 4491</span> fail_not_configurable:</div>
<div class="line"><span class="lineno"> 4492</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4493</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9fd5ef7ea8638f09a14d13d575bc0580">DUK_STR_NOT_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 4494</span>    }</div>
<div class="line"><span class="lineno"> 4495</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a>(ctx, entry_top);</div>
<div class="line"><span class="lineno"> 4496</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4497</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a24fbf9732244195491871522945b742c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a24fbf9732244195491871522945b742c">DUK_DELPROP_FLAG_THROW</a></div><div class="ttdeci">#define DUK_DELPROP_FLAG_THROW</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05471">duktape-1.5.2/src-noline/duktape.c:5471</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2a196d761c3a7789fcc2ac3cf61ad601"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a></div><div class="ttdeci">#define DUK_TVAL_GET_OBJECT(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">duktape-1.5.2/src-noline/duktape.c:787</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a331b012865abdb3ee153bfebef02dbca"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a331b012865abdb3ee153bfebef02dbca">DUK_TVAL_IS_NULL</a></div><div class="ttdeci">#define DUK_TVAL_IS_NULL(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00795">duktape-1.5.2/src-noline/duktape.c:795</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a35257e9c4c8cacc0bf42affe264e0da2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a35257e9c4c8cacc0bf42affe264e0da2">DUK_TVAL_IS_BUFFER</a></div><div class="ttdeci">#define DUK_TVAL_IS_BUFFER(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00812">duktape-1.5.2/src-noline/duktape.c:812</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3a3a2905176249b3cb6415b5ae814b31"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3a3a2905176249b3cb6415b5ae814b31">DUK_TVAL_IS_UNDEFINED</a></div><div class="ttdeci">#define DUK_TVAL_IS_UNDEFINED(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00793">duktape-1.5.2/src-noline/duktape.c:793</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3e6da5a54e90086602a9d6f44997d640"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a></div><div class="ttdeci">#define DUK_TVAL_IS_OBJECT(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">duktape-1.5.2/src-noline/duktape.c:811</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a422dc96860bacd6ed951234bf2eb5ca1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a422dc96860bacd6ed951234bf2eb5ca1">DUK_TVAL_GET_BUFFER</a></div><div class="ttdeci">#define DUK_TVAL_GET_BUFFER(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00788">duktape-1.5.2/src-noline/duktape.c:788</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5211f0cfa2bdf8d8b151157c04a9cdd9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_to_boolean(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duktape-1.5.2/src-noline/duktape.c:16744</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a767cda5c658a4ffc7d2bff28ca44a756"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a767cda5c658a4ffc7d2bff28ca44a756">DUK_STRIDX_DELETE_PROPERTY</a></div><div class="ttdeci">#define DUK_STRIDX_DELETE_PROPERTY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01095">duktape-1.5.2/src-noline/duktape.c:1095</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a803cbfe1e33fe5c591d7bec4fd3a6a93"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a803cbfe1e33fe5c591d7bec4fd3a6a93">DUK_TVAL_IS_LIGHTFUNC</a></div><div class="ttdeci">#define DUK_TVAL_IS_LIGHTFUNC(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00809">duktape-1.5.2/src-noline/duktape.c:809</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a808471cbdda897175b2e4d50528c430d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a></div><div class="ttdeci">DUK_EXTERNAL void duk_set_top(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15216">duktape-1.5.2/src-noline/duktape.c:15216</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8c8653fcd951809042c23c42e534c421"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_get_top(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duktape-1.5.2/src-noline/duktape.c:15204</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9839be13bfece6a773056f3ca73ba830"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9839be13bfece6a773056f3ca73ba830">DUK_ERROR_FMT2</a></div><div class="ttdeci">#define DUK_ERROR_FMT2(thr, err, fmt, arg1, arg2)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07639">duktape-1.5.2/src-noline/duktape.c:7639</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9ce64309ea8cbabb810926737da126b2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ce64309ea8cbabb810926737da126b2">DUK_STR_INVALID_BASE</a></div><div class="ttdeci">#define DUK_STR_INVALID_BASE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02370">duktape-1.5.2/src-noline/duktape.c:2370</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa1895eebda0d84c47fe222dc73018319"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a></div><div class="ttdeci">DUK_EXTERNAL void duk_call_method(duk_context *ctx, duk_idx_t nargs)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12389">duktape-1.5.2/src-noline/duktape.c:12389</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaf676ff696f5e2be45b2852a49c9f37d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a></div><div class="ttdeci">#define DUK_GET_TVAL_NEGIDX(ctx, idx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04386">duktape-1.5.2/src-noline/duktape.c:4386</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae4a6a93c79e49f159b46118f7cc86124"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a></div><div class="ttdeci">DUK_INTERNAL_DECL const char * duk_push_string_tval_readable(duk_context *ctx, duk_tval *tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19476">duktape-1.5.2/src-noline/duktape.c:19476</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af69926b8cd52fd8f4379883fb74b8d40"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a></div><div class="ttdeci">#define DUK_HBUFFER_GET_SIZE(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">duktape-1.5.2/src-noline/duktape.c:6393</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_affb31bd71c06bc766cbc175ad9cb13ae"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#affb31bd71c06bc766cbc175ad9cb13ae">DUK_STR_PROXY_REJECTED</a></div><div class="ttdeci">#define DUK_STR_PROXY_REJECTED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02372">duktape-1.5.2/src-noline/duktape.c:2372</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a02cde94a668a996bb017286a38c7e658"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a02cde94a668a996bb017286a38c7e658">DUK_ERR_TYPE_ERROR</a></div><div class="ttdeci">#define DUK_ERR_TYPE_ERROR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00345">duktape-1.5.2/src-noline/duktape.h:345</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a73da7a1cccb15fa2b83f4df268badf2a"><div class="ttname"><a href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a></div><div class="ttdeci">DUK_LOCAL duk_uint32_t duk__push_tval_to_hstring_arr_idx(duk_context *ctx, duk_tval *tv, duk_hstring **out_h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00143">duktape-1.8.0/src-separate/duk_hobject_props.c:143</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_ad75bcd78c56fd6f6e62cb28ecc423325"><div class="ttname"><a href="#ad75bcd78c56fd6f6e62cb28ecc423325">duk__proxy_check_prop</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__proxy_check_prop(duk_hthread *thr, duk_hobject *obj, duk_small_uint_t stridx_trap, duk_tval *tv_key, duk_hobject **out_target)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">duktape-1.8.0/src-separate/duk_hobject_props.c:393</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_af6fda73a2a8716acfbd629877d4ba838"><div class="ttname"><a href="#af6fda73a2a8716acfbd629877d4ba838">duk__key_is_lightfunc_ownprop</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__key_is_lightfunc_ownprop(duk_hthread *thr, duk_hstring *key)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00162">duktape-1.8.0/src-separate/duk_hobject_props.c:162</a></div></div>
<div class="ttc" id="astructduk__hbuffer_html"><div class="ttname"><a href="structduk__hbuffer.html">duk_hbuffer</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06489">duktape-1.5.2/src-noline/duktape.c:6489</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00162">duk__key_is_lightfunc_ownprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">duk__proxy_check_prop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00143">duk__push_tval_to_hstring_arr_idx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12389">duk_call_method()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05471">DUK_DELPROP_FLAG_THROW</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00345">DUK_ERR_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07639">DUK_ERROR_FMT2</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16288">duk_get_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duk_get_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04386">DUK_GET_TVAL_NEGIDX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">DUK_HBUFFER_GET_SIZE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">duk_hobject_delprop_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04535">DUK_HSTRING_GET_ARRIDX_FAST</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">DUK_HTHREAD_STRING_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19476">duk_push_string_tval_readable()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duk_push_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15216">duk_set_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02370">DUK_STR_INVALID_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02284">DUK_STR_NOT_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02372">DUK_STR_PROXY_REJECTED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01095">DUK_STRIDX_DELETE_PROPERTY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duk_to_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00788">DUK_TVAL_GET_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00786">DUK_TVAL_GET_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00812">DUK_TVAL_IS_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00809">DUK_TVAL_IS_LIGHTFUNC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00795">DUK_TVAL_IS_NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00810">DUK_TVAL_IS_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00793">DUK_TVAL_IS_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duk_propdesc::get</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duk_propdesc::set</a>.</p>

</div>
</div>
<a id="a6cbfe4b6b55490815c2b8a1b5e57612f" name="a6cbfe4b6b55490815c2b8a1b5e57612f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cbfe4b6b55490815c2b8a1b5e57612f">&#9670;&#160;</a></span>duk_hobject_delprop_raw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_delprop_raw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04142">4142</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4142</span>                                                                                                                              {</div>
<div class="line"><span class="lineno"> 4143</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 4144</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 4145</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno"> 4146</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> throw_flag;</div>
<div class="line"><span class="lineno"> 4147</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> force_flag;</div>
<div class="line"><span class="lineno"> 4148</span> </div>
<div class="line"><span class="lineno"> 4149</span>    throw_flag = (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a24fbf9732244195491871522945b742c">DUK_DELPROP_FLAG_THROW</a>);</div>
<div class="line"><span class="lineno"> 4150</span>    force_flag = (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a989610c27efa15a41baa94adf43cd30c">DUK_DELPROP_FLAG_FORCE</a>);</div>
<div class="line"><span class="lineno"> 4151</span> </div>
<div class="line"><span class="lineno"> 4152</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delprop_raw: thr=%p, obj=%p, key=%p, throw=%ld, force=%ld (obj -&gt; %!O, key -&gt; %!O)&quot;</span>,</div>
<div class="line"><span class="lineno"> 4153</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) obj, (<span class="keywordtype">void</span> *) key, (<span class="keywordtype">long</span>) throw_flag, (<span class="keywordtype">long</span>) force_flag,</div>
<div class="line"><span class="lineno"> 4154</span>                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key));</div>
<div class="line"><span class="lineno"> 4155</span> </div>
<div class="line"><span class="lineno"> 4156</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4157</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4158</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4159</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4160</span> </div>
<div class="line"><span class="lineno"> 4161</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 4162</span> </div>
<div class="line"><span class="lineno"> 4163</span>    arr_idx = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03576a42a285f85ab3a7af6ec9f069fc">DUK_HSTRING_GET_ARRIDX_FAST</a>(key);</div>
<div class="line"><span class="lineno"> 4164</span> </div>
<div class="line"><span class="lineno"> 4165</span>    <span class="comment">/* 0 = don&#39;t push current value */</span></div>
<div class="line"><span class="lineno"> 4166</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, arr_idx, &amp;desc, 0 <span class="comment">/*flags*/</span>)) {  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 4167</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property not found, succeed always&quot;</span>));</div>
<div class="line"><span class="lineno"> 4168</span>        <span class="keywordflow">goto</span> success;</div>
<div class="line"><span class="lineno"> 4169</span>    }</div>
<div class="line"><span class="lineno"> 4170</span> </div>
<div class="line"><span class="lineno"> 4171</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 4172</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj)) {</div>
<div class="line"><span class="lineno"> 4173</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;attempt to delprop on read-only target object&quot;</span>));</div>
<div class="line"><span class="lineno"> 4174</span>        <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 4175</span>    }</div>
<div class="line"><span class="lineno"> 4176</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4177</span> </div>
<div class="line"><span class="lineno"> 4178</span>    <span class="keywordflow">if</span> ((desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) == 0 &amp;&amp; !force_flag) {</div>
<div class="line"><span class="lineno"> 4179</span>        <span class="keywordflow">goto</span> fail_not_configurable;</div>
<div class="line"><span class="lineno"> 4180</span>    }</div>
<div class="line"><span class="lineno"> 4181</span>    <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &lt; 0 &amp;&amp; desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &lt; 0) {</div>
<div class="line"><span class="lineno"> 4182</span>        <span class="comment">/* Currently there are no deletable virtual properties, but</span></div>
<div class="line"><span class="lineno"> 4183</span><span class="comment">         * with force_flag we might attempt to delete one.</span></div>
<div class="line"><span class="lineno"> 4184</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4185</span>        <span class="keywordflow">goto</span> fail_virtual;</div>
<div class="line"><span class="lineno"> 4186</span>    }</div>
<div class="line"><span class="lineno"> 4187</span> </div>
<div class="line"><span class="lineno"> 4188</span>    <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4189</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &lt; 0);</div>
<div class="line"><span class="lineno"> 4190</span> </div>
<div class="line"><span class="lineno"> 4191</span>        tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a>);</div>
<div class="line"><span class="lineno"> 4192</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a383c4206d2d6bbe5f558dcf38bff15f5">DUK_TVAL_SET_UNUSED_UPDREF</a>(thr, tv);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 4193</span>        <span class="keywordflow">goto</span> success;</div>
<div class="line"><span class="lineno"> 4194</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4195</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_get = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 4196</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_set = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 4197</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_tmp;</div>
<div class="line"><span class="lineno"> 4198</span> </div>
<div class="line"><span class="lineno"> 4199</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &lt; 0);</div>
<div class="line"><span class="lineno"> 4200</span> </div>
<div class="line"><span class="lineno"> 4201</span>        <span class="comment">/* Set property slot to an empty state.  Careful not to invoke</span></div>
<div class="line"><span class="lineno"> 4202</span><span class="comment">         * any side effects while using desc.e_idx so that it doesn&#39;t</span></div>
<div class="line"><span class="lineno"> 4203</span><span class="comment">         * get invalidated by a finalizer mutating our object.</span></div>
<div class="line"><span class="lineno"> 4204</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4205</span> </div>
<div class="line"><span class="lineno"> 4206</span>        <span class="comment">/* remove hash entry (no decref) */</span></div>
<div class="line"><span class="lineno"> 4207</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_HASH_PART)</span></div>
<div class="line"><span class="lineno"> 4208</span>        <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#a60929d6028a4cfd96fd03bab3f3bf9ed">h_idx</a> &gt;= 0) {</div>
<div class="line"><span class="lineno"> 4209</span>            duk_uint32_t *h_base = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae0e450f7792d72dfa458de50d9dbbde2">DUK_HOBJECT_H_GET_BASE</a>(thr-&gt;heap, obj);</div>
<div class="line"><span class="lineno"> 4210</span> </div>
<div class="line"><span class="lineno"> 4211</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;removing hash entry at h_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#a60929d6028a4cfd96fd03bab3f3bf9ed">h_idx</a>));</div>
<div class="line"><span class="lineno"> 4212</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj) &gt; 0);</div>
<div class="line"><span class="lineno"> 4213</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((duk_uint32_t) desc.<a class="code hl_variable" href="structduk__propdesc.html#a60929d6028a4cfd96fd03bab3f3bf9ed">h_idx</a> &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 4214</span>            h_base[desc.<a class="code hl_variable" href="structduk__propdesc.html#a60929d6028a4cfd96fd03bab3f3bf9ed">h_idx</a>] = <a class="code hl_define" href="#aa731720f3ca3ca6d52941e2c782aa2b0">DUK__HASH_DELETED</a>;</div>
<div class="line"><span class="lineno"> 4215</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4216</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj) == 0);</div>
<div class="line"><span class="lineno"> 4217</span>        }</div>
<div class="line"><span class="lineno"> 4218</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4219</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj) == 0);</div>
<div class="line"><span class="lineno"> 4220</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4221</span> </div>
<div class="line"><span class="lineno"> 4222</span>        <span class="comment">/* remove value */</span></div>
<div class="line"><span class="lineno"> 4223</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;before removing value, e_idx %ld, key %p, key at slot %p&quot;</span>,</div>
<div class="line"><span class="lineno"> 4224</span>                             (<span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, (<span class="keywordtype">void</span> *) key, (<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>)));</div>
<div class="line"><span class="lineno"> 4225</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;removing value at e_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 4226</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6fc676d518bd1be6649d3625fdfe4b83">DUK_MEMSET</a>((<span class="keywordtype">void</span> *) &amp;tv_tmp, 0, <span class="keyword">sizeof</span>(tv_tmp));</div>
<div class="line"><span class="lineno"> 4227</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a>(&amp;tv_tmp);</div>
<div class="line"><span class="lineno"> 4228</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>)) {</div>
<div class="line"><span class="lineno"> 4229</span>            h_get = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad51f0d74d82c3d23e28d43b5c6943a0f">DUK_HOBJECT_E_GET_VALUE_GETTER</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 4230</span>            h_set = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4d8c928185f0fc7ff5ba5cf58ef35b99">DUK_HOBJECT_E_GET_VALUE_SETTER</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 4231</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac62485d576bc9c48fb7c012e6848126d">DUK_HOBJECT_E_SET_VALUE_GETTER</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4232</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c75b3f86ccda136313c7fb73ace5b53">DUK_HOBJECT_E_SET_VALUE_SETTER</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4233</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4234</span>            tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 4235</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_tmp, tv);</div>
<div class="line"><span class="lineno"> 4236</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a>(tv);</div>
<div class="line"><span class="lineno"> 4237</span>        }</div>
<div class="line"><span class="lineno"> 4238</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 4239</span>        <span class="comment">/* Not strictly necessary because if key == NULL, flag MUST be ignored. */</span></div>
<div class="line"><span class="lineno"> 4240</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, 0);</div>
<div class="line"><span class="lineno"> 4241</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4242</span> </div>
<div class="line"><span class="lineno"> 4243</span>        <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4244</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;before removing key, e_idx %ld, key %p, key at slot %p&quot;</span>,</div>
<div class="line"><span class="lineno"> 4245</span>                             (<span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, (<span class="keywordtype">void</span> *) key, (<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>)));</div>
<div class="line"><span class="lineno"> 4246</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;removing key at e_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 4247</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>));</div>
<div class="line"><span class="lineno"> 4248</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5834598368cfb5ec8a082b93e996988f">DUK_HOBJECT_E_SET_KEY</a>(thr-&gt;heap, obj, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4249</span> </div>
<div class="line"><span class="lineno"> 4250</span>        <span class="comment">/* Do decrefs only with safe pointers to avoid side effects</span></div>
<div class="line"><span class="lineno"> 4251</span><span class="comment">         * disturbing e_idx.</span></div>
<div class="line"><span class="lineno"> 4252</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4253</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a02d61f73f3161cccb0ab7ec414bce92d">DUK_TVAL_DECREF</a>(thr, &amp;tv_tmp);</div>
<div class="line"><span class="lineno"> 4254</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a086fdd75b79afe3307bf17f47e4f0e41">DUK_HOBJECT_DECREF_ALLOWNULL</a>(thr, h_get);</div>
<div class="line"><span class="lineno"> 4255</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a086fdd75b79afe3307bf17f47e4f0e41">DUK_HOBJECT_DECREF_ALLOWNULL</a>(thr, h_set);</div>
<div class="line"><span class="lineno"> 4256</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6e23c3f2eb0742d6b46085978c7a02ba">DUK_HSTRING_DECREF</a>(thr, key);</div>
<div class="line"><span class="lineno"> 4257</span>        <span class="keywordflow">goto</span> success;</div>
<div class="line"><span class="lineno"> 4258</span>    }</div>
<div class="line"><span class="lineno"> 4259</span> </div>
<div class="line"><span class="lineno"> 4260</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno"> 4261</span> </div>
<div class="line"><span class="lineno"> 4262</span> success:</div>
<div class="line"><span class="lineno"> 4263</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 4264</span><span class="comment">     *  Argument exotic [[Delete]] behavior (E5 Section 10.6) is</span></div>
<div class="line"><span class="lineno"> 4265</span><span class="comment">     *  a post-check, keeping arguments internal &#39;map&#39; in sync with</span></div>
<div class="line"><span class="lineno"> 4266</span><span class="comment">     *  any successful deletes (note that property does not need to</span></div>
<div class="line"><span class="lineno"> 4267</span><span class="comment">     *  exist for delete to &#39;succeed&#39;).</span></div>
<div class="line"><span class="lineno"> 4268</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 4269</span><span class="comment">     *  Delete key from &#39;map&#39;.  Since &#39;map&#39; only contains array index</span></div>
<div class="line"><span class="lineno"> 4270</span><span class="comment">     *  keys, we can use arr_idx for a fast skip.</span></div>
<div class="line"><span class="lineno"> 4271</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 4272</span> </div>
<div class="line"><span class="lineno"> 4273</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delete successful, check for arguments exotic behavior&quot;</span>));</div>
<div class="line"><span class="lineno"> 4274</span> </div>
<div class="line"><span class="lineno"> 4275</span>    <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(obj)) {</div>
<div class="line"><span class="lineno"> 4276</span>        <span class="comment">/* Note: only numbered indices are relevant, so arr_idx fast reject</span></div>
<div class="line"><span class="lineno"> 4277</span><span class="comment">         * is good (this is valid unless there are more than 4**32-1 arguments).</span></div>
<div class="line"><span class="lineno"> 4278</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4279</span> </div>
<div class="line"><span class="lineno"> 4280</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delete successful, arguments exotic behavior needed&quot;</span>));</div>
<div class="line"><span class="lineno"> 4281</span> </div>
<div class="line"><span class="lineno"> 4282</span>        <span class="comment">/* Note: we can reuse &#39;desc&#39; here */</span></div>
<div class="line"><span class="lineno"> 4283</span>        (void) <a class="code hl_function" href="#afe72e0663606a8884a99bbe50ed2ffbe">duk__check_arguments_map_for_delete</a>(thr, obj, key, &amp;desc);</div>
<div class="line"><span class="lineno"> 4284</span>    }</div>
<div class="line"><span class="lineno"> 4285</span> </div>
<div class="line"><span class="lineno"> 4286</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delete successful&quot;</span>));</div>
<div class="line"><span class="lineno"> 4287</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 4288</span> </div>
<div class="line"><span class="lineno"> 4289</span> fail_virtual:</div>
<div class="line"><span class="lineno"> 4290</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delete failed: property found, force flag, but virtual&quot;</span>));</div>
<div class="line"><span class="lineno"> 4291</span> </div>
<div class="line"><span class="lineno"> 4292</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4293</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab372606fe3281c8e7bede2f73332d318">DUK_STR_PROPERTY_IS_VIRTUAL</a>);</div>
<div class="line"><span class="lineno"> 4294</span>    }</div>
<div class="line"><span class="lineno"> 4295</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4296</span> </div>
<div class="line"><span class="lineno"> 4297</span> fail_not_configurable:</div>
<div class="line"><span class="lineno"> 4298</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;delete failed: property found, not configurable&quot;</span>));</div>
<div class="line"><span class="lineno"> 4299</span> </div>
<div class="line"><span class="lineno"> 4300</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4301</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9fd5ef7ea8638f09a14d13d575bc0580">DUK_STR_NOT_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 4302</span>    }</div>
<div class="line"><span class="lineno"> 4303</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4304</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_afe72e0663606a8884a99bbe50ed2ffbe"><div class="ttname"><a href="#afe72e0663606a8884a99bbe50ed2ffbe">duk__check_arguments_map_for_delete</a></div><div class="ttdeci">DUK_LOCAL_DECL void duk__check_arguments_map_for_delete(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_propdesc *temp_desc)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01523">duktape-1.8.0/src-separate/duk_hobject_props.c:1523</a></div></div>
<div class="ttc" id="astructduk__propdesc_html_a60929d6028a4cfd96fd03bab3f3bf9ed"><div class="ttname"><a href="structduk__propdesc.html#a60929d6028a4cfd96fd03bab3f3bf9ed">duk_propdesc::h_idx</a></div><div class="ttdeci">duk_int_t h_idx</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05324">duktape-1.5.2/src-noline/duktape.c:5324</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05325">duk_propdesc::a_idx</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01523">duk__check_arguments_map_for_delete()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00060">DUK__HASH_DELETED</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05472">DUK_DELPROP_FLAG_FORCE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05471">DUK_DELPROP_FLAG_THROW</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03843">DUK_HOBJECT_DECREF_ALLOWNULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">DUK_HOBJECT_E_GET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05086">DUK_HOBJECT_E_GET_VALUE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05088">DUK_HOBJECT_E_GET_VALUE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05112">DUK_HOBJECT_E_SET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05097">DUK_HOBJECT_E_SET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05106">DUK_HOBJECT_E_SET_VALUE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05109">DUK_HOBJECT_E_SET_VALUE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05183">DUK_HOBJECT_GET_HSIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05007">DUK_HOBJECT_H_GET_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04819">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03821">DUK_HSTRING_DECREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04535">DUK_HSTRING_GET_ARRIDX_FAST</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01994">DUK_MEMSET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02284">DUK_STR_NOT_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02379">DUK_STR_PROPERTY_IS_VIRTUAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03809">DUK_TVAL_DECREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">DUK_TVAL_SET_TVAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00658">DUK_TVAL_SET_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04005">DUK_TVAL_SET_UNUSED_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05324">duk_propdesc::h_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01523">duk__check_arguments_map_for_delete()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02938">duk__handle_put_array_length_smaller()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05007">duk_hobject_define_property_helper()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04310">duk_hobject_delprop()</a>.</p>

</div>
</div>
<a id="a4ecbb5ab3ebfc0e5b2c944c1bf52278b" name="a4ecbb5ab3ebfc0e5b2c944c1bf52278b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ecbb5ab3ebfc0e5b2c944c1bf52278b">&#9670;&#160;</a></span>duk_hobject_find_existing_array_entry_tval_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> * duk_hobject_find_existing_array_entry_tval_ptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a></td>          <td class="paramname"><span class="paramname"><em>i</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01227">1227</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1227</span>                                                                                                                         {</div>
<div class="line"><span class="lineno"> 1228</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 1229</span> </div>
<div class="line"><span class="lineno"> 1230</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1231</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(heap);</div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(obj)) {</div>
<div class="line"><span class="lineno"> 1234</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1235</span>    }</div>
<div class="line"><span class="lineno"> 1236</span>    <span class="keywordflow">if</span> (i &gt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1238</span>    }</div>
<div class="line"><span class="lineno"> 1239</span>    tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(heap, obj, i);</div>
<div class="line"><span class="lineno"> 1240</span>    <span class="keywordflow">return</span> tv;</div>
<div class="line"><span class="lineno"> 1241</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a617a5abde25d36082238ba6c779da1cc" name="a617a5abde25d36082238ba6c779da1cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a617a5abde25d36082238ba6c779da1cc">&#9670;&#160;</a></span>duk_hobject_find_existing_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_find_existing_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *</td>          <td class="paramname"><span class="paramname"><em>e_idx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *</td>          <td class="paramname"><span class="paramname"><em>h_idx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">1106</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1106</span>                                                                                                                                          {</div>
<div class="line"><span class="lineno"> 1107</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1108</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1109</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_idx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1110</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_idx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1111</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(heap);</div>
<div class="line"><span class="lineno"> 1112</span> </div>
<div class="line"><span class="lineno"> 1113</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aff85916aff22bb1c4a5b83e2008cdc30">DUK_LIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj) == 0))</div>
<div class="line"><span class="lineno"> 1114</span>    {</div>
<div class="line"><span class="lineno"> 1115</span>        <span class="comment">/* Linear scan: more likely because most objects are small.</span></div>
<div class="line"><span class="lineno"> 1116</span><span class="comment">         * This is an important fast path.</span></div>
<div class="line"><span class="lineno"> 1117</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 1118</span><span class="comment">         * XXX: this might be worth inlining for property lookups.</span></div>
<div class="line"><span class="lineno"> 1119</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1120</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno"> 1121</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> n;</div>
<div class="line"><span class="lineno"> 1122</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> **h_keys_base;</div>
<div class="line"><span class="lineno"> 1123</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;duk_hobject_find_existing_entry() using linear scan for lookup&quot;</span>));</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>        h_keys_base = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c77043b6516dd5a4439b72b66cb2ec0">DUK_HOBJECT_E_GET_KEY_BASE</a>(heap, obj);</div>
<div class="line"><span class="lineno"> 1126</span>        n = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj);</div>
<div class="line"><span class="lineno"> 1127</span>        <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {</div>
<div class="line"><span class="lineno"> 1128</span>            <span class="keywordflow">if</span> (h_keys_base[i] == key) {</div>
<div class="line"><span class="lineno"> 1129</span>                *e_idx = i;</div>
<div class="line"><span class="lineno"> 1130</span>                *h_idx = -1;</div>
<div class="line"><span class="lineno"> 1131</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1132</span>            }</div>
<div class="line"><span class="lineno"> 1133</span>        }</div>
<div class="line"><span class="lineno"> 1134</span>    }</div>
<div class="line"><span class="lineno"> 1135</span><span class="preprocessor">#if defined(DUK_USE_HOBJECT_HASH_PART)</span></div>
<div class="line"><span class="lineno"> 1136</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1137</span>    {</div>
<div class="line"><span class="lineno"> 1138</span>        <span class="comment">/* hash lookup */</span></div>
<div class="line"><span class="lineno"> 1139</span>        duk_uint32_t n;</div>
<div class="line"><span class="lineno"> 1140</span>        duk_uint32_t i, step;</div>
<div class="line"><span class="lineno"> 1141</span>        duk_uint32_t *h_base;</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;duk_hobject_find_existing_entry() using hash part for lookup&quot;</span>));</div>
<div class="line"><span class="lineno"> 1144</span> </div>
<div class="line"><span class="lineno"> 1145</span>        h_base = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae0e450f7792d72dfa458de50d9dbbde2">DUK_HOBJECT_H_GET_BASE</a>(heap, obj);</div>
<div class="line"><span class="lineno"> 1146</span>        n = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj);</div>
<div class="line"><span class="lineno"> 1147</span>        i = <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key), n);</div>
<div class="line"><span class="lineno"> 1148</span>        step = <a class="code hl_define" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key));</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 1151</span>            duk_uint32_t t;</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(i &gt;= 0);  <span class="comment">/* unsigned */</span></div>
<div class="line"><span class="lineno"> 1154</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7bb67f1ac90abec3c6ece13a1e2a0ee4">DUK_HOBJECT_GET_HSIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 1155</span>            t = h_base[i];</div>
<div class="line"><span class="lineno"> 1156</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(t == <a class="code hl_define" href="#a9b856316cf6be3a188fe326c601a6604">DUK__HASH_UNUSED</a> || t == <a class="code hl_define" href="#aa731720f3ca3ca6d52941e2c782aa2b0">DUK__HASH_DELETED</a> ||</div>
<div class="line"><span class="lineno"> 1157</span>                       (t &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj)));  <span class="comment">/* t &gt;= 0 always true, unsigned */</span></div>
<div class="line"><span class="lineno"> 1158</span> </div>
<div class="line"><span class="lineno"> 1159</span>            <span class="keywordflow">if</span> (t == <a class="code hl_define" href="#a9b856316cf6be3a188fe326c601a6604">DUK__HASH_UNUSED</a>) {</div>
<div class="line"><span class="lineno"> 1160</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1161</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (t == <a class="code hl_define" href="#aa731720f3ca3ca6d52941e2c782aa2b0">DUK__HASH_DELETED</a>) {</div>
<div class="line"><span class="lineno"> 1162</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;lookup miss (deleted) i=%ld, t=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1163</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) t));</div>
<div class="line"><span class="lineno"> 1164</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1165</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(t &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb942fc1cb079deca59b5322d139462a">DUK_HOBJECT_GET_ESIZE</a>(obj));</div>
<div class="line"><span class="lineno"> 1166</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(heap, obj, t) == key) {</div>
<div class="line"><span class="lineno"> 1167</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;lookup hit i=%ld, t=%ld -&gt; key %p&quot;</span>,</div>
<div class="line"><span class="lineno"> 1168</span>                                         (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) t, (<span class="keywordtype">void</span> *) key));</div>
<div class="line"><span class="lineno"> 1169</span>                    *e_idx = t;</div>
<div class="line"><span class="lineno"> 1170</span>                    *h_idx = i;</div>
<div class="line"><span class="lineno"> 1171</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1172</span>                }</div>
<div class="line"><span class="lineno"> 1173</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;lookup miss i=%ld, t=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1174</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) t));</div>
<div class="line"><span class="lineno"> 1175</span>            }</div>
<div class="line"><span class="lineno"> 1176</span>            i = (i + step) % n;</div>
<div class="line"><span class="lineno"> 1177</span> </div>
<div class="line"><span class="lineno"> 1178</span>            <span class="comment">/* guaranteed to finish, as hash is never full */</span></div>
<div class="line"><span class="lineno"> 1179</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i != (duk_uint32_t) <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(key), n));</div>
<div class="line"><span class="lineno"> 1180</span>        }</div>
<div class="line"><span class="lineno"> 1181</span>    }</div>
<div class="line"><span class="lineno"> 1182</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_HOBJECT_HASH_PART */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>    <span class="comment">/* not found */</span></div>
<div class="line"><span class="lineno"> 1185</span>    *e_idx = -1;</div>
<div class="line"><span class="lineno"> 1186</span>    *h_idx = -1;</div>
<div class="line"><span class="lineno"> 1187</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_aff85916aff22bb1c4a5b83e2008cdc30"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aff85916aff22bb1c4a5b83e2008cdc30">DUK_LIKELY</a></div><div class="ttdeci">#define DUK_LIKELY(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02515">duktape-1.5.2/src-noline/duk_config.h:2515</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00060">DUK__HASH_DELETED</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00055">DUK__HASH_INITIAL</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00056">DUK__HASH_PROBE_STEP</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00059">DUK__HASH_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07764">DUK_ASSERT_DISABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">DUK_HOBJECT_E_GET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04988">DUK_HOBJECT_E_GET_KEY_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05175">DUK_HOBJECT_GET_ESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05183">DUK_HOBJECT_GET_HSIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05007">DUK_HOBJECT_H_GET_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">DUK_HSTRING_GET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02515">DUK_LIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04691">duk_hobject_define_accessor_internal()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01190">duk_hobject_find_existing_entry_tval_ptr()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01207">duk_hobject_find_existing_entry_tval_ptr_and_attrs()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01330">duk_hobject_get_internal_value()</a>.</p>

</div>
</div>
<a id="a673b9ceeb9130ed7ea44e7aae8a56ea7" name="a673b9ceeb9130ed7ea44e7aae8a56ea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673b9ceeb9130ed7ea44e7aae8a56ea7">&#9670;&#160;</a></span>duk_hobject_find_existing_entry_tval_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> * duk_hobject_find_existing_entry_tval_ptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01190">1190</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1190</span>                                                                                                                    {</div>
<div class="line"><span class="lineno"> 1191</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 1192</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> h_idx;</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1195</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1196</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(heap);</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>    <a class="code hl_function" href="#a617a5abde25d36082238ba6c779da1cc">duk_hobject_find_existing_entry</a>(heap, obj, key, &amp;e_idx, &amp;h_idx);</div>
<div class="line"><span class="lineno"> 1199</span>    <span class="keywordflow">if</span> (e_idx &gt;= 0 &amp;&amp; !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(heap, obj, e_idx)) {</div>
<div class="line"><span class="lineno"> 1200</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 1201</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1202</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1203</span>    }</div>
<div class="line"><span class="lineno"> 1204</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00318">duk_hobject_proxy_check()</a>.</p>

</div>
</div>
<a id="a67d624f592bb8ad0082ea754c4e7b328" name="a67d624f592bb8ad0082ea754c4e7b328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d624f592bb8ad0082ea754c4e7b328">&#9670;&#160;</a></span>duk_hobject_find_existing_entry_tval_ptr_and_attrs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> * duk_hobject_find_existing_entry_tval_ptr_and_attrs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_attrs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01207">1207</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1207</span>                                                                                                                                                    {</div>
<div class="line"><span class="lineno"> 1208</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 1209</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> h_idx;</div>
<div class="line"><span class="lineno"> 1210</span> </div>
<div class="line"><span class="lineno"> 1211</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1212</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1213</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_attrs != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1214</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(heap);</div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span>    <a class="code hl_function" href="#a617a5abde25d36082238ba6c779da1cc">duk_hobject_find_existing_entry</a>(heap, obj, key, &amp;e_idx, &amp;h_idx);</div>
<div class="line"><span class="lineno"> 1217</span>    <span class="keywordflow">if</span> (e_idx &gt;= 0 &amp;&amp; !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(heap, obj, e_idx)) {</div>
<div class="line"><span class="lineno"> 1218</span>        *out_attrs = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad2b534c718f0bed901cab77d6ff97cef">DUK_HOBJECT_E_GET_FLAGS</a>(heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 1219</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(heap, obj, e_idx);</div>
<div class="line"><span class="lineno"> 1220</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1221</span>        *out_attrs = 0;</div>
<div class="line"><span class="lineno"> 1222</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1223</span>    }</div>
<div class="line"><span class="lineno"> 1224</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05090">DUK_HOBJECT_E_GET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="afc78a81915be8b03cb3777014329b52f" name="afc78a81915be8b03cb3777014329b52f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc78a81915be8b03cb3777014329b52f">&#9670;&#160;</a></span>duk_hobject_get_internal_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_get_internal_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_out</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01330">1330</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1330</span>                                                                                                           {</div>
<div class="line"><span class="lineno"> 1331</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 1332</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> h_idx;</div>
<div class="line"><span class="lineno"> 1333</span> </div>
<div class="line"><span class="lineno"> 1334</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1335</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1336</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_out != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>    <span class="comment">/* always in entry part, no need to look up parents etc */</span></div>
<div class="line"><span class="lineno"> 1339</span>    <a class="code hl_function" href="#a617a5abde25d36082238ba6c779da1cc">duk_hobject_find_existing_entry</a>(heap, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7efcf1b574e35ea206375ffe890c0c0d">DUK_HEAP_STRING_INT_VALUE</a>(heap), &amp;e_idx, &amp;h_idx);</div>
<div class="line"><span class="lineno"> 1340</span>    <span class="keywordflow">if</span> (e_idx &gt;= 0) {</div>
<div class="line"><span class="lineno"> 1341</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e27313f9ddb6b9232fd926563182610">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>(heap, obj, e_idx));</div>
<div class="line"><span class="lineno"> 1342</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(tv_out, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(heap, obj, e_idx));</div>
<div class="line"><span class="lineno"> 1343</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1344</span>    }</div>
<div class="line"><span class="lineno"> 1345</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adbeffc949a1d3dc7aae2f1cc1aecda88">DUK_TVAL_SET_UNDEFINED</a>(tv_out);</div>
<div class="line"><span class="lineno"> 1346</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1347</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7efcf1b574e35ea206375ffe890c0c0d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7efcf1b574e35ea206375ffe890c0c0d">DUK_HEAP_STRING_INT_VALUE</a></div><div class="ttdeci">#define DUK_HEAP_STRING_INT_VALUE(heap)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01174">duktape-1.5.2/src-noline/duktape.c:1174</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01174">DUK_HEAP_STRING_INT_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05135">DUK_HOBJECT_E_SLOT_IS_ACCESSOR</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01106">duk_hobject_find_existing_entry()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">DUK_TVAL_SET_TVAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00658">DUK_TVAL_SET_UNDEFINED</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01349">duk_hobject_get_internal_value_string()</a>.</p>

</div>
</div>
<a id="a2c76d363b542675feff902618db61f7d" name="a2c76d363b542675feff902618db61f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c76d363b542675feff902618db61f7d">&#9670;&#160;</a></span>duk_hobject_get_internal_value_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk_hobject_get_internal_value_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01349">1349</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1349</span>                                                                                                  {</div>
<div class="line"><span class="lineno"> 1350</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv;</div>
<div class="line"><span class="lineno"> 1351</span> </div>
<div class="line"><span class="lineno"> 1352</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1353</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1354</span> </div>
<div class="line"><span class="lineno"> 1355</span>    <span class="comment">/* This is not strictly necessary, but avoids compiler warnings; e.g.</span></div>
<div class="line"><span class="lineno"> 1356</span><span class="comment">     * gcc won&#39;t reliably detect that no uninitialized data is read below.</span></div>
<div class="line"><span class="lineno"> 1357</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1358</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a>((<span class="keywordtype">void</span> *) &amp;tv, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a>));</div>
<div class="line"><span class="lineno"> 1359</span> </div>
<div class="line"><span class="lineno"> 1360</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#afc78a81915be8b03cb3777014329b52f">duk_hobject_get_internal_value</a>(heap, obj, &amp;tv)) {</div>
<div class="line"><span class="lineno"> 1361</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h;</div>
<div class="line"><span class="lineno"> 1362</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a770ba3e37db78ca2d94032c47bddb9a6">DUK_TVAL_IS_STRING</a>(&amp;tv));</div>
<div class="line"><span class="lineno"> 1363</span>        h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a668fe43ca9630a9e9c8b9a511798652d">DUK_TVAL_GET_STRING</a>(&amp;tv);</div>
<div class="line"><span class="lineno"> 1364</span>        <span class="keywordflow">return</span> h;</div>
<div class="line"><span class="lineno"> 1365</span>    }</div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1368</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ace325eaae44f64bffe3918e912d80ffc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a></div><div class="ttdeci">#define DUK_MEMZERO(p, n)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">duktape-1.5.2/src-noline/duk_config.h:2056</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_afc78a81915be8b03cb3777014329b52f"><div class="ttname"><a href="#afc78a81915be8b03cb3777014329b52f">duk_hobject_get_internal_value</a></div><div class="ttdeci">DUK_INTERNAL duk_bool_t duk_hobject_get_internal_value(duk_heap *heap, duk_hobject *obj, duk_tval *tv_out)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01330">duktape-1.8.0/src-separate/duk_hobject_props.c:1330</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01330">duk_hobject_get_internal_value()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">DUK_MEMZERO</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00786">DUK_TVAL_GET_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00810">DUK_TVAL_IS_STRING</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>.</p>

</div>
</div>
<a id="ab9a390fc94ad5e5d6701b7b2ce07d543" name="ab9a390fc94ad5e5d6701b7b2ce07d543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9a390fc94ad5e5d6701b7b2ce07d543">&#9670;&#160;</a></span>duk_hobject_get_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> duk_uint32_t duk_hobject_get_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04751">4751</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4751</span>                                                                                     {</div>
<div class="line"><span class="lineno"> 4752</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 4753</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a> val;</div>
<div class="line"><span class="lineno"> 4754</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, obj);</div>
<div class="line"><span class="lineno"> 4755</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a42b9810a4cfe02e7f9ff037960edff65">duk_push_hstring_stridx</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a846c7f411a94ad5b75b2f7a50f7abb50">DUK_STRIDX_LENGTH</a>);</div>
<div class="line"><span class="lineno"> 4756</span>    (void) <a class="code hl_function" href="#a6765f4aad506c8c78abeab4211b7f844">duk_hobject_getprop</a>(thr,</div>
<div class="line"><span class="lineno"> 4757</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a>(ctx, -2),</div>
<div class="line"><span class="lineno"> 4758</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a>(ctx, -1));</div>
<div class="line"><span class="lineno"> 4759</span>    val = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4760</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaccb78cf03473e5aafa6677a4eca8447">duk_pop_n</a>(ctx, 3);</div>
<div class="line"><span class="lineno"> 4761</span>    <span class="keywordflow">if</span> (val &gt;= 0.0 &amp;&amp; val &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a56f24937e305460da214687a973dcdce">DUK_DOUBLE_2TO32</a>) {</div>
<div class="line"><span class="lineno"> 4762</span>        <span class="keywordflow">return</span> (duk_uint32_t) val;</div>
<div class="line"><span class="lineno"> 4763</span>    }</div>
<div class="line"><span class="lineno"> 4764</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4765</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a56f24937e305460da214687a973dcdce"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a56f24937e305460da214687a973dcdce">DUK_DOUBLE_2TO32</a></div><div class="ttdeci">#define DUK_DOUBLE_2TO32</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02066">duktape-1.5.2/src-noline/duk_config.h:2066</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a42b9810a4cfe02e7f9ff037960edff65"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a42b9810a4cfe02e7f9ff037960edff65">duk_push_hstring_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_hstring_stridx(duk_context *ctx, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19052">duktape-1.5.2/src-noline/duktape.c:19052</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a846c7f411a94ad5b75b2f7a50f7abb50"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a846c7f411a94ad5b75b2f7a50f7abb50">DUK_STRIDX_LENGTH</a></div><div class="ttdeci">#define DUK_STRIDX_LENGTH</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01134">duktape-1.5.2/src-noline/duktape.c:1134</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a6765f4aad506c8c78abeab4211b7f844"><div class="ttname"><a href="#a6765f4aad506c8c78abeab4211b7f844">duk_hobject_getprop</a></div><div class="ttdeci">DUK_INTERNAL duk_bool_t duk_hobject_getprop(duk_hthread *thr, duk_tval *tv_obj, duk_tval *tv_key)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duktape-1.8.0/src-separate/duk_hobject_props.c:2211</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02066">DUK_DOUBLE_2TO32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04386">DUK_GET_TVAL_NEGIDX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">duk_hobject_getprop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19088">duk_pop_n()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19052">duk_push_hstring_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01134">DUK_STRIDX_LENGTH</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duk_to_number()</a>.</p>

</div>
</div>
<a id="adbb71022d83eb7ff4b1dd26bfe31c562" name="adbb71022d83eb7ff4b1dd26bfe31c562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbb71022d83eb7ff4b1dd26bfe31c562">&#9670;&#160;</a></span>duk_hobject_get_own_propdesc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_get_own_propdesc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__propdesc.html">duk_propdesc</a> *</td>          <td class="paramname"><span class="paramname"><em>out_desc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">1872</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1872</span>                                                                                                                                                           {</div>
<div class="line"><span class="lineno"> 1873</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1874</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1875</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1876</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_desc != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1877</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 1878</span> </div>
<div class="line"><span class="lineno"> 1879</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, obj, key, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aed57897f1a937b3298fcfa0768b332c2">DUK_HSTRING_GET_ARRIDX_SLOW</a>(key), out_desc, flags);</div>
<div class="line"><span class="lineno"> 1880</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04539">DUK_HSTRING_GET_ARRIDX_SLOW</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01523">duk__check_arguments_map_for_delete()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01384">duk__lookup_arguments_map()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04773">duk_hobject_object_get_own_property_descriptor()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05834">duk_hobject_object_ownprop_helper()</a>.</p>

</div>
</div>
<a id="a6765f4aad506c8c78abeab4211b7f844" name="a6765f4aad506c8c78abeab4211b7f844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6765f4aad506c8c78abeab4211b7f844">&#9670;&#160;</a></span>duk_hobject_getprop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_getprop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02211">2211</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2211</span>                                                                                                  {</div>
<div class="line"><span class="lineno"> 2212</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 2213</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_obj_copy;</div>
<div class="line"><span class="lineno"> 2214</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_key_copy;</div>
<div class="line"><span class="lineno"> 2215</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *curr = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 2216</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 2217</span>    duk_uint32_t arr_idx = <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>;</div>
<div class="line"><span class="lineno"> 2218</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 2219</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> sanity;</div>
<div class="line"><span class="lineno"> 2220</span> </div>
<div class="line"><span class="lineno"> 2221</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;getprop: thr=%p, obj=%p, key=%p (obj -&gt; %!T, key -&gt; %!T)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2222</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) tv_obj, (<span class="keywordtype">void</span> *) tv_key,</div>
<div class="line"><span class="lineno"> 2223</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_obj, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key));</div>
<div class="line"><span class="lineno"> 2224</span> </div>
<div class="line"><span class="lineno"> 2225</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2226</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2227</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2228</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2229</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2230</span> </div>
<div class="line"><span class="lineno"> 2231</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 2232</span> </div>
<div class="line"><span class="lineno"> 2233</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2234</span><span class="comment">     *  Make a copy of tv_obj, tv_key, and tv_val to avoid any issues of</span></div>
<div class="line"><span class="lineno"> 2235</span><span class="comment">     *  them being invalidated by a valstack resize.</span></div>
<div class="line"><span class="lineno"> 2236</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2237</span><span class="comment">     *  XXX: this is now an overkill for many fast paths.  Rework this</span></div>
<div class="line"><span class="lineno"> 2238</span><span class="comment">     *  to be faster (although switching to a valstack discipline might</span></div>
<div class="line"><span class="lineno"> 2239</span><span class="comment">     *  be a better solution overall).</span></div>
<div class="line"><span class="lineno"> 2240</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2241</span> </div>
<div class="line"><span class="lineno"> 2242</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_obj_copy, tv_obj);</div>
<div class="line"><span class="lineno"> 2243</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_key_copy, tv_key);</div>
<div class="line"><span class="lineno"> 2244</span>    tv_obj = &amp;tv_obj_copy;</div>
<div class="line"><span class="lineno"> 2245</span>    tv_key = &amp;tv_key_copy;</div>
<div class="line"><span class="lineno"> 2246</span> </div>
<div class="line"><span class="lineno"> 2247</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2248</span><span class="comment">     *  Coercion and fast path processing</span></div>
<div class="line"><span class="lineno"> 2249</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2250</span> </div>
<div class="line"><span class="lineno"> 2251</span>    <span class="keywordflow">switch</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a51bb9f80806712cd8d73dcebb5e8d7b3">DUK_TVAL_GET_TAG</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 2252</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa372dbdc4b97deff3bab22c5210a8d63">DUK_TAG_UNDEFINED</a>:</div>
<div class="line"><span class="lineno"> 2253</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a194c60e7c6796a265a150f8fcfb15c1f">DUK_TAG_NULL</a>: {</div>
<div class="line"><span class="lineno"> 2254</span>        <span class="comment">/* Note: unconditional throw */</span></div>
<div class="line"><span class="lineno"> 2255</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is undefined or null -&gt; reject&quot;</span>));</div>
<div class="line"><span class="lineno"> 2256</span><span class="preprocessor">#if defined(DUK_USE_PARANOID_ERRORS)</span></div>
<div class="line"><span class="lineno"> 2257</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ce64309ea8cbabb810926737da126b2">DUK_STR_INVALID_BASE</a>);</div>
<div class="line"><span class="lineno"> 2258</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2259</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9839be13bfece6a773056f3ca73ba830">DUK_ERROR_FMT2</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a02cde94a668a996bb017286a38c7e658">DUK_ERR_TYPE_ERROR</a>, <span class="stringliteral">&quot;cannot read property %s of %s&quot;</span>,</div>
<div class="line"><span class="lineno"> 2260</span>                       <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_key), <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_obj));</div>
<div class="line"><span class="lineno"> 2261</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2262</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2263</span>    }</div>
<div class="line"><span class="lineno"> 2264</span> </div>
<div class="line"><span class="lineno"> 2265</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaecdcd7d7bb1c82f876844331af3e7dd">DUK_TAG_BOOLEAN</a>: {</div>
<div class="line"><span class="lineno"> 2266</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a boolean, start lookup from boolean prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 2267</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9aa54684412d0e4d3cf93a13e7133501">DUK_BIDX_BOOLEAN_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2268</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2269</span>    }</div>
<div class="line"><span class="lineno"> 2270</span> </div>
<div class="line"><span class="lineno"> 2271</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5b7fd1ec74b79ad25e300ab8bef82a">DUK_TAG_STRING</a>: {</div>
<div class="line"><span class="lineno"> 2272</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a668fe43ca9630a9e9c8b9a511798652d">DUK_TVAL_GET_STRING</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 2273</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> pop_count;</div>
<div class="line"><span class="lineno"> 2274</span> </div>
<div class="line"><span class="lineno"> 2275</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 2276</span>        <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_key)) {</div>
<div class="line"><span class="lineno"> 2277</span>            arr_idx = duk__tval_fastint_to_arr_idx(tv_key);</div>
<div class="line"><span class="lineno"> 2278</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object string, key is a fast-path fastint; arr_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2279</span>            pop_count = 0;</div>
<div class="line"><span class="lineno"> 2280</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2281</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2282</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv_key)) {</div>
<div class="line"><span class="lineno"> 2283</span>            arr_idx = <a class="code hl_function" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a>(tv_key);</div>
<div class="line"><span class="lineno"> 2284</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object string, key is a fast-path number; arr_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2285</span>            pop_count = 0;</div>
<div class="line"><span class="lineno"> 2286</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2287</span>            arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2288</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2289</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object string, key is a non-fast-path number; after &quot;</span></div>
<div class="line"><span class="lineno"> 2290</span>                                 <span class="stringliteral">&quot;coercion key is %!T, arr_idx %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 2291</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1), (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2292</span>            pop_count = 1;</div>
<div class="line"><span class="lineno"> 2293</span>        }</div>
<div class="line"><span class="lineno"> 2294</span> </div>
<div class="line"><span class="lineno"> 2295</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2296</span>            arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h)) {</div>
<div class="line"><span class="lineno"> 2297</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaccb78cf03473e5aafa6677a4eca8447">duk_pop_n</a>(ctx, pop_count);</div>
<div class="line"><span class="lineno"> 2298</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad6689700af6d15006d6985ccd6093fef">duk_push_hstring</a>(ctx, h);</div>
<div class="line"><span class="lineno"> 2299</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab502fa806af442421cb8cb8b4a66c5dc">duk_substring</a>(ctx, -1, arr_idx, arr_idx + 1);  <span class="comment">/* [str] -&gt; [substr] */</span></div>
<div class="line"><span class="lineno"> 2300</span> </div>
<div class="line"><span class="lineno"> 2301</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is string, key is an index inside string length &quot;</span></div>
<div class="line"><span class="lineno"> 2302</span>                                 <span class="stringliteral">&quot;after coercion -&gt; return char)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2303</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2304</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2305</span>        }</div>
<div class="line"><span class="lineno"> 2306</span> </div>
<div class="line"><span class="lineno"> 2307</span>        <span class="keywordflow">if</span> (pop_count == 0) {</div>
<div class="line"><span class="lineno"> 2308</span>            <span class="comment">/* This is a pretty awkward control flow, but we need to recheck the</span></div>
<div class="line"><span class="lineno"> 2309</span><span class="comment">             * key coercion here.</span></div>
<div class="line"><span class="lineno"> 2310</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 2311</span>            arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2312</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2313</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object string, key is a non-fast-path number; after &quot;</span></div>
<div class="line"><span class="lineno"> 2314</span>                                 <span class="stringliteral">&quot;coercion key is %!T, arr_idx %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 2315</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1), (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2316</span>        }</div>
<div class="line"><span class="lineno"> 2317</span> </div>
<div class="line"><span class="lineno"> 2318</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 2319</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [key] -&gt; [] */</span></div>
<div class="line"><span class="lineno"> 2320</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h));  <span class="comment">/* [] -&gt; [res] */</span></div>
<div class="line"><span class="lineno"> 2321</span> </div>
<div class="line"><span class="lineno"> 2322</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is string, key is &#39;length&#39; after coercion -&gt; &quot;</span></div>
<div class="line"><span class="lineno"> 2323</span>                                 <span class="stringliteral">&quot;return string length)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2324</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2325</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2326</span>        }</div>
<div class="line"><span class="lineno"> 2327</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a string, start lookup from string prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 2328</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a54ce0c48ba51a440153245a405e9598d">DUK_BIDX_STRING_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2329</span>        <span class="keywordflow">goto</span> lookup;  <span class="comment">/* avoid double coercion */</span></div>
<div class="line"><span class="lineno"> 2330</span>    }</div>
<div class="line"><span class="lineno"> 2331</span> </div>
<div class="line"><span class="lineno"> 2332</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aadbbb32aa10b98e1f373906d1cef0c57">DUK_TAG_OBJECT</a>: {</div>
<div class="line"><span class="lineno"> 2333</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tmp;</div>
<div class="line"><span class="lineno"> 2334</span> </div>
<div class="line"><span class="lineno"> 2335</span>        curr = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 2336</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2337</span> </div>
<div class="line"><span class="lineno"> 2338</span>        tmp = <a class="code hl_function" href="#a3406041a565e860ecee0ed4ba946e7c1">duk__getprop_shallow_fastpath_array_tval</a>(thr, curr, tv_key);</div>
<div class="line"><span class="lineno"> 2339</span>        <span class="keywordflow">if</span> (tmp) {</div>
<div class="line"><span class="lineno"> 2340</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tmp);</div>
<div class="line"><span class="lineno"> 2341</span> </div>
<div class="line"><span class="lineno"> 2342</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is object, key is a number, array part &quot;</span></div>
<div class="line"><span class="lineno"> 2343</span>                                 <span class="stringliteral">&quot;fast path)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2344</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2345</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2346</span>        }</div>
<div class="line"><span class="lineno"> 2347</span> </div>
<div class="line"><span class="lineno"> 2348</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a171173685e8bd5907581054cfdb63463">duk__getprop_fastpath_bufobj_tval</a>(thr, curr, tv_key) != 0) {</div>
<div class="line"><span class="lineno"> 2349</span>            <span class="comment">/* Read value pushed on stack. */</span></div>
<div class="line"><span class="lineno"> 2350</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is bufobj, key is a number, bufferobject &quot;</span></div>
<div class="line"><span class="lineno"> 2351</span>                                 <span class="stringliteral">&quot;fast path)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2352</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2353</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2354</span>        }</div>
<div class="line"><span class="lineno"> 2355</span> </div>
<div class="line"><span class="lineno"> 2356</span><span class="preprocessor">#if defined(DUK_USE_ES6_PROXY)</span></div>
<div class="line"><span class="lineno"> 2357</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>(curr))) {</div>
<div class="line"><span class="lineno"> 2358</span>            <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_target;</div>
<div class="line"><span class="lineno"> 2359</span> </div>
<div class="line"><span class="lineno"> 2360</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="#ad75bcd78c56fd6f6e62cb28ecc423325">duk__proxy_check_prop</a>(thr, curr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af5276c1cdb3add0cbb0c3647a264e5ed">DUK_STRIDX_GET</a>, tv_key, &amp;h_target)) {</div>
<div class="line"><span class="lineno"> 2361</span>                <span class="comment">/* -&gt; [ ... trap handler ] */</span></div>
<div class="line"><span class="lineno"> 2362</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; proxy object &#39;get&#39; for key %!T&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key));</div>
<div class="line"><span class="lineno"> 2363</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, h_target);  <span class="comment">/* target */</span></div>
<div class="line"><span class="lineno"> 2364</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_key);       <span class="comment">/* P */</span></div>
<div class="line"><span class="lineno"> 2365</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_obj);       <span class="comment">/* Receiver: Proxy object */</span></div>
<div class="line"><span class="lineno"> 2366</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 3 <span class="comment">/*nargs*/</span>);</div>
<div class="line"><span class="lineno"> 2367</span> </div>
<div class="line"><span class="lineno"> 2368</span>                <span class="comment">/* Target object must be checked for a conflicting</span></div>
<div class="line"><span class="lineno"> 2369</span><span class="comment">                 * non-configurable property.</span></div>
<div class="line"><span class="lineno"> 2370</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno"> 2371</span>                arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2372</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2373</span> </div>
<div class="line"><span class="lineno"> 2374</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, h_target, key, arr_idx, &amp;desc, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 2375</span>                    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv_hook = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -3);  <span class="comment">/* value from hook */</span></div>
<div class="line"><span class="lineno"> 2376</span>                    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv_targ = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);  <span class="comment">/* value from target */</span></div>
<div class="line"><span class="lineno"> 2377</span>                    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> datadesc_reject;</div>
<div class="line"><span class="lineno"> 2378</span>                    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> accdesc_reject;</div>
<div class="line"><span class="lineno"> 2379</span> </div>
<div class="line"><span class="lineno"> 2380</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;proxy &#39;get&#39;: target has matching property %!O, check for &quot;</span></div>
<div class="line"><span class="lineno"> 2381</span>                                         <span class="stringliteral">&quot;conflicting property; tv_hook=%!T, tv_targ=%!T, desc.flags=0x%08lx, &quot;</span></div>
<div class="line"><span class="lineno"> 2382</span>                                         <span class="stringliteral">&quot;desc.get=%p, desc.set=%p&quot;</span>,</div>
<div class="line"><span class="lineno"> 2383</span>                                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_hook, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_targ,</div>
<div class="line"><span class="lineno"> 2384</span>                                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a>,</div>
<div class="line"><span class="lineno"> 2385</span>                                         (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>, (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>));</div>
<div class="line"><span class="lineno"> 2386</span> </div>
<div class="line"><span class="lineno"> 2387</span>                    datadesc_reject = !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2388</span>                                      !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2389</span>                                      !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2390</span>                                      !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b306580fab6a279a17cd2232f980d96">duk_js_samevalue</a>(tv_hook, tv_targ);</div>
<div class="line"><span class="lineno"> 2391</span>                    accdesc_reject = (desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2392</span>                                     !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2393</span>                                     (desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2394</span>                                     !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3a3a2905176249b3cb6415b5ae814b31">DUK_TVAL_IS_UNDEFINED</a>(tv_hook);</div>
<div class="line"><span class="lineno"> 2395</span>                    <span class="keywordflow">if</span> (datadesc_reject || accdesc_reject) {</div>
<div class="line"><span class="lineno"> 2396</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#affb31bd71c06bc766cbc175ad9cb13ae">DUK_STR_PROXY_REJECTED</a>);</div>
<div class="line"><span class="lineno"> 2397</span>                    }</div>
<div class="line"><span class="lineno"> 2398</span> </div>
<div class="line"><span class="lineno"> 2399</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a09f116a4bcf486b3359afaa1abf4bf66">duk_pop_2</a>(ctx);</div>
<div class="line"><span class="lineno"> 2400</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2401</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2402</span>                }</div>
<div class="line"><span class="lineno"> 2403</span>                <span class="keywordflow">return</span> 1;  <span class="comment">/* return value */</span></div>
<div class="line"><span class="lineno"> 2404</span>            }</div>
<div class="line"><span class="lineno"> 2405</span> </div>
<div class="line"><span class="lineno"> 2406</span>            curr = h_target;  <span class="comment">/* resume lookup from target */</span></div>
<div class="line"><span class="lineno"> 2407</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2730ed3b8ede880f25dd33ebb2270d09">DUK_TVAL_SET_OBJECT</a>(tv_obj, curr);</div>
<div class="line"><span class="lineno"> 2408</span>        }</div>
<div class="line"><span class="lineno"> 2409</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_ES6_PROXY */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2410</span> </div>
<div class="line"><span class="lineno"> 2411</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(curr)) {</div>
<div class="line"><span class="lineno"> 2412</span>            arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2413</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2414</span> </div>
<div class="line"><span class="lineno"> 2415</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="#a698c6dae810ac2322c3d92c190280d53">duk__check_arguments_map_for_get</a>(thr, curr, key, &amp;desc)) {</div>
<div class="line"><span class="lineno"> 2416</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is object with arguments exotic behavior, &quot;</span></div>
<div class="line"><span class="lineno"> 2417</span>                                     <span class="stringliteral">&quot;key matches magically bound property -&gt; skip standard &quot;</span></div>
<div class="line"><span class="lineno"> 2418</span>                                     <span class="stringliteral">&quot;Get with replacement value)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2419</span>                                     (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2420</span> </div>
<div class="line"><span class="lineno"> 2421</span>                <span class="comment">/* no need for &#39;caller&#39; post-check, because &#39;key&#39; must be an array index */</span></div>
<div class="line"><span class="lineno"> 2422</span> </div>
<div class="line"><span class="lineno"> 2423</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52f537d78760f69d0d94d21728279b50">duk_remove</a>(ctx, -2);  <span class="comment">/* [key result] -&gt; [result] */</span></div>
<div class="line"><span class="lineno"> 2424</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2425</span>            }</div>
<div class="line"><span class="lineno"> 2426</span> </div>
<div class="line"><span class="lineno"> 2427</span>            <span class="keywordflow">goto</span> lookup;  <span class="comment">/* avoid double coercion */</span></div>
<div class="line"><span class="lineno"> 2428</span>        }</div>
<div class="line"><span class="lineno"> 2429</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2430</span>    }</div>
<div class="line"><span class="lineno"> 2431</span> </div>
<div class="line"><span class="lineno"> 2432</span>    <span class="comment">/* Buffer has virtual properties similar to string, but indexed values</span></div>
<div class="line"><span class="lineno"> 2433</span><span class="comment">     * are numbers, not 1-byte buffers/strings which would perform badly.</span></div>
<div class="line"><span class="lineno"> 2434</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2435</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2a83c4fe6b8335cbe69d35050bfb3a1">DUK_TAG_BUFFER</a>: {</div>
<div class="line"><span class="lineno"> 2436</span>        <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a422dc96860bacd6ed951234bf2eb5ca1">DUK_TVAL_GET_BUFFER</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 2437</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> pop_count;</div>
<div class="line"><span class="lineno"> 2438</span> </div>
<div class="line"><span class="lineno"> 2439</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2440</span><span class="comment">         *  Because buffer values are often looped over, a number fast path</span></div>
<div class="line"><span class="lineno"> 2441</span><span class="comment">         *  is important.</span></div>
<div class="line"><span class="lineno"> 2442</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2443</span> </div>
<div class="line"><span class="lineno"> 2444</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 2445</span>        <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_key)) {</div>
<div class="line"><span class="lineno"> 2446</span>            arr_idx = duk__tval_fastint_to_arr_idx(tv_key);</div>
<div class="line"><span class="lineno"> 2447</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a fast-path fastint; arr_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2448</span>            pop_count = 0;</div>
<div class="line"><span class="lineno"> 2449</span>        }</div>
<div class="line"><span class="lineno"> 2450</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2451</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2452</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv_key)) {</div>
<div class="line"><span class="lineno"> 2453</span>            arr_idx = <a class="code hl_function" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a>(tv_key);</div>
<div class="line"><span class="lineno"> 2454</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a fast-path number; arr_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2455</span>            pop_count = 0;</div>
<div class="line"><span class="lineno"> 2456</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2457</span>            arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2458</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2459</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a non-fast-path number; after &quot;</span></div>
<div class="line"><span class="lineno"> 2460</span>                                 <span class="stringliteral">&quot;coercion key is %!T, arr_idx %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 2461</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1), (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2462</span>            pop_count = 1;</div>
<div class="line"><span class="lineno"> 2463</span>        }</div>
<div class="line"><span class="lineno"> 2464</span> </div>
<div class="line"><span class="lineno"> 2465</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2466</span>            arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a>(h)) {</div>
<div class="line"><span class="lineno"> 2467</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaccb78cf03473e5aafa6677a4eca8447">duk_pop_n</a>(ctx, pop_count);</div>
<div class="line"><span class="lineno"> 2468</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, ((duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;heap, h))[arr_idx]);</div>
<div class="line"><span class="lineno"> 2469</span> </div>
<div class="line"><span class="lineno"> 2470</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is buffer, key is an index inside buffer length &quot;</span></div>
<div class="line"><span class="lineno"> 2471</span>                                 <span class="stringliteral">&quot;after coercion -&gt; return byte as number)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2472</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2473</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2474</span>        }</div>
<div class="line"><span class="lineno"> 2475</span> </div>
<div class="line"><span class="lineno"> 2476</span>        <span class="keywordflow">if</span> (pop_count == 0) {</div>
<div class="line"><span class="lineno"> 2477</span>            <span class="comment">/* This is a pretty awkward control flow, but we need to recheck the</span></div>
<div class="line"><span class="lineno"> 2478</span><span class="comment">             * key coercion here.</span></div>
<div class="line"><span class="lineno"> 2479</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 2480</span>            arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2481</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2482</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a non-fast-path number; after &quot;</span></div>
<div class="line"><span class="lineno"> 2483</span>                                 <span class="stringliteral">&quot;coercion key is %!T, arr_idx %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 2484</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1), (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 2485</span>        }</div>
<div class="line"><span class="lineno"> 2486</span> </div>
<div class="line"><span class="lineno"> 2487</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr) ||</div>
<div class="line"><span class="lineno"> 2488</span>            key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4121da520b7e14dd0314834a7792d559">DUK_HTHREAD_STRING_BYTE_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 2489</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [key] -&gt; [] */</span></div>
<div class="line"><span class="lineno"> 2490</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a>(h));  <span class="comment">/* [] -&gt; [res] */</span></div>
<div class="line"><span class="lineno"> 2491</span> </div>
<div class="line"><span class="lineno"> 2492</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is buffer, key is &#39;length&#39; or &#39;byteLength&#39; &quot;</span></div>
<div class="line"><span class="lineno"> 2493</span>                                 <span class="stringliteral">&quot;after coercion -&gt; return buffer length)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2494</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2495</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2496</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf5e0c594f28422489a653531fc91634">DUK_HTHREAD_STRING_BYTE_OFFSET</a>(thr)) {</div>
<div class="line"><span class="lineno"> 2497</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [key] -&gt; [] */</span></div>
<div class="line"><span class="lineno"> 2498</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, 0);  <span class="comment">/* [] -&gt; [res] */</span></div>
<div class="line"><span class="lineno"> 2499</span> </div>
<div class="line"><span class="lineno"> 2500</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is buffer, key is &#39;byteOffset&#39; after coercion -&gt; &quot;</span></div>
<div class="line"><span class="lineno"> 2501</span>                                 <span class="stringliteral">&quot;return 0 for consistency with Buffer objects)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2502</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2503</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2504</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a01789bdab29bc7250d310ba52598d06e">DUK_HTHREAD_STRING_BYTES_PER_ELEMENT</a>(thr)) {</div>
<div class="line"><span class="lineno"> 2505</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [key] -&gt; [] */</span></div>
<div class="line"><span class="lineno"> 2506</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, 1);  <span class="comment">/* [] -&gt; [res] */</span></div>
<div class="line"><span class="lineno"> 2507</span> </div>
<div class="line"><span class="lineno"> 2508</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (base is buffer, key is &#39;BYTES_PER_ELEMENT&#39; after coercion -&gt; &quot;</span></div>
<div class="line"><span class="lineno"> 2509</span>                                 <span class="stringliteral">&quot;return 1 for consistency with Buffer objects)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2510</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2511</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2512</span>        }</div>
<div class="line"><span class="lineno"> 2513</span> </div>
<div class="line"><span class="lineno"> 2514</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a buffer, start lookup from buffer prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 2515</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa4cb5856bd471bdb1e38506a814c410">DUK_BIDX_BUFFER_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2516</span>        <span class="keywordflow">goto</span> lookup;  <span class="comment">/* avoid double coercion */</span></div>
<div class="line"><span class="lineno"> 2517</span>    }</div>
<div class="line"><span class="lineno"> 2518</span> </div>
<div class="line"><span class="lineno"> 2519</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0dc76fbf6e639aa47997317e4466997f">DUK_TAG_POINTER</a>: {</div>
<div class="line"><span class="lineno"> 2520</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a pointer, start lookup from pointer prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 2521</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3d1a610c9cc8624a2f0a8b4df671a472">DUK_BIDX_POINTER_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2522</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2523</span>    }</div>
<div class="line"><span class="lineno"> 2524</span> </div>
<div class="line"><span class="lineno"> 2525</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afbc705d5de3fe9562cadf9c94bf30066">DUK_TAG_LIGHTFUNC</a>: {</div>
<div class="line"><span class="lineno"> 2526</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> lf_flags = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af6d39c7f5b5aa18478e5aec403d3247c">DUK_TVAL_GET_LIGHTFUNC_FLAGS</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 2527</span> </div>
<div class="line"><span class="lineno"> 2528</span>        <span class="comment">/* Must coerce key: if key is an object, it may coerce to e.g. &#39;length&#39;. */</span></div>
<div class="line"><span class="lineno"> 2529</span>        arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2530</span> </div>
<div class="line"><span class="lineno"> 2531</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 2532</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> lf_len = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf33527b4006cc5034658a770a84236d">DUK_LFUNC_FLAGS_GET_LENGTH</a>(lf_flags);</div>
<div class="line"><span class="lineno"> 2533</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2534</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, lf_len);</div>
<div class="line"><span class="lineno"> 2535</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2536</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa481f235a8676eeb64c61eed25249209">DUK_HTHREAD_STRING_NAME</a>(thr)) {</div>
<div class="line"><span class="lineno"> 2537</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2538</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a38121665ef2724dee4812f9a08158a37">duk_push_lightfunc_name</a>(ctx, tv_obj);</div>
<div class="line"><span class="lineno"> 2539</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2540</span>        }</div>
<div class="line"><span class="lineno"> 2541</span> </div>
<div class="line"><span class="lineno"> 2542</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a lightfunc, start lookup from function prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 2543</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4131310d50c5b76901abca17ec3dbe6c">DUK_BIDX_FUNCTION_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2544</span>        <span class="keywordflow">goto</span> lookup;  <span class="comment">/* avoid double coercion */</span></div>
<div class="line"><span class="lineno"> 2545</span>    }</div>
<div class="line"><span class="lineno"> 2546</span> </div>
<div class="line"><span class="lineno"> 2547</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 2548</span>    <span class="keywordflow">case</span> DUK_TAG_FASTINT:</div>
<div class="line"><span class="lineno"> 2549</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2550</span>    <span class="keywordflow">default</span>: {</div>
<div class="line"><span class="lineno"> 2551</span>        <span class="comment">/* number */</span></div>
<div class="line"><span class="lineno"> 2552</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a number, start lookup from number prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 2553</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv_obj));</div>
<div class="line"><span class="lineno"> 2554</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv_obj));</div>
<div class="line"><span class="lineno"> 2555</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a81950493451ab764f402c43ec5633e0d">DUK_BIDX_NUMBER_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2556</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2557</span>    }</div>
<div class="line"><span class="lineno"> 2558</span>    }</div>
<div class="line"><span class="lineno"> 2559</span> </div>
<div class="line"><span class="lineno"> 2560</span>    <span class="comment">/* key coercion (unless already coerced above) */</span></div>
<div class="line"><span class="lineno"> 2561</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2562</span>    arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2563</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2564</span> </div>
<div class="line"><span class="lineno"> 2565</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2566</span><span class="comment">     *  Property lookup</span></div>
<div class="line"><span class="lineno"> 2567</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2568</span> </div>
<div class="line"><span class="lineno"> 2569</span> lookup:</div>
<div class="line"><span class="lineno"> 2570</span>    <span class="comment">/* [key] (coerced) */</span></div>
<div class="line"><span class="lineno"> 2571</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2572</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2573</span> </div>
<div class="line"><span class="lineno"> 2574</span>    sanity = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a958816bc82736204d56315f8ca291b77">DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</a>;</div>
<div class="line"><span class="lineno"> 2575</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2576</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, curr, key, arr_idx, &amp;desc, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 2577</span>            <span class="keywordflow">goto</span> next_in_chain;</div>
<div class="line"><span class="lineno"> 2578</span>        }</div>
<div class="line"><span class="lineno"> 2579</span> </div>
<div class="line"><span class="lineno"> 2580</span>        <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 2581</span>            <span class="comment">/* accessor with defined getter */</span></div>
<div class="line"><span class="lineno"> 2582</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) != 0);</div>
<div class="line"><span class="lineno"> 2583</span> </div>
<div class="line"><span class="lineno"> 2584</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);                     <span class="comment">/* [key undefined] -&gt; [key] */</span></div>
<div class="line"><span class="lineno"> 2585</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>);</div>
<div class="line"><span class="lineno"> 2586</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_obj);       <span class="comment">/* note: original, uncoerced base */</span></div>
<div class="line"><span class="lineno"> 2587</span><span class="preprocessor">#ifdef DUK_USE_NONSTD_GETTER_KEY_ARGUMENT</span></div>
<div class="line"><span class="lineno"> 2588</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, -3);</div>
<div class="line"><span class="lineno"> 2589</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 1);          <span class="comment">/* [key getter this key] -&gt; [key retval] */</span></div>
<div class="line"><span class="lineno"> 2590</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2591</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 0);          <span class="comment">/* [key getter this] -&gt; [key retval] */</span></div>
<div class="line"><span class="lineno"> 2592</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2593</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2594</span>            <span class="comment">/* [key value] or [key undefined] */</span></div>
<div class="line"><span class="lineno"> 2595</span> </div>
<div class="line"><span class="lineno"> 2596</span>            <span class="comment">/* data property or accessor without getter */</span></div>
<div class="line"><span class="lineno"> 2597</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(((desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) == 0) ||</div>
<div class="line"><span class="lineno"> 2598</span>                       (desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div>
<div class="line"><span class="lineno"> 2599</span> </div>
<div class="line"><span class="lineno"> 2600</span>            <span class="comment">/* if accessor without getter, return value is undefined */</span></div>
<div class="line"><span class="lineno"> 2601</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(((desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) == 0) ||</div>
<div class="line"><span class="lineno"> 2602</span>                       <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, -1));</div>
<div class="line"><span class="lineno"> 2603</span> </div>
<div class="line"><span class="lineno"> 2604</span>            <span class="comment">/* Note: for an accessor without getter, falling through to</span></div>
<div class="line"><span class="lineno"> 2605</span><span class="comment">             * check for &quot;caller&quot; exotic behavior is unnecessary as</span></div>
<div class="line"><span class="lineno"> 2606</span><span class="comment">             * &quot;undefined&quot; will never activate the behavior.  But it does</span></div>
<div class="line"><span class="lineno"> 2607</span><span class="comment">             * no harm, so we&#39;ll do it anyway.</span></div>
<div class="line"><span class="lineno"> 2608</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 2609</span>        }</div>
<div class="line"><span class="lineno"> 2610</span> </div>
<div class="line"><span class="lineno"> 2611</span>        <span class="keywordflow">goto</span> found;  <span class="comment">/* [key result] */</span></div>
<div class="line"><span class="lineno"> 2612</span> </div>
<div class="line"><span class="lineno"> 2613</span>     next_in_chain:</div>
<div class="line"><span class="lineno"> 2614</span>        <span class="comment">/* XXX: option to pretend property doesn&#39;t exist if sanity limit is</span></div>
<div class="line"><span class="lineno"> 2615</span><span class="comment">         * hit might be useful.</span></div>
<div class="line"><span class="lineno"> 2616</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2617</span>        <span class="keywordflow">if</span> (sanity-- == 0) {</div>
<div class="line"><span class="lineno"> 2618</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a058cd56ed742ea766d26976d56c159d4">DUK_ERROR_RANGE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a873aa40f45b79d866910c45a58ca6c29">DUK_STR_PROTOTYPE_CHAIN_LIMIT</a>);</div>
<div class="line"><span class="lineno"> 2619</span>        }</div>
<div class="line"><span class="lineno"> 2620</span>        curr = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a117b58d5b8a3809139f42327410929b2">DUK_HOBJECT_GET_PROTOTYPE</a>(thr-&gt;heap, curr);</div>
<div class="line"><span class="lineno"> 2621</span>    } <span class="keywordflow">while</span> (curr);</div>
<div class="line"><span class="lineno"> 2622</span> </div>
<div class="line"><span class="lineno"> 2623</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2624</span><span class="comment">     *  Not found</span></div>
<div class="line"><span class="lineno"> 2625</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2626</span> </div>
<div class="line"><span class="lineno"> 2627</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2fef5b1b8a87164e0c2d7df4b5c0d6ea">duk_to_undefined</a>(ctx, -1);  <span class="comment">/* [key] -&gt; [undefined] (default value) */</span></div>
<div class="line"><span class="lineno"> 2628</span> </div>
<div class="line"><span class="lineno"> 2629</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (not found)&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2630</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2631</span> </div>
<div class="line"><span class="lineno"> 2632</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2633</span><span class="comment">     *  Found; post-processing (Function and arguments objects)</span></div>
<div class="line"><span class="lineno"> 2634</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2635</span> </div>
<div class="line"><span class="lineno"> 2636</span> found:</div>
<div class="line"><span class="lineno"> 2637</span>    <span class="comment">/* [key result] */</span></div>
<div class="line"><span class="lineno"> 2638</span> </div>
<div class="line"><span class="lineno"> 2639</span><span class="preprocessor">#if !defined(DUK_USE_NONSTD_FUNC_CALLER_PROPERTY)</span></div>
<div class="line"><span class="lineno"> 2640</span>    <span class="comment">/* Special behavior for &#39;caller&#39; property of (non-bound) function objects</span></div>
<div class="line"><span class="lineno"> 2641</span><span class="comment">     * and non-strict Arguments objects: if &#39;caller&#39; -value- (!) is a strict</span></div>
<div class="line"><span class="lineno"> 2642</span><span class="comment">     * mode function, throw a TypeError (E5 Sections 15.3.5.4, 10.6).</span></div>
<div class="line"><span class="lineno"> 2643</span><span class="comment">     * Quite interestingly, a non-strict function with no formal arguments</span></div>
<div class="line"><span class="lineno"> 2644</span><span class="comment">     * will get an arguments object -without- special &#39;caller&#39; behavior!</span></div>
<div class="line"><span class="lineno"> 2645</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2646</span><span class="comment">     * The E5.1 spec is a bit ambiguous if this special behavior applies when</span></div>
<div class="line"><span class="lineno"> 2647</span><span class="comment">     * a bound function is the base value (not the &#39;caller&#39; value): Section</span></div>
<div class="line"><span class="lineno"> 2648</span><span class="comment">     * 15.3.4.5 (describing bind()) states that [[Get]] for bound functions</span></div>
<div class="line"><span class="lineno"> 2649</span><span class="comment">     * matches that of Section 15.3.5.4 ([[Get]] for Function instances).</span></div>
<div class="line"><span class="lineno"> 2650</span><span class="comment">     * However, Section 13.3.5.4 has &quot;NOTE: Function objects created using</span></div>
<div class="line"><span class="lineno"> 2651</span><span class="comment">     * Function.prototype.bind use the default [[Get]] internal method.&quot;</span></div>
<div class="line"><span class="lineno"> 2652</span><span class="comment">     * The current implementation assumes this means that bound functions</span></div>
<div class="line"><span class="lineno"> 2653</span><span class="comment">     * should not have the special [[Get]] behavior.</span></div>
<div class="line"><span class="lineno"> 2654</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2655</span><span class="comment">     * The E5.1 spec is also a bit unclear if the TypeError throwing is</span></div>
<div class="line"><span class="lineno"> 2656</span><span class="comment">     * applied if the &#39;caller&#39; value is a strict bound function.  The</span></div>
<div class="line"><span class="lineno"> 2657</span><span class="comment">     * current implementation will throw even for both strict non-bound</span></div>
<div class="line"><span class="lineno"> 2658</span><span class="comment">     * and strict bound functions.</span></div>
<div class="line"><span class="lineno"> 2659</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2660</span><span class="comment">     * See test-dev-strict-func-as-caller-prop-value.js for quite extensive</span></div>
<div class="line"><span class="lineno"> 2661</span><span class="comment">     * tests.</span></div>
<div class="line"><span class="lineno"> 2662</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2663</span><span class="comment">     * This exotic behavior is disabled when the non-standard &#39;caller&#39; property</span></div>
<div class="line"><span class="lineno"> 2664</span><span class="comment">     * is enabled, as it conflicts with the free use of &#39;caller&#39;.</span></div>
<div class="line"><span class="lineno"> 2665</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2666</span>    <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeed63d522420ecafe1300bd960828877">DUK_HTHREAD_STRING_CALLER</a>(thr) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2667</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 2668</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *orig = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 2669</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(orig != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2670</span> </div>
<div class="line"><span class="lineno"> 2671</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52b5d3ca26e6c6391f27c77f23d70d8b">DUK_HOBJECT_IS_NONBOUND_FUNCTION</a>(orig) ||</div>
<div class="line"><span class="lineno"> 2672</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(orig)) {</div>
<div class="line"><span class="lineno"> 2673</span>            <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h;</div>
<div class="line"><span class="lineno"> 2674</span> </div>
<div class="line"><span class="lineno"> 2675</span>            <span class="comment">/* XXX: The TypeError is currently not applied to bound</span></div>
<div class="line"><span class="lineno"> 2676</span><span class="comment">             * functions because the &#39;strict&#39; flag is not copied by</span></div>
<div class="line"><span class="lineno"> 2677</span><span class="comment">             * bind().  This may or may not be correct, the specification</span></div>
<div class="line"><span class="lineno"> 2678</span><span class="comment">             * only refers to the value being a &quot;strict mode Function</span></div>
<div class="line"><span class="lineno"> 2679</span><span class="comment">             * object&quot; which is ambiguous.</span></div>
<div class="line"><span class="lineno"> 2680</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 2681</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1405011142963f5c45c82eb2a881e385">DUK_HOBJECT_HAS_BOUND</a>(orig));</div>
<div class="line"><span class="lineno"> 2682</span> </div>
<div class="line"><span class="lineno"> 2683</span>            h = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca26324ee5830d35a824b1e762ef006c">duk_get_hobject</a>(ctx, -1);  <span class="comment">/* NULL if not an object */</span></div>
<div class="line"><span class="lineno"> 2684</span>            <span class="keywordflow">if</span> (h &amp;&amp;</div>
<div class="line"><span class="lineno"> 2685</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a99d98b4afe398846f7c065546e270f39">DUK_HOBJECT_IS_FUNCTION</a>(h) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2686</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae5226f867ccd5073adc2df9140389ecb">DUK_HOBJECT_HAS_STRICT</a>(h)) {</div>
<div class="line"><span class="lineno"> 2687</span>                <span class="comment">/* XXX: sufficient to check &#39;strict&#39;, assert for &#39;is function&#39; */</span></div>
<div class="line"><span class="lineno"> 2688</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a30037f999e73bc435679e78af352c039">DUK_STR_STRICT_CALLER_READ</a>);</div>
<div class="line"><span class="lineno"> 2689</span>            }</div>
<div class="line"><span class="lineno"> 2690</span>        }</div>
<div class="line"><span class="lineno"> 2691</span>    }</div>
<div class="line"><span class="lineno"> 2692</span><span class="preprocessor">#endif   </span><span class="comment">/* !DUK_USE_NONSTD_FUNC_CALLER_PROPERTY */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2693</span> </div>
<div class="line"><span class="lineno"> 2694</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52f537d78760f69d0d94d21728279b50">duk_remove</a>(ctx, -2);  <span class="comment">/* [key result] -&gt; [result] */</span></div>
<div class="line"><span class="lineno"> 2695</span> </div>
<div class="line"><span class="lineno"> 2696</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; %!T (found)&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1)));</div>
<div class="line"><span class="lineno"> 2697</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2698</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0dc76fbf6e639aa47997317e4466997f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0dc76fbf6e639aa47997317e4466997f">DUK_TAG_POINTER</a></div><div class="ttdeci">#define DUK_TAG_POINTER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00644">duktape-1.5.2/src-noline/duktape.c:644</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a10838caaff9e74b1e3904c78df71d53a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_undefined(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duktape-1.5.2/src-noline/duktape.c:17600</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1405011142963f5c45c82eb2a881e385"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1405011142963f5c45c82eb2a881e385">DUK_HOBJECT_HAS_BOUND</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_BOUND(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04805">duktape-1.5.2/src-noline/duktape.c:4805</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a194c60e7c6796a265a150f8fcfb15c1f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a194c60e7c6796a265a150f8fcfb15c1f">DUK_TAG_NULL</a></div><div class="ttdeci">#define DUK_TAG_NULL</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00642">duktape-1.5.2/src-noline/duktape.c:642</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2730ed3b8ede880f25dd33ebb2270d09"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2730ed3b8ede880f25dd33ebb2270d09">DUK_TVAL_SET_OBJECT</a></div><div class="ttdeci">#define DUK_TVAL_SET_OBJECT(tv, hptr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00739">duktape-1.5.2/src-noline/duktape.c:739</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2fef5b1b8a87164e0c2d7df4b5c0d6ea"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2fef5b1b8a87164e0c2d7df4b5c0d6ea">duk_to_undefined</a></div><div class="ttdeci">DUK_EXTERNAL void duk_to_undefined(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16704">duktape-1.5.2/src-noline/duktape.c:16704</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a30037f999e73bc435679e78af352c039"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a30037f999e73bc435679e78af352c039">DUK_STR_STRICT_CALLER_READ</a></div><div class="ttdeci">#define DUK_STR_STRICT_CALLER_READ</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02371">duktape-1.5.2/src-noline/duktape.c:2371</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a38121665ef2724dee4812f9a08158a37"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a38121665ef2724dee4812f9a08158a37">duk_push_lightfunc_name</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_lightfunc_name(duk_context *ctx, duk_tval *tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19342">duktape-1.5.2/src-noline/duktape.c:19342</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3d1a610c9cc8624a2f0a8b4df671a472"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3d1a610c9cc8624a2f0a8b4df671a472">DUK_BIDX_POINTER_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_POINTER_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01671">duktape-1.5.2/src-noline/duktape.c:1671</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4131310d50c5b76901abca17ec3dbe6c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4131310d50c5b76901abca17ec3dbe6c">DUK_BIDX_FUNCTION_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_FUNCTION_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01634">duktape-1.5.2/src-noline/duktape.c:1634</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a51bb9f80806712cd8d73dcebb5e8d7b3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a51bb9f80806712cd8d73dcebb5e8d7b3">DUK_TVAL_GET_TAG</a></div><div class="ttdeci">#define DUK_TVAL_GET_TAG(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00792">duktape-1.5.2/src-noline/duktape.c:792</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a52b5d3ca26e6c6391f27c77f23d70d8b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52b5d3ca26e6c6391f27c77f23d70d8b">DUK_HOBJECT_IS_NONBOUND_FUNCTION</a></div><div class="ttdeci">#define DUK_HOBJECT_IS_NONBOUND_FUNCTION(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04779">duktape-1.5.2/src-noline/duktape.c:4779</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a54ce0c48ba51a440153245a405e9598d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a54ce0c48ba51a440153245a405e9598d">DUK_BIDX_STRING_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_STRING_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01638">duktape-1.5.2/src-noline/duktape.c:1638</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6b5b7fd1ec74b79ad25e300ab8bef82a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5b7fd1ec74b79ad25e300ab8bef82a">DUK_TAG_STRING</a></div><div class="ttdeci">#define DUK_TAG_STRING</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00647">duktape-1.5.2/src-noline/duktape.c:647</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a81950493451ab764f402c43ec5633e0d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a81950493451ab764f402c43ec5633e0d">DUK_BIDX_NUMBER_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_NUMBER_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01642">duktape-1.5.2/src-noline/duktape.c:1642</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a99d98b4afe398846f7c065546e270f39"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a99d98b4afe398846f7c065546e270f39">DUK_HOBJECT_IS_FUNCTION</a></div><div class="ttdeci">#define DUK_HOBJECT_IS_FUNCTION(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04783">duktape-1.5.2/src-noline/duktape.c:4783</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9aa54684412d0e4d3cf93a13e7133501"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9aa54684412d0e4d3cf93a13e7133501">DUK_BIDX_BOOLEAN_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_BOOLEAN_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01640">duktape-1.5.2/src-noline/duktape.c:1640</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa372dbdc4b97deff3bab22c5210a8d63"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa372dbdc4b97deff3bab22c5210a8d63">DUK_TAG_UNDEFINED</a></div><div class="ttdeci">#define DUK_TAG_UNDEFINED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00641">duktape-1.5.2/src-noline/duktape.c:641</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaa4cb5856bd471bdb1e38506a814c410"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa4cb5856bd471bdb1e38506a814c410">DUK_BIDX_BUFFER_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_BUFFER_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01669">duktape-1.5.2/src-noline/duktape.c:1669</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aadbbb32aa10b98e1f373906d1cef0c57"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aadbbb32aa10b98e1f373906d1cef0c57">DUK_TAG_OBJECT</a></div><div class="ttdeci">#define DUK_TAG_OBJECT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00648">duktape-1.5.2/src-noline/duktape.c:648</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaecdcd7d7bb1c82f876844331af3e7dd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaecdcd7d7bb1c82f876844331af3e7dd">DUK_TAG_BOOLEAN</a></div><div class="ttdeci">#define DUK_TAG_BOOLEAN</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00643">duktape-1.5.2/src-noline/duktape.c:643</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aca26324ee5830d35a824b1e762ef006c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca26324ee5830d35a824b1e762ef006c">duk_get_hobject</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_get_hobject(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16301">duktape-1.5.2/src-noline/duktape.c:16301</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acf33527b4006cc5034658a770a84236d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf33527b4006cc5034658a770a84236d">DUK_LFUNC_FLAGS_GET_LENGTH</a></div><div class="ttdeci">#define DUK_LFUNC_FLAGS_GET_LENGTH(lf_flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00844">duktape-1.5.2/src-noline/duktape.c:844</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae2a83c4fe6b8335cbe69d35050bfb3a1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2a83c4fe6b8335cbe69d35050bfb3a1">DUK_TAG_BUFFER</a></div><div class="ttdeci">#define DUK_TAG_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00649">duktape-1.5.2/src-noline/duktape.c:649</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae5226f867ccd5073adc2df9140389ecb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae5226f867ccd5073adc2df9140389ecb">DUK_HOBJECT_HAS_STRICT</a></div><div class="ttdeci">#define DUK_HOBJECT_HAS_STRICT(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04811">duktape-1.5.2/src-noline/duktape.c:4811</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aeed63d522420ecafe1300bd960828877"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeed63d522420ecafe1300bd960828877">DUK_HTHREAD_STRING_CALLER</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_CALLER(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01088">duktape-1.5.2/src-noline/duktape.c:1088</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af5276c1cdb3add0cbb0c3647a264e5ed"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af5276c1cdb3add0cbb0c3647a264e5ed">DUK_STRIDX_GET</a></div><div class="ttdeci">#define DUK_STRIDX_GET</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01092">duktape-1.5.2/src-noline/duktape.c:1092</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af6d39c7f5b5aa18478e5aec403d3247c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af6d39c7f5b5aa18478e5aec403d3247c">DUK_TVAL_GET_LIGHTFUNC_FLAGS</a></div><div class="ttdeci">#define DUK_TVAL_GET_LIGHTFUNC_FLAGS(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00785">duktape-1.5.2/src-noline/duktape.c:785</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_afbc705d5de3fe9562cadf9c94bf30066"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#afbc705d5de3fe9562cadf9c94bf30066">DUK_TAG_LIGHTFUNC</a></div><div class="ttdeci">#define DUK_TAG_LIGHTFUNC</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00645">duktape-1.5.2/src-noline/duktape.c:645</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a171173685e8bd5907581054cfdb63463"><div class="ttname"><a href="#a171173685e8bd5907581054cfdb63463">duk__getprop_fastpath_bufobj_tval</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__getprop_fastpath_bufobj_tval(duk_hthread *thr, duk_hobject *obj, duk_tval *tv_key)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02097">duktape-1.8.0/src-separate/duk_hobject_props.c:2097</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a3406041a565e860ecee0ed4ba946e7c1"><div class="ttname"><a href="#a3406041a565e860ecee0ed4ba946e7c1">duk__getprop_shallow_fastpath_array_tval</a></div><div class="ttdeci">DUK_LOCAL duk_tval * duk__getprop_shallow_fastpath_array_tval(duk_hthread *thr, duk_hobject *obj, duk_tval *tv_key)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01969">duktape-1.8.0/src-separate/duk_hobject_props.c:1969</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06274">duk_hthread::builtins</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01441">duk__check_arguments_map_for_get()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02097">duk__getprop_fastpath_bufobj_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01969">duk__getprop_shallow_fastpath_array_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">duk__proxy_check_prop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00143">duk__push_tval_to_hstring_arr_idx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duk__tval_number_to_arr_idx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01640">DUK_BIDX_BOOLEAN_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01669">DUK_BIDX_BUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01634">DUK_BIDX_FUNCTION_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01642">DUK_BIDX_NUMBER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01671">DUK_BIDX_POINTER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01638">DUK_BIDX_STRING_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12389">duk_call_method()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00345">DUK_ERR_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07639">DUK_ERROR_FMT2</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07875">DUK_ERROR_RANGE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16301">duk_get_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">DUK_GETDESC_FLAG_PUSH_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">DUK_HBUFFER_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">DUK_HBUFFER_GET_SIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05227">DUK_HOBJECT_GET_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04805">DUK_HOBJECT_HAS_BOUND</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04819">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04811">DUK_HOBJECT_HAS_STRICT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04783">DUK_HOBJECT_IS_FUNCTION</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04779">DUK_HOBJECT_IS_NONBOUND_FUNCTION</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05198">DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01139">DUK_HTHREAD_STRING_BYTE_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01142">DUK_HTHREAD_STRING_BYTE_OFFSET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01145">DUK_HTHREAD_STRING_BYTES_PER_ELEMENT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01088">DUK_HTHREAD_STRING_CALLER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">DUK_HTHREAD_STRING_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01163">DUK_HTHREAD_STRING_NAME</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08382">duk_js_samevalue</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00844">DUK_LFUNC_FLAGS_GET_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19167">duk_pop_2()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19088">duk_pop_n()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04867">DUK_PROPDESC_FLAG_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19044">duk_push_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19342">duk_push_lightfunc_name()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19476">duk_push_string_tval_readable()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duk_push_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15820">duk_remove()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02370">DUK_STR_INVALID_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02470">DUK_STR_PROTOTYPE_CHAIN_LIMIT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02372">DUK_STR_PROXY_REJECTED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02371">DUK_STR_STRICT_CALLER_READ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01092">DUK_STRIDX_GET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19721">duk_substring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00643">DUK_TAG_BOOLEAN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00649">DUK_TAG_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00645">DUK_TAG_LIGHTFUNC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00642">DUK_TAG_NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00648">DUK_TAG_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00644">DUK_TAG_POINTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00647">DUK_TAG_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00641">DUK_TAG_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16704">duk_to_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00788">DUK_TVAL_GET_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00785">DUK_TVAL_GET_LIGHTFUNC_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00786">DUK_TVAL_GET_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00792">DUK_TVAL_GET_TAG</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00793">DUK_TVAL_IS_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">DUK_TVAL_IS_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00739">DUK_TVAL_SET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">DUK_TVAL_SET_TVAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duk_propdesc::get</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duk_propdesc::set</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04751">duk_hobject_get_length()</a>.</p>

</div>
</div>
<a id="a96c00dcb0a6804437ee3ba824ce9e9a3" name="a96c00dcb0a6804437ee3ba824ce9e9a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96c00dcb0a6804437ee3ba824ce9e9a3">&#9670;&#160;</a></span>duk_hobject_hasprop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_hasprop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02707">2707</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2707</span>                                                                                                  {</div>
<div class="line"><span class="lineno"> 2708</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 2709</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_key_copy;</div>
<div class="line"><span class="lineno"> 2710</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *obj;</div>
<div class="line"><span class="lineno"> 2711</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key;</div>
<div class="line"><span class="lineno"> 2712</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno"> 2713</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 2714</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 2715</span> </div>
<div class="line"><span class="lineno"> 2716</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;hasprop: thr=%p, obj=%p, key=%p (obj -&gt; %!T, key -&gt; %!T)&quot;</span>,</div>
<div class="line"><span class="lineno"> 2717</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) tv_obj, (<span class="keywordtype">void</span> *) tv_key,</div>
<div class="line"><span class="lineno"> 2718</span>                         (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_obj, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key));</div>
<div class="line"><span class="lineno"> 2719</span> </div>
<div class="line"><span class="lineno"> 2720</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2721</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2722</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2723</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2724</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 2725</span> </div>
<div class="line"><span class="lineno"> 2726</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_key_copy, tv_key);</div>
<div class="line"><span class="lineno"> 2727</span>    tv_key = &amp;tv_key_copy;</div>
<div class="line"><span class="lineno"> 2728</span> </div>
<div class="line"><span class="lineno"> 2729</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2730</span><span class="comment">     *  The &#39;in&#39; operator requires an object as its right hand side,</span></div>
<div class="line"><span class="lineno"> 2731</span><span class="comment">     *  throwing a TypeError unconditionally if this is not the case.</span></div>
<div class="line"><span class="lineno"> 2732</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2733</span><span class="comment">     *  However, lightfuncs need to behave like fully fledged objects</span></div>
<div class="line"><span class="lineno"> 2734</span><span class="comment">     *  here to be maximally transparent, so we need to handle them</span></div>
<div class="line"><span class="lineno"> 2735</span><span class="comment">     *  here.</span></div>
<div class="line"><span class="lineno"> 2736</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2737</span> </div>
<div class="line"><span class="lineno"> 2738</span>    <span class="comment">/* XXX: Refactor key coercion so that it&#39;s only called once.  It can&#39;t</span></div>
<div class="line"><span class="lineno"> 2739</span><span class="comment">     * be trivially lifted here because the object must be type checked</span></div>
<div class="line"><span class="lineno"> 2740</span><span class="comment">     * first.</span></div>
<div class="line"><span class="lineno"> 2741</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2742</span> </div>
<div class="line"><span class="lineno"> 2743</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 2744</span>        obj = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 2745</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2746</span> </div>
<div class="line"><span class="lineno"> 2747</span>        arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2748</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a803cbfe1e33fe5c591d7bec4fd3a6a93">DUK_TVAL_IS_LIGHTFUNC</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 2749</span>        arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 2750</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#af6fda73a2a8716acfbd629877d4ba838">duk__key_is_lightfunc_ownprop</a>(thr, key)) {</div>
<div class="line"><span class="lineno"> 2751</span>            <span class="comment">/* FOUND */</span></div>
<div class="line"><span class="lineno"> 2752</span>            rc = 1;</div>
<div class="line"><span class="lineno"> 2753</span>            <span class="keywordflow">goto</span> pop_and_return;</div>
<div class="line"><span class="lineno"> 2754</span>        }</div>
<div class="line"><span class="lineno"> 2755</span> </div>
<div class="line"><span class="lineno"> 2756</span>        <span class="comment">/* If not found, resume existence check from Function.prototype.</span></div>
<div class="line"><span class="lineno"> 2757</span><span class="comment">         * We can just substitute the value in this case; nothing will</span></div>
<div class="line"><span class="lineno"> 2758</span><span class="comment">         * need the original base value (as would be the case with e.g.</span></div>
<div class="line"><span class="lineno"> 2759</span><span class="comment">         * setters/getters.</span></div>
<div class="line"><span class="lineno"> 2760</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2761</span>        obj = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4131310d50c5b76901abca17ec3dbe6c">DUK_BIDX_FUNCTION_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2762</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2763</span>        <span class="comment">/* Note: unconditional throw */</span></div>
<div class="line"><span class="lineno"> 2764</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is not an object -&gt; reject&quot;</span>));</div>
<div class="line"><span class="lineno"> 2765</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ce64309ea8cbabb810926737da126b2">DUK_STR_INVALID_BASE</a>);</div>
<div class="line"><span class="lineno"> 2766</span>    }</div>
<div class="line"><span class="lineno"> 2767</span> </div>
<div class="line"><span class="lineno"> 2768</span>    <span class="comment">/* XXX: fast path for arrays? */</span></div>
<div class="line"><span class="lineno"> 2769</span> </div>
<div class="line"><span class="lineno"> 2770</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2771</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2772</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(arr_idx);</div>
<div class="line"><span class="lineno"> 2773</span> </div>
<div class="line"><span class="lineno"> 2774</span><span class="preprocessor">#if defined(DUK_USE_ES6_PROXY)</span></div>
<div class="line"><span class="lineno"> 2775</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>(obj))) {</div>
<div class="line"><span class="lineno"> 2776</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_target;</div>
<div class="line"><span class="lineno"> 2777</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> tmp_bool;</div>
<div class="line"><span class="lineno"> 2778</span> </div>
<div class="line"><span class="lineno"> 2779</span>        <span class="comment">/* XXX: the key in &#39;key in obj&#39; is string coerced before we&#39;re called</span></div>
<div class="line"><span class="lineno"> 2780</span><span class="comment">         * (which is the required behavior in E5/E5.1/E6) so the key is a string</span></div>
<div class="line"><span class="lineno"> 2781</span><span class="comment">         * here already.</span></div>
<div class="line"><span class="lineno"> 2782</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2783</span> </div>
<div class="line"><span class="lineno"> 2784</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#ad75bcd78c56fd6f6e62cb28ecc423325">duk__proxy_check_prop</a>(thr, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0c6f0493ae37f4dc0c6543ea2e9cf75e">DUK_STRIDX_HAS</a>, tv_key, &amp;h_target)) {</div>
<div class="line"><span class="lineno"> 2785</span>            <span class="comment">/* [ ... key trap handler ] */</span></div>
<div class="line"><span class="lineno"> 2786</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; proxy object &#39;has&#39; for key %!T&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key));</div>
<div class="line"><span class="lineno"> 2787</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, h_target);  <span class="comment">/* target */</span></div>
<div class="line"><span class="lineno"> 2788</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_key);       <span class="comment">/* P */</span></div>
<div class="line"><span class="lineno"> 2789</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 2 <span class="comment">/*nargs*/</span>);</div>
<div class="line"><span class="lineno"> 2790</span>            tmp_bool = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 2791</span>            <span class="keywordflow">if</span> (!tmp_bool) {</div>
<div class="line"><span class="lineno"> 2792</span>                <span class="comment">/* Target object must be checked for a conflicting</span></div>
<div class="line"><span class="lineno"> 2793</span><span class="comment">                 * non-configurable property.</span></div>
<div class="line"><span class="lineno"> 2794</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno"> 2795</span> </div>
<div class="line"><span class="lineno"> 2796</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, h_target, key, arr_idx, &amp;desc, 0 <span class="comment">/*flags*/</span>)) {  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 2797</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;proxy &#39;has&#39;: target has matching property %!O, check for &quot;</span></div>
<div class="line"><span class="lineno"> 2798</span>                                         <span class="stringliteral">&quot;conflicting property; desc.flags=0x%08lx, &quot;</span></div>
<div class="line"><span class="lineno"> 2799</span>                                         <span class="stringliteral">&quot;desc.get=%p, desc.set=%p&quot;</span>,</div>
<div class="line"><span class="lineno"> 2800</span>                                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a>,</div>
<div class="line"><span class="lineno"> 2801</span>                                         (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>, (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>));</div>
<div class="line"><span class="lineno"> 2802</span>                    <span class="comment">/* XXX: Extensibility check for target uses IsExtensible().  If we</span></div>
<div class="line"><span class="lineno"> 2803</span><span class="comment">                     * implemented the isExtensible trap and didn&#39;t reject proxies as</span></div>
<div class="line"><span class="lineno"> 2804</span><span class="comment">                     * proxy targets, it should be respected here.</span></div>
<div class="line"><span class="lineno"> 2805</span><span class="comment">                     */</span></div>
<div class="line"><span class="lineno"> 2806</span>                    <span class="keywordflow">if</span> (!((desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp;  <span class="comment">/* property is configurable and */</span></div>
<div class="line"><span class="lineno"> 2807</span>                          <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adfd1b77d5152d2f5ef72309ab0bc6c14">DUK_HOBJECT_HAS_EXTENSIBLE</a>(h_target))) {          <span class="comment">/* ... target is extensible */</span></div>
<div class="line"><span class="lineno"> 2808</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#affb31bd71c06bc766cbc175ad9cb13ae">DUK_STR_PROXY_REJECTED</a>);</div>
<div class="line"><span class="lineno"> 2809</span>                    }</div>
<div class="line"><span class="lineno"> 2810</span>                }</div>
<div class="line"><span class="lineno"> 2811</span>            }</div>
<div class="line"><span class="lineno"> 2812</span> </div>
<div class="line"><span class="lineno"> 2813</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a09f116a4bcf486b3359afaa1abf4bf66">duk_pop_2</a>(ctx);  <span class="comment">/* [ key trap_result ] -&gt; [] */</span></div>
<div class="line"><span class="lineno"> 2814</span>            <span class="keywordflow">return</span> tmp_bool;</div>
<div class="line"><span class="lineno"> 2815</span>        }</div>
<div class="line"><span class="lineno"> 2816</span> </div>
<div class="line"><span class="lineno"> 2817</span>        obj = h_target;  <span class="comment">/* resume check from proxy target */</span></div>
<div class="line"><span class="lineno"> 2818</span>    }</div>
<div class="line"><span class="lineno"> 2819</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_ES6_PROXY */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2820</span> </div>
<div class="line"><span class="lineno"> 2821</span>    <span class="comment">/* XXX: inline into a prototype walking loop? */</span></div>
<div class="line"><span class="lineno"> 2822</span> </div>
<div class="line"><span class="lineno"> 2823</span>    rc = <a class="code hl_function" href="#af40cdd9303bf1e8ed2b789b96a58e938">duk__get_propdesc</a>(thr, obj, key, &amp;desc, 0 <span class="comment">/*flags*/</span>);  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 2824</span>    <span class="comment">/* fall through */</span></div>
<div class="line"><span class="lineno"> 2825</span> </div>
<div class="line"><span class="lineno"> 2826</span> pop_and_return:</div>
<div class="line"><span class="lineno"> 2827</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [ key ] -&gt; [] */</span></div>
<div class="line"><span class="lineno"> 2828</span>    <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2829</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0c6f0493ae37f4dc0c6543ea2e9cf75e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0c6f0493ae37f4dc0c6543ea2e9cf75e">DUK_STRIDX_HAS</a></div><div class="ttdeci">#define DUK_STRIDX_HAS</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01089">duktape-1.5.2/src-noline/duktape.c:1089</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_af40cdd9303bf1e8ed2b789b96a58e938"><div class="ttname"><a href="#af40cdd9303bf1e8ed2b789b96a58e938">duk__get_propdesc</a></div><div class="ttdeci">DUK_LOCAL_DECL duk_bool_t duk__get_propdesc(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_propdesc *out_desc, duk_small_uint_t flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01901">duktape-1.8.0/src-separate/duk_hobject_props.c:1901</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06274">duk_hthread::builtins</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01901">duk__get_propdesc()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00162">duk__key_is_lightfunc_ownprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">duk__proxy_check_prop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00143">duk__push_tval_to_hstring_arr_idx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01634">DUK_BIDX_FUNCTION_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12389">duk_call_method()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04803">DUK_HOBJECT_HAS_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19167">duk_pop_2()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duk_push_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02370">DUK_STR_INVALID_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02372">DUK_STR_PROXY_REJECTED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01089">DUK_STRIDX_HAS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duk_to_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00809">DUK_TVAL_IS_LIGHTFUNC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">DUK_TVAL_SET_TVAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duk_propdesc::get</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duk_propdesc::set</a>.</p>

</div>
</div>
<a id="a8aeae7083225409ac72f20e7f86e3be2" name="a8aeae7083225409ac72f20e7f86e3be2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aeae7083225409ac72f20e7f86e3be2">&#9670;&#160;</a></span>duk_hobject_hasprop_raw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_hasprop_raw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02843">2843</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2843</span>                                                                                                      {</div>
<div class="line"><span class="lineno"> 2844</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> <a class="code hl_variable" href="lua-5_83_86_2src_2lstrlib_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>;</div>
<div class="line"><span class="lineno"> 2845</span> </div>
<div class="line"><span class="lineno"> 2846</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2847</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2848</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2849</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2850</span> </div>
<div class="line"><span class="lineno"> 2851</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 2852</span> </div>
<div class="line"><span class="lineno"> 2853</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#af40cdd9303bf1e8ed2b789b96a58e938">duk__get_propdesc</a>(thr, obj, key, &amp;<a class="code hl_variable" href="lua-5_83_86_2src_2lstrlib_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae35c4a4a9303f2d7401c085afd8ade50">DUK_GETDESC_FLAG_IGNORE_PROTOLOOP</a>);  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 2854</span>}</div>
<div class="ttc" id="alua-5_83_86_2src_2lstrlib_8c_html_a7c1d654b7b6114d7a0abc8d351dd1bcd"><div class="ttname"><a href="lua-5_83_86_2src_2lstrlib_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a></div><div class="ttdeci">int dummy</div><div class="ttdef"><b>Definition</b> <a href="lua-5_83_86_2src_2lstrlib_8c_source.html#l01125">lua-5.3.6/src/lstrlib.c:1125</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01901">duk__get_propdesc()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04893">DUK_GETDESC_FLAG_IGNORE_PROTOLOOP</a>, <a class="el" href="lua-5_83_86_2src_2lstrlib_8c_source.html#l01125">dummy</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="acc83f55ea46e4e0dd48c54586a90334a" name="acc83f55ea46e4e0dd48c54586a90334a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc83f55ea46e4e0dd48c54586a90334a">&#9670;&#160;</a></span>duk_hobject_object_get_own_property_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_hobject_object_get_own_property_descriptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04773">4773</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4773</span>                                                                                        {</div>
<div class="line"><span class="lineno"> 4774</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 4775</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *obj;</div>
<div class="line"><span class="lineno"> 4776</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key;</div>
<div class="line"><span class="lineno"> 4777</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> pd;</div>
<div class="line"><span class="lineno"> 4778</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 4779</span> </div>
<div class="line"><span class="lineno"> 4780</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4781</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4782</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4783</span> </div>
<div class="line"><span class="lineno"> 4784</span>    obj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7cf294ff207938d62336ab8be513a98b">duk_require_hobject_or_lfunc_coerce</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 4785</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 4786</span>    key = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada73fbe26eab23a90817c3c2a596950a">duk_require_hstring</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 4787</span> </div>
<div class="line"><span class="lineno"> 4788</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4789</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4790</span> </div>
<div class="line"><span class="lineno"> 4791</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 4792</span> </div>
<div class="line"><span class="lineno"> 4793</span>    rc = <a class="code hl_function" href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a>(thr, obj, key, &amp;pd, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>);</div>
<div class="line"><span class="lineno"> 4794</span>    <span class="keywordflow">if</span> (!rc) {</div>
<div class="line"><span class="lineno"> 4795</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e54c2f552800058d06a34af260ead0f">duk_push_undefined</a>(ctx);</div>
<div class="line"><span class="lineno"> 4796</span> </div>
<div class="line"><span class="lineno"> 4797</span>        <span class="comment">/* [obj key undefined] */</span></div>
<div class="line"><span class="lineno"> 4798</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 4799</span>    }</div>
<div class="line"><span class="lineno"> 4800</span> </div>
<div class="line"><span class="lineno"> 4801</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a81dddbc46ac7dd85b73412b852f708b8">duk_push_object</a>(ctx);</div>
<div class="line"><span class="lineno"> 4802</span> </div>
<div class="line"><span class="lineno"> 4803</span>    <span class="comment">/* [obj key value desc] */</span></div>
<div class="line"><span class="lineno"> 4804</span> </div>
<div class="line"><span class="lineno"> 4805</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac2269c9827ea2869fa5e3db25232ebe5">DUK_PROPDESC_IS_ACCESSOR</a>(&amp;pd)) {</div>
<div class="line"><span class="lineno"> 4806</span>        <span class="comment">/* If a setter/getter is missing (undefined), the descriptor must</span></div>
<div class="line"><span class="lineno"> 4807</span><span class="comment">         * still have the property present with the value &#39;undefined&#39;.</span></div>
<div class="line"><span class="lineno"> 4808</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4809</span>        <span class="keywordflow">if</span> (pd.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>) {</div>
<div class="line"><span class="lineno"> 4810</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, pd.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>);</div>
<div class="line"><span class="lineno"> 4811</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4812</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e54c2f552800058d06a34af260ead0f">duk_push_undefined</a>(ctx);</div>
<div class="line"><span class="lineno"> 4813</span>        }</div>
<div class="line"><span class="lineno"> 4814</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af5276c1cdb3add0cbb0c3647a264e5ed">DUK_STRIDX_GET</a>);</div>
<div class="line"><span class="lineno"> 4815</span>        <span class="keywordflow">if</span> (pd.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>) {</div>
<div class="line"><span class="lineno"> 4816</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, pd.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>);</div>
<div class="line"><span class="lineno"> 4817</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4818</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e54c2f552800058d06a34af260ead0f">duk_push_undefined</a>(ctx);</div>
<div class="line"><span class="lineno"> 4819</span>        }</div>
<div class="line"><span class="lineno"> 4820</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3b2ec31854fea830c53afaf621601ece">DUK_STRIDX_SET</a>);</div>
<div class="line"><span class="lineno"> 4821</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4822</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, -2);  <span class="comment">/* [obj key value desc value] */</span></div>
<div class="line"><span class="lineno"> 4823</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a603bfa0731714c5fdfd93cd5b551d6a5">DUK_STRIDX_VALUE</a>);</div>
<div class="line"><span class="lineno"> 4824</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac5f12385ae5d7bd476b14e326bbe44ac">DUK_PROPDESC_IS_WRITABLE</a>(&amp;pd));</div>
<div class="line"><span class="lineno"> 4825</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a45256f72e5576c8b825bfa98217ed409">DUK_STRIDX_WRITABLE</a>);</div>
<div class="line"><span class="lineno"> 4826</span> </div>
<div class="line"><span class="lineno"> 4827</span>        <span class="comment">/* [obj key value desc] */</span></div>
<div class="line"><span class="lineno"> 4828</span>    }</div>
<div class="line"><span class="lineno"> 4829</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab54f90e854dbe87ba41c3b8b54368ca4">DUK_PROPDESC_IS_ENUMERABLE</a>(&amp;pd));</div>
<div class="line"><span class="lineno"> 4830</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1031a07044b2cfbedbadedeb02f957b5">DUK_STRIDX_ENUMERABLE</a>);</div>
<div class="line"><span class="lineno"> 4831</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#add12a81edcd96fd325a6d59168569f15">DUK_PROPDESC_IS_CONFIGURABLE</a>(&amp;pd));</div>
<div class="line"><span class="lineno"> 4832</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac7b10f08acbb02854165d0044b3223a9">DUK_STRIDX_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 4833</span> </div>
<div class="line"><span class="lineno"> 4834</span>    <span class="comment">/* [obj key value desc] */</span></div>
<div class="line"><span class="lineno"> 4835</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 4836</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1031a07044b2cfbedbadedeb02f957b5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1031a07044b2cfbedbadedeb02f957b5">DUK_STRIDX_ENUMERABLE</a></div><div class="ttdeci">#define DUK_STRIDX_ENUMERABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00990">duktape-1.5.2/src-noline/duktape.c:990</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a10d47af3b4037f03aed29def292d3dda"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_put_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duktape-1.5.2/src-noline/duktape.c:14404</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2c95d944cae60d05c6596ee0cc19d3ee"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_boolean(duk_context *ctx, duk_bool_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duktape-1.5.2/src-noline/duktape.c:17873</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3b2ec31854fea830c53afaf621601ece"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3b2ec31854fea830c53afaf621601ece">DUK_STRIDX_SET</a></div><div class="ttdeci">#define DUK_STRIDX_SET</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01146">duktape-1.5.2/src-noline/duktape.c:1146</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a45256f72e5576c8b825bfa98217ed409"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a45256f72e5576c8b825bfa98217ed409">DUK_STRIDX_WRITABLE</a></div><div class="ttdeci">#define DUK_STRIDX_WRITABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00984">duktape-1.5.2/src-noline/duktape.c:984</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a603bfa0731714c5fdfd93cd5b551d6a5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a603bfa0731714c5fdfd93cd5b551d6a5">DUK_STRIDX_VALUE</a></div><div class="ttdeci">#define DUK_STRIDX_VALUE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00981">duktape-1.5.2/src-noline/duktape.c:981</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7cf294ff207938d62336ab8be513a98b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7cf294ff207938d62336ab8be513a98b">duk_require_hobject_or_lfunc_coerce</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_require_hobject_or_lfunc_coerce(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16524">duktape-1.5.2/src-noline/duktape.c:16524</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a81dddbc46ac7dd85b73412b852f708b8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a81dddbc46ac7dd85b73412b852f708b8">duk_push_object</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_push_object(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18449">duktape-1.5.2/src-noline/duktape.c:18449</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab54f90e854dbe87ba41c3b8b54368ca4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab54f90e854dbe87ba41c3b8b54368ca4">DUK_PROPDESC_IS_ENUMERABLE</a></div><div class="ttdeci">#define DUK_PROPDESC_IS_ENUMERABLE(p)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05148">duktape-1.5.2/src-noline/duktape.c:5148</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac2269c9827ea2869fa5e3db25232ebe5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac2269c9827ea2869fa5e3db25232ebe5">DUK_PROPDESC_IS_ACCESSOR</a></div><div class="ttdeci">#define DUK_PROPDESC_IS_ACCESSOR(p)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05150">duktape-1.5.2/src-noline/duktape.c:5150</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac5f12385ae5d7bd476b14e326bbe44ac"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac5f12385ae5d7bd476b14e326bbe44ac">DUK_PROPDESC_IS_WRITABLE</a></div><div class="ttdeci">#define DUK_PROPDESC_IS_WRITABLE(p)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05147">duktape-1.5.2/src-noline/duktape.c:5147</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac7b10f08acbb02854165d0044b3223a9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac7b10f08acbb02854165d0044b3223a9">DUK_STRIDX_CONFIGURABLE</a></div><div class="ttdeci">#define DUK_STRIDX_CONFIGURABLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00987">duktape-1.5.2/src-noline/duktape.c:987</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_add12a81edcd96fd325a6d59168569f15"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#add12a81edcd96fd325a6d59168569f15">DUK_PROPDESC_IS_CONFIGURABLE</a></div><div class="ttdeci">#define DUK_PROPDESC_IS_CONFIGURABLE(p)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05149">duktape-1.5.2/src-noline/duktape.c:5149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">DUK_GETDESC_FLAG_PUSH_VALUE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">duk_hobject_get_own_propdesc()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05150">DUK_PROPDESC_IS_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05149">DUK_PROPDESC_IS_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05148">DUK_PROPDESC_IS_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05147">DUK_PROPDESC_IS_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duk_push_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18449">duk_push_object()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17848">duk_push_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duk_put_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16524">duk_require_hobject_or_lfunc_coerce()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16292">duk_require_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00987">DUK_STRIDX_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00990">DUK_STRIDX_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01092">DUK_STRIDX_GET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01146">DUK_STRIDX_SET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00981">DUK_STRIDX_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00984">DUK_STRIDX_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duk_propdesc::get</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duk_propdesc::set</a>.</p>

</div>
</div>
<a id="a817fd5cf1d8a37fdf069a1e5d22583db" name="a817fd5cf1d8a37fdf069a1e5d22583db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a817fd5cf1d8a37fdf069a1e5d22583db">&#9670;&#160;</a></span>duk_hobject_object_is_sealed_frozen_helper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_object_is_sealed_frozen_helper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>is_frozen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05930">5930</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 5930</span>                                                                                                                             {</div>
<div class="line"><span class="lineno"> 5931</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno"> 5932</span> </div>
<div class="line"><span class="lineno"> 5933</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5934</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 5935</span> </div>
<div class="line"><span class="lineno"> 5936</span>    <span class="comment">/* Note: no allocation pressure, no need to check refcounts etc */</span></div>
<div class="line"><span class="lineno"> 5937</span> </div>
<div class="line"><span class="lineno"> 5938</span>    <span class="comment">/* must not be extensible */</span></div>
<div class="line"><span class="lineno"> 5939</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adfd1b77d5152d2f5ef72309ab0bc6c14">DUK_HOBJECT_HAS_EXTENSIBLE</a>(obj)) {</div>
<div class="line"><span class="lineno"> 5940</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 5941</span>    }</div>
<div class="line"><span class="lineno"> 5942</span> </div>
<div class="line"><span class="lineno"> 5943</span>    <span class="comment">/* all virtual properties are non-configurable and non-writable */</span></div>
<div class="line"><span class="lineno"> 5944</span> </div>
<div class="line"><span class="lineno"> 5945</span>    <span class="comment">/* entry part must not contain any configurable properties, or</span></div>
<div class="line"><span class="lineno"> 5946</span><span class="comment">     * writable properties (if is_frozen).</span></div>
<div class="line"><span class="lineno"> 5947</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5948</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj); i++) {</div>
<div class="line"><span class="lineno"> 5949</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> flags;</div>
<div class="line"><span class="lineno"> 5950</span> </div>
<div class="line"><span class="lineno"> 5951</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i)) {</div>
<div class="line"><span class="lineno"> 5952</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 5953</span>        }</div>
<div class="line"><span class="lineno"> 5954</span> </div>
<div class="line"><span class="lineno"> 5955</span>        <span class="comment">/* avoid multiple computations of flags address; bypasses macros */</span></div>
<div class="line"><span class="lineno"> 5956</span>        flags = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad2b534c718f0bed901cab77d6ff97cef">DUK_HOBJECT_E_GET_FLAGS</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno"> 5957</span> </div>
<div class="line"><span class="lineno"> 5958</span>        <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) {</div>
<div class="line"><span class="lineno"> 5959</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 5960</span>        }</div>
<div class="line"><span class="lineno"> 5961</span>        <span class="keywordflow">if</span> (is_frozen &amp;&amp;</div>
<div class="line"><span class="lineno"> 5962</span>            !(flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 5963</span>            (flags &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 5964</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 5965</span>        }</div>
<div class="line"><span class="lineno"> 5966</span>    }</div>
<div class="line"><span class="lineno"> 5967</span> </div>
<div class="line"><span class="lineno"> 5968</span>    <span class="comment">/* array part must not contain any non-unused properties, as they would</span></div>
<div class="line"><span class="lineno"> 5969</span><span class="comment">     * be configurable and writable.</span></div>
<div class="line"><span class="lineno"> 5970</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5971</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj); i++) {</div>
<div class="line"><span class="lineno"> 5972</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno"> 5973</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv)) {</div>
<div class="line"><span class="lineno"> 5974</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 5975</span>        }</div>
<div class="line"><span class="lineno"> 5976</span>    }</div>
<div class="line"><span class="lineno"> 5977</span> </div>
<div class="line"><span class="lineno"> 5978</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 5979</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05090">DUK_HOBJECT_E_GET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">DUK_HOBJECT_E_GET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04803">DUK_HOBJECT_HAS_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04867">DUK_PROPDESC_FLAG_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">DUK_TVAL_IS_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="abb8ef6048d33dddf42aa611b4f1bf1b5" name="abb8ef6048d33dddf42aa611b4f1bf1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb8ef6048d33dddf42aa611b4f1bf1b5">&#9670;&#160;</a></span>duk_hobject_object_ownprop_helper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_object_ownprop_helper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>required_desc_flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05834">5834</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 5834</span>                                                                                                                  {</div>
<div class="line"><span class="lineno"> 5835</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 5836</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h_v;</div>
<div class="line"><span class="lineno"> 5837</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_obj;</div>
<div class="line"><span class="lineno"> 5838</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 5839</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> ret;</div>
<div class="line"><span class="lineno"> 5840</span> </div>
<div class="line"><span class="lineno"> 5841</span>    <span class="comment">/* coercion order matters */</span></div>
<div class="line"><span class="lineno"> 5842</span>    h_v = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08a5b25284eaa8cfe960915609061b59">duk_to_hstring</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 5843</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_v != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5844</span> </div>
<div class="line"><span class="lineno"> 5845</span>    h_obj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad71a1b4a7a747956bdc3da53c4426cc3">duk_push_this_coercible_to_object</a>(ctx);</div>
<div class="line"><span class="lineno"> 5846</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5847</span> </div>
<div class="line"><span class="lineno"> 5848</span>    ret = <a class="code hl_function" href="#adbb71022d83eb7ff4b1dd26bfe31c562">duk_hobject_get_own_propdesc</a>(thr, h_obj, h_v, &amp;desc, 0 <span class="comment">/*flags*/</span>);  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 5849</span> </div>
<div class="line"><span class="lineno"> 5850</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, ret &amp;&amp; ((desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; required_desc_flags) == required_desc_flags));</div>
<div class="line"><span class="lineno"> 5851</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 5852</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad71a1b4a7a747956bdc3da53c4426cc3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad71a1b4a7a747956bdc3da53c4426cc3">duk_push_this_coercible_to_object</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_push_this_coercible_to_object(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18183">duktape-1.5.2/src-noline/duktape.c:18183</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01872">duk_hobject_get_own_propdesc()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duk_push_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18183">duk_push_this_coercible_to_object()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17177">duk_to_hstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="af5ecb47e15a5e726fb93fdb8b35fb5bb" name="af5ecb47e15a5e726fb93fdb8b35fb5bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5ecb47e15a5e726fb93fdb8b35fb5bb">&#9670;&#160;</a></span>duk_hobject_object_seal_freeze_helper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_object_seal_freeze_helper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>is_freeze</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l05869">5869</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 5869</span>                                                                                                                  {</div>
<div class="line"><span class="lineno"> 5870</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno"> 5871</span> </div>
<div class="line"><span class="lineno"> 5872</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5873</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5874</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5875</span> </div>
<div class="line"><span class="lineno"> 5876</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 5877</span> </div>
<div class="line"><span class="lineno"> 5878</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 5879</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) obj)) {</div>
<div class="line"><span class="lineno"> 5880</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;attempt to seal/freeze a readonly object, reject&quot;</span>));</div>
<div class="line"><span class="lineno"> 5881</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9fd5ef7ea8638f09a14d13d575bc0580">DUK_STR_NOT_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 5882</span>    }</div>
<div class="line"><span class="lineno"> 5883</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5884</span> </div>
<div class="line"><span class="lineno"> 5885</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 5886</span><span class="comment">     *  Abandon array part because all properties must become non-configurable.</span></div>
<div class="line"><span class="lineno"> 5887</span><span class="comment">     *  Note that this is now done regardless of whether this is always the case</span></div>
<div class="line"><span class="lineno"> 5888</span><span class="comment">     *  (skips check, but performance problem if caller would do this many times</span></div>
<div class="line"><span class="lineno"> 5889</span><span class="comment">     *  for the same object; not likely).</span></div>
<div class="line"><span class="lineno"> 5890</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5891</span> </div>
<div class="line"><span class="lineno"> 5892</span>    <a class="code hl_function" href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a>(thr, obj);</div>
<div class="line"><span class="lineno"> 5893</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(obj) == 0);</div>
<div class="line"><span class="lineno"> 5894</span> </div>
<div class="line"><span class="lineno"> 5895</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a27f3be40c7bdaa1631648a94df571d94">DUK_HOBJECT_GET_ENEXT</a>(obj); i++) {</div>
<div class="line"><span class="lineno"> 5896</span>        duk_uint8_t *fp;</div>
<div class="line"><span class="lineno"> 5897</span> </div>
<div class="line"><span class="lineno"> 5898</span>        <span class="comment">/* since duk__abandon_array_checked() causes a resize, there should be no gaps in keys */</span></div>
<div class="line"><span class="lineno"> 5899</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4fd3ba16ed0f7569ba4717fa1e4df113">DUK_HOBJECT_E_GET_KEY</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i) != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 5900</span> </div>
<div class="line"><span class="lineno"> 5901</span>        <span class="comment">/* avoid multiple computations of flags address; bypasses macros */</span></div>
<div class="line"><span class="lineno"> 5902</span>        fp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a126382c0164e812e3fd60e16f2d631bc">DUK_HOBJECT_E_GET_FLAGS_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, i);</div>
<div class="line"><span class="lineno"> 5903</span>        <span class="keywordflow">if</span> (is_freeze &amp;&amp; !((*fp) &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>)) {</div>
<div class="line"><span class="lineno"> 5904</span>            *fp &amp;= ~(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a> | <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>);</div>
<div class="line"><span class="lineno"> 5905</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5906</span>            *fp &amp;= ~DUK_PROPDESC_FLAG_CONFIGURABLE;</div>
<div class="line"><span class="lineno"> 5907</span>        }</div>
<div class="line"><span class="lineno"> 5908</span>    }</div>
<div class="line"><span class="lineno"> 5909</span> </div>
<div class="line"><span class="lineno"> 5910</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad61fd0a5dfbc369bd88d6fb2d543de41">DUK_HOBJECT_CLEAR_EXTENSIBLE</a>(obj);</div>
<div class="line"><span class="lineno"> 5911</span> </div>
<div class="line"><span class="lineno"> 5912</span>    <span class="comment">/* no need to compact since we already did that in duk__abandon_array_checked()</span></div>
<div class="line"><span class="lineno"> 5913</span><span class="comment">     * (regardless of whether an array part existed or not.</span></div>
<div class="line"><span class="lineno"> 5914</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 5915</span> </div>
<div class="line"><span class="lineno"> 5916</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5917</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a126382c0164e812e3fd60e16f2d631bc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a126382c0164e812e3fd60e16f2d631bc">DUK_HOBJECT_E_GET_FLAGS_PTR</a></div><div class="ttdeci">#define DUK_HOBJECT_E_GET_FLAGS_PTR(heap, h, i)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05091">duktape-1.5.2/src-noline/duktape.c:5091</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad61fd0a5dfbc369bd88d6fb2d543de41"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad61fd0a5dfbc369bd88d6fb2d543de41">DUK_HOBJECT_CLEAR_EXTENSIBLE</a></div><div class="ttdeci">#define DUK_HOBJECT_CLEAR_EXTENSIBLE(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04843">duktape-1.5.2/src-noline/duktape.c:4843</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04843">DUK_HOBJECT_CLEAR_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05091">DUK_HOBJECT_E_GET_FLAGS_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05080">DUK_HOBJECT_E_GET_KEY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05177">DUK_HOBJECT_GET_ENEXT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04867">DUK_PROPDESC_FLAG_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02284">DUK_STR_NOT_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="ab7a4994010b478b931e2aa54532a13dd" name="ab7a4994010b478b931e2aa54532a13dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7a4994010b478b931e2aa54532a13dd">&#9670;&#160;</a></span>duk_hobject_prepare_property_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_prepare_property_descriptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_in</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_defprop_flags</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_idx_value</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> **</td>          <td class="paramname"><span class="paramname"><em>out_getter</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> **</td>          <td class="paramname"><span class="paramname"><em>out_setter</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04854">4854</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4859</span>                                                                       {</div>
<div class="line"><span class="lineno"> 4860</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 4861</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_value = -1;</div>
<div class="line"><span class="lineno"> 4862</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *getter = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 4863</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *setter = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 4864</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_data_desc = 0;</div>
<div class="line"><span class="lineno"> 4865</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> is_acc_desc = 0;</div>
<div class="line"><span class="lineno"> 4866</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> defprop_flags = 0;</div>
<div class="line"><span class="lineno"> 4867</span> </div>
<div class="line"><span class="lineno"> 4868</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4869</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_defprop_flags != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4870</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_idx_value != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4871</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_getter != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4872</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_setter != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4873</span> </div>
<div class="line"><span class="lineno"> 4874</span>    <span class="comment">/* Must be an object, otherwise TypeError (E5.1 Section 8.10.5, step 1). */</span></div>
<div class="line"><span class="lineno"> 4875</span>    idx_in = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1355661e1e9b0215624a7fd04d5f6c09">duk_require_normalize_index</a>(ctx, idx_in);</div>
<div class="line"><span class="lineno"> 4876</span>    (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a>(ctx, idx_in);</div>
<div class="line"><span class="lineno"> 4877</span> </div>
<div class="line"><span class="lineno"> 4878</span>    <span class="comment">/* The coercion order must match the ToPropertyDescriptor() algorithm</span></div>
<div class="line"><span class="lineno"> 4879</span><span class="comment">     * so that side effects in coercion happen in the correct order.</span></div>
<div class="line"><span class="lineno"> 4880</span><span class="comment">     * (This order also happens to be compatible with duk_def_prop(),</span></div>
<div class="line"><span class="lineno"> 4881</span><span class="comment">     * although it doesn&#39;t matter in practice.)</span></div>
<div class="line"><span class="lineno"> 4882</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 4883</span> </div>
<div class="line"><span class="lineno"> 4884</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, idx_in, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a603bfa0731714c5fdfd93cd5b551d6a5">DUK_STRIDX_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 4885</span>        is_data_desc = 1;</div>
<div class="line"><span class="lineno"> 4886</span>        defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a46c19e619ca3e5b33b31ba0c30915138">DUK_DEFPROP_HAVE_VALUE</a>;</div>
<div class="line"><span class="lineno"> 4887</span>        idx_value = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8374e205c714710ac528facf75d4b7ed">duk_get_top_index</a>(ctx);</div>
<div class="line"><span class="lineno"> 4888</span>        <span class="comment">/* Leave &#39;value&#39; on stack */</span></div>
<div class="line"><span class="lineno"> 4889</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4890</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4891</span>    }</div>
<div class="line"><span class="lineno"> 4892</span> </div>
<div class="line"><span class="lineno"> 4893</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, idx_in, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a45256f72e5576c8b825bfa98217ed409">DUK_STRIDX_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 4894</span>        is_data_desc = 1;</div>
<div class="line"><span class="lineno"> 4895</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno"> 4896</span>            defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a77796389f5202e6a3a45efffaa7b08ea">DUK_DEFPROP_HAVE_WRITABLE</a> | <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ae1fc0a38b38ae096fdd456ffec060400">DUK_DEFPROP_WRITABLE</a>;</div>
<div class="line"><span class="lineno"> 4897</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4898</span>            defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a77796389f5202e6a3a45efffaa7b08ea">DUK_DEFPROP_HAVE_WRITABLE</a>;</div>
<div class="line"><span class="lineno"> 4899</span>        }</div>
<div class="line"><span class="lineno"> 4900</span>    }</div>
<div class="line"><span class="lineno"> 4901</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4902</span> </div>
<div class="line"><span class="lineno"> 4903</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, idx_in, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af5276c1cdb3add0cbb0c3647a264e5ed">DUK_STRIDX_GET</a>)) {</div>
<div class="line"><span class="lineno"> 4904</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4905</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_get;</div>
<div class="line"><span class="lineno"> 4906</span> </div>
<div class="line"><span class="lineno"> 4907</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3a3a2905176249b3cb6415b5ae814b31">DUK_TVAL_IS_UNDEFINED</a>(tv)) {</div>
<div class="line"><span class="lineno"> 4908</span>            <span class="comment">/* undefined is accepted */</span></div>
<div class="line"><span class="lineno"> 4909</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(getter == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4910</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4911</span>            <span class="comment">/* NOTE: lightfuncs are coerced to full functions because</span></div>
<div class="line"><span class="lineno"> 4912</span><span class="comment">             * lightfuncs don&#39;t fit into a property value slot.  This</span></div>
<div class="line"><span class="lineno"> 4913</span><span class="comment">             * has some side effects, see test-dev-lightfunc-accessor.js.</span></div>
<div class="line"><span class="lineno"> 4914</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 4915</span>            h_get = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59cf0e371b8a1f16af1b297d361d2373">duk_get_hobject_or_lfunc_coerce</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4916</span>            <span class="keywordflow">if</span> (h_get == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5cddbda72ae6a410b02df36ca04b1897">DUK_HOBJECT_IS_CALLABLE</a>(h_get)) {</div>
<div class="line"><span class="lineno"> 4917</span>                <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno"> 4918</span>            }</div>
<div class="line"><span class="lineno"> 4919</span>            getter = h_get;</div>
<div class="line"><span class="lineno"> 4920</span>        }</div>
<div class="line"><span class="lineno"> 4921</span>        is_acc_desc = 1;</div>
<div class="line"><span class="lineno"> 4922</span>        defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a17869b75ee0c10258d58c5061edb12fa">DUK_DEFPROP_HAVE_GETTER</a>;</div>
<div class="line"><span class="lineno"> 4923</span>        <span class="comment">/* Leave &#39;getter&#39; on stack */</span></div>
<div class="line"><span class="lineno"> 4924</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4925</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4926</span>    }</div>
<div class="line"><span class="lineno"> 4927</span> </div>
<div class="line"><span class="lineno"> 4928</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, idx_in, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3b2ec31854fea830c53afaf621601ece">DUK_STRIDX_SET</a>)) {</div>
<div class="line"><span class="lineno"> 4929</span>        <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4930</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_set;</div>
<div class="line"><span class="lineno"> 4931</span> </div>
<div class="line"><span class="lineno"> 4932</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3a3a2905176249b3cb6415b5ae814b31">DUK_TVAL_IS_UNDEFINED</a>(tv)) {</div>
<div class="line"><span class="lineno"> 4933</span>            <span class="comment">/* undefined is accepted */</span></div>
<div class="line"><span class="lineno"> 4934</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(setter == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 4935</span>        }  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4936</span>            <span class="comment">/* NOTE: lightfuncs are coerced to full functions because</span></div>
<div class="line"><span class="lineno"> 4937</span><span class="comment">             * lightfuncs don&#39;t fit into a property value slot.  This</span></div>
<div class="line"><span class="lineno"> 4938</span><span class="comment">             * has some side effects, see test-dev-lightfunc-accessor.js.</span></div>
<div class="line"><span class="lineno"> 4939</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 4940</span>            h_set = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59cf0e371b8a1f16af1b297d361d2373">duk_get_hobject_or_lfunc_coerce</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 4941</span>            <span class="keywordflow">if</span> (h_set == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5cddbda72ae6a410b02df36ca04b1897">DUK_HOBJECT_IS_CALLABLE</a>(h_set)) {</div>
<div class="line"><span class="lineno"> 4942</span>                <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno"> 4943</span>            }</div>
<div class="line"><span class="lineno"> 4944</span>            setter = h_set;</div>
<div class="line"><span class="lineno"> 4945</span>        }</div>
<div class="line"><span class="lineno"> 4946</span>        is_acc_desc = 1;</div>
<div class="line"><span class="lineno"> 4947</span>        defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab1987664ebbc37a9494e5e8a84a2ddd4">DUK_DEFPROP_HAVE_SETTER</a>;</div>
<div class="line"><span class="lineno"> 4948</span>        <span class="comment">/* Leave &#39;setter&#39; on stack */</span></div>
<div class="line"><span class="lineno"> 4949</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4950</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4951</span>    }</div>
<div class="line"><span class="lineno"> 4952</span> </div>
<div class="line"><span class="lineno"> 4953</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, idx_in, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1031a07044b2cfbedbadedeb02f957b5">DUK_STRIDX_ENUMERABLE</a>)) {</div>
<div class="line"><span class="lineno"> 4954</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno"> 4955</span>            defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#acb50039378c60534e38d3f9aaac57ebf">DUK_DEFPROP_HAVE_ENUMERABLE</a> | <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ac11e106e2064f130b786168dd68eef23">DUK_DEFPROP_ENUMERABLE</a>;</div>
<div class="line"><span class="lineno"> 4956</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4957</span>            defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#acb50039378c60534e38d3f9aaac57ebf">DUK_DEFPROP_HAVE_ENUMERABLE</a>;</div>
<div class="line"><span class="lineno"> 4958</span>        }</div>
<div class="line"><span class="lineno"> 4959</span>    }</div>
<div class="line"><span class="lineno"> 4960</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4961</span> </div>
<div class="line"><span class="lineno"> 4962</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, idx_in, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac7b10f08acbb02854165d0044b3223a9">DUK_STRIDX_CONFIGURABLE</a>)) {</div>
<div class="line"><span class="lineno"> 4963</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, -1)) {</div>
<div class="line"><span class="lineno"> 4964</span>            defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#abc7442877bec8197cedb400303a3db4e">DUK_DEFPROP_HAVE_CONFIGURABLE</a> | <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a6560ba69a124b7fb9ea25794822c7fcd">DUK_DEFPROP_CONFIGURABLE</a>;</div>
<div class="line"><span class="lineno"> 4965</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4966</span>            defprop_flags |= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#abc7442877bec8197cedb400303a3db4e">DUK_DEFPROP_HAVE_CONFIGURABLE</a>;</div>
<div class="line"><span class="lineno"> 4967</span>        }</div>
<div class="line"><span class="lineno"> 4968</span>    }</div>
<div class="line"><span class="lineno"> 4969</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4970</span> </div>
<div class="line"><span class="lineno"> 4971</span>    <span class="keywordflow">if</span> (is_data_desc &amp;&amp; is_acc_desc) {</div>
<div class="line"><span class="lineno"> 4972</span>        <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno"> 4973</span>    }</div>
<div class="line"><span class="lineno"> 4974</span> </div>
<div class="line"><span class="lineno"> 4975</span>    *out_defprop_flags = defprop_flags;</div>
<div class="line"><span class="lineno"> 4976</span>    *out_idx_value = idx_value;</div>
<div class="line"><span class="lineno"> 4977</span>    *out_getter = getter;</div>
<div class="line"><span class="lineno"> 4978</span>    *out_setter = setter;</div>
<div class="line"><span class="lineno"> 4979</span> </div>
<div class="line"><span class="lineno"> 4980</span>    <span class="comment">/* [ ... value? getter? setter? ] */</span></div>
<div class="line"><span class="lineno"> 4981</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4982</span> </div>
<div class="line"><span class="lineno"> 4983</span> type_error:</div>
<div class="line"><span class="lineno"> 4984</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acb674dfd1be6d90c8fc3c7de6e37c278">DUK_STR_INVALID_DESCRIPTOR</a>);</div>
<div class="line"><span class="lineno"> 4985</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a3e3bb369382aab50155c1d18bdf73923"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></div><div class="ttdeci">duk_int_t duk_idx_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01830">duktape-1.5.2/src-noline/duk_config.h:1830</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1355661e1e9b0215624a7fd04d5f6c09"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1355661e1e9b0215624a7fd04d5f6c09">duk_require_normalize_index</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_require_normalize_index(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15092">duktape-1.5.2/src-noline/duktape.c:15092</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a59cf0e371b8a1f16af1b297d361d2373"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59cf0e371b8a1f16af1b297d361d2373">duk_get_hobject_or_lfunc_coerce</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_get_hobject_or_lfunc_coerce(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16483">duktape-1.5.2/src-noline/duktape.c:16483</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5cddbda72ae6a410b02df36ca04b1897"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5cddbda72ae6a410b02df36ca04b1897">DUK_HOBJECT_IS_CALLABLE</a></div><div class="ttdeci">#define DUK_HOBJECT_IS_CALLABLE(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04788">duktape-1.5.2/src-noline/duktape.c:4788</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8374e205c714710ac528facf75d4b7ed"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8374e205c714710ac528facf75d4b7ed">duk_get_top_index</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_get_top_index(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15307">duktape-1.5.2/src-noline/duktape.c:15307</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acb674dfd1be6d90c8fc3c7de6e37c278"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acb674dfd1be6d90c8fc3c7de6e37c278">DUK_STR_INVALID_DESCRIPTOR</a></div><div class="ttdeci">#define DUK_STR_INVALID_DESCRIPTOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02378">duktape-1.5.2/src-noline/duktape.c:2378</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00308">DUK_DEFPROP_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00307">DUK_DEFPROP_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00311">DUK_DEFPROP_HAVE_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00310">DUK_DEFPROP_HAVE_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00313">DUK_DEFPROP_HAVE_GETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00314">DUK_DEFPROP_HAVE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00312">DUK_DEFPROP_HAVE_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00309">DUK_DEFPROP_HAVE_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00306">DUK_DEFPROP_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16483">duk_get_hobject_or_lfunc_coerce()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15307">duk_get_top_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04788">DUK_HOBJECT_IS_CALLABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16305">duk_require_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15092">duk_require_normalize_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02378">DUK_STR_INVALID_DESCRIPTOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00987">DUK_STRIDX_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00990">DUK_STRIDX_ENUMERABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01092">DUK_STRIDX_GET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01146">DUK_STRIDX_SET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00981">DUK_STRIDX_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00984">DUK_STRIDX_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duk_to_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00793">DUK_TVAL_IS_UNDEFINED</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="ae22218a49bd740fa5a47497ce3c547a9" name="ae22218a49bd740fa5a47497ce3c547a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22218a49bd740fa5a47497ce3c547a9">&#9670;&#160;</a></span>duk_hobject_proxy_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_proxy_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> **</td>          <td class="paramname"><span class="paramname"><em>out_target</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> **</td>          <td class="paramname"><span class="paramname"><em>out_handler</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00318">318</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  318</span>                                                                                                                                         {</div>
<div class="line"><span class="lineno">  319</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv_target;</div>
<div class="line"><span class="lineno">  320</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv_handler;</div>
<div class="line"><span class="lineno">  321</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_target;</div>
<div class="line"><span class="lineno">  322</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_handler;</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  325</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  326</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_target != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  327</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_handler != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>    <span class="comment">/* Caller doesn&#39;t need to check exotic proxy behavior (but does so for</span></div>
<div class="line"><span class="lineno">  330</span><span class="comment">     * some fast paths).</span></div>
<div class="line"><span class="lineno">  331</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aff85916aff22bb1c4a5b83e2008cdc30">DUK_LIKELY</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>(obj))) {</div>
<div class="line"><span class="lineno">  333</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  334</span>    }</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>    tv_handler = <a class="code hl_function" href="#a673b9ceeb9130ed7ea44e7aae8a56ea7">duk_hobject_find_existing_entry_tval_ptr</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae144536ceb531e64942b27b91fcef662">DUK_HTHREAD_STRING_INT_HANDLER</a>(thr));</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">if</span> (!tv_handler) {</div>
<div class="line"><span class="lineno">  338</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aea2b6c525982fc5c3b7c596d5dcbe228">DUK_STR_PROXY_REVOKED</a>);</div>
<div class="line"><span class="lineno">  339</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  340</span>    }</div>
<div class="line"><span class="lineno">  341</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv_handler));</div>
<div class="line"><span class="lineno">  342</span>    h_handler = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv_handler);</div>
<div class="line"><span class="lineno">  343</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_handler != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  344</span>    *out_handler = h_handler;</div>
<div class="line"><span class="lineno">  345</span>    tv_handler = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">/* avoid issues with relocation */</span></div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>    tv_target = <a class="code hl_function" href="#a673b9ceeb9130ed7ea44e7aae8a56ea7">duk_hobject_find_existing_entry_tval_ptr</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, obj, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b316c67bc5df849e0f269f1ade357ff">DUK_HTHREAD_STRING_INT_TARGET</a>(thr));</div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">if</span> (!tv_target) {</div>
<div class="line"><span class="lineno">  349</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aea2b6c525982fc5c3b7c596d5dcbe228">DUK_STR_PROXY_REVOKED</a>);</div>
<div class="line"><span class="lineno">  350</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  351</span>    }</div>
<div class="line"><span class="lineno">  352</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv_target));</div>
<div class="line"><span class="lineno">  353</span>    h_target = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv_target);</div>
<div class="line"><span class="lineno">  354</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_target != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  355</span>    *out_target = h_target;</div>
<div class="line"><span class="lineno">  356</span>    tv_target = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">/* avoid issues with relocation */</span></div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  359</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4b316c67bc5df849e0f269f1ade357ff"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b316c67bc5df849e0f269f1ade357ff">DUK_HTHREAD_STRING_INT_TARGET</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_INT_TARGET(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01223">duktape-1.5.2/src-noline/duktape.c:1223</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae144536ceb531e64942b27b91fcef662"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae144536ceb531e64942b27b91fcef662">DUK_HTHREAD_STRING_INT_HANDLER</a></div><div class="ttdeci">#define DUK_HTHREAD_STRING_INT_HANDLER(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01211">duktape-1.5.2/src-noline/duktape.c:1211</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aea2b6c525982fc5c3b7c596d5dcbe228"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aea2b6c525982fc5c3b7c596d5dcbe228">DUK_STR_PROXY_REVOKED</a></div><div class="ttdeci">#define DUK_STR_PROXY_REVOKED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02369">duktape-1.5.2/src-noline/duktape.c:2369</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a673b9ceeb9130ed7ea44e7aae8a56ea7"><div class="ttname"><a href="#a673b9ceeb9130ed7ea44e7aae8a56ea7">duk_hobject_find_existing_entry_tval_ptr</a></div><div class="ttdeci">DUK_INTERNAL duk_tval * duk_hobject_find_existing_entry_tval_ptr(duk_heap *heap, duk_hobject *obj, duk_hstring *key)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01190">duktape-1.8.0/src-separate/duk_hobject_props.c:1190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01190">duk_hobject_find_existing_entry_tval_ptr()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01211">DUK_HTHREAD_STRING_INT_HANDLER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01223">DUK_HTHREAD_STRING_INT_TARGET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02515">DUK_LIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02369">DUK_STR_PROXY_REVOKED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">duk__proxy_check_prop()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00366">duk_hobject_resolve_proxy_target()</a>.</p>

</div>
</div>
<a id="af29ad1e562367c2439a8c906a2e06b25" name="af29ad1e562367c2439a8c906a2e06b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af29ad1e562367c2439a8c906a2e06b25">&#9670;&#160;</a></span>duk_hobject_putprop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk_hobject_putprop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ad3133ae87f4653a6e6183262a5ca3c">duk_tval</a> *</td>          <td class="paramname"><span class="paramname"><em>tv_val</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>throw_flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">3233</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3233</span>                                                                                                                                           {</div>
<div class="line"><span class="lineno"> 3234</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 3235</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_obj_copy;</div>
<div class="line"><span class="lineno"> 3236</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_key_copy;</div>
<div class="line"><span class="lineno"> 3237</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> tv_val_copy;</div>
<div class="line"><span class="lineno"> 3238</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *orig = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">/* NULL if tv_obj is primitive */</span></div>
<div class="line"><span class="lineno"> 3239</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *curr;</div>
<div class="line"><span class="lineno"> 3240</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *key = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 3241</span>    <a class="code hl_struct" href="structduk__propdesc.html">duk_propdesc</a> desc;</div>
<div class="line"><span class="lineno"> 3242</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 3243</span>    duk_uint32_t arr_idx;</div>
<div class="line"><span class="lineno"> 3244</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> rc;</div>
<div class="line"><span class="lineno"> 3245</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> e_idx;</div>
<div class="line"><span class="lineno"> 3246</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> sanity;</div>
<div class="line"><span class="lineno"> 3247</span>    duk_uint32_t new_array_length = 0;  <span class="comment">/* 0 = no update */</span></div>
<div class="line"><span class="lineno"> 3248</span> </div>
<div class="line"><span class="lineno"> 3249</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;putprop: thr=%p, obj=%p, key=%p, val=%p, throw=%ld &quot;</span></div>
<div class="line"><span class="lineno"> 3250</span>                         <span class="stringliteral">&quot;(obj -&gt; %!T, key -&gt; %!T, val -&gt; %!T)&quot;</span>,</div>
<div class="line"><span class="lineno"> 3251</span>                         (<span class="keywordtype">void</span> *) thr, (<span class="keywordtype">void</span> *) tv_obj, (<span class="keywordtype">void</span> *) tv_key, (<span class="keywordtype">void</span> *) tv_val,</div>
<div class="line"><span class="lineno"> 3252</span>                         (<span class="keywordtype">long</span>) throw_flag, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_obj, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_val));</div>
<div class="line"><span class="lineno"> 3253</span> </div>
<div class="line"><span class="lineno"> 3254</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3255</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr-&gt;heap != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3256</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3257</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3258</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3259</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3260</span> </div>
<div class="line"><span class="lineno"> 3261</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a802bd8a4d2388ccfc575a06fef65c247">DUK_ASSERT_VALSTACK_SPACE</a>(thr, <a class="code hl_define" href="#aef2819bab4dfb076e2c0c1ab8abbe717">DUK__VALSTACK_SPACE</a>);</div>
<div class="line"><span class="lineno"> 3262</span> </div>
<div class="line"><span class="lineno"> 3263</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3264</span><span class="comment">     *  Make a copy of tv_obj, tv_key, and tv_val to avoid any issues of</span></div>
<div class="line"><span class="lineno"> 3265</span><span class="comment">     *  them being invalidated by a valstack resize.</span></div>
<div class="line"><span class="lineno"> 3266</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 3267</span><span class="comment">     *  XXX: this is an overkill for some paths, so optimize this later</span></div>
<div class="line"><span class="lineno"> 3268</span><span class="comment">     *  (or maybe switch to a stack arguments model entirely).</span></div>
<div class="line"><span class="lineno"> 3269</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3270</span> </div>
<div class="line"><span class="lineno"> 3271</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_obj_copy, tv_obj);</div>
<div class="line"><span class="lineno"> 3272</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_key_copy, tv_key);</div>
<div class="line"><span class="lineno"> 3273</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(&amp;tv_val_copy, tv_val);</div>
<div class="line"><span class="lineno"> 3274</span>    tv_obj = &amp;tv_obj_copy;</div>
<div class="line"><span class="lineno"> 3275</span>    tv_key = &amp;tv_key_copy;</div>
<div class="line"><span class="lineno"> 3276</span>    tv_val = &amp;tv_val_copy;</div>
<div class="line"><span class="lineno"> 3277</span> </div>
<div class="line"><span class="lineno"> 3278</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3279</span><span class="comment">     *  Coercion and fast path processing.</span></div>
<div class="line"><span class="lineno"> 3280</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3281</span> </div>
<div class="line"><span class="lineno"> 3282</span>    <span class="keywordflow">switch</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a51bb9f80806712cd8d73dcebb5e8d7b3">DUK_TVAL_GET_TAG</a>(tv_obj)) {</div>
<div class="line"><span class="lineno"> 3283</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa372dbdc4b97deff3bab22c5210a8d63">DUK_TAG_UNDEFINED</a>:</div>
<div class="line"><span class="lineno"> 3284</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a194c60e7c6796a265a150f8fcfb15c1f">DUK_TAG_NULL</a>: {</div>
<div class="line"><span class="lineno"> 3285</span>        <span class="comment">/* Note: unconditional throw */</span></div>
<div class="line"><span class="lineno"> 3286</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is undefined or null -&gt; reject (object=%!iT)&quot;</span>,</div>
<div class="line"><span class="lineno"> 3287</span>                             (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_obj));</div>
<div class="line"><span class="lineno"> 3288</span><span class="preprocessor">#if defined(DUK_USE_PARANOID_ERRORS)</span></div>
<div class="line"><span class="lineno"> 3289</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ce64309ea8cbabb810926737da126b2">DUK_STR_INVALID_BASE</a>);</div>
<div class="line"><span class="lineno"> 3290</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3291</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9839be13bfece6a773056f3ca73ba830">DUK_ERROR_FMT2</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a02cde94a668a996bb017286a38c7e658">DUK_ERR_TYPE_ERROR</a>, <span class="stringliteral">&quot;cannot write property %s of %s&quot;</span>,</div>
<div class="line"><span class="lineno"> 3292</span>                       <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_key), <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_obj));</div>
<div class="line"><span class="lineno"> 3293</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3294</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 3295</span>    }</div>
<div class="line"><span class="lineno"> 3296</span> </div>
<div class="line"><span class="lineno"> 3297</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaecdcd7d7bb1c82f876844331af3e7dd">DUK_TAG_BOOLEAN</a>: {</div>
<div class="line"><span class="lineno"> 3298</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a boolean, start lookup from boolean prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 3299</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9aa54684412d0e4d3cf93a13e7133501">DUK_BIDX_BOOLEAN_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 3300</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3301</span>    }</div>
<div class="line"><span class="lineno"> 3302</span> </div>
<div class="line"><span class="lineno"> 3303</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5b7fd1ec74b79ad25e300ab8bef82a">DUK_TAG_STRING</a>: {</div>
<div class="line"><span class="lineno"> 3304</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a668fe43ca9630a9e9c8b9a511798652d">DUK_TVAL_GET_STRING</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 3305</span> </div>
<div class="line"><span class="lineno"> 3306</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3307</span><span class="comment">         *  Note: currently no fast path for array index writes.</span></div>
<div class="line"><span class="lineno"> 3308</span><span class="comment">         *  They won&#39;t be possible anyway as strings are immutable.</span></div>
<div class="line"><span class="lineno"> 3309</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3310</span> </div>
<div class="line"><span class="lineno"> 3311</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3312</span>        arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 3313</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3314</span> </div>
<div class="line"><span class="lineno"> 3315</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 3316</span>            <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3317</span>        }</div>
<div class="line"><span class="lineno"> 3318</span> </div>
<div class="line"><span class="lineno"> 3319</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 3320</span>            arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(h)) {</div>
<div class="line"><span class="lineno"> 3321</span>            <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3322</span>        }</div>
<div class="line"><span class="lineno"> 3323</span> </div>
<div class="line"><span class="lineno"> 3324</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a string, start lookup from string prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 3325</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a54ce0c48ba51a440153245a405e9598d">DUK_BIDX_STRING_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 3326</span>        <span class="keywordflow">goto</span> lookup;  <span class="comment">/* avoid double coercion */</span></div>
<div class="line"><span class="lineno"> 3327</span>    }</div>
<div class="line"><span class="lineno"> 3328</span> </div>
<div class="line"><span class="lineno"> 3329</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aadbbb32aa10b98e1f373906d1cef0c57">DUK_TAG_OBJECT</a>: {</div>
<div class="line"><span class="lineno"> 3330</span>        orig = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 3331</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(orig != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3332</span> </div>
<div class="line"><span class="lineno"> 3333</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 3334</span>        <span class="comment">/* With this check in place fast paths won&#39;t need read-only</span></div>
<div class="line"><span class="lineno"> 3335</span><span class="comment">         * object checks.  This is technically incorrect if there are</span></div>
<div class="line"><span class="lineno"> 3336</span><span class="comment">         * setters that cause no writes to ROM objects, but current</span></div>
<div class="line"><span class="lineno"> 3337</span><span class="comment">         * built-ins don&#39;t have such setters.</span></div>
<div class="line"><span class="lineno"> 3338</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3339</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) orig)) {</div>
<div class="line"><span class="lineno"> 3340</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;attempt to putprop on read-only target object&quot;</span>));</div>
<div class="line"><span class="lineno"> 3341</span>            <span class="keywordflow">goto</span> fail_not_writable_no_pop;  <span class="comment">/* Must avoid duk_pop() in exit path */</span></div>
<div class="line"><span class="lineno"> 3342</span>        }</div>
<div class="line"><span class="lineno"> 3343</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3344</span> </div>
<div class="line"><span class="lineno"> 3345</span>        <span class="comment">/* The fast path for array property put is not fully compliant:</span></div>
<div class="line"><span class="lineno"> 3346</span><span class="comment">         * If one places conflicting number-indexed properties into</span></div>
<div class="line"><span class="lineno"> 3347</span><span class="comment">         * Array.prototype (for example, a non-writable Array.prototype[7])</span></div>
<div class="line"><span class="lineno"> 3348</span><span class="comment">         * the fast path will incorrectly ignore them.</span></div>
<div class="line"><span class="lineno"> 3349</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 3350</span><span class="comment">         * This fast path could be made compliant by falling through</span></div>
<div class="line"><span class="lineno"> 3351</span><span class="comment">         * to the slow path if the previous value was UNUSED.  This would</span></div>
<div class="line"><span class="lineno"> 3352</span><span class="comment">         * also remove the need to check for extensibility.  Right now a</span></div>
<div class="line"><span class="lineno"> 3353</span><span class="comment">         * non-extensible array is slower than an extensible one as far</span></div>
<div class="line"><span class="lineno"> 3354</span><span class="comment">         * as writes are concerned.</span></div>
<div class="line"><span class="lineno"> 3355</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 3356</span><span class="comment">         * The fast path behavior is documented in more detail here:</span></div>
<div class="line"><span class="lineno"> 3357</span><span class="comment">         * tests/ecmascript/test-misc-array-fast-write.js</span></div>
<div class="line"><span class="lineno"> 3358</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3359</span> </div>
<div class="line"><span class="lineno"> 3360</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a43e8e6ca7cbcc3fa724988f3c39e7122">duk__putprop_shallow_fastpath_array_tval</a>(thr, orig, tv_key, tv_val, &amp;desc) != 0) {</div>
<div class="line"><span class="lineno"> 3361</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;array fast path success&quot;</span>));</div>
<div class="line"><span class="lineno"> 3362</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 3363</span>        }</div>
<div class="line"><span class="lineno"> 3364</span> </div>
<div class="line"><span class="lineno"> 3365</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#ad8dbd6e748306626201ae4c51a25e489">duk__putprop_fastpath_bufobj_tval</a>(thr, orig, tv_key, tv_val) != 0) {</div>
<div class="line"><span class="lineno"> 3366</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base is bufobj, key is a number, bufferobject fast path&quot;</span>));</div>
<div class="line"><span class="lineno"> 3367</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 3368</span>        }</div>
<div class="line"><span class="lineno"> 3369</span> </div>
<div class="line"><span class="lineno"> 3370</span><span class="preprocessor">#if defined(DUK_USE_ES6_PROXY)</span></div>
<div class="line"><span class="lineno"> 3371</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>(orig))) {</div>
<div class="line"><span class="lineno"> 3372</span>            <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_target;</div>
<div class="line"><span class="lineno"> 3373</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> tmp_bool;</div>
<div class="line"><span class="lineno"> 3374</span> </div>
<div class="line"><span class="lineno"> 3375</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="#ad75bcd78c56fd6f6e62cb28ecc423325">duk__proxy_check_prop</a>(thr, orig, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3b2ec31854fea830c53afaf621601ece">DUK_STRIDX_SET</a>, tv_key, &amp;h_target)) {</div>
<div class="line"><span class="lineno"> 3376</span>                <span class="comment">/* -&gt; [ ... trap handler ] */</span></div>
<div class="line"><span class="lineno"> 3377</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;-&gt; proxy object &#39;set&#39; for key %!T&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_key));</div>
<div class="line"><span class="lineno"> 3378</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, h_target);  <span class="comment">/* target */</span></div>
<div class="line"><span class="lineno"> 3379</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_key);       <span class="comment">/* P */</span></div>
<div class="line"><span class="lineno"> 3380</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_val);       <span class="comment">/* V */</span></div>
<div class="line"><span class="lineno"> 3381</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_obj);       <span class="comment">/* Receiver: Proxy object */</span></div>
<div class="line"><span class="lineno"> 3382</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 4 <span class="comment">/*nargs*/</span>);</div>
<div class="line"><span class="lineno"> 3383</span>                tmp_bool = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 3384</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 3385</span>                <span class="keywordflow">if</span> (!tmp_bool) {</div>
<div class="line"><span class="lineno"> 3386</span>                    <span class="keywordflow">goto</span> fail_proxy_rejected;</div>
<div class="line"><span class="lineno"> 3387</span>                }</div>
<div class="line"><span class="lineno"> 3388</span> </div>
<div class="line"><span class="lineno"> 3389</span>                <span class="comment">/* Target object must be checked for a conflicting</span></div>
<div class="line"><span class="lineno"> 3390</span><span class="comment">                 * non-configurable property.</span></div>
<div class="line"><span class="lineno"> 3391</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno"> 3392</span>                arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 3393</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3394</span> </div>
<div class="line"><span class="lineno"> 3395</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, h_target, key, arr_idx, &amp;desc, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a23aff6b1a38be73f90b2415a8b4acc62">DUK_GETDESC_FLAG_PUSH_VALUE</a>)) {</div>
<div class="line"><span class="lineno"> 3396</span>                    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv_targ = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 3397</span>                    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> datadesc_reject;</div>
<div class="line"><span class="lineno"> 3398</span>                    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> accdesc_reject;</div>
<div class="line"><span class="lineno"> 3399</span> </div>
<div class="line"><span class="lineno"> 3400</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;proxy &#39;set&#39;: target has matching property %!O, check for &quot;</span></div>
<div class="line"><span class="lineno"> 3401</span>                                         <span class="stringliteral">&quot;conflicting property; tv_val=%!T, tv_targ=%!T, desc.flags=0x%08lx, &quot;</span></div>
<div class="line"><span class="lineno"> 3402</span>                                         <span class="stringliteral">&quot;desc.get=%p, desc.set=%p&quot;</span>,</div>
<div class="line"><span class="lineno"> 3403</span>                                         (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) key, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_val, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv_targ,</div>
<div class="line"><span class="lineno"> 3404</span>                                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a>,</div>
<div class="line"><span class="lineno"> 3405</span>                                         (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a47fcfb993ae0dccdabdeec5f0c1a9aa9">get</a>, (<span class="keywordtype">void</span> *) desc.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a>));</div>
<div class="line"><span class="lineno"> 3406</span> </div>
<div class="line"><span class="lineno"> 3407</span>                    datadesc_reject = !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3408</span>                                      !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3409</span>                                      !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3410</span>                                      !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b306580fab6a279a17cd2232f980d96">duk_js_samevalue</a>(tv_val, tv_targ);</div>
<div class="line"><span class="lineno"> 3411</span>                    accdesc_reject = (desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3412</span>                                     !(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8a49801d7f77ad3b6f331d82e3887016">DUK_PROPDESC_FLAG_CONFIGURABLE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3413</span>                                     (desc.<a class="code hl_variable" href="structduk__propdesc.html#a1c98a99424e220e54b41e7d1cf820d65">set</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3414</span>                    <span class="keywordflow">if</span> (datadesc_reject || accdesc_reject) {</div>
<div class="line"><span class="lineno"> 3415</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#affb31bd71c06bc766cbc175ad9cb13ae">DUK_STR_PROXY_REJECTED</a>);</div>
<div class="line"><span class="lineno"> 3416</span>                    }</div>
<div class="line"><span class="lineno"> 3417</span> </div>
<div class="line"><span class="lineno"> 3418</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a09f116a4bcf486b3359afaa1abf4bf66">duk_pop_2</a>(ctx);</div>
<div class="line"><span class="lineno"> 3419</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3420</span>                    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 3421</span>                }</div>
<div class="line"><span class="lineno"> 3422</span>                <span class="keywordflow">return</span> 1;  <span class="comment">/* success */</span></div>
<div class="line"><span class="lineno"> 3423</span>            }</div>
<div class="line"><span class="lineno"> 3424</span> </div>
<div class="line"><span class="lineno"> 3425</span>            orig = h_target;  <span class="comment">/* resume write to target */</span></div>
<div class="line"><span class="lineno"> 3426</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2730ed3b8ede880f25dd33ebb2270d09">DUK_TVAL_SET_OBJECT</a>(tv_obj, orig);</div>
<div class="line"><span class="lineno"> 3427</span>        }</div>
<div class="line"><span class="lineno"> 3428</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_ES6_PROXY */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3429</span> </div>
<div class="line"><span class="lineno"> 3430</span>        curr = orig;</div>
<div class="line"><span class="lineno"> 3431</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3432</span>    }</div>
<div class="line"><span class="lineno"> 3433</span> </div>
<div class="line"><span class="lineno"> 3434</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2a83c4fe6b8335cbe69d35050bfb3a1">DUK_TAG_BUFFER</a>: {</div>
<div class="line"><span class="lineno"> 3435</span>        <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a422dc96860bacd6ed951234bf2eb5ca1">DUK_TVAL_GET_BUFFER</a>(tv_obj);</div>
<div class="line"><span class="lineno"> 3436</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> pop_count = 0;</div>
<div class="line"><span class="lineno"> 3437</span> </div>
<div class="line"><span class="lineno"> 3438</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3439</span><span class="comment">         *  Because buffer values may be looped over and read/written</span></div>
<div class="line"><span class="lineno"> 3440</span><span class="comment">         *  from, an array index fast path is important.</span></div>
<div class="line"><span class="lineno"> 3441</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3442</span> </div>
<div class="line"><span class="lineno"> 3443</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 3444</span>        <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_key)) {</div>
<div class="line"><span class="lineno"> 3445</span>            arr_idx = duk__tval_fastint_to_arr_idx(tv_key);</div>
<div class="line"><span class="lineno"> 3446</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a fast-path fastint; arr_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3447</span>            pop_count = 0;</div>
<div class="line"><span class="lineno"> 3448</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3449</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3450</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv_key)) {</div>
<div class="line"><span class="lineno"> 3451</span>            arr_idx = <a class="code hl_function" href="#ab8f68bcfbc1bf7ab5162b82e783422dd">duk__tval_number_to_arr_idx</a>(tv_key);</div>
<div class="line"><span class="lineno"> 3452</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a fast-path number; arr_idx %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3453</span>            pop_count = 0;</div>
<div class="line"><span class="lineno"> 3454</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3455</span>            arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 3456</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3457</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a non-fast-path number; after &quot;</span></div>
<div class="line"><span class="lineno"> 3458</span>                                 <span class="stringliteral">&quot;coercion key is %!T, arr_idx %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 3459</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1), (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3460</span>            pop_count = 1;</div>
<div class="line"><span class="lineno"> 3461</span>        }</div>
<div class="line"><span class="lineno"> 3462</span> </div>
<div class="line"><span class="lineno"> 3463</span>        <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 3464</span>            arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a>(h)) {</div>
<div class="line"><span class="lineno"> 3465</span>            duk_uint8_t *data;</div>
<div class="line"><span class="lineno"> 3466</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;writing to buffer data at index %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3467</span>            data = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;heap, h);</div>
<div class="line"><span class="lineno"> 3468</span> </div>
<div class="line"><span class="lineno"> 3469</span>            <span class="comment">/* XXX: duk_to_int() ensures we&#39;ll get 8 lowest bits as</span></div>
<div class="line"><span class="lineno"> 3470</span><span class="comment">             * as input is within duk_int_t range (capped outside it).</span></div>
<div class="line"><span class="lineno"> 3471</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3472</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 3473</span>            <span class="comment">/* Buffer writes are often integers. */</span></div>
<div class="line"><span class="lineno"> 3474</span>            <span class="keywordflow">if</span> (DUK_TVAL_IS_FASTINT(tv_val)) {</div>
<div class="line"><span class="lineno"> 3475</span>                data[arr_idx] = (duk_uint8_t) DUK_TVAL_GET_FASTINT_U32(tv_val);</div>
<div class="line"><span class="lineno"> 3476</span>            }</div>
<div class="line"><span class="lineno"> 3477</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3478</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3479</span>            {</div>
<div class="line"><span class="lineno"> 3480</span>                <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_val);</div>
<div class="line"><span class="lineno"> 3481</span>                data[arr_idx] = (duk_uint8_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 3482</span>                pop_count++;</div>
<div class="line"><span class="lineno"> 3483</span>            }</div>
<div class="line"><span class="lineno"> 3484</span> </div>
<div class="line"><span class="lineno"> 3485</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaccb78cf03473e5aafa6677a4eca8447">duk_pop_n</a>(ctx, pop_count);</div>
<div class="line"><span class="lineno"> 3486</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: success (buffer data write)&quot;</span>));</div>
<div class="line"><span class="lineno"> 3487</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 3488</span>        }</div>
<div class="line"><span class="lineno"> 3489</span> </div>
<div class="line"><span class="lineno"> 3490</span>        <span class="keywordflow">if</span> (pop_count == 0) {</div>
<div class="line"><span class="lineno"> 3491</span>            <span class="comment">/* This is a pretty awkward control flow, but we need to recheck the</span></div>
<div class="line"><span class="lineno"> 3492</span><span class="comment">             * key coercion here.</span></div>
<div class="line"><span class="lineno"> 3493</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3494</span>            arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 3495</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3496</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object buffer, key is a non-fast-path number; after &quot;</span></div>
<div class="line"><span class="lineno"> 3497</span>                                 <span class="stringliteral">&quot;coercion key is %!T, arr_idx %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 3498</span>                                 (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, -1), (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3499</span>        }</div>
<div class="line"><span class="lineno"> 3500</span> </div>
<div class="line"><span class="lineno"> 3501</span>        <span class="keywordflow">if</span> (key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr) ||</div>
<div class="line"><span class="lineno"> 3502</span>            key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4121da520b7e14dd0314834a7792d559">DUK_HTHREAD_STRING_BYTE_LENGTH</a>(thr) ||</div>
<div class="line"><span class="lineno"> 3503</span>            key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf5e0c594f28422489a653531fc91634">DUK_HTHREAD_STRING_BYTE_OFFSET</a>(thr) ||</div>
<div class="line"><span class="lineno"> 3504</span>            key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a01789bdab29bc7250d310ba52598d06e">DUK_HTHREAD_STRING_BYTES_PER_ELEMENT</a>(thr)) {</div>
<div class="line"><span class="lineno"> 3505</span>            <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3506</span>        }</div>
<div class="line"><span class="lineno"> 3507</span> </div>
<div class="line"><span class="lineno"> 3508</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a buffer, start lookup from buffer prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 3509</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa4cb5856bd471bdb1e38506a814c410">DUK_BIDX_BUFFER_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 3510</span>        <span class="keywordflow">goto</span> lookup;  <span class="comment">/* avoid double coercion */</span></div>
<div class="line"><span class="lineno"> 3511</span>    }</div>
<div class="line"><span class="lineno"> 3512</span> </div>
<div class="line"><span class="lineno"> 3513</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0dc76fbf6e639aa47997317e4466997f">DUK_TAG_POINTER</a>: {</div>
<div class="line"><span class="lineno"> 3514</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a pointer, start lookup from pointer prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 3515</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3d1a610c9cc8624a2f0a8b4df671a472">DUK_BIDX_POINTER_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 3516</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3517</span>    }</div>
<div class="line"><span class="lineno"> 3518</span> </div>
<div class="line"><span class="lineno"> 3519</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afbc705d5de3fe9562cadf9c94bf30066">DUK_TAG_LIGHTFUNC</a>: {</div>
<div class="line"><span class="lineno"> 3520</span>        <span class="comment">/* All lightfunc own properties are non-writable and the lightfunc</span></div>
<div class="line"><span class="lineno"> 3521</span><span class="comment">         * is considered non-extensible.  However, the write may be captured</span></div>
<div class="line"><span class="lineno"> 3522</span><span class="comment">         * by an inherited setter which means we can&#39;t stop the lookup here.</span></div>
<div class="line"><span class="lineno"> 3523</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3524</span> </div>
<div class="line"><span class="lineno"> 3525</span>        arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 3526</span> </div>
<div class="line"><span class="lineno"> 3527</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#af6fda73a2a8716acfbd629877d4ba838">duk__key_is_lightfunc_ownprop</a>(thr, key)) {</div>
<div class="line"><span class="lineno"> 3528</span>            <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3529</span>        }</div>
<div class="line"><span class="lineno"> 3530</span> </div>
<div class="line"><span class="lineno"> 3531</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a lightfunc, start lookup from function prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 3532</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4131310d50c5b76901abca17ec3dbe6c">DUK_BIDX_FUNCTION_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 3533</span>        <span class="keywordflow">goto</span> lookup;  <span class="comment">/* avoid double coercion */</span></div>
<div class="line"><span class="lineno"> 3534</span>    }</div>
<div class="line"><span class="lineno"> 3535</span> </div>
<div class="line"><span class="lineno"> 3536</span><span class="preprocessor">#if defined(DUK_USE_FASTINT)</span></div>
<div class="line"><span class="lineno"> 3537</span>    <span class="keywordflow">case</span> DUK_TAG_FASTINT:</div>
<div class="line"><span class="lineno"> 3538</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3539</span>    <span class="keywordflow">default</span>: {</div>
<div class="line"><span class="lineno"> 3540</span>        <span class="comment">/* number */</span></div>
<div class="line"><span class="lineno"> 3541</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;base object is a number, start lookup from number prototype&quot;</span>));</div>
<div class="line"><span class="lineno"> 3542</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv_obj));</div>
<div class="line"><span class="lineno"> 3543</span>        curr = thr-&gt;builtins[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a81950493451ab764f402c43ec5633e0d">DUK_BIDX_NUMBER_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 3544</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3545</span>    }</div>
<div class="line"><span class="lineno"> 3546</span>    }</div>
<div class="line"><span class="lineno"> 3547</span> </div>
<div class="line"><span class="lineno"> 3548</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3549</span>    arr_idx = <a class="code hl_function" href="#a73da7a1cccb15fa2b83f4df268badf2a">duk__push_tval_to_hstring_arr_idx</a>(ctx, tv_key, &amp;key);</div>
<div class="line"><span class="lineno"> 3550</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(key != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3551</span> </div>
<div class="line"><span class="lineno"> 3552</span> lookup:</div>
<div class="line"><span class="lineno"> 3553</span> </div>
<div class="line"><span class="lineno"> 3554</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3555</span><span class="comment">     *  Check whether the property already exists in the prototype chain.</span></div>
<div class="line"><span class="lineno"> 3556</span><span class="comment">     *  Note that the actual write goes into the original base object</span></div>
<div class="line"><span class="lineno"> 3557</span><span class="comment">     *  (except if an accessor property captures the write).</span></div>
<div class="line"><span class="lineno"> 3558</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3559</span> </div>
<div class="line"><span class="lineno"> 3560</span>    <span class="comment">/* [key] */</span></div>
<div class="line"><span class="lineno"> 3561</span> </div>
<div class="line"><span class="lineno"> 3562</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(curr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3563</span>    sanity = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a958816bc82736204d56315f8ca291b77">DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</a>;</div>
<div class="line"><span class="lineno"> 3564</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 3565</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, curr, key, arr_idx, &amp;desc, 0 <span class="comment">/*flags*/</span>)) {  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 3566</span>            <span class="keywordflow">goto</span> next_in_chain;</div>
<div class="line"><span class="lineno"> 3567</span>        }</div>
<div class="line"><span class="lineno"> 3568</span> </div>
<div class="line"><span class="lineno"> 3569</span>        <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4df139157e1506881ed1fb3fb3e1c16d">DUK_PROPDESC_FLAG_ACCESSOR</a>) {</div>
<div class="line"><span class="lineno"> 3570</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3571</span><span class="comment">             *  Found existing accessor property (own or inherited).</span></div>
<div class="line"><span class="lineno"> 3572</span><span class="comment">             *  Call setter with &#39;this&#39; set to orig, and value as the only argument.</span></div>
<div class="line"><span class="lineno"> 3573</span><span class="comment">             *  Setter calls are OK even for ROM objects.</span></div>
<div class="line"><span class="lineno"> 3574</span><span class="comment">             *</span></div>
<div class="line"><span class="lineno"> 3575</span><span class="comment">             *  Note: no exotic arguments object behavior, because [[Put]] never</span></div>
<div class="line"><span class="lineno"> 3576</span><span class="comment">             *  calls [[DefineOwnProperty]] (E5 Section 8.12.5, step 5.b).</span></div>
<div class="line"><span class="lineno"> 3577</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3578</span> </div>
<div class="line"><span class="lineno"> 3579</span>            <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *setter;</div>
<div class="line"><span class="lineno"> 3580</span> </div>
<div class="line"><span class="lineno"> 3581</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;put to an own or inherited accessor, calling setter&quot;</span>));</div>
<div class="line"><span class="lineno"> 3582</span> </div>
<div class="line"><span class="lineno"> 3583</span>            setter = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4d8c928185f0fc7ff5ba5cf58ef35b99">DUK_HOBJECT_E_GET_VALUE_SETTER</a>(thr-&gt;heap, curr, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 3584</span>            <span class="keywordflow">if</span> (!setter) {</div>
<div class="line"><span class="lineno"> 3585</span>                <span class="keywordflow">goto</span> fail_no_setter;</div>
<div class="line"><span class="lineno"> 3586</span>            }</div>
<div class="line"><span class="lineno"> 3587</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, setter);</div>
<div class="line"><span class="lineno"> 3588</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_obj);  <span class="comment">/* note: original, uncoerced base */</span></div>
<div class="line"><span class="lineno"> 3589</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_val);  <span class="comment">/* [key setter this val] */</span></div>
<div class="line"><span class="lineno"> 3590</span><span class="preprocessor">#ifdef DUK_USE_NONSTD_SETTER_KEY_ARGUMENT</span></div>
<div class="line"><span class="lineno"> 3591</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, -4);</div>
<div class="line"><span class="lineno"> 3592</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 2);     <span class="comment">/* [key setter this val key] -&gt; [key retval] */</span></div>
<div class="line"><span class="lineno"> 3593</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 3594</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa1895eebda0d84c47fe222dc73018319">duk_call_method</a>(ctx, 1);     <span class="comment">/* [key setter this val] -&gt; [key retval] */</span></div>
<div class="line"><span class="lineno"> 3595</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3596</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);                <span class="comment">/* ignore retval -&gt; [key] */</span></div>
<div class="line"><span class="lineno"> 3597</span>            <span class="keywordflow">goto</span> success_no_arguments_exotic;</div>
<div class="line"><span class="lineno"> 3598</span>        }</div>
<div class="line"><span class="lineno"> 3599</span> </div>
<div class="line"><span class="lineno"> 3600</span>        <span class="keywordflow">if</span> (orig == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 3601</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3602</span><span class="comment">             *  Found existing own or inherited plain property, but original</span></div>
<div class="line"><span class="lineno"> 3603</span><span class="comment">             *  base is a primitive value.</span></div>
<div class="line"><span class="lineno"> 3604</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3605</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;attempt to create a new property in a primitive base object&quot;</span>));</div>
<div class="line"><span class="lineno"> 3606</span>            <span class="keywordflow">goto</span> fail_base_primitive;</div>
<div class="line"><span class="lineno"> 3607</span>        }</div>
<div class="line"><span class="lineno"> 3608</span> </div>
<div class="line"><span class="lineno"> 3609</span>        <span class="keywordflow">if</span> (curr != orig) {</div>
<div class="line"><span class="lineno"> 3610</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3611</span><span class="comment">             *  Found existing inherited plain property.</span></div>
<div class="line"><span class="lineno"> 3612</span><span class="comment">             *  Do an access control check, and if OK, write</span></div>
<div class="line"><span class="lineno"> 3613</span><span class="comment">             *  new property to &#39;orig&#39;.</span></div>
<div class="line"><span class="lineno"> 3614</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3615</span>            <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adfd1b77d5152d2f5ef72309ab0bc6c14">DUK_HOBJECT_HAS_EXTENSIBLE</a>(orig)) {</div>
<div class="line"><span class="lineno"> 3616</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;found existing inherited plain property, but original object is not extensible&quot;</span>));</div>
<div class="line"><span class="lineno"> 3617</span>                <span class="keywordflow">goto</span> fail_not_extensible;</div>
<div class="line"><span class="lineno"> 3618</span>            }</div>
<div class="line"><span class="lineno"> 3619</span>            <span class="keywordflow">if</span> (!(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 3620</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;found existing inherited plain property, original object is extensible, but inherited property is not writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 3621</span>                <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3622</span>            }</div>
<div class="line"><span class="lineno"> 3623</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;put to new property, object extensible, inherited property found and is writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 3624</span>            <span class="keywordflow">goto</span> create_new;</div>
<div class="line"><span class="lineno"> 3625</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3626</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3627</span><span class="comment">             *  Found existing own (non-inherited) plain property.</span></div>
<div class="line"><span class="lineno"> 3628</span><span class="comment">             *  Do an access control check and update in place.</span></div>
<div class="line"><span class="lineno"> 3629</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3630</span> </div>
<div class="line"><span class="lineno"> 3631</span>            <span class="keywordflow">if</span> (!(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 3632</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;found existing own (non-inherited) plain property, but property is not writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 3633</span>                <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3634</span>            }</div>
<div class="line"><span class="lineno"> 3635</span>            <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>) {</div>
<div class="line"><span class="lineno"> 3636</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;found existing own (non-inherited) virtual property, property is writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 3637</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(curr)) {</div>
<div class="line"><span class="lineno"> 3638</span>                    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 3639</span>                    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> byte_off;</div>
<div class="line"><span class="lineno"> 3640</span>                    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_size;</div>
<div class="line"><span class="lineno"> 3641</span> </div>
<div class="line"><span class="lineno"> 3642</span>                    h_bufobj = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) curr;</div>
<div class="line"><span class="lineno"> 3643</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno"> 3644</span> </div>
<div class="line"><span class="lineno"> 3645</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;writable virtual property is in buffer object&quot;</span>));</div>
<div class="line"><span class="lineno"> 3646</span> </div>
<div class="line"><span class="lineno"> 3647</span>                    <span class="comment">/* Careful with wrapping: arr_idx upshift may easily wrap, whereas</span></div>
<div class="line"><span class="lineno"> 3648</span><span class="comment">                     * length downshift won&#39;t.</span></div>
<div class="line"><span class="lineno"> 3649</span><span class="comment">                     */</span></div>
<div class="line"><span class="lineno"> 3650</span>                    <span class="keywordflow">if</span> (arr_idx &lt; (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;&gt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>)) {</div>
<div class="line"><span class="lineno"> 3651</span>                        duk_uint8_t *data;</div>
<div class="line"><span class="lineno"> 3652</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;writing to buffer data at index %ld&quot;</span>, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3653</span> </div>
<div class="line"><span class="lineno"> 3654</span>                        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>);  <span class="comment">/* index/length check guarantees */</span></div>
<div class="line"><span class="lineno"> 3655</span>                        byte_off = arr_idx &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;       <span class="comment">/* no wrap assuming h_bufobj-&gt;length is valid */</span></div>
<div class="line"><span class="lineno"> 3656</span>                        elem_size = 1 &lt;&lt; h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 3657</span> </div>
<div class="line"><span class="lineno"> 3658</span>                        <span class="comment">/* Coerce to number before validating pointers etc so that the</span></div>
<div class="line"><span class="lineno"> 3659</span><span class="comment">                         * number coercions in duk_hbufferobject_validated_write() are</span></div>
<div class="line"><span class="lineno"> 3660</span><span class="comment">                         * guaranteed to be side effect free and not invalidate the</span></div>
<div class="line"><span class="lineno"> 3661</span><span class="comment">                         * pointer checks we do here.</span></div>
<div class="line"><span class="lineno"> 3662</span><span class="comment">                         */</span></div>
<div class="line"><span class="lineno"> 3663</span>                        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_val);</div>
<div class="line"><span class="lineno"> 3664</span>                        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 3665</span> </div>
<div class="line"><span class="lineno"> 3666</span>                        <span class="keywordflow">if</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_bufobj, byte_off + elem_size)) {</div>
<div class="line"><span class="lineno"> 3667</span>                            data = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;heap, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) + h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> + byte_off;</div>
<div class="line"><span class="lineno"> 3668</span>                            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1472e966ace67a5533431d7e197898ed">duk_hbufferobject_validated_write</a>(ctx, h_bufobj, data, elem_size);</div>
<div class="line"><span class="lineno"> 3669</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3670</span>                            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;bufferobject access out of underlying buffer, ignoring (write skipped)&quot;</span>));</div>
<div class="line"><span class="lineno"> 3671</span>                        }</div>
<div class="line"><span class="lineno"> 3672</span>                        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 3673</span>                        <span class="keywordflow">goto</span> success_no_arguments_exotic;</div>
<div class="line"><span class="lineno"> 3674</span>                    }</div>
<div class="line"><span class="lineno"> 3675</span>                }</div>
<div class="line"><span class="lineno"> 3676</span> </div>
<div class="line"><span class="lineno"> 3677</span>                <span class="keywordflow">goto</span> fail_internal;  <span class="comment">/* should not happen */</span></div>
<div class="line"><span class="lineno"> 3678</span>            }</div>
<div class="line"><span class="lineno"> 3679</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;put to existing own plain property, property is writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 3680</span>            <span class="keywordflow">goto</span> update_old;</div>
<div class="line"><span class="lineno"> 3681</span>        }</div>
<div class="line"><span class="lineno"> 3682</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno"> 3683</span> </div>
<div class="line"><span class="lineno"> 3684</span>     next_in_chain:</div>
<div class="line"><span class="lineno"> 3685</span>        <span class="comment">/* XXX: option to pretend property doesn&#39;t exist if sanity limit is</span></div>
<div class="line"><span class="lineno"> 3686</span><span class="comment">         * hit might be useful.</span></div>
<div class="line"><span class="lineno"> 3687</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3688</span>        <span class="keywordflow">if</span> (sanity-- == 0) {</div>
<div class="line"><span class="lineno"> 3689</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a058cd56ed742ea766d26976d56c159d4">DUK_ERROR_RANGE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a873aa40f45b79d866910c45a58ca6c29">DUK_STR_PROTOTYPE_CHAIN_LIMIT</a>);</div>
<div class="line"><span class="lineno"> 3690</span>        }</div>
<div class="line"><span class="lineno"> 3691</span>        curr = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a117b58d5b8a3809139f42327410929b2">DUK_HOBJECT_GET_PROTOTYPE</a>(thr-&gt;heap, curr);</div>
<div class="line"><span class="lineno"> 3692</span>    } <span class="keywordflow">while</span> (curr);</div>
<div class="line"><span class="lineno"> 3693</span> </div>
<div class="line"><span class="lineno"> 3694</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3695</span><span class="comment">     *  Property not found in prototype chain.</span></div>
<div class="line"><span class="lineno"> 3696</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3697</span> </div>
<div class="line"><span class="lineno"> 3698</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;property not found in prototype chain&quot;</span>));</div>
<div class="line"><span class="lineno"> 3699</span> </div>
<div class="line"><span class="lineno"> 3700</span>    <span class="keywordflow">if</span> (orig == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 3701</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;attempt to create a new property in a primitive base object&quot;</span>));</div>
<div class="line"><span class="lineno"> 3702</span>        <span class="keywordflow">goto</span> fail_base_primitive;</div>
<div class="line"><span class="lineno"> 3703</span>    }</div>
<div class="line"><span class="lineno"> 3704</span> </div>
<div class="line"><span class="lineno"> 3705</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adfd1b77d5152d2f5ef72309ab0bc6c14">DUK_HOBJECT_HAS_EXTENSIBLE</a>(orig)) {</div>
<div class="line"><span class="lineno"> 3706</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;put to a new property (not found in prototype chain), but original object not extensible&quot;</span>));</div>
<div class="line"><span class="lineno"> 3707</span>        <span class="keywordflow">goto</span> fail_not_extensible;</div>
<div class="line"><span class="lineno"> 3708</span>    }</div>
<div class="line"><span class="lineno"> 3709</span> </div>
<div class="line"><span class="lineno"> 3710</span>    <span class="keywordflow">goto</span> create_new;</div>
<div class="line"><span class="lineno"> 3711</span> </div>
<div class="line"><span class="lineno"> 3712</span> update_old:</div>
<div class="line"><span class="lineno"> 3713</span> </div>
<div class="line"><span class="lineno"> 3714</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3715</span><span class="comment">     *  Update an existing property of the base object.</span></div>
<div class="line"><span class="lineno"> 3716</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3717</span> </div>
<div class="line"><span class="lineno"> 3718</span>    <span class="comment">/* [key] */</span></div>
<div class="line"><span class="lineno"> 3719</span> </div>
<div class="line"><span class="lineno"> 3720</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;update an existing property of the original object&quot;</span>));</div>
<div class="line"><span class="lineno"> 3721</span> </div>
<div class="line"><span class="lineno"> 3722</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(orig != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3723</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 3724</span>    <span class="comment">/* This should not happen because DUK_TAG_OBJECT case checks</span></div>
<div class="line"><span class="lineno"> 3725</span><span class="comment">     * for this already, but check just in case.</span></div>
<div class="line"><span class="lineno"> 3726</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3727</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) orig)) {</div>
<div class="line"><span class="lineno"> 3728</span>        <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3729</span>    }</div>
<div class="line"><span class="lineno"> 3730</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3731</span> </div>
<div class="line"><span class="lineno"> 3732</span>    <span class="comment">/* Although there are writable virtual properties (e.g. plain buffer</span></div>
<div class="line"><span class="lineno"> 3733</span><span class="comment">     * and buffer object number indices), they are handled before we come</span></div>
<div class="line"><span class="lineno"> 3734</span><span class="comment">     * here.</span></div>
<div class="line"><span class="lineno"> 3735</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3736</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4239ee1faf78d2cf5ab8c2ab63a29af0">DUK_PROPDESC_FLAG_VIRTUAL</a>) == 0);</div>
<div class="line"><span class="lineno"> 3737</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &gt;= 0 || desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 3738</span> </div>
<div class="line"><span class="lineno"> 3739</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>(orig) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3740</span>        key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)) {</div>
<div class="line"><span class="lineno"> 3741</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3742</span><span class="comment">         *  Write to &#39;length&#39; of an array is a very complex case</span></div>
<div class="line"><span class="lineno"> 3743</span><span class="comment">         *  handled in a helper which updates both the array elements</span></div>
<div class="line"><span class="lineno"> 3744</span><span class="comment">         *  and writes the new &#39;length&#39;.  The write may result in an</span></div>
<div class="line"><span class="lineno"> 3745</span><span class="comment">         *  unconditional RangeError or a partial write (indicated</span></div>
<div class="line"><span class="lineno"> 3746</span><span class="comment">         *  by a return code).</span></div>
<div class="line"><span class="lineno"> 3747</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 3748</span><span class="comment">         *  Note: the helper has an unnecessary writability check</span></div>
<div class="line"><span class="lineno"> 3749</span><span class="comment">         *  for &#39;length&#39;, we already know it is writable.</span></div>
<div class="line"><span class="lineno"> 3750</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3751</span> </div>
<div class="line"><span class="lineno"> 3752</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;writing existing &#39;length&#39; property to array exotic, invoke complex helper&quot;</span>));</div>
<div class="line"><span class="lineno"> 3753</span> </div>
<div class="line"><span class="lineno"> 3754</span>        <span class="comment">/* XXX: the helper currently assumes stack top contains new</span></div>
<div class="line"><span class="lineno"> 3755</span><span class="comment">         * &#39;length&#39; value and the whole calling convention is not very</span></div>
<div class="line"><span class="lineno"> 3756</span><span class="comment">         * compatible with what we need.</span></div>
<div class="line"><span class="lineno"> 3757</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3758</span> </div>
<div class="line"><span class="lineno"> 3759</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_val);  <span class="comment">/* [key val] */</span></div>
<div class="line"><span class="lineno"> 3760</span>        rc = <a class="code hl_function" href="#a3a29efa5165f88eb4891e96a7320d104">duk__handle_put_array_length</a>(thr, orig);</div>
<div class="line"><span class="lineno"> 3761</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* [key val] -&gt; [key] */</span></div>
<div class="line"><span class="lineno"> 3762</span>        <span class="keywordflow">if</span> (!rc) {</div>
<div class="line"><span class="lineno"> 3763</span>            <span class="keywordflow">goto</span> fail_array_length_partial;</div>
<div class="line"><span class="lineno"> 3764</span>        }</div>
<div class="line"><span class="lineno"> 3765</span> </div>
<div class="line"><span class="lineno"> 3766</span>        <span class="comment">/* key is &#39;length&#39;, cannot match argument exotic behavior */</span></div>
<div class="line"><span class="lineno"> 3767</span>        <span class="keywordflow">goto</span> success_no_arguments_exotic;</div>
<div class="line"><span class="lineno"> 3768</span>    }</div>
<div class="line"><span class="lineno"> 3769</span> </div>
<div class="line"><span class="lineno"> 3770</span>    <span class="keywordflow">if</span> (desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0) {</div>
<div class="line"><span class="lineno"> 3771</span>        tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;heap, orig, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 3772</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;previous entry value: %!iT&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv));</div>
<div class="line"><span class="lineno"> 3773</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a>(thr, tv, tv_val);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 3774</span>        <span class="comment">/* don&#39;t touch property attributes or hash part */</span></div>
<div class="line"><span class="lineno"> 3775</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;put to an existing entry at index %ld -&gt; new value %!iT&quot;</span>,</div>
<div class="line"><span class="lineno"> 3776</span>                           (<span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv));</div>
<div class="line"><span class="lineno"> 3777</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3778</span>        <span class="comment">/* Note: array entries are always writable, so the writability check</span></div>
<div class="line"><span class="lineno"> 3779</span><span class="comment">         * above is pointless for them.  The check could be avoided with some</span></div>
<div class="line"><span class="lineno"> 3780</span><span class="comment">         * refactoring but is probably not worth it.</span></div>
<div class="line"><span class="lineno"> 3781</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3782</span> </div>
<div class="line"><span class="lineno"> 3783</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 3784</span>        tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;heap, orig, desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a>);</div>
<div class="line"><span class="lineno"> 3785</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;previous array value: %!iT&quot;</span>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv));</div>
<div class="line"><span class="lineno"> 3786</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a707d3bb6b36563e69505b66a9b7335cf">DUK_TVAL_SET_TVAL_UPDREF</a>(thr, tv, tv_val);  <span class="comment">/* side effects */</span></div>
<div class="line"><span class="lineno"> 3787</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;put to an existing array entry at index %ld -&gt; new value %!iT&quot;</span>,</div>
<div class="line"><span class="lineno"> 3788</span>                           (<span class="keywordtype">long</span>) desc.<a class="code hl_variable" href="structduk__propdesc.html#aa976974c7ed8270f2b9519cab55b0d25">a_idx</a>, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv));</div>
<div class="line"><span class="lineno"> 3789</span>    }</div>
<div class="line"><span class="lineno"> 3790</span> </div>
<div class="line"><span class="lineno"> 3791</span>    <span class="comment">/* Regardless of whether property is found in entry or array part,</span></div>
<div class="line"><span class="lineno"> 3792</span><span class="comment">     * it may have arguments exotic behavior (array indices may reside</span></div>
<div class="line"><span class="lineno"> 3793</span><span class="comment">     * in entry part for abandoned / non-existent array parts).</span></div>
<div class="line"><span class="lineno"> 3794</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3795</span>    <span class="keywordflow">goto</span> success_with_arguments_exotic;</div>
<div class="line"><span class="lineno"> 3796</span> </div>
<div class="line"><span class="lineno"> 3797</span> create_new:</div>
<div class="line"><span class="lineno"> 3798</span> </div>
<div class="line"><span class="lineno"> 3799</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3800</span><span class="comment">     *  Create a new property in the original object.</span></div>
<div class="line"><span class="lineno"> 3801</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 3802</span><span class="comment">     *  Exotic properties need to be reconsidered here from a write</span></div>
<div class="line"><span class="lineno"> 3803</span><span class="comment">     *  perspective (not just property attributes perspective).</span></div>
<div class="line"><span class="lineno"> 3804</span><span class="comment">     *  However, the property does not exist in the object already,</span></div>
<div class="line"><span class="lineno"> 3805</span><span class="comment">     *  so this limits the kind of exotic properties that apply.</span></div>
<div class="line"><span class="lineno"> 3806</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3807</span> </div>
<div class="line"><span class="lineno"> 3808</span>    <span class="comment">/* [key] */</span></div>
<div class="line"><span class="lineno"> 3809</span> </div>
<div class="line"><span class="lineno"> 3810</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;create new property to original object&quot;</span>));</div>
<div class="line"><span class="lineno"> 3811</span> </div>
<div class="line"><span class="lineno"> 3812</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(orig != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 3813</span> </div>
<div class="line"><span class="lineno"> 3814</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 3815</span>    <span class="comment">/* This should not happen because DUK_TAG_OBJECT case checks</span></div>
<div class="line"><span class="lineno"> 3816</span><span class="comment">     * for this already, but check just in case.</span></div>
<div class="line"><span class="lineno"> 3817</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3818</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f18a1ef3baf5de015b53a434aeee31b">DUK_HEAPHDR_HAS_READONLY</a>((<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) orig)) {</div>
<div class="line"><span class="lineno"> 3819</span>        <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3820</span>    }</div>
<div class="line"><span class="lineno"> 3821</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 3822</span> </div>
<div class="line"><span class="lineno"> 3823</span>    <span class="comment">/* Not possible because array object &#39;length&#39; is present</span></div>
<div class="line"><span class="lineno"> 3824</span><span class="comment">     * from its creation and cannot be deleted, and is thus</span></div>
<div class="line"><span class="lineno"> 3825</span><span class="comment">     * caught as an existing property above.</span></div>
<div class="line"><span class="lineno"> 3826</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3827</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>(orig) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3828</span>                 key == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr)));</div>
<div class="line"><span class="lineno"> 3829</span> </div>
<div class="line"><span class="lineno"> 3830</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a08c5179e202847bb714783a696959bef">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>(orig) &amp;&amp;</div>
<div class="line"><span class="lineno"> 3831</span>        arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>) {</div>
<div class="line"><span class="lineno"> 3832</span>        <span class="comment">/* automatic length update */</span></div>
<div class="line"><span class="lineno"> 3833</span>        duk_uint32_t old_len;</div>
<div class="line"><span class="lineno"> 3834</span> </div>
<div class="line"><span class="lineno"> 3835</span>        old_len = <a class="code hl_function" href="#ae1c43ff4dda58761bcee283534131aa4">duk__get_old_array_length</a>(thr, orig, &amp;desc);</div>
<div class="line"><span class="lineno"> 3836</span> </div>
<div class="line"><span class="lineno"> 3837</span>        <span class="keywordflow">if</span> (arr_idx &gt;= old_len) {</div>
<div class="line"><span class="lineno"> 3838</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;write new array entry requires length update &quot;</span></div>
<div class="line"><span class="lineno"> 3839</span>                                 <span class="stringliteral">&quot;(arr_idx=%ld, old_len=%ld)&quot;</span>,</div>
<div class="line"><span class="lineno"> 3840</span>                                 (<span class="keywordtype">long</span>) arr_idx, (<span class="keywordtype">long</span>) old_len));</div>
<div class="line"><span class="lineno"> 3841</span> </div>
<div class="line"><span class="lineno"> 3842</span>            <span class="keywordflow">if</span> (!(desc.<a class="code hl_variable" href="structduk__propdesc.html#aeb56938b08eac3f44434f4dc1e71571f">flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa61e22ade6447836753cb34b15d7da21">DUK_PROPDESC_FLAG_WRITABLE</a>)) {</div>
<div class="line"><span class="lineno"> 3843</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;attempt to extend array, but array &#39;length&#39; is not writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 3844</span>                <span class="keywordflow">goto</span> fail_not_writable;</div>
<div class="line"><span class="lineno"> 3845</span>            }</div>
<div class="line"><span class="lineno"> 3846</span> </div>
<div class="line"><span class="lineno"> 3847</span>            <span class="comment">/* Note: actual update happens once write has been completed</span></div>
<div class="line"><span class="lineno"> 3848</span><span class="comment">             * without error below.  The write should always succeed</span></div>
<div class="line"><span class="lineno"> 3849</span><span class="comment">             * from a specification viewpoint, but we may e.g. run out</span></div>
<div class="line"><span class="lineno"> 3850</span><span class="comment">             * of memory.  It&#39;s safer in this order.</span></div>
<div class="line"><span class="lineno"> 3851</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3852</span> </div>
<div class="line"><span class="lineno"> 3853</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx != 0xffffffffUL);</div>
<div class="line"><span class="lineno"> 3854</span>            new_array_length = arr_idx + 1;  <span class="comment">/* flag for later write */</span></div>
<div class="line"><span class="lineno"> 3855</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3856</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;write new array entry does not require length update &quot;</span></div>
<div class="line"><span class="lineno"> 3857</span>                                 <span class="stringliteral">&quot;(arr_idx=%ld, old_len=%ld)&quot;</span>,</div>
<div class="line"><span class="lineno"> 3858</span>                                 (<span class="keywordtype">long</span>) arr_idx, (<span class="keywordtype">long</span>) old_len));</div>
<div class="line"><span class="lineno"> 3859</span>        }</div>
<div class="line"><span class="lineno"> 3860</span>    }</div>
<div class="line"><span class="lineno"> 3861</span> </div>
<div class="line"><span class="lineno"> 3862</span> <span class="comment">/* write_to_array_part: */</span></div>
<div class="line"><span class="lineno"> 3863</span> </div>
<div class="line"><span class="lineno"> 3864</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3865</span><span class="comment">     *  Write to array part?</span></div>
<div class="line"><span class="lineno"> 3866</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 3867</span><span class="comment">     *  Note: array abandonding requires a property resize which uses</span></div>
<div class="line"><span class="lineno"> 3868</span><span class="comment">     *  &#39;rechecks&#39; valstack for temporaries and may cause any existing</span></div>
<div class="line"><span class="lineno"> 3869</span><span class="comment">     *  valstack pointers to be invalidated.  To protect against this,</span></div>
<div class="line"><span class="lineno"> 3870</span><span class="comment">     *  tv_obj, tv_key, and tv_val are copies of the original inputs.</span></div>
<div class="line"><span class="lineno"> 3871</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3872</span> </div>
<div class="line"><span class="lineno"> 3873</span>    <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 3874</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(orig)) {</div>
<div class="line"><span class="lineno"> 3875</span>        <span class="keywordflow">if</span> (arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(orig)) {</div>
<div class="line"><span class="lineno"> 3876</span>            <span class="keywordflow">goto</span> no_array_growth;</div>
<div class="line"><span class="lineno"> 3877</span>        }</div>
<div class="line"><span class="lineno"> 3878</span> </div>
<div class="line"><span class="lineno"> 3879</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3880</span><span class="comment">         *  Array needs to grow, but we don&#39;t want it becoming too sparse.</span></div>
<div class="line"><span class="lineno"> 3881</span><span class="comment">         *  If it were to become sparse, abandon array part, moving all</span></div>
<div class="line"><span class="lineno"> 3882</span><span class="comment">         *  array entries into the entries part (for good).</span></div>
<div class="line"><span class="lineno"> 3883</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 3884</span><span class="comment">         *  Since we don&#39;t keep track of actual density (used vs. size) of</span></div>
<div class="line"><span class="lineno"> 3885</span><span class="comment">         *  the array part, we need to estimate somehow.  The check is made</span></div>
<div class="line"><span class="lineno"> 3886</span><span class="comment">         *  in two parts:</span></div>
<div class="line"><span class="lineno"> 3887</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 3888</span><span class="comment">         *    - Check whether the resize need is small compared to the</span></div>
<div class="line"><span class="lineno"> 3889</span><span class="comment">         *      current size (relatively); if so, resize without further</span></div>
<div class="line"><span class="lineno"> 3890</span><span class="comment">         *      checking (essentially we assume that the original part is</span></div>
<div class="line"><span class="lineno"> 3891</span><span class="comment">         *      &quot;dense&quot; so that the result would be dense enough).</span></div>
<div class="line"><span class="lineno"> 3892</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 3893</span><span class="comment">         *    - Otherwise, compute the resize using an actual density</span></div>
<div class="line"><span class="lineno"> 3894</span><span class="comment">         *      measurement based on counting the used array entries.</span></div>
<div class="line"><span class="lineno"> 3895</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3896</span> </div>
<div class="line"><span class="lineno"> 3897</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;write to new array requires array resize, decide whether to do a &quot;</span></div>
<div class="line"><span class="lineno"> 3898</span>                             <span class="stringliteral">&quot;fast resize without abandon check (arr_idx=%ld, old_size=%ld)&quot;</span>,</div>
<div class="line"><span class="lineno"> 3899</span>                             (<span class="keywordtype">long</span>) arr_idx, (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(orig)));</div>
<div class="line"><span class="lineno"> 3900</span> </div>
<div class="line"><span class="lineno"> 3901</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#acfe34789f89c4cbe2cc1574e09669698">duk__abandon_array_slow_check_required</a>(arr_idx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(orig))) {</div>
<div class="line"><span class="lineno"> 3902</span>            duk_uint32_t old_used;</div>
<div class="line"><span class="lineno"> 3903</span>            duk_uint32_t old_size;</div>
<div class="line"><span class="lineno"> 3904</span> </div>
<div class="line"><span class="lineno"> 3905</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;=&gt; fast check is NOT OK, do slow check for array abandon&quot;</span>));</div>
<div class="line"><span class="lineno"> 3906</span> </div>
<div class="line"><span class="lineno"> 3907</span>            <a class="code hl_function" href="#af0d4488861df17ffd227dfe1a10466c1">duk__compute_a_stats</a>(thr, orig, &amp;old_used, &amp;old_size);</div>
<div class="line"><span class="lineno"> 3908</span> </div>
<div class="line"><span class="lineno"> 3909</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;abandon check, array stats: old_used=%ld, old_size=%ld, arr_idx=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 3910</span>                                 (<span class="keywordtype">long</span>) old_used, (<span class="keywordtype">long</span>) old_size, (<span class="keywordtype">long</span>) arr_idx));</div>
<div class="line"><span class="lineno"> 3911</span> </div>
<div class="line"><span class="lineno"> 3912</span>            <span class="comment">/* Note: intentionally use approximations to shave a few instructions:</span></div>
<div class="line"><span class="lineno"> 3913</span><span class="comment">             *   a_used = old_used  (accurate: old_used + 1)</span></div>
<div class="line"><span class="lineno"> 3914</span><span class="comment">             *   a_size = arr_idx   (accurate: arr_idx + 1)</span></div>
<div class="line"><span class="lineno"> 3915</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 3916</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="#a6f2eacd468eb7c3aaa3456cf895745dc">duk__abandon_array_density_check</a>(old_used, arr_idx)) {</div>
<div class="line"><span class="lineno"> 3917</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;write to new array entry beyond current length, &quot;</span></div>
<div class="line"><span class="lineno"> 3918</span>                                   <span class="stringliteral">&quot;decided to abandon array part (would become too sparse)&quot;</span>));</div>
<div class="line"><span class="lineno"> 3919</span> </div>
<div class="line"><span class="lineno"> 3920</span>                <span class="comment">/* abandoning requires a props allocation resize and</span></div>
<div class="line"><span class="lineno"> 3921</span><span class="comment">                 * &#39;rechecks&#39; the valstack, invalidating any existing</span></div>
<div class="line"><span class="lineno"> 3922</span><span class="comment">                 * valstack value pointers!</span></div>
<div class="line"><span class="lineno"> 3923</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno"> 3924</span>                <a class="code hl_function" href="#a504cd329f8e1aed37715da8972fb6f7c">duk__abandon_array_checked</a>(thr, orig);</div>
<div class="line"><span class="lineno"> 3925</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(orig));</div>
<div class="line"><span class="lineno"> 3926</span> </div>
<div class="line"><span class="lineno"> 3927</span>                <span class="keywordflow">goto</span> write_to_entry_part;</div>
<div class="line"><span class="lineno"> 3928</span>            }</div>
<div class="line"><span class="lineno"> 3929</span> </div>
<div class="line"><span class="lineno"> 3930</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;=&gt; decided to keep array part&quot;</span>));</div>
<div class="line"><span class="lineno"> 3931</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3932</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;=&gt; fast resize is OK&quot;</span>));</div>
<div class="line"><span class="lineno"> 3933</span>        }</div>
<div class="line"><span class="lineno"> 3934</span> </div>
<div class="line"><span class="lineno"> 3935</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;write to new array entry beyond current length, &quot;</span></div>
<div class="line"><span class="lineno"> 3936</span>                           <span class="stringliteral">&quot;decided to extend current allocation&quot;</span>));</div>
<div class="line"><span class="lineno"> 3937</span> </div>
<div class="line"><span class="lineno"> 3938</span>        <a class="code hl_function" href="#a9f28a6dc20ab155914e7ba6a0a812b56">duk__grow_props_for_array_item</a>(thr, orig, arr_idx);</div>
<div class="line"><span class="lineno"> 3939</span> </div>
<div class="line"><span class="lineno"> 3940</span>     no_array_growth:</div>
<div class="line"><span class="lineno"> 3941</span> </div>
<div class="line"><span class="lineno"> 3942</span>        <span class="comment">/* Note: assume array part is comprehensive, so that either</span></div>
<div class="line"><span class="lineno"> 3943</span><span class="comment">         * the write goes to the array part, or we&#39;ve abandoned the</span></div>
<div class="line"><span class="lineno"> 3944</span><span class="comment">         * array above (and will not come here).</span></div>
<div class="line"><span class="lineno"> 3945</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3946</span> </div>
<div class="line"><span class="lineno"> 3947</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6df2138c9a52b2c5e9ee9e3f6089a0f5">DUK_HOBJECT_HAS_ARRAY_PART</a>(orig));</div>
<div class="line"><span class="lineno"> 3948</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(arr_idx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a554cd6556044245d2a08c4b65a1424ff">DUK_HOBJECT_GET_ASIZE</a>(orig));</div>
<div class="line"><span class="lineno"> 3949</span> </div>
<div class="line"><span class="lineno"> 3950</span>        tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a076d5edf64c2befe0ea6e463c3ba0c62">DUK_HOBJECT_A_GET_VALUE_PTR</a>(thr-&gt;heap, orig, arr_idx);</div>
<div class="line"><span class="lineno"> 3951</span>        <span class="comment">/* prev value must be unused, no decref */</span></div>
<div class="line"><span class="lineno"> 3952</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a56ce1ca0ef174e2cce709d285e47f09b">DUK_TVAL_IS_UNUSED</a>(tv));</div>
<div class="line"><span class="lineno"> 3953</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(tv, tv_val);</div>
<div class="line"><span class="lineno"> 3954</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4cab0e419e53fb6bc4e79f6e8fd384bd">DUK_TVAL_INCREF</a>(thr, tv);</div>
<div class="line"><span class="lineno"> 3955</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;put to new array entry: %ld -&gt; %!T&quot;</span>,</div>
<div class="line"><span class="lineno"> 3956</span>                           (<span class="keywordtype">long</span>) arr_idx, (<a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *) tv));</div>
<div class="line"><span class="lineno"> 3957</span> </div>
<div class="line"><span class="lineno"> 3958</span>        <span class="comment">/* Note: array part values are [[Writable]], [[Enumerable]],</span></div>
<div class="line"><span class="lineno"> 3959</span><span class="comment">         * and [[Configurable]] which matches the required attributes</span></div>
<div class="line"><span class="lineno"> 3960</span><span class="comment">         * here.</span></div>
<div class="line"><span class="lineno"> 3961</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 3962</span>        <span class="keywordflow">goto</span> entry_updated;</div>
<div class="line"><span class="lineno"> 3963</span>    }</div>
<div class="line"><span class="lineno"> 3964</span> </div>
<div class="line"><span class="lineno"> 3965</span> write_to_entry_part:</div>
<div class="line"><span class="lineno"> 3966</span> </div>
<div class="line"><span class="lineno"> 3967</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3968</span><span class="comment">     *  Write to entry part</span></div>
<div class="line"><span class="lineno"> 3969</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3970</span> </div>
<div class="line"><span class="lineno"> 3971</span>    <span class="comment">/* entry allocation updates hash part and increases the key</span></div>
<div class="line"><span class="lineno"> 3972</span><span class="comment">     * refcount; may need a props allocation resize but doesn&#39;t</span></div>
<div class="line"><span class="lineno"> 3973</span><span class="comment">     * &#39;recheck&#39; the valstack.</span></div>
<div class="line"><span class="lineno"> 3974</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3975</span>    e_idx = <a class="code hl_function" href="#a4f516582bc333e12262483674371d5ba">duk__alloc_entry_checked</a>(thr, orig, key);</div>
<div class="line"><span class="lineno"> 3976</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(e_idx &gt;= 0);</div>
<div class="line"><span class="lineno"> 3977</span> </div>
<div class="line"><span class="lineno"> 3978</span>    tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;heap, orig, e_idx);</div>
<div class="line"><span class="lineno"> 3979</span>    <span class="comment">/* prev value can be garbage, no decref */</span></div>
<div class="line"><span class="lineno"> 3980</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a04ff20dec8ac63c2010d16bcfd823d15">DUK_TVAL_SET_TVAL</a>(tv, tv_val);</div>
<div class="line"><span class="lineno"> 3981</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4cab0e419e53fb6bc4e79f6e8fd384bd">DUK_TVAL_INCREF</a>(thr, tv);</div>
<div class="line"><span class="lineno"> 3982</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa280e0838a1bf1f155f3c6e9325cf4f2">DUK_HOBJECT_E_SET_FLAGS</a>(thr-&gt;heap, orig, e_idx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab6a0eaf676af7e4c9c045ed48d13cd2b">DUK_PROPDESC_FLAGS_WEC</a>);</div>
<div class="line"><span class="lineno"> 3983</span>    <span class="keywordflow">goto</span> entry_updated;</div>
<div class="line"><span class="lineno"> 3984</span> </div>
<div class="line"><span class="lineno"> 3985</span> entry_updated:</div>
<div class="line"><span class="lineno"> 3986</span> </div>
<div class="line"><span class="lineno"> 3987</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3988</span><span class="comment">     *  Possible pending array length update, which must only be done</span></div>
<div class="line"><span class="lineno"> 3989</span><span class="comment">     *  if the actual entry write succeeded.</span></div>
<div class="line"><span class="lineno"> 3990</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 3991</span> </div>
<div class="line"><span class="lineno"> 3992</span>    <span class="keywordflow">if</span> (new_array_length &gt; 0) {</div>
<div class="line"><span class="lineno"> 3993</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 3994</span><span class="comment">         *  Note: zero works as a &quot;no update&quot; marker because the new length</span></div>
<div class="line"><span class="lineno"> 3995</span><span class="comment">         *  can never be zero after a new property is written.</span></div>
<div class="line"><span class="lineno"> 3996</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 3997</span><span class="comment">         *  Note: must re-lookup because calls above (e.g. duk__alloc_entry_checked())</span></div>
<div class="line"><span class="lineno"> 3998</span><span class="comment">         *  may realloc and compact properties and hence change e_idx.</span></div>
<div class="line"><span class="lineno"> 3999</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4000</span> </div>
<div class="line"><span class="lineno"> 4001</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;write successful, pending array length update to: %ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 4002</span>                             (<span class="keywordtype">long</span>) new_array_length));</div>
<div class="line"><span class="lineno"> 4003</span> </div>
<div class="line"><span class="lineno"> 4004</span>        rc = <a class="code hl_function" href="#aa6e08d30c98abda4341dd026697ae68c">duk__get_own_propdesc_raw</a>(thr, orig, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#adb697ff71db1fabd8005b7eed482833b">DUK_HTHREAD_STRING_LENGTH</a>(thr), <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a>, &amp;desc, 0 <span class="comment">/*flags*/</span>);  <span class="comment">/* don&#39;t push value */</span></div>
<div class="line"><span class="lineno"> 4005</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(rc);</div>
<div class="line"><span class="lineno"> 4006</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(rc != 0);</div>
<div class="line"><span class="lineno"> 4007</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a> &gt;= 0);</div>
<div class="line"><span class="lineno"> 4008</span> </div>
<div class="line"><span class="lineno"> 4009</span>        tv = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2eb0ddd26878c9e6e7c6d3e9fdb86e4f">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>(thr-&gt;heap, orig, desc.<a class="code hl_variable" href="structduk__propdesc.html#a7616514410fd9dcb9f37b54bf7ccb78c">e_idx</a>);</div>
<div class="line"><span class="lineno"> 4010</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a120c58805068a35f79222a10bc73f165">DUK_TVAL_IS_NUMBER</a>(tv));</div>
<div class="line"><span class="lineno"> 4011</span>        <span class="comment">/* no need for decref/incref because value is a number */</span></div>
<div class="line"><span class="lineno"> 4012</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0f10525d790e1c628b226c4719834415">DUK_TVAL_SET_FASTINT_U32</a>(tv, new_array_length);</div>
<div class="line"><span class="lineno"> 4013</span>    }</div>
<div class="line"><span class="lineno"> 4014</span> </div>
<div class="line"><span class="lineno"> 4015</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 4016</span><span class="comment">     *  Arguments exotic behavior not possible for new properties: all</span></div>
<div class="line"><span class="lineno"> 4017</span><span class="comment">     *  magically bound properties are initially present in the arguments</span></div>
<div class="line"><span class="lineno"> 4018</span><span class="comment">     *  object, and if they are deleted, the binding is also removed from</span></div>
<div class="line"><span class="lineno"> 4019</span><span class="comment">     *  parameter map.</span></div>
<div class="line"><span class="lineno"> 4020</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 4021</span> </div>
<div class="line"><span class="lineno"> 4022</span>    <span class="keywordflow">goto</span> success_no_arguments_exotic;</div>
<div class="line"><span class="lineno"> 4023</span> </div>
<div class="line"><span class="lineno"> 4024</span> success_with_arguments_exotic:</div>
<div class="line"><span class="lineno"> 4025</span> </div>
<div class="line"><span class="lineno"> 4026</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 4027</span><span class="comment">     *  Arguments objects have exotic [[DefineOwnProperty]] which updates</span></div>
<div class="line"><span class="lineno"> 4028</span><span class="comment">     *  the internal &#39;map&#39; of arguments for writes to currently mapped</span></div>
<div class="line"><span class="lineno"> 4029</span><span class="comment">     *  arguments.  More conretely, writes to mapped arguments generate</span></div>
<div class="line"><span class="lineno"> 4030</span><span class="comment">     *  a write to a bound variable.</span></div>
<div class="line"><span class="lineno"> 4031</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 4032</span><span class="comment">     *  The [[Put]] algorithm invokes [[DefineOwnProperty]] for existing</span></div>
<div class="line"><span class="lineno"> 4033</span><span class="comment">     *  data properties and new properties, but not for existing accessors.</span></div>
<div class="line"><span class="lineno"> 4034</span><span class="comment">     *  Hence, in E5 Section 10.6 ([[DefinedOwnProperty]] algorithm), we</span></div>
<div class="line"><span class="lineno"> 4035</span><span class="comment">     *  have a Desc with &#39;Value&#39; (and possibly other properties too), and</span></div>
<div class="line"><span class="lineno"> 4036</span><span class="comment">     *  we end up in step 5.b.i.</span></div>
<div class="line"><span class="lineno"> 4037</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 4038</span> </div>
<div class="line"><span class="lineno"> 4039</span>    <span class="keywordflow">if</span> (arr_idx != <a class="code hl_define" href="#a0c2007579f63eb1bbcaad5f491159557">DUK__NO_ARRAY_INDEX</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 4040</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6b5e035b4af29940508e6be18879f8aa">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>(orig)) {</div>
<div class="line"><span class="lineno"> 4041</span>        <span class="comment">/* Note: only numbered indices are relevant, so arr_idx fast reject</span></div>
<div class="line"><span class="lineno"> 4042</span><span class="comment">         * is good (this is valid unless there are more than 4**32-1 arguments).</span></div>
<div class="line"><span class="lineno"> 4043</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4044</span> </div>
<div class="line"><span class="lineno"> 4045</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;putprop successful, arguments exotic behavior needed&quot;</span>));</div>
<div class="line"><span class="lineno"> 4046</span> </div>
<div class="line"><span class="lineno"> 4047</span>        <span class="comment">/* Note: we can reuse &#39;desc&#39; here */</span></div>
<div class="line"><span class="lineno"> 4048</span> </div>
<div class="line"><span class="lineno"> 4049</span>        <span class="comment">/* XXX: top of stack must contain value, which helper doesn&#39;t touch,</span></div>
<div class="line"><span class="lineno"> 4050</span><span class="comment">         * rework to use tv_val directly?</span></div>
<div class="line"><span class="lineno"> 4051</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 4052</span> </div>
<div class="line"><span class="lineno"> 4053</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a91eb3e96b01fcf7f57063da227eba654">duk_push_tval</a>(ctx, tv_val);</div>
<div class="line"><span class="lineno"> 4054</span>        (void) <a class="code hl_function" href="#a0e776ca49c709a2cc9cdd6b16d750286">duk__check_arguments_map_for_put</a>(thr, orig, key, &amp;desc, throw_flag);</div>
<div class="line"><span class="lineno"> 4055</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 4056</span>    }</div>
<div class="line"><span class="lineno"> 4057</span>    <span class="comment">/* fall thru */</span></div>
<div class="line"><span class="lineno"> 4058</span> </div>
<div class="line"><span class="lineno"> 4059</span> success_no_arguments_exotic:</div>
<div class="line"><span class="lineno"> 4060</span>    <span class="comment">/* shared exit path now */</span></div>
<div class="line"><span class="lineno"> 4061</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: success&quot;</span>));</div>
<div class="line"><span class="lineno"> 4062</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4063</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 4064</span> </div>
<div class="line"><span class="lineno"> 4065</span><span class="preprocessor">#if defined(DUK_USE_ES6_PROXY)</span></div>
<div class="line"><span class="lineno"> 4066</span> fail_proxy_rejected:</div>
<div class="line"><span class="lineno"> 4067</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, proxy rejects&quot;</span>));</div>
<div class="line"><span class="lineno"> 4068</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4069</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#affb31bd71c06bc766cbc175ad9cb13ae">DUK_STR_PROXY_REJECTED</a>);</div>
<div class="line"><span class="lineno"> 4070</span>    }</div>
<div class="line"><span class="lineno"> 4071</span>    <span class="comment">/* Note: no key on stack */</span></div>
<div class="line"><span class="lineno"> 4072</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4073</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4074</span> </div>
<div class="line"><span class="lineno"> 4075</span> fail_base_primitive:</div>
<div class="line"><span class="lineno"> 4076</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, base primitive&quot;</span>));</div>
<div class="line"><span class="lineno"> 4077</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4078</span><span class="preprocessor">#if defined(DUK_USE_PARANOID_ERRORS)</span></div>
<div class="line"><span class="lineno"> 4079</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ce64309ea8cbabb810926737da126b2">DUK_STR_INVALID_BASE</a>);</div>
<div class="line"><span class="lineno"> 4080</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 4081</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9839be13bfece6a773056f3ca73ba830">DUK_ERROR_FMT2</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a02cde94a668a996bb017286a38c7e658">DUK_ERR_TYPE_ERROR</a>, <span class="stringliteral">&quot;cannot write property %s of %s&quot;</span>,</div>
<div class="line"><span class="lineno"> 4082</span>                       <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_key), <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae4a6a93c79e49f159b46118f7cc86124">duk_push_string_tval_readable</a>(ctx, tv_obj));</div>
<div class="line"><span class="lineno"> 4083</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4084</span>    }</div>
<div class="line"><span class="lineno"> 4085</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4086</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4087</span> </div>
<div class="line"><span class="lineno"> 4088</span> fail_not_extensible:</div>
<div class="line"><span class="lineno"> 4089</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, not extensible&quot;</span>));</div>
<div class="line"><span class="lineno"> 4090</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4091</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6d3a8adca37b5f6becfccafd87d6fe79">DUK_STR_NOT_EXTENSIBLE</a>);</div>
<div class="line"><span class="lineno"> 4092</span>    }</div>
<div class="line"><span class="lineno"> 4093</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4094</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4095</span> </div>
<div class="line"><span class="lineno"> 4096</span> fail_not_writable:</div>
<div class="line"><span class="lineno"> 4097</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, not writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 4098</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4099</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14c541e1cf1141d70a7710b72402001a">DUK_STR_NOT_WRITABLE</a>);</div>
<div class="line"><span class="lineno"> 4100</span>    }</div>
<div class="line"><span class="lineno"> 4101</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4102</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4103</span> </div>
<div class="line"><span class="lineno"> 4104</span><span class="preprocessor">#if defined(DUK_USE_ROM_OBJECTS)</span></div>
<div class="line"><span class="lineno"> 4105</span> fail_not_writable_no_pop:</div>
<div class="line"><span class="lineno"> 4106</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, not writable&quot;</span>));</div>
<div class="line"><span class="lineno"> 4107</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4108</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14c541e1cf1141d70a7710b72402001a">DUK_STR_NOT_WRITABLE</a>);</div>
<div class="line"><span class="lineno"> 4109</span>    }</div>
<div class="line"><span class="lineno"> 4110</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4111</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 4112</span> </div>
<div class="line"><span class="lineno"> 4113</span> fail_array_length_partial:</div>
<div class="line"><span class="lineno"> 4114</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, array length write only partially successful&quot;</span>));</div>
<div class="line"><span class="lineno"> 4115</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4116</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0bee789cf5bc47e42781ca7f9344ec97">DUK_STR_ARRAY_LENGTH_WRITE_FAILED</a>);</div>
<div class="line"><span class="lineno"> 4117</span>    }</div>
<div class="line"><span class="lineno"> 4118</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4119</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4120</span> </div>
<div class="line"><span class="lineno"> 4121</span> fail_no_setter:</div>
<div class="line"><span class="lineno"> 4122</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, accessor property without setter&quot;</span>));</div>
<div class="line"><span class="lineno"> 4123</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4124</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2f4dab611c9d369cea268d85aac13171">DUK_STR_SETTER_UNDEFINED</a>);</div>
<div class="line"><span class="lineno"> 4125</span>    }</div>
<div class="line"><span class="lineno"> 4126</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4127</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4128</span> </div>
<div class="line"><span class="lineno"> 4129</span> fail_internal:</div>
<div class="line"><span class="lineno"> 4130</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;result: error, internal&quot;</span>));</div>
<div class="line"><span class="lineno"> 4131</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno"> 4132</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50bd040ebe622fdf3fbac5a153dce3b7">DUK_ERROR_INTERNAL_DEFMSG</a>(thr);</div>
<div class="line"><span class="lineno"> 4133</span>    }</div>
<div class="line"><span class="lineno"> 4134</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* remove key */</span></div>
<div class="line"><span class="lineno"> 4135</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 4136</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2f4dab611c9d369cea268d85aac13171"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2f4dab611c9d369cea268d85aac13171">DUK_STR_SETTER_UNDEFINED</a></div><div class="ttdeci">#define DUK_STR_SETTER_UNDEFINED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02376">duktape-1.5.2/src-noline/duktape.c:2376</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa418fc23b85532f124eb2e54696278e2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a></div><div class="ttdeci">DUK_EXTERNAL duk_uint32_t duk_to_uint32(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duktape-1.5.2/src-noline/duktape.c:16844</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a0e776ca49c709a2cc9cdd6b16d750286"><div class="ttname"><a href="#a0e776ca49c709a2cc9cdd6b16d750286">duk__check_arguments_map_for_put</a></div><div class="ttdeci">DUK_LOCAL_DECL void duk__check_arguments_map_for_put(duk_hthread *thr, duk_hobject *obj, duk_hstring *key, duk_propdesc *temp_desc, duk_bool_t throw_flag)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01479">duktape-1.8.0/src-separate/duk_hobject_props.c:1479</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a3a29efa5165f88eb4891e96a7320d104"><div class="ttname"><a href="#a3a29efa5165f88eb4891e96a7320d104">duk__handle_put_array_length</a></div><div class="ttdeci">DUK_LOCAL_DECL duk_bool_t duk__handle_put_array_length(duk_hthread *thr, duk_hobject *obj)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03121">duktape-1.8.0/src-separate/duk_hobject_props.c:3121</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_a43e8e6ca7cbcc3fa724988f3c39e7122"><div class="ttname"><a href="#a43e8e6ca7cbcc3fa724988f3c39e7122">duk__putprop_shallow_fastpath_array_tval</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__putprop_shallow_fastpath_array_tval(duk_hthread *thr, duk_hobject *obj, duk_tval *tv_key, duk_tval *tv_val, duk_propdesc *temp_desc)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02031">duktape-1.8.0/src-separate/duk_hobject_props.c:2031</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_acfe34789f89c4cbe2cc1574e09669698"><div class="ttname"><a href="#acfe34789f89c4cbe2cc1574e09669698">duk__abandon_array_slow_check_required</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__abandon_array_slow_check_required(duk_uint32_t arr_idx, duk_uint32_t old_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00288">duktape-1.8.0/src-separate/duk_hobject_props.c:288</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_ad8dbd6e748306626201ae4c51a25e489"><div class="ttname"><a href="#ad8dbd6e748306626201ae4c51a25e489">duk__putprop_fastpath_bufobj_tval</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__putprop_fastpath_bufobj_tval(duk_hthread *thr, duk_hobject *obj, duk_tval *tv_key, duk_tval *tv_val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02148">duktape-1.8.0/src-separate/duk_hobject_props.c:2148</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05325">duk_propdesc::a_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06274">duk_hthread::builtins</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00993">duk__abandon_array_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00267">duk__abandon_array_density_check()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00288">duk__abandon_array_slow_check_required()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01252">duk__alloc_entry_checked()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01479">duk__check_arguments_map_for_put()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00237">duk__compute_a_stats()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02864">duk__get_old_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l01587">duk__get_own_propdesc_raw()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00969">duk__grow_props_for_array_item()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03121">duk__handle_put_array_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00162">duk__key_is_lightfunc_ownprop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00052">DUK__NO_ARRAY_INDEX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00393">duk__proxy_check_prop()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00143">duk__push_tval_to_hstring_arr_idx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02148">duk__putprop_fastpath_bufobj_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l02031">duk__putprop_shallow_fastpath_array_tval()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00098">duk__tval_number_to_arr_idx()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00065">DUK__VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07811">DUK_ASSERT_VALSTACK_SPACE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01640">DUK_BIDX_BOOLEAN_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01669">DUK_BIDX_BUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01634">DUK_BIDX_FUNCTION_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01642">DUK_BIDX_NUMBER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01671">DUK_BIDX_POINTER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01638">DUK_BIDX_STRING_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12389">duk_call_method()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">DUK_D</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">DUK_DPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00345">DUK_ERR_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07639">DUK_ERROR_FMT2</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07856">DUK_ERROR_INTERNAL_DEFMSG</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07875">DUK_ERROR_RANGE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04892">DUK_GETDESC_FLAG_PUSH_VALUE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">DUK_HBUFFER_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">DUK_HBUFFER_GET_SIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l21896">duk_hbufferobject_validated_write()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03666">DUK_HEAPHDR_HAS_READONLY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05093">DUK_HOBJECT_A_GET_VALUE_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05088">DUK_HOBJECT_E_GET_VALUE_SETTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05085">DUK_HOBJECT_E_GET_VALUE_TVAL_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05112">DUK_HOBJECT_E_SET_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05180">DUK_HOBJECT_GET_ASIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05227">DUK_HOBJECT_GET_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04810">DUK_HOBJECT_HAS_ARRAY_PART</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04819">DUK_HOBJECT_HAS_EXOTIC_ARGUMENTS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04817">DUK_HOBJECT_HAS_EXOTIC_ARRAY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04803">DUK_HOBJECT_HAS_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05198">DUK_HOBJECT_PROTOTYPE_CHAIN_SANITY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01139">DUK_HTHREAD_STRING_BYTE_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01142">DUK_HTHREAD_STRING_BYTE_OFFSET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01145">DUK_HTHREAD_STRING_BYTES_PER_ELEMENT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01136">DUK_HTHREAD_STRING_LENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l08382">duk_js_samevalue</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19167">duk_pop_2()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19088">duk_pop_n()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04867">DUK_PROPDESC_FLAG_ACCESSOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04866">DUK_PROPDESC_FLAG_CONFIGURABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04868">DUK_PROPDESC_FLAG_VIRTUAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04864">DUK_PROPDESC_FLAG_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04887">DUK_PROPDESC_FLAGS_WEC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19476">duk_push_string_tval_readable()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17835">duk_push_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02374">DUK_STR_ARRAY_LENGTH_WRITE_FAILED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02370">DUK_STR_INVALID_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02282">DUK_STR_NOT_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02283">DUK_STR_NOT_WRITABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02470">DUK_STR_PROTOTYPE_CHAIN_LIMIT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02372">DUK_STR_PROXY_REJECTED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02376">DUK_STR_SETTER_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01146">DUK_STRIDX_SET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00643">DUK_TAG_BOOLEAN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00649">DUK_TAG_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00645">DUK_TAG_LIGHTFUNC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00642">DUK_TAG_NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00648">DUK_TAG_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00644">DUK_TAG_POINTER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00647">DUK_TAG_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00641">DUK_TAG_UNDEFINED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duk_to_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duk_to_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duk_to_uint32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00788">DUK_TVAL_GET_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00786">DUK_TVAL_GET_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00792">DUK_TVAL_GET_TAG</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03808">DUK_TVAL_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00805">DUK_TVAL_IS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00794">DUK_TVAL_IS_UNUSED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00710">DUK_TVAL_SET_FASTINT_U32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00739">DUK_TVAL_SET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00755">DUK_TVAL_SET_TVAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04029">DUK_TVAL_SET_TVAL_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05323">duk_propdesc::e_idx</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05318">duk_propdesc::flags</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05319">duk_propdesc::get</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05320">duk_propdesc::set</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04734">duk_hobject_set_length()</a>.</p>

</div>
</div>
<a id="a70aedf9f40c1604f7b773c1a30954791" name="a70aedf9f40c1604f7b773c1a30954791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70aedf9f40c1604f7b773c1a30954791">&#9670;&#160;</a></span>duk_hobject_resolve_proxy_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hobject.html">duk_hobject</a> * duk_hobject_resolve_proxy_target </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00366">366</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  366</span>                                                                                               {</div>
<div class="line"><span class="lineno">  367</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_target;</div>
<div class="line"><span class="lineno">  368</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_handler;</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(thr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  371</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  372</span> </div>
<div class="line"><span class="lineno">  373</span>    <span class="comment">/* Resolve Proxy targets until Proxy chain ends.  No explicit check for</span></div>
<div class="line"><span class="lineno">  374</span><span class="comment">     * a Proxy loop: user code cannot create such a loop without tweaking</span></div>
<div class="line"><span class="lineno">  375</span><span class="comment">     * internal properties directly.</span></div>
<div class="line"><span class="lineno">  376</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">while</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6615c9d227b3ed8f7a543fd8e3c5e4c9">DUK_UNLIKELY</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aad25142dfec683b9edc4b9e31af8d4c7">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>(obj))) {</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#ae22218a49bd740fa5a47497ce3c547a9">duk_hobject_proxy_check</a>(thr, obj, &amp;h_target, &amp;h_handler)) {</div>
<div class="line"><span class="lineno">  380</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_target != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  381</span>            obj = h_target;</div>
<div class="line"><span class="lineno">  382</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  383</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  384</span>        }</div>
<div class="line"><span class="lineno">  385</span>    }</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">return</span> obj;</div>
<div class="line"><span class="lineno">  389</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04821">DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l00318">duk_hobject_proxy_check()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02518">DUK_UNLIKELY</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="ad4866a2fa7c6b2423f64aaa46642108e" name="ad4866a2fa7c6b2423f64aaa46642108e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4866a2fa7c6b2423f64aaa46642108e">&#9670;&#160;</a></span>duk_hobject_set_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_set_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04734">4734</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4734</span>                                                                                                  {</div>
<div class="line"><span class="lineno"> 4735</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *ctx = (<a class="code hl_struct" href="structduk__hthread.html">duk_context</a> *) thr;</div>
<div class="line"><span class="lineno"> 4736</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca724f007b73483138017f4d32bb6879">duk_push_hobject</a>(ctx, obj);</div>
<div class="line"><span class="lineno"> 4737</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a42b9810a4cfe02e7f9ff037960edff65">duk_push_hstring_stridx</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a846c7f411a94ad5b75b2f7a50f7abb50">DUK_STRIDX_LENGTH</a>);</div>
<div class="line"><span class="lineno"> 4738</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeec241c8da1fbeaa28b17454e282b8f7">duk_push_u32</a>(ctx, length);</div>
<div class="line"><span class="lineno"> 4739</span>    (void) <a class="code hl_function" href="#af29ad1e562367c2439a8c906a2e06b25">duk_hobject_putprop</a>(thr,</div>
<div class="line"><span class="lineno"> 4740</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a>(ctx, -3),</div>
<div class="line"><span class="lineno"> 4741</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a>(ctx, -2),</div>
<div class="line"><span class="lineno"> 4742</span>                               <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaf676ff696f5e2be45b2852a49c9f37d">DUK_GET_TVAL_NEGIDX</a>(ctx, -1),</div>
<div class="line"><span class="lineno"> 4743</span>                               0);</div>
<div class="line"><span class="lineno"> 4744</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaccb78cf03473e5aafa6677a4eca8447">duk_pop_n</a>(ctx, 3);</div>
<div class="line"><span class="lineno"> 4745</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_af29ad1e562367c2439a8c906a2e06b25"><div class="ttname"><a href="#af29ad1e562367c2439a8c906a2e06b25">duk_hobject_putprop</a></div><div class="ttdeci">DUK_INTERNAL duk_bool_t duk_hobject_putprop(duk_hthread *thr, duk_tval *tv_obj, duk_tval *tv_key, duk_tval *tv_val, duk_bool_t throw_flag)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duktape-1.8.0/src-separate/duk_hobject_props.c:3233</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04386">DUK_GET_TVAL_NEGIDX</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l03233">duk_hobject_putprop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19088">duk_pop_n()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19059">duk_push_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19052">duk_push_hstring_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04264">duk_push_u32</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01134">DUK_STRIDX_LENGTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04747">duk_hobject_set_length_zero()</a>.</p>

</div>
</div>
<a id="a21499ead2f48da6d75ba97456faf615a" name="a21499ead2f48da6d75ba97456faf615a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21499ead2f48da6d75ba97456faf615a">&#9670;&#160;</a></span>duk_hobject_set_length_zero()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hobject_set_length_zero </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hobject.html">duk_hobject</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04747">4747</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html">duktape-1.8.0/src-separate/duk_hobject_props.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 4747</span>                                                                                  {</div>
<div class="line"><span class="lineno"> 4748</span>    <a class="code hl_function" href="#ad4866a2fa7c6b2423f64aaa46642108e">duk_hobject_set_length</a>(thr, obj, 0);</div>
<div class="line"><span class="lineno"> 4749</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__hobject__props_8c_html_ad4866a2fa7c6b2423f64aaa46642108e"><div class="ttname"><a href="#ad4866a2fa7c6b2423f64aaa46642108e">duk_hobject_set_length</a></div><div class="ttdeci">DUK_INTERNAL void duk_hobject_set_length(duk_hthread *thr, duk_hobject *obj, duk_uint32_t length)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04734">duktape-1.8.0/src-separate/duk_hobject_props.c:4734</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c_source.html#l04734">duk_hobject_set_length()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1e03628437b642463b7b6eb98fac43e1.html">vendor</a></li><li class="navelem"><a class="el" href="dir_84591d08937a968859b7757c3b203700.html">civetweb</a></li><li class="navelem"><a class="el" href="dir_34c971402fa1824d9c500953fc75cb63.html">third_party</a></li><li class="navelem"><a class="el" href="dir_00bee2651a8e543911ee9ac473617819.html">duktape-1.8.0</a></li><li class="navelem"><a class="el" href="dir_27bca86221c24c635a9197b9d0b1c3d5.html">src-separate</a></li><li class="navelem"><a class="el" href="duktape-1_88_80_2src-separate_2duk__hobject__props_8c.html">duk_hobject_props.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
