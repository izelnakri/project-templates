<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Github User Fetcher: duk_bi_buffer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Github User Fetcher<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">C/C++ Application with Server and GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('duktape-1_88_80_2src-separate_2duk__bi__buffer_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">duk_bi_buffer.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="duktape-1_88_80_2src-separate_2duk__internal_8h_source.html">duk_internal.h</a>&quot;</code><br />
</div>
<p><a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a90e9037a38139989e547da48b3c41385" id="r_a90e9037a38139989e547da48b3c41385"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90e9037a38139989e547da48b3c41385">DUK__FLD_8BIT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a90e9037a38139989e547da48b3c41385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bbb4f0c386187d3c017674c810e2114" id="r_a3bbb4f0c386187d3c017674c810e2114"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3bbb4f0c386187d3c017674c810e2114">DUK__FLD_16BIT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a3bbb4f0c386187d3c017674c810e2114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ceb8c155dc2802eb63a145526082ff" id="r_a78ceb8c155dc2802eb63a145526082ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78ceb8c155dc2802eb63a145526082ff">DUK__FLD_32BIT</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a78ceb8c155dc2802eb63a145526082ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16180d2cb993692979f129dcd6287bf8" id="r_a16180d2cb993692979f129dcd6287bf8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16180d2cb993692979f129dcd6287bf8">DUK__FLD_FLOAT</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a16180d2cb993692979f129dcd6287bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27292afecb94650e2a6d4d87b295c417" id="r_a27292afecb94650e2a6d4d87b295c417"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27292afecb94650e2a6d4d87b295c417">DUK__FLD_DOUBLE</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a27292afecb94650e2a6d4d87b295c417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a820c22f992aac28df97907d0fce2dff3" id="r_a820c22f992aac28df97907d0fce2dff3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a820c22f992aac28df97907d0fce2dff3">DUK__FLD_VARINT</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a820c22f992aac28df97907d0fce2dff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa235e351656fd1adfc8ef55392829bf7" id="r_aa235e351656fd1adfc8ef55392829bf7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa235e351656fd1adfc8ef55392829bf7">DUK__FLD_BIGENDIAN</a>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="separator:aa235e351656fd1adfc8ef55392829bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f6b3a6cf7f72dc639825cd4cd38f0f9" id="r_a9f6b3a6cf7f72dc639825cd4cd38f0f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f6b3a6cf7f72dc639825cd4cd38f0f9">DUK__FLD_SIGNED</a>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="separator:a9f6b3a6cf7f72dc639825cd4cd38f0f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3496997036ac85281551e77cee9987ef" id="r_a3496997036ac85281551e77cee9987ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3496997036ac85281551e77cee9987ef">DUK__FLD_TYPEDARRAY</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="separator:a3496997036ac85281551e77cee9987ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a556b896e2a26d9496589f9c84d3989d8" id="r_a556b896e2a26d9496589f9c84d3989d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a556b896e2a26d9496589f9c84d3989d8">duk__getrequire_bufobj_this</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> throw_flag)</td></tr>
<tr class="separator:a556b896e2a26d9496589f9c84d3989d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d613ea1ca36247bc43e13c50f1c273" id="r_ab7d613ea1ca36247bc43e13c50f1c273"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7d613ea1ca36247bc43e13c50f1c273">duk__get_bufobj_this</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:ab7d613ea1ca36247bc43e13c50f1c273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6be9238d2f5c5a423f041174ef5580" id="r_aed6be9238d2f5c5a423f041174ef5580"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:aed6be9238d2f5c5a423f041174ef5580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0a9c0e1a83906e68f823eb03aa2e31a" id="r_ae0a9c0e1a83906e68f823eb03aa2e31a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> <a class="el" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a>)</td></tr>
<tr class="separator:ae0a9c0e1a83906e68f823eb03aa2e31a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25e538719df2199bb71373146d79717" id="r_af25e538719df2199bb71373146d79717"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af25e538719df2199bb71373146d79717">duk__set_bufobj_buffer</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj, <a class="el" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val)</td></tr>
<tr class="separator:af25e538719df2199bb71373146d79717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28497a33da5217959aebc22602926df6" id="r_a28497a33da5217959aebc22602926df6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a28497a33da5217959aebc22602926df6">duk__push_arraybuffer_with_length</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> len)</td></tr>
<tr class="separator:a28497a33da5217959aebc22602926df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b33adf4b8ce3ab334ef0290bf3f293" id="r_a95b33adf4b8ce3ab334ef0290bf3f293"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a95b33adf4b8ce3ab334ef0290bf3f293">duk__resolve_offset_opt_length</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarg, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_offset, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_length, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> *out_offset, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> *out_length, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> throw_flag)</td></tr>
<tr class="separator:a95b33adf4b8ce3ab334ef0290bf3f293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1d5b31362075274f6228cd0a433a98" id="r_a0d1d5b31362075274f6228cd0a433a98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d1d5b31362075274f6228cd0a433a98">duk__clamp_startend_nonegidx_noshift</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_start, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_end, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *out_start_offset, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *out_end_offset)</td></tr>
<tr class="separator:a0d1d5b31362075274f6228cd0a433a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee6b19a377d36318d1c2458022c7bbd1" id="r_aee6b19a377d36318d1c2458022c7bbd1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee6b19a377d36318d1c2458022c7bbd1">duk__clamp_startend_negidx_shifted</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_start, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a> idx_end, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *out_start_offset, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *out_end_offset)</td></tr>
<tr class="separator:aee6b19a377d36318d1c2458022c7bbd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02c9a7adb2cc34d1aa73bfe7654ccd87" id="r_a02c9a7adb2cc34d1aa73bfe7654ccd87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02c9a7adb2cc34d1aa73bfe7654ccd87">duk_hbufferobject_push_validated_read</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj, duk_uint8_t *p, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_size)</td></tr>
<tr class="separator:a02c9a7adb2cc34d1aa73bfe7654ccd87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1472e966ace67a5533431d7e197898ed" id="r_a1472e966ace67a5533431d7e197898ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1472e966ace67a5533431d7e197898ed">duk_hbufferobject_validated_write</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx, <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj, duk_uint8_t *p, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_size)</td></tr>
<tr class="separator:a1472e966ace67a5533431d7e197898ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008ec0aa8bd6ec2048496f373d303c86" id="r_a008ec0aa8bd6ec2048496f373d303c86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a008ec0aa8bd6ec2048496f373d303c86">duk_bi_buffer_constructor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a008ec0aa8bd6ec2048496f373d303c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942920c544855f8f9639dd2d25799718" id="r_a942920c544855f8f9639dd2d25799718"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a942920c544855f8f9639dd2d25799718">duk_bi_nodejs_buffer_constructor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a942920c544855f8f9639dd2d25799718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ccf6d9750a376f552c2b799a6bac3e7" id="r_a7ccf6d9750a376f552c2b799a6bac3e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ccf6d9750a376f552c2b799a6bac3e7">duk_bi_arraybuffer_constructor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a7ccf6d9750a376f552c2b799a6bac3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b2397b99e38ea242e381d5bc782da1" id="r_ac7b2397b99e38ea242e381d5bc782da1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7b2397b99e38ea242e381d5bc782da1">duk_bi_typedarray_constructor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:ac7b2397b99e38ea242e381d5bc782da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39e7c10af6161a3c1bd4c79ff729086a" id="r_a39e7c10af6161a3c1bd4c79ff729086a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a39e7c10af6161a3c1bd4c79ff729086a">duk_bi_dataview_constructor</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a39e7c10af6161a3c1bd4c79ff729086a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c40ba5055a62cdeac12d2a35f47556" id="r_a29c40ba5055a62cdeac12d2a35f47556"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29c40ba5055a62cdeac12d2a35f47556">duk_bi_arraybuffer_isview</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a29c40ba5055a62cdeac12d2a35f47556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a915678c7dd69f63799a5206fc4534aa4" id="r_a915678c7dd69f63799a5206fc4534aa4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a915678c7dd69f63799a5206fc4534aa4">duk_bi_nodejs_buffer_tostring</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a915678c7dd69f63799a5206fc4534aa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff055e54d7c188bb9abd21735e377610" id="r_aff055e54d7c188bb9abd21735e377610"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff055e54d7c188bb9abd21735e377610">duk_bi_buffer_prototype_tostring_shared</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:aff055e54d7c188bb9abd21735e377610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a071f52a7c659740b8f62beed6fd81ce5" id="r_a071f52a7c659740b8f62beed6fd81ce5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a071f52a7c659740b8f62beed6fd81ce5">duk_bi_nodejs_buffer_tojson</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a071f52a7c659740b8f62beed6fd81ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b586a2b59b37e7326869afffe13b0e7" id="r_a8b586a2b59b37e7326869afffe13b0e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b586a2b59b37e7326869afffe13b0e7">duk_bi_buffer_compare_shared</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a8b586a2b59b37e7326869afffe13b0e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13b2120c513806229efc1f1447360431" id="r_a13b2120c513806229efc1f1447360431"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13b2120c513806229efc1f1447360431">duk_bi_nodejs_buffer_fill</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a13b2120c513806229efc1f1447360431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d5b1d593b8432a829f01d60586e671" id="r_a35d5b1d593b8432a829f01d60586e671"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35d5b1d593b8432a829f01d60586e671">duk_bi_nodejs_buffer_write</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a35d5b1d593b8432a829f01d60586e671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f5234d675d4bedd64bd84f347710da8" id="r_a7f5234d675d4bedd64bd84f347710da8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f5234d675d4bedd64bd84f347710da8">duk_bi_nodejs_buffer_copy</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a7f5234d675d4bedd64bd84f347710da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e9349ede4614a30410744c5457f722" id="r_a72e9349ede4614a30410744c5457f722"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72e9349ede4614a30410744c5457f722">duk_bi_typedarray_set</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a72e9349ede4614a30410744c5457f722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24817da8ffb2d9af6f06b91e4a49070c" id="r_a24817da8ffb2d9af6f06b91e4a49070c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24817da8ffb2d9af6f06b91e4a49070c">duk_bi_buffer_slice_shared</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a24817da8ffb2d9af6f06b91e4a49070c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3de71e926985c93884af87c247a410bd" id="r_a3de71e926985c93884af87c247a410bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3de71e926985c93884af87c247a410bd">duk_bi_nodejs_buffer_is_encoding</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a3de71e926985c93884af87c247a410bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2df7232083d243275c4594dbe3a885d" id="r_ac2df7232083d243275c4594dbe3a885d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2df7232083d243275c4594dbe3a885d">duk_bi_nodejs_buffer_is_buffer</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:ac2df7232083d243275c4594dbe3a885d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a697b4fe14ab2b8e0b6e34b046f8f727a" id="r_a697b4fe14ab2b8e0b6e34b046f8f727a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a697b4fe14ab2b8e0b6e34b046f8f727a">duk_bi_nodejs_buffer_byte_length</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a697b4fe14ab2b8e0b6e34b046f8f727a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a7c6bc6e47b190db6de8183cd78ab0" id="r_a09a7c6bc6e47b190db6de8183cd78ab0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09a7c6bc6e47b190db6de8183cd78ab0">duk_bi_nodejs_buffer_concat</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a09a7c6bc6e47b190db6de8183cd78ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a264f2dc3f0a630f5d1101ab4ece90b08" id="r_a264f2dc3f0a630f5d1101ab4ece90b08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a264f2dc3f0a630f5d1101ab4ece90b08">duk_bi_buffer_readfield</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a264f2dc3f0a630f5d1101ab4ece90b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab58f9dc6019e20c1686a527f37eb10" id="r_a1ab58f9dc6019e20c1686a527f37eb10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ab58f9dc6019e20c1686a527f37eb10">duk_bi_buffer_writefield</a> (<a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *ctx)</td></tr>
<tr class="separator:a1ab58f9dc6019e20c1686a527f37eb10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a36d0e74f91871c4baeb1957d55eb044f" id="r_a36d0e74f91871c4baeb1957d55eb044f"><td class="memItemLeft" align="right" valign="top">static const duk_uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36d0e74f91871c4baeb1957d55eb044f">duk__buffer_class_from_elemtype</a> [9]</td></tr>
<tr class="separator:a36d0e74f91871c4baeb1957d55eb044f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768a8fb484ad2db508114924900d9450" id="r_a768a8fb484ad2db508114924900d9450"><td class="memItemLeft" align="right" valign="top">static const duk_uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a768a8fb484ad2db508114924900d9450">duk__buffer_proto_from_elemtype</a> [9]</td></tr>
<tr class="separator:a768a8fb484ad2db508114924900d9450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a689ac1d15121b224cbc1ae301223408f" id="r_a689ac1d15121b224cbc1ae301223408f"><td class="memItemLeft" align="right" valign="top">static const duk_uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a689ac1d15121b224cbc1ae301223408f">duk__buffer_nbytes_from_fldtype</a> [6]</td></tr>
<tr class="separator:a689ac1d15121b224cbc1ae301223408f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c076de8ac3c96667d04e61230595ad" id="r_ac3c076de8ac3c96667d04e61230595ad"><td class="memItemLeft" align="right" valign="top">static duk_uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3c076de8ac3c96667d04e61230595ad">duk__buffer_elemtype_copy_compatible</a> [9]</td></tr>
<tr class="separator:ac3c076de8ac3c96667d04e61230595ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3bbb4f0c386187d3c017674c810e2114" name="a3bbb4f0c386187d3c017674c810e2114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bbb4f0c386187d3c017674c810e2114">&#9670;&#160;</a></span>DUK__FLD_16BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_16BIT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02319">2319</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">duk_bi_buffer_readfield()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>.</p>

</div>
</div>
<a id="a78ceb8c155dc2802eb63a145526082ff" name="a78ceb8c155dc2802eb63a145526082ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ceb8c155dc2802eb63a145526082ff">&#9670;&#160;</a></span>DUK__FLD_32BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_32BIT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02320">2320</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">duk_bi_buffer_readfield()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>.</p>

</div>
</div>
<a id="a90e9037a38139989e547da48b3c41385" name="a90e9037a38139989e547da48b3c41385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e9037a38139989e547da48b3c41385">&#9670;&#160;</a></span>DUK__FLD_8BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_8BIT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02318">2318</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">duk_bi_buffer_readfield()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>.</p>

</div>
</div>
<a id="aa235e351656fd1adfc8ef55392829bf7" name="aa235e351656fd1adfc8ef55392829bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa235e351656fd1adfc8ef55392829bf7">&#9670;&#160;</a></span>DUK__FLD_BIGENDIAN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_BIGENDIAN&#160;&#160;&#160;(1 &lt;&lt; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02324">2324</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

</div>
</div>
<a id="a27292afecb94650e2a6d4d87b295c417" name="a27292afecb94650e2a6d4d87b295c417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27292afecb94650e2a6d4d87b295c417">&#9670;&#160;</a></span>DUK__FLD_DOUBLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_DOUBLE&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02322">2322</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">duk_bi_buffer_readfield()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>.</p>

</div>
</div>
<a id="a16180d2cb993692979f129dcd6287bf8" name="a16180d2cb993692979f129dcd6287bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16180d2cb993692979f129dcd6287bf8">&#9670;&#160;</a></span>DUK__FLD_FLOAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_FLOAT&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02321">2321</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">duk_bi_buffer_readfield()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>.</p>

</div>
</div>
<a id="a9f6b3a6cf7f72dc639825cd4cd38f0f9" name="a9f6b3a6cf7f72dc639825cd4cd38f0f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f6b3a6cf7f72dc639825cd4cd38f0f9">&#9670;&#160;</a></span>DUK__FLD_SIGNED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_SIGNED&#160;&#160;&#160;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02325">2325</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

</div>
</div>
<a id="a3496997036ac85281551e77cee9987ef" name="a3496997036ac85281551e77cee9987ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3496997036ac85281551e77cee9987ef">&#9670;&#160;</a></span>DUK__FLD_TYPEDARRAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_TYPEDARRAY&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02326">2326</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

</div>
</div>
<a id="a820c22f992aac28df97907d0fce2dff3" name="a820c22f992aac28df97907d0fce2dff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a820c22f992aac28df97907d0fce2dff3">&#9670;&#160;</a></span>DUK__FLD_VARINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__FLD_VARINT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02323">2323</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">duk_bi_buffer_readfield()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aee6b19a377d36318d1c2458022c7bbd1" name="aee6b19a377d36318d1c2458022c7bbd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee6b19a377d36318d1c2458022c7bbd1">&#9670;&#160;</a></span>duk__clamp_startend_negidx_shifted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__clamp_startend_negidx_shifted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *</td>          <td class="paramname"><span class="paramname"><em>h_bufobj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_start</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_end</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_start_offset</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_end_offset</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00330">330</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  335</span>                                                                             {</div>
<div class="line"><span class="lineno">  336</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> buffer_length;</div>
<div class="line"><span class="lineno">  337</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> start_offset;</div>
<div class="line"><span class="lineno">  338</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> end_offset;</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_start_offset != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  341</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_end_offset != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>    buffer_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno">  344</span>    buffer_length &gt;&gt;= h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;  <span class="comment">/* as elements */</span></div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">/* Resolve start/end offset as element indices first; arguments</span></div>
<div class="line"><span class="lineno">  347</span><span class="comment">     * at idx_start/idx_end are element offsets.  Working with element</span></div>
<div class="line"><span class="lineno">  348</span><span class="comment">     * indices first also avoids potential for wrapping.</span></div>
<div class="line"><span class="lineno">  349</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    start_offset = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, idx_start);</div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">if</span> (start_offset &lt; 0) {</div>
<div class="line"><span class="lineno">  353</span>        start_offset = buffer_length + start_offset;</div>
<div class="line"><span class="lineno">  354</span>    }</div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, idx_end)) {</div>
<div class="line"><span class="lineno">  356</span>        end_offset = buffer_length;</div>
<div class="line"><span class="lineno">  357</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  358</span>        end_offset = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, idx_end);</div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">if</span> (end_offset &lt; 0) {</div>
<div class="line"><span class="lineno">  360</span>            end_offset = buffer_length + end_offset;</div>
<div class="line"><span class="lineno">  361</span>        }</div>
<div class="line"><span class="lineno">  362</span>    }</div>
<div class="line"><span class="lineno">  363</span>    <span class="comment">/* Note: start_offset/end_offset can still be &lt; 0 here. */</span></div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    <span class="keywordflow">if</span> (start_offset &lt; 0) {</div>
<div class="line"><span class="lineno">  366</span>        start_offset = 0;</div>
<div class="line"><span class="lineno">  367</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (start_offset &gt; buffer_length) {</div>
<div class="line"><span class="lineno">  368</span>        start_offset = buffer_length;</div>
<div class="line"><span class="lineno">  369</span>    }</div>
<div class="line"><span class="lineno">  370</span>    <span class="keywordflow">if</span> (end_offset &lt; start_offset) {</div>
<div class="line"><span class="lineno">  371</span>        end_offset = start_offset;</div>
<div class="line"><span class="lineno">  372</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (end_offset &gt; buffer_length) {</div>
<div class="line"><span class="lineno">  373</span>        end_offset = buffer_length;</div>
<div class="line"><span class="lineno">  374</span>    }</div>
<div class="line"><span class="lineno">  375</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_offset &gt;= 0);</div>
<div class="line"><span class="lineno">  376</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_offset &lt;= buffer_length);</div>
<div class="line"><span class="lineno">  377</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_offset &gt;= 0);</div>
<div class="line"><span class="lineno">  378</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_offset &lt;= buffer_length);</div>
<div class="line"><span class="lineno">  379</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_offset &lt;= end_offset);</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>    <span class="comment">/* Convert indices to byte offsets. */</span></div>
<div class="line"><span class="lineno">  382</span>    start_offset &lt;&lt;= h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno">  383</span>    end_offset &lt;&lt;= h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>    *out_start_offset = start_offset;</div>
<div class="line"><span class="lineno">  386</span>    *out_end_offset = end_offset;</div>
<div class="line"><span class="lineno">  387</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9dbc0fdd27e7326d21cbf56e6d40d8a5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a></div><div class="ttdeci">duk_int_fast32_t duk_int_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01785">duktape-1.5.2/src-noline/duk_config.h:1785</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a10838caaff9e74b1e3904c78df71d53a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_undefined(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duktape-1.5.2/src-noline/duktape.c:17600</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a52bc112231cf556000de414bca74c712"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a></div><div class="ttdeci">#define DUK_ASSERT(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">duktape-1.5.2/src-noline/duktape.c:7755</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af160d8202dc25eefbc1b56aa2fc95632"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a></div><div class="ttdeci">DUK_EXTERNAL duk_int_t duk_to_int(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duktape-1.5.2/src-noline/duktape.c:16809</a></div></div>
<div class="ttc" id="agmacros_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="gmacros_8h_source.html#l00924">gmacros.h:924</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_aaa3fd592a16d517b22eedefbaec1b71e"><div class="ttname"><a href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">duk_hbufferobject::length</a></div><div class="ttdeci">duk_uint_t length</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duktape-1.5.2/src-noline/duktape.c:5922</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_aefc78592db50bd2f5b23ac2b9ec87d25"><div class="ttname"><a href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">duk_hbufferobject::shift</a></div><div class="ttdeci">duk_uint8_t shift</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duktape-1.5.2/src-noline/duktape.c:5923</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01976">duk_bi_buffer_slice_shared()</a>.</p>

</div>
</div>
<a id="a0d1d5b31362075274f6228cd0a433a98" name="a0d1d5b31362075274f6228cd0a433a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1d5b31362075274f6228cd0a433a98">&#9670;&#160;</a></span>duk__clamp_startend_nonegidx_noshift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__clamp_startend_nonegidx_noshift </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *</td>          <td class="paramname"><span class="paramname"><em>h_bufobj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_start</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_end</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_start_offset</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_end_offset</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00288">288</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  293</span>                                                                               {</div>
<div class="line"><span class="lineno">  294</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> buffer_length;</div>
<div class="line"><span class="lineno">  295</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> start_offset;</div>
<div class="line"><span class="lineno">  296</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> end_offset;</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_start_offset != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  299</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_end_offset != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>    buffer_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>    <span class="comment">/* undefined coerces to zero which is correct */</span></div>
<div class="line"><span class="lineno">  304</span>    start_offset = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, idx_start, 0, buffer_length);</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, idx_end)) {</div>
<div class="line"><span class="lineno">  306</span>        end_offset = buffer_length;</div>
<div class="line"><span class="lineno">  307</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  308</span>        end_offset = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, idx_end, start_offset, buffer_length);</div>
<div class="line"><span class="lineno">  309</span>    }</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_offset &gt;= 0);</div>
<div class="line"><span class="lineno">  312</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_offset &lt;= buffer_length);</div>
<div class="line"><span class="lineno">  313</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_offset &gt;= 0);</div>
<div class="line"><span class="lineno">  314</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_offset &lt;= buffer_length);</div>
<div class="line"><span class="lineno">  315</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(start_offset &lt;= end_offset);</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    *out_start_offset = start_offset;</div>
<div class="line"><span class="lineno">  318</span>    *out_end_offset = end_offset;</div>
<div class="line"><span class="lineno">  319</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2a469d9148d5bf602548d99f053ce2d6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_int_t duk_to_int_clamped(duk_context *ctx, duk_idx_t index, duk_int_t minval, duk_int_t maxval)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duktape-1.5.2/src-noline/duktape.c:17080</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duk_to_int_clamped()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01423">duk_bi_nodejs_buffer_fill()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01194">duk_bi_nodejs_buffer_tostring()</a>.</p>

</div>
</div>
<a id="ab7d613ea1ca36247bc43e13c50f1c273" name="ab7d613ea1ca36247bc43e13c50f1c273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d613ea1ca36247bc43e13c50f1c273">&#9670;&#160;</a></span>duk__get_bufobj_this()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> * duk__get_bufobj_this </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00136">136</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span>                                                                    {</div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#a556b896e2a26d9496589f9c84d3989d8">duk__getrequire_bufobj_this</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  138</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a556b896e2a26d9496589f9c84d3989d8"><div class="ttname"><a href="#a556b896e2a26d9496589f9c84d3989d8">duk__getrequire_bufobj_this</a></div><div class="ttdeci">DUK_LOCAL duk_hbufferobject * duk__getrequire_bufobj_this(duk_context *ctx, duk_bool_t throw_flag)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00108">duktape-1.8.0/src-separate/duk_bi_buffer.c:108</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00108">duk__getrequire_bufobj_this()</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01194">duk_bi_nodejs_buffer_tostring()</a>.</p>

</div>
</div>
<a id="a556b896e2a26d9496589f9c84d3989d8" name="a556b896e2a26d9496589f9c84d3989d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a556b896e2a26d9496589f9c84d3989d8">&#9670;&#160;</a></span>duk__getrequire_bufobj_this()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> * duk__getrequire_bufobj_this </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>throw_flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00108">108</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  108</span>                                                                                                  {</div>
<div class="line"><span class="lineno">  109</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno">  110</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  114</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac49734b07801fb6a55929b80c6ae12b1">duk_get_borrowed_this_tval</a>(ctx);</div>
<div class="line"><span class="lineno">  117</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv)) {</div>
<div class="line"><span class="lineno">  119</span>        h_this = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv);</div>
<div class="line"><span class="lineno">  120</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>((<a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *) h_this)) {</div>
<div class="line"><span class="lineno">  122</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_this);</div>
<div class="line"><span class="lineno">  123</span>            <span class="keywordflow">return</span> h_this;</div>
<div class="line"><span class="lineno">  124</span>        }</div>
<div class="line"><span class="lineno">  125</span>    }</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno">  128</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad90f96c31f6b467770f98fd1ec4e10ae">DUK_STR_NOT_BUFFER</a>);</div>
<div class="line"><span class="lineno">  129</span>    }</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  131</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a13623e5d472d92f656ad1d9a2875d277"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a></div><div class="ttdeci">#define DUK_ERROR_TYPE(thr, msg)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">duktape-1.5.2/src-noline/duktape.c:7882</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2a196d761c3a7789fcc2ac3cf61ad601"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a></div><div class="ttdeci">#define DUK_TVAL_GET_OBJECT(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">duktape-1.5.2/src-noline/duktape.c:787</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3e6da5a54e90086602a9d6f44997d640"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a></div><div class="ttdeci">#define DUK_TVAL_IS_OBJECT(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">duktape-1.5.2/src-noline/duktape.c:811</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a55b936422ab7344b888bbe0478e83aee"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a></div><div class="ttdeci">#define DUK_ASSERT_HBUFFEROBJECT_VALID(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">duktape-1.5.2/src-noline/duktape.c:5829</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7f4ff3d6f73d0aa5f0eee7b7544f49fd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a></div><div class="ttdeci">#define DUK_HOBJECT_IS_BUFFEROBJECT(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">duktape-1.5.2/src-noline/duktape.c:4776</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac49734b07801fb6a55929b80c6ae12b1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac49734b07801fb6a55929b80c6ae12b1">duk_get_borrowed_this_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_tval * duk_get_borrowed_this_tval(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18207">duktape-1.5.2/src-noline/duktape.c:18207</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad90f96c31f6b467770f98fd1ec4e10ae"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad90f96c31f6b467770f98fd1ec4e10ae">DUK_STR_NOT_BUFFER</a></div><div class="ttdeci">#define DUK_STR_NOT_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02307">duktape-1.5.2/src-noline/duktape.c:2307</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html"><div class="ttname"><a href="structduk__hbufferobject.html">duk_hbufferobject</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05901">duktape-1.5.2/src-noline/duktape.c:5901</a></div></div>
<div class="ttc" id="astructduk__hobject_html"><div class="ttname"><a href="structduk__hobject.html">duk_hobject</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05328">duktape-1.5.2/src-noline/duktape.c:5328</a></div></div>
<div class="ttc" id="astructduk__hthread_html"><div class="ttname"><a href="structduk__hthread.html">duk_hthread</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06190">duktape-1.5.2/src-noline/duktape.c:6190</a></div></div>
<div class="ttc" id="astructduk__tval__struct_html"><div class="ttname"><a href="structduk__tval__struct.html">duk_tval_struct</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00616">duktape-1.5.2/src-noline/duktape.c:616</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18207">duk_get_borrowed_this_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02307">DUK_STR_NOT_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00136">duk__get_bufobj_this()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>.</p>

</div>
</div>
<a id="a28497a33da5217959aebc22602926df6" name="a28497a33da5217959aebc22602926df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28497a33da5217959aebc22602926df6">&#9670;&#160;</a></span>duk__push_arraybuffer_with_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> * duk__push_arraybuffer_with_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00200">200</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  200</span>                                                                                                 {</div>
<div class="line"><span class="lineno">  201</span>    <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val;</div>
<div class="line"><span class="lineno">  202</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    (void) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) len);</div>
<div class="line"><span class="lineno">  205</span>    h_val = (<a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  206</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>    h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno">  209</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno">  210</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno">  211</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2f5f0b3d50debc94a7e26d59ae9c09b">DUK_HOBJECT_CLASS_ARRAYBUFFER</a>),</div>
<div class="line"><span class="lineno">  212</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03ea79422dcd012cb631dbff8f20def8">DUK_BIDX_ARRAYBUFFER_PROTOTYPE</a>);</div>
<div class="line"><span class="lineno">  213</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    <a class="code hl_function" href="#af25e538719df2199bb71373146d79717">duk__set_bufobj_buffer</a>(ctx, h_bufobj, h_val);</div>
<div class="line"><span class="lineno">  216</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">return</span> h_bufobj;</div>
<div class="line"><span class="lineno">  219</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ab0a71934d59f38f195fea2f353032392"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a></div><div class="ttdeci">size_t duk_size_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01770">duktape-1.5.2/src-noline/duk_config.h:1770</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a03ea79422dcd012cb631dbff8f20def8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03ea79422dcd012cb631dbff8f20def8">DUK_BIDX_ARRAYBUFFER_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_ARRAYBUFFER_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01676">duktape-1.5.2/src-noline/duktape.c:1676</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a572f32346933291f0ccd575b73d89071"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a></div><div class="ttdeci">#define DUK_HOBJECT_FLAG_BUFFEROBJECT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">duktape-1.5.2/src-noline/duktape.c:4657</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5e79d13530031f2f54f993cd89668356"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_AS_FLAGS(v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">duktape-1.5.2/src-noline/duktape.c:4688</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a87e94fbbe1084b9ae7b83b65b2423eb9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hbuffer * duk_get_hbuffer(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16314">duktape-1.5.2/src-noline/duktape.c:16314</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a96abfbcb4381b5e520bf087234184766"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hbufferobject * duk_push_bufferobject_raw(duk_context *ctx, duk_uint_t hobject_flags_and_class, duk_small_int_t prototype_bidx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duktape-1.5.2/src-noline/duktape.c:18735</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab3861bb2fd293559d606a43da9dca18c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a></div><div class="ttdeci">#define DUK_HOBJECT_FLAG_EXTENSIBLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">duktape-1.5.2/src-noline/duktape.c:4652</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae2f5f0b3d50debc94a7e26d59ae9c09b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2f5f0b3d50debc94a7e26d59ae9c09b">DUK_HOBJECT_CLASS_ARRAYBUFFER</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_ARRAYBUFFER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04710">duktape-1.5.2/src-noline/duktape.c:4710</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a3424cb2e60649186c8c195c2e114124d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a></div><div class="ttdeci">#define duk_push_fixed_buffer(ctx, size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duktape-1.5.2/src-noline/duktape.h:570</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_af25e538719df2199bb71373146d79717"><div class="ttname"><a href="#af25e538719df2199bb71373146d79717">duk__set_bufobj_buffer</a></div><div class="ttdeci">DUK_LOCAL void duk__set_bufobj_buffer(duk_context *ctx, duk_hbufferobject *h_bufobj, duk_hbuffer *h_val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00178">duktape-1.8.0/src-separate/duk_bi_buffer.c:178</a></div></div>
<div class="ttc" id="astructduk__hbuffer_html"><div class="ttname"><a href="structduk__hbuffer.html">duk_hbuffer</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06489">duktape-1.5.2/src-noline/duktape.c:6489</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00178">duk__set_bufobj_buffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01676">DUK_BIDX_ARRAYBUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16314">duk_get_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04710">DUK_HOBJECT_CLASS_ARRAYBUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duk_push_fixed_buffer</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00743">duk_bi_typedarray_constructor()</a>.</p>

</div>
</div>
<a id="aed6be9238d2f5c5a423f041174ef5580" name="aed6be9238d2f5c5a423f041174ef5580"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6be9238d2f5c5a423f041174ef5580">&#9670;&#160;</a></span>duk__require_bufobj_this()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> * duk__require_bufobj_this </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">145</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  145</span>                                                                        {</div>
<div class="line"><span class="lineno">  146</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#a556b896e2a26d9496589f9c84d3989d8">duk__getrequire_bufobj_this</a>(ctx, 1);</div>
<div class="line"><span class="lineno">  147</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00108">duk__getrequire_bufobj_this()</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01363">duk_bi_buffer_compare_shared()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">duk_bi_buffer_readfield()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01976">duk_bi_buffer_slice_shared()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01551">duk_bi_nodejs_buffer_copy()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01423">duk_bi_nodejs_buffer_fill()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01312">duk_bi_nodejs_buffer_tojson()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01500">duk_bi_nodejs_buffer_write()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01698">duk_bi_typedarray_set()</a>.</p>

</div>
</div>
<a id="ae0a9c0e1a83906e68f823eb03aa2e31a" name="ae0a9c0e1a83906e68f823eb03aa2e31a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a9c0e1a83906e68f823eb03aa2e31a">&#9670;&#160;</a></span>duk__require_bufobj_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> * duk__require_bufobj_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00152">152</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>                                                                                          {</div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_obj;</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    <span class="comment">/* Don&#39;t accept relative indices now. */</span></div>
<div class="line"><span class="lineno">  160</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_variable" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a> &gt;= 0);</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a>(ctx, <a class="code hl_variable" href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a>);</div>
<div class="line"><span class="lineno">  163</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv)) {</div>
<div class="line"><span class="lineno">  165</span>        h_obj = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv);</div>
<div class="line"><span class="lineno">  166</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>((<a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *) h_obj)) {</div>
<div class="line"><span class="lineno">  168</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_obj);</div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">return</span> h_obj;</div>
<div class="line"><span class="lineno">  170</span>        }</div>
<div class="line"><span class="lineno">  171</span>    }</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a13623e5d472d92f656ad1d9a2875d277">DUK_ERROR_TYPE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad90f96c31f6b467770f98fd1ec4e10ae">DUK_STR_NOT_BUFFER</a>);</div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">/* not reachable */</span></div>
<div class="line"><span class="lineno">  175</span>}</div>
<div class="ttc" id="adeprecated_2gthread_8h_html_ac9be6c0781aab4af4c0d61c77a938911"><div class="ttname"><a href="deprecated_2gthread_8h.html#ac9be6c0781aab4af4c0d61c77a938911">index</a></div><div class="ttdeci">guint index</div><div class="ttdef"><b>Definition</b> <a href="deprecated_2gthread_8h_source.html#l00001">deprecated/gthread.h:1</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aae4918883d66d1a21907da22171fb1c6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aae4918883d66d1a21907da22171fb1c6">duk_require_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_tval * duk_require_tval(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duktape-1.5.2/src-noline/duktape.c:15149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07882">DUK_ERROR_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15149">duk_require_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02307">DUK_STR_NOT_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="deprecated_2gthread_8h_source.html#l00001">index</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01363">duk_bi_buffer_compare_shared()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01104">duk_bi_dataview_constructor()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02190">duk_bi_nodejs_buffer_concat()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01551">duk_bi_nodejs_buffer_copy()</a>.</p>

</div>
</div>
<a id="a95b33adf4b8ce3ab334ef0290bf3f293" name="a95b33adf4b8ce3ab334ef0290bf3f293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b33adf4b8ce3ab334ef0290bf3f293">&#9670;&#160;</a></span>duk__resolve_offset_opt_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__resolve_offset_opt_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *</td>          <td class="paramname"><span class="paramname"><em>h_bufarg</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_offset</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></td>          <td class="paramname"><span class="paramname"><em>idx_length</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_offset</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_length</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>throw_flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00224">224</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  230</span>                                                                     {</div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno">  232</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> offset_signed;</div>
<div class="line"><span class="lineno">  233</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> length_signed;</div>
<div class="line"><span class="lineno">  234</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> offset;</div>
<div class="line"><span class="lineno">  235</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> length;</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  238</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    offset_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, idx_offset);</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span> (offset_signed &lt; 0) {</div>
<div class="line"><span class="lineno">  242</span>        <span class="keywordflow">goto</span> fail_range;</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span>    offset = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) offset_signed;</div>
<div class="line"><span class="lineno">  245</span>    <span class="keywordflow">if</span> (offset &gt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>) {</div>
<div class="line"><span class="lineno">  246</span>        <span class="keywordflow">goto</span> fail_range;</div>
<div class="line"><span class="lineno">  247</span>    }</div>
<div class="line"><span class="lineno">  248</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(offset &gt;= 0);  <span class="comment">/* unsigned */</span></div>
<div class="line"><span class="lineno">  249</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset &lt;= h_bufarg-&gt;length);</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, idx_length)) {</div>
<div class="line"><span class="lineno">  252</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;= offset);</div>
<div class="line"><span class="lineno">  253</span>        length = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> - offset;  <span class="comment">/* &gt;= 0 */</span></div>
<div class="line"><span class="lineno">  254</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  255</span>        length_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, idx_length);</div>
<div class="line"><span class="lineno">  256</span>        <span class="keywordflow">if</span> (length_signed &lt; 0) {</div>
<div class="line"><span class="lineno">  257</span>            <span class="keywordflow">goto</span> fail_range;</div>
<div class="line"><span class="lineno">  258</span>        }</div>
<div class="line"><span class="lineno">  259</span>        length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) length_signed;</div>
<div class="line"><span class="lineno">  260</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;= offset);</div>
<div class="line"><span class="lineno">  261</span>        <span class="keywordflow">if</span> (length &gt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> - offset) {</div>
<div class="line"><span class="lineno">  262</span>            <span class="comment">/* Unlike for negative arguments, some call sites</span></div>
<div class="line"><span class="lineno">  263</span><span class="comment">             * want length to be clamped if it&#39;s positive.</span></div>
<div class="line"><span class="lineno">  264</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  265</span>            <span class="keywordflow">if</span> (throw_flag) {</div>
<div class="line"><span class="lineno">  266</span>                <span class="keywordflow">goto</span> fail_range;</div>
<div class="line"><span class="lineno">  267</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  268</span>                length = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> - offset;</div>
<div class="line"><span class="lineno">  269</span>            }</div>
<div class="line"><span class="lineno">  270</span>        }</div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="line"><span class="lineno">  272</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(length &gt;= 0);  <span class="comment">/* unsigned */</span></div>
<div class="line"><span class="lineno">  273</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset + length &lt;= h_bufarg-&gt;length);</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>    *out_offset = offset;</div>
<div class="line"><span class="lineno">  276</span>    *out_length = length;</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span> fail_range:</div>
<div class="line"><span class="lineno">  280</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a058cd56ed742ea766d26976d56c159d4">DUK_ERROR_RANGE</a>(thr, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ff85cd89ea1baf8ab0f8bb7e010d9a5">DUK_STR_INVALID_CALL_ARGS</a>);</div>
<div class="line"><span class="lineno">  281</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9170138f330dbcaabfae9d2c59cc9684"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a></div><div class="ttdeci">#define DUK_UNREF(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">duktape-1.5.2/src-noline/duk_config.h:2494</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ac176f6049a9cba3519cc353c879e614b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a></div><div class="ttdeci">duk_uint_fast32_t duk_uint_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01786">duktape-1.5.2/src-noline/duk_config.h:1786</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a058cd56ed742ea766d26976d56c159d4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a058cd56ed742ea766d26976d56c159d4">DUK_ERROR_RANGE</a></div><div class="ttdeci">#define DUK_ERROR_RANGE(thr, msg)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07875">duktape-1.5.2/src-noline/duktape.c:7875</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2ff85cd89ea1baf8ab0f8bb7e010d9a5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2ff85cd89ea1baf8ab0f8bb7e010d9a5">DUK_STR_INVALID_CALL_ARGS</a></div><div class="ttdeci">#define DUK_STR_INVALID_CALL_ARGS</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02279">duktape-1.5.2/src-noline/duktape.c:2279</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5b32dd67a8481ffa404a403c0cfac2a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a></div><div class="ttdeci">#define DUK_ASSERT_DISABLE(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07764">duktape-1.5.2/src-noline/duktape.c:7764</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07764">DUK_ASSERT_DISABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07875">DUK_ERROR_RANGE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l02279">DUK_STR_INVALID_CALL_ARGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01104">duk_bi_dataview_constructor()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01500">duk_bi_nodejs_buffer_write()</a>.</p>

</div>
</div>
<a id="af25e538719df2199bb71373146d79717" name="af25e538719df2199bb71373146d79717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af25e538719df2199bb71373146d79717">&#9670;&#160;</a></span>duk__set_bufobj_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__set_bufobj_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *</td>          <td class="paramname"><span class="paramname"><em>h_bufobj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hbuffer.html">duk_hbuffer</a> *</td>          <td class="paramname"><span class="paramname"><em>h_val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00178">178</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  178</span>                                                                                                         {</div>
<div class="line"><span class="lineno">  179</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  182</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(ctx != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  185</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);  <span class="comment">/* no need to decref */</span></div>
<div class="line"><span class="lineno">  187</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  188</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> = h_val;</div>
<div class="line"><span class="lineno">  191</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a>(thr, h_val);</div>
<div class="line"><span class="lineno">  192</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a>(h_val);</div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a> == 0);</div>
<div class="line"><span class="lineno">  194</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a> == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>);</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  197</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a15db69f8efd0b06323f643fb8807ce94"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a></div><div class="ttdeci">#define DUK_HBUFFER_INCREF(thr, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03824">duktape-1.5.2/src-noline/duktape.c:3824</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af69926b8cd52fd8f4379883fb74b8d40"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a></div><div class="ttdeci">#define DUK_HBUFFER_GET_SIZE(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">duktape-1.5.2/src-noline/duktape.c:6393</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af882085849a2612a4787b305d269921a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_UINT8</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05818">duktape-1.5.2/src-noline/duktape.c:5818</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_a048ef6abd4eb20f28dacd8c361bad4f0"><div class="ttname"><a href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">duk_hbufferobject::buf</a></div><div class="ttdeci">duk_hbuffer * buf</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duktape-1.5.2/src-noline/duktape.c:5906</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_acf4c9f72abb1cd0dc945746aa5794b50"><div class="ttname"><a href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">duk_hbufferobject::elem_type</a></div><div class="ttdeci">duk_uint8_t elem_type</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duktape-1.5.2/src-noline/duktape.c:5929</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">DUK_HBUFFER_GET_SIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03824">DUK_HBUFFER_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05818">DUK_HBUFFEROBJECT_ELEM_UINT8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00200">duk__push_arraybuffer_with_length()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00672">duk_bi_arraybuffer_constructor()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00488">duk_bi_buffer_constructor()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02190">duk_bi_nodejs_buffer_concat()</a>.</p>

</div>
</div>
<a id="a7ccf6d9750a376f552c2b799a6bac3e7" name="a7ccf6d9750a376f552c2b799a6bac3e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ccf6d9750a376f552c2b799a6bac3e7">&#9670;&#160;</a></span>duk_bi_arraybuffer_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_arraybuffer_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00672">672</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  672</span>                                                                        {</div>
<div class="line"><span class="lineno">  673</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno">  674</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno">  675</span>    <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val;</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a06fc3069d0dbc1b0d9d28c15bb07e1ce">DUK_ASSERT_CTX_VALID</a>(ctx);</div>
<div class="line"><span class="lineno">  678</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  679</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  680</span> </div>
<div class="line"><span class="lineno">  681</span>    <span class="comment">/* XXX: function flag to make this automatic? */</span></div>
<div class="line"><span class="lineno">  682</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9b9ef102c56eca816cb236e3c2dac030">duk_is_constructor_call</a>(ctx)) {</div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  684</span>    }</div>
<div class="line"><span class="lineno">  685</span> </div>
<div class="line"><span class="lineno">  686</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ab9162221f387ea077799b42cc46998">duk_is_buffer</a>(ctx, 0)) {</div>
<div class="line"><span class="lineno">  687</span>        <span class="comment">/* Custom behavior: plain buffer is used as internal buffer</span></div>
<div class="line"><span class="lineno">  688</span><span class="comment">         * without making a copy (matches Duktape.Buffer).</span></div>
<div class="line"><span class="lineno">  689</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>        h_val = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  692</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>        <span class="comment">/* XXX: accept any duk_hbufferobject type as an input also? */</span></div>
<div class="line"><span class="lineno">  695</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  696</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> len;</div>
<div class="line"><span class="lineno">  697</span>        len = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  698</span>        <span class="keywordflow">if</span> (len &lt; 0) {</div>
<div class="line"><span class="lineno">  699</span>            <span class="keywordflow">goto</span> fail_length;</div>
<div class="line"><span class="lineno">  700</span>        }</div>
<div class="line"><span class="lineno">  701</span>        (void) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) len);</div>
<div class="line"><span class="lineno">  702</span>        h_val = (<a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  703</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span><span class="preprocessor">#if !defined(DUK_USE_ZERO_BUFFER_DATA)</span></div>
<div class="line"><span class="lineno">  706</span>        <span class="comment">/* Khronos/ES6 requires zeroing even when DUK_USE_ZERO_BUFFER_DATA</span></div>
<div class="line"><span class="lineno">  707</span><span class="comment">         * is not set.</span></div>
<div class="line"><span class="lineno">  708</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  709</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2b937e7c05c2ec0f0f16352c69cdd82">DUK_HBUFFER_HAS_DYNAMIC</a>((<a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *) h_val));</div>
<div class="line"><span class="lineno">  710</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a>((<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ca3aa8b48e03765e99162448f7a664a">DUK_HBUFFER_FIXED_GET_DATA_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_val), (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) len);</div>
<div class="line"><span class="lineno">  711</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  712</span>    }</div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>    h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno">  715</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno">  716</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno">  717</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2f5f0b3d50debc94a7e26d59ae9c09b">DUK_HOBJECT_CLASS_ARRAYBUFFER</a>),</div>
<div class="line"><span class="lineno">  718</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03ea79422dcd012cb631dbff8f20def8">DUK_BIDX_ARRAYBUFFER_PROTOTYPE</a>);</div>
<div class="line"><span class="lineno">  719</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>    <a class="code hl_function" href="#af25e538719df2199bb71373146d79717">duk__set_bufobj_buffer</a>(ctx, h_bufobj, h_val);</div>
<div class="line"><span class="lineno">  722</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span> fail_length:</div>
<div class="line"><span class="lineno">  727</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno">  728</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ace325eaae44f64bffe3918e912d80ffc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a></div><div class="ttdeci">#define DUK_MEMZERO(p, n)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">duktape-1.5.2/src-noline/duk_config.h:2056</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a06fc3069d0dbc1b0d9d28c15bb07e1ce"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a06fc3069d0dbc1b0d9d28c15bb07e1ce">DUK_ASSERT_CTX_VALID</a></div><div class="ttdeci">#define DUK_ASSERT_CTX_VALID(ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06106">duktape-1.5.2/src-noline/duktape.c:6106</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9ab9162221f387ea077799b42cc46998"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ab9162221f387ea077799b42cc46998">duk_is_buffer</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_buffer(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17676">duktape-1.5.2/src-noline/duktape.c:17676</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9b9ef102c56eca816cb236e3c2dac030"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9b9ef102c56eca816cb236e3c2dac030">duk_is_constructor_call</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_constructor_call(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12775">duktape-1.5.2/src-noline/duktape.c:12775</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9ca3aa8b48e03765e99162448f7a664a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ca3aa8b48e03765e99162448f7a664a">DUK_HBUFFER_FIXED_GET_DATA_PTR</a></div><div class="ttdeci">#define DUK_HBUFFER_FIXED_GET_DATA_PTR(heap, x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06416">duktape-1.5.2/src-noline/duktape.c:6416</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae2b937e7c05c2ec0f0f16352c69cdd82"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2b937e7c05c2ec0f0f16352c69cdd82">DUK_HBUFFER_HAS_DYNAMIC</a></div><div class="ttdeci">#define DUK_HBUFFER_HAS_DYNAMIC(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06342">duktape-1.5.2/src-noline/duktape.c:6342</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a56f85f8e2627dbcfa5575c3b57ad652b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a></div><div class="ttdeci">#define DUK_RET_TYPE_ERROR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">duktape-1.5.2/src-noline/duktape.h:361</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a7546a68bcdfde55cd362646c614ccd9d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a></div><div class="ttdeci">#define DUK_RET_RANGE_ERROR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">duktape-1.5.2/src-noline/duktape.h:358</a></div></div>
<div class="ttc" id="astructduk__hthread_html_a1c6d2e1f36b0b7011f0e52343ca5ed05"><div class="ttname"><a href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">duk_hthread::heap</a></div><div class="ttdeci">duk_heap * heap</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duktape-1.5.2/src-noline/duktape.c:6202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00178">duk__set_bufobj_buffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06106">DUK_ASSERT_CTX_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01676">DUK_BIDX_ARRAYBUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16314">duk_get_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06416">DUK_HBUFFER_FIXED_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06342">DUK_HBUFFER_HAS_DYNAMIC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04710">DUK_HOBJECT_CLASS_ARRAYBUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17676">duk_is_buffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12775">duk_is_constructor_call()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">DUK_MEMZERO</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duk_push_fixed_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">DUK_RET_RANGE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a29c40ba5055a62cdeac12d2a35f47556" name="a29c40ba5055a62cdeac12d2a35f47556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c40ba5055a62cdeac12d2a35f47556">&#9670;&#160;</a></span>duk_bi_arraybuffer_isview()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_arraybuffer_isview </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01171">1171</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1171</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1172</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_obj;</div>
<div class="line"><span class="lineno"> 1173</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> ret = 0;</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>    h_obj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca26324ee5830d35a824b1e762ef006c">duk_get_hobject</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1176</span>    <span class="keywordflow">if</span> (h_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(h_obj)) {</div>
<div class="line"><span class="lineno"> 1177</span>        ret = ((<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) h_obj)-&gt;is_view;</div>
<div class="line"><span class="lineno"> 1178</span>    }</div>
<div class="line"><span class="lineno"> 1179</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, ret);</div>
<div class="line"><span class="lineno"> 1180</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1181</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_af32ca4c30431e819676401ce2b11c2e7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></div><div class="ttdeci">duk_small_int_t duk_bool_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01825">duktape-1.5.2/src-noline/duk_config.h:1825</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2c95d944cae60d05c6596ee0cc19d3ee"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_boolean(duk_context *ctx, duk_bool_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duktape-1.5.2/src-noline/duktape.c:17873</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aca26324ee5830d35a824b1e762ef006c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca26324ee5830d35a824b1e762ef006c">duk_get_hobject</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_get_hobject(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16301">duktape-1.5.2/src-noline/duktape.c:16301</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16301">duk_get_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duk_push_boolean()</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a8b586a2b59b37e7326869afffe13b0e7" name="a8b586a2b59b37e7326869afffe13b0e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b586a2b59b37e7326869afffe13b0e7">&#9670;&#160;</a></span>duk_bi_buffer_compare_shared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_buffer_compare_shared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01363">1363</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1363</span>                                                                      {</div>
<div class="line"><span class="lineno"> 1364</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1365</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> magic;</div>
<div class="line"><span class="lineno"> 1366</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarg1;</div>
<div class="line"><span class="lineno"> 1367</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarg2;</div>
<div class="line"><span class="lineno"> 1368</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> comp_res;</div>
<div class="line"><span class="lineno"> 1369</span> </div>
<div class="line"><span class="lineno"> 1370</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1371</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1372</span> </div>
<div class="line"><span class="lineno"> 1373</span>    magic = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);</div>
<div class="line"><span class="lineno"> 1374</span>    <span class="keywordflow">if</span> (magic &amp; 0x02) {</div>
<div class="line"><span class="lineno"> 1375</span>        <span class="comment">/* Static call style. */</span></div>
<div class="line"><span class="lineno"> 1376</span>        h_bufarg1 = <a class="code hl_function" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1377</span>        h_bufarg2 = <a class="code hl_function" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 1378</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1379</span>        h_bufarg1 = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1380</span>        h_bufarg2 = <a class="code hl_function" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1381</span>    }</div>
<div class="line"><span class="lineno"> 1382</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg1 != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1383</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg2 != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1384</span> </div>
<div class="line"><span class="lineno"> 1385</span>    <span class="comment">/* We want to compare the slice/view areas of the arguments.</span></div>
<div class="line"><span class="lineno"> 1386</span><span class="comment">     * If either slice/view is invalid (underlying buffer is shorter)</span></div>
<div class="line"><span class="lineno"> 1387</span><span class="comment">     * ensure equals() is false, but otherwise the only thing that</span></div>
<div class="line"><span class="lineno"> 1388</span><span class="comment">     * matters is to be memory safe.</span></div>
<div class="line"><span class="lineno"> 1389</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1390</span> </div>
<div class="line"><span class="lineno"> 1391</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufarg1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1392</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufarg2)) {</div>
<div class="line"><span class="lineno"> 1393</span>        comp_res = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa9f9c9086bd77e49ffc2a654425db9e0">duk_js_data_compare</a>((<span class="keyword">const</span> duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufarg1-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) + h_bufarg1-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a>,</div>
<div class="line"><span class="lineno"> 1394</span>                                       (<span class="keyword">const</span> duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufarg2-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) + h_bufarg2-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a>,</div>
<div class="line"><span class="lineno"> 1395</span>                                       (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) h_bufarg1-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>,</div>
<div class="line"><span class="lineno"> 1396</span>                                       (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) h_bufarg2-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>);</div>
<div class="line"><span class="lineno"> 1397</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1398</span>        comp_res = -1;  <span class="comment">/* either nonzero value is ok */</span></div>
<div class="line"><span class="lineno"> 1399</span>    }</div>
<div class="line"><span class="lineno"> 1400</span> </div>
<div class="line"><span class="lineno"> 1401</span>    <span class="keywordflow">if</span> (magic &amp; 0x01) {</div>
<div class="line"><span class="lineno"> 1402</span>        <span class="comment">/* compare: similar to string comparison but for buffer data. */</span></div>
<div class="line"><span class="lineno"> 1403</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, comp_res);</div>
<div class="line"><span class="lineno"> 1404</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1405</span>        <span class="comment">/* equals */</span></div>
<div class="line"><span class="lineno"> 1406</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, (comp_res == 0));</div>
<div class="line"><span class="lineno"> 1407</span>    }</div>
<div class="line"><span class="lineno"> 1408</span> </div>
<div class="line"><span class="lineno"> 1409</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1410</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a041e9b0b2d41c5af8429259808290726"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a></div><div class="ttdeci">int duk_small_int_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01807">duktape-1.5.2/src-noline/duk_config.h:1807</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a2b7ba45bf826058a9b7720b5e258efc6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></div><div class="ttdeci">unsigned int duk_small_uint_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01808">duktape-1.5.2/src-noline/duk_config.h:1808</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a472e7ad35428d895f471b4db51613a42"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_VALID_SLICE(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05872">duktape-1.5.2/src-noline/duktape.c:5872</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5d2b6c5f1be0d673b074d167c9ff7d4d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_int(duk_context *ctx, duk_int_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duktape-1.5.2/src-noline/duktape.c:17923</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa9f9c9086bd77e49ffc2a654425db9e0"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa9f9c9086bd77e49ffc2a654425db9e0">duk_js_data_compare</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_small_int_t duk_js_data_compare(const duk_uint8_t *buf1, const duk_uint8_t *buf2, duk_size_t len1, duk_size_t len2)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l70503">duktape-1.5.2/src-noline/duktape.c:70503</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac6a5fcc6d10ec6461df37058dd49b568"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac6a5fcc6d10ec6461df37058dd49b568">DUK_HBUFFER_GET_DATA_PTR</a></div><div class="ttdeci">#define DUK_HBUFFER_GET_DATA_PTR(heap, x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">duktape-1.5.2/src-noline/duktape.c:6477</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acf451d0ba0fad208572ab5f5c9f092b9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a></div><div class="ttdeci">DUK_EXTERNAL duk_int_t duk_get_current_magic(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duktape-1.5.2/src-noline/duktape.c:12817</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_ae0a9c0e1a83906e68f823eb03aa2e31a"><div class="ttname"><a href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a></div><div class="ttdeci">DUK_LOCAL duk_hbufferobject * duk__require_bufobj_value(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00152">duktape-1.8.0/src-separate/duk_bi_buffer.c:152</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_aed6be9238d2f5c5a423f041174ef5580"><div class="ttname"><a href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a></div><div class="ttdeci">DUK_LOCAL duk_hbufferobject * duk__require_bufobj_this(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duktape-1.8.0/src-separate/duk_bi_buffer.c:145</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_a53eb36165e0fa60b0238d5426021cc32"><div class="ttname"><a href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">duk_hbufferobject::offset</a></div><div class="ttdeci">duk_uint_t offset</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duktape-1.5.2/src-noline/duktape.c:5921</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00152">duk__require_bufobj_value()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06477">DUK_HBUFFER_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05872">DUK_HBUFFEROBJECT_VALID_SLICE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l70503">duk_js_data_compare()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duk_push_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>.</p>

</div>
</div>
<a id="a008ec0aa8bd6ec2048496f373d303c86" name="a008ec0aa8bd6ec2048496f373d303c86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a008ec0aa8bd6ec2048496f373d303c86">&#9670;&#160;</a></span>duk_bi_buffer_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_buffer_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00488">488</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  488</span>                                                                   {</div>
<div class="line"><span class="lineno">  489</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno">  490</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> buf_size;</div>
<div class="line"><span class="lineno">  491</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> buf_dynamic;</div>
<div class="line"><span class="lineno">  492</span>    duk_uint8_t *buf_data;</div>
<div class="line"><span class="lineno">  493</span>    <span class="keyword">const</span> duk_uint8_t *src_data;</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  496</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  499</span><span class="comment">     *  Constructor arguments are currently somewhat compatible with</span></div>
<div class="line"><span class="lineno">  500</span><span class="comment">     *  (keep it that way if possible):</span></div>
<div class="line"><span class="lineno">  501</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  502</span><span class="comment">     *    http://nodejs.org/api/buffer.html</span></div>
<div class="line"><span class="lineno">  503</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  504</span><span class="comment">     *  Note that the ToBuffer() coercion (duk_to_buffer()) does NOT match</span></div>
<div class="line"><span class="lineno">  505</span><span class="comment">     *  the constructor behavior.</span></div>
<div class="line"><span class="lineno">  506</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    buf_dynamic = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a237292d5ea96568788b9e297f4f6eae7">duk_get_boolean</a>(ctx, 1);  <span class="comment">/* default to false */</span></div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a68bf049624e2514c28ac233d2600472b">duk_get_type</a>(ctx, 0)) {</div>
<div class="line"><span class="lineno">  511</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ac0b5ffc7fe88e6b3bce1809e61fc9863">DUK_TYPE_NUMBER</a>: {</div>
<div class="line"><span class="lineno">  512</span>        <span class="comment">/* new buffer of specified size */</span></div>
<div class="line"><span class="lineno">  513</span>        buf_size = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  514</span>        (void) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a9a62f5a3f6f511fb4d1f9f4ac0707abc">duk_push_buffer</a>(ctx, buf_size, buf_dynamic);</div>
<div class="line"><span class="lineno">  515</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  516</span>    }</div>
<div class="line"><span class="lineno">  517</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#abd656aa5461810e73c33e7a3aeb2f3e8">DUK_TYPE_BUFFER</a>: {</div>
<div class="line"><span class="lineno">  518</span>        <span class="comment">/* return input buffer, converted to a Duktape.Buffer object</span></div>
<div class="line"><span class="lineno">  519</span><span class="comment">         * if called as a constructor (no change if called as a</span></div>
<div class="line"><span class="lineno">  520</span><span class="comment">         * function).</span></div>
<div class="line"><span class="lineno">  521</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  522</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a>(ctx, 1);</div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  524</span>    }</div>
<div class="line"><span class="lineno">  525</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7671e251cf3bfd34fcb95d768a589366">DUK_TYPE_STRING</a>: {</div>
<div class="line"><span class="lineno">  526</span>        <span class="comment">/* new buffer with string contents */</span></div>
<div class="line"><span class="lineno">  527</span>        src_data = (<span class="keyword">const</span> duk_uint8_t *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0cb428198828c732174048ea91e28800">duk_get_lstring</a>(ctx, 0, &amp;buf_size);</div>
<div class="line"><span class="lineno">  528</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(src_data != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);  <span class="comment">/* even for zero-length string */</span></div>
<div class="line"><span class="lineno">  529</span>        buf_data = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a9a62f5a3f6f511fb4d1f9f4ac0707abc">duk_push_buffer</a>(ctx, buf_size, buf_dynamic);</div>
<div class="line"><span class="lineno">  530</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) buf_data, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) src_data, (<span class="keywordtype">size_t</span>) buf_size);</div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  532</span>    }</div>
<div class="line"><span class="lineno">  533</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab78347382186c262f9d56e0a2f58b4a9">DUK_TYPE_OBJECT</a>: {</div>
<div class="line"><span class="lineno">  534</span>        <span class="comment">/* For all duk_hbufferobjects, get the plain buffer inside</span></div>
<div class="line"><span class="lineno">  535</span><span class="comment">         * without making a copy.  This is compatible with Duktape 1.2</span></div>
<div class="line"><span class="lineno">  536</span><span class="comment">         * but means that a slice/view information is ignored and the</span></div>
<div class="line"><span class="lineno">  537</span><span class="comment">         * full underlying buffer is returned.</span></div>
<div class="line"><span class="lineno">  538</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno">  539</span><span class="comment">         * If called as a constructor, a new Duktape.Buffer object</span></div>
<div class="line"><span class="lineno">  540</span><span class="comment">         * pointing to the same plain buffer is created below.</span></div>
<div class="line"><span class="lineno">  541</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  542</span>        <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno">  543</span>        h_bufobj = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca26324ee5830d35a824b1e762ef006c">duk_get_hobject</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  544</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  545</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>((<a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *) h_bufobj)) {</div>
<div class="line"><span class="lineno">  546</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  547</span>        }</div>
<div class="line"><span class="lineno">  548</span>        <span class="keywordflow">if</span> (h_bufobj-&gt;buf == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno">  549</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  550</span>        }</div>
<div class="line"><span class="lineno">  551</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae94add4c8ea140675b2ad7bbdc87609b">duk_push_hbuffer</a>(ctx, h_bufobj-&gt;buf);</div>
<div class="line"><span class="lineno">  552</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  553</span>    }</div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a0454faad871c4c6f47a6d59886a6baf1">DUK_TYPE_NONE</a>:</div>
<div class="line"><span class="lineno">  555</span>    <span class="keywordflow">default</span>: {</div>
<div class="line"><span class="lineno">  556</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  557</span>    }</div>
<div class="line"><span class="lineno">  558</span>    }</div>
<div class="line"><span class="lineno">  559</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ab9162221f387ea077799b42cc46998">duk_is_buffer</a>(ctx, -1));</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>    <span class="comment">/* stack is unbalanced, but: [ &lt;something&gt; buf ] */</span></div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9b9ef102c56eca816cb236e3c2dac030">duk_is_constructor_call</a>(ctx)) {</div>
<div class="line"><span class="lineno">  564</span>        <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno">  565</span>        <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val;</div>
<div class="line"><span class="lineno">  566</span> </div>
<div class="line"><span class="lineno">  567</span>        h_val = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  568</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>        h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno">  571</span>                                             <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno">  572</span>                                             <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno">  573</span>                                             <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14d77fb82090d94505df8663c053dfb0">DUK_HOBJECT_CLASS_BUFFER</a>),</div>
<div class="line"><span class="lineno">  574</span>                                             <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa4cb5856bd471bdb1e38506a814c410">DUK_BIDX_BUFFER_PROTOTYPE</a>);</div>
<div class="line"><span class="lineno">  575</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>        <a class="code hl_function" href="#af25e538719df2199bb71373146d79717">duk__set_bufobj_buffer</a>(ctx, h_bufobj, h_val);</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  580</span>    }</div>
<div class="line"><span class="lineno">  581</span>    <span class="comment">/* Note: unbalanced stack on purpose */</span></div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  584</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ac7d67e911a142526da07c087049e1c90"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a></div><div class="ttdeci">#define DUK_MEMCPY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">duktape-1.5.2/src-noline/duk_config.h:1984</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0cb428198828c732174048ea91e28800"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0cb428198828c732174048ea91e28800">duk_get_lstring</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_get_lstring(duk_context *ctx, duk_idx_t index, duk_size_t *out_len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16064">duktape-1.5.2/src-noline/duktape.c:16064</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a14d77fb82090d94505df8663c053dfb0"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14d77fb82090d94505df8663c053dfb0">DUK_HOBJECT_CLASS_BUFFER</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04707">duktape-1.5.2/src-noline/duktape.c:4707</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a237292d5ea96568788b9e297f4f6eae7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a237292d5ea96568788b9e297f4f6eae7">duk_get_boolean</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_get_boolean(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15965">duktape-1.5.2/src-noline/duktape.c:15965</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a68bf049624e2514c28ac233d2600472b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a68bf049624e2514c28ac233d2600472b">duk_get_type</a></div><div class="ttdeci">DUK_EXTERNAL duk_int_t duk_get_type(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17478">duktape-1.5.2/src-noline/duktape.c:17478</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a808471cbdda897175b2e4d50528c430d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a></div><div class="ttdeci">DUK_EXTERNAL void duk_set_top(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15216">duktape-1.5.2/src-noline/duktape.c:15216</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaa4cb5856bd471bdb1e38506a814c410"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa4cb5856bd471bdb1e38506a814c410">DUK_BIDX_BUFFER_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_BUFFER_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01669">duktape-1.5.2/src-noline/duktape.c:1669</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae94add4c8ea140675b2ad7bbdc87609b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae94add4c8ea140675b2ad7bbdc87609b">duk_push_hbuffer</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_hbuffer(duk_context *ctx, duk_hbuffer *h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19067">duktape-1.5.2/src-noline/duktape.c:19067</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a0454faad871c4c6f47a6d59886a6baf1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a0454faad871c4c6f47a6d59886a6baf1">DUK_TYPE_NONE</a></div><div class="ttdeci">#define DUK_TYPE_NONE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00253">duktape-1.5.2/src-noline/duktape.h:253</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a7671e251cf3bfd34fcb95d768a589366"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7671e251cf3bfd34fcb95d768a589366">DUK_TYPE_STRING</a></div><div class="ttdeci">#define DUK_TYPE_STRING</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00258">duktape-1.5.2/src-noline/duktape.h:258</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a9a62f5a3f6f511fb4d1f9f4ac0707abc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a9a62f5a3f6f511fb4d1f9f4ac0707abc">duk_push_buffer</a></div><div class="ttdeci">#define duk_push_buffer(ctx, size, dynamic)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00568">duktape-1.5.2/src-noline/duktape.h:568</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_ab78347382186c262f9d56e0a2f58b4a9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab78347382186c262f9d56e0a2f58b4a9">DUK_TYPE_OBJECT</a></div><div class="ttdeci">#define DUK_TYPE_OBJECT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00259">duktape-1.5.2/src-noline/duktape.h:259</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_abd656aa5461810e73c33e7a3aeb2f3e8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#abd656aa5461810e73c33e7a3aeb2f3e8">DUK_TYPE_BUFFER</a></div><div class="ttdeci">#define DUK_TYPE_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00260">duktape-1.5.2/src-noline/duktape.h:260</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_ac0b5ffc7fe88e6b3bce1809e61fc9863"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#ac0b5ffc7fe88e6b3bce1809e61fc9863">DUK_TYPE_NUMBER</a></div><div class="ttdeci">#define DUK_TYPE_NUMBER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00257">duktape-1.5.2/src-noline/duktape.h:257</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00178">duk__set_bufobj_buffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01669">DUK_BIDX_BUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15965">duk_get_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16314">duk_get_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16301">duk_get_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16064">duk_get_lstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17478">duk_get_type()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04707">DUK_HOBJECT_CLASS_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17676">duk_is_buffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12775">duk_is_constructor_call()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00568">duk_push_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19067">duk_push_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15216">duk_set_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00260">DUK_TYPE_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00253">DUK_TYPE_NONE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00257">DUK_TYPE_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00259">DUK_TYPE_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00258">DUK_TYPE_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="aff055e54d7c188bb9abd21735e377610" name="aff055e54d7c188bb9abd21735e377610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff055e54d7c188bb9abd21735e377610">&#9670;&#160;</a></span>duk_bi_buffer_prototype_tostring_shared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_buffer_prototype_tostring_shared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01251">1251</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1251</span>                                                                                 {</div>
<div class="line"><span class="lineno"> 1252</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1253</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 1254</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> to_string = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);</div>
<div class="line"><span class="lineno"> 1255</span> </div>
<div class="line"><span class="lineno"> 1256</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1257</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1258</span> </div>
<div class="line"><span class="lineno"> 1259</span>    tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac49734b07801fb6a55929b80c6ae12b1">duk_get_borrowed_this_tval</a>(ctx);</div>
<div class="line"><span class="lineno"> 1260</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1261</span> </div>
<div class="line"><span class="lineno"> 1262</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a35257e9c4c8cacc0bf42affe264e0da2">DUK_TVAL_IS_BUFFER</a>(tv)) {</div>
<div class="line"><span class="lineno"> 1263</span>        <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_buf;</div>
<div class="line"><span class="lineno"> 1264</span>        h_buf = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a422dc96860bacd6ed951234bf2eb5ca1">DUK_TVAL_GET_BUFFER</a>(tv);</div>
<div class="line"><span class="lineno"> 1265</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_buf != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1266</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae94add4c8ea140675b2ad7bbdc87609b">duk_push_hbuffer</a>(ctx, h_buf);</div>
<div class="line"><span class="lineno"> 1267</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv)) {</div>
<div class="line"><span class="lineno"> 1268</span>        <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h;</div>
<div class="line"><span class="lineno"> 1269</span>        <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 1270</span> </div>
<div class="line"><span class="lineno"> 1271</span>        <span class="comment">/* Accept any duk_hbufferobject, though we&#39;re only normally</span></div>
<div class="line"><span class="lineno"> 1272</span><span class="comment">         * called for Duktape.Buffer values.</span></div>
<div class="line"><span class="lineno"> 1273</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1274</span>        h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv);</div>
<div class="line"><span class="lineno"> 1275</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1276</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(h)) {</div>
<div class="line"><span class="lineno"> 1277</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;toString/valueOf() called for a non-bufferobject object&quot;</span>));</div>
<div class="line"><span class="lineno"> 1278</span>            <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno"> 1279</span>        }</div>
<div class="line"><span class="lineno"> 1280</span>        h_bufobj = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) h;</div>
<div class="line"><span class="lineno"> 1281</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>        <span class="keywordflow">if</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 1284</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;toString/valueOf() called for a bufferobject with NULL buf&quot;</span>));</div>
<div class="line"><span class="lineno"> 1285</span>            <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno"> 1286</span>        }</div>
<div class="line"><span class="lineno"> 1287</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae94add4c8ea140675b2ad7bbdc87609b">duk_push_hbuffer</a>(ctx, h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>);</div>
<div class="line"><span class="lineno"> 1288</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1289</span>        <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno"> 1290</span>    }</div>
<div class="line"><span class="lineno"> 1291</span> </div>
<div class="line"><span class="lineno"> 1292</span>    <span class="keywordflow">if</span> (to_string) {</div>
<div class="line"><span class="lineno"> 1293</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1294</span>    }</div>
<div class="line"><span class="lineno"> 1295</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span> type_error:</div>
<div class="line"><span class="lineno"> 1298</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1299</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a35257e9c4c8cacc0bf42affe264e0da2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a35257e9c4c8cacc0bf42affe264e0da2">DUK_TVAL_IS_BUFFER</a></div><div class="ttdeci">#define DUK_TVAL_IS_BUFFER(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00812">duktape-1.5.2/src-noline/duktape.c:812</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a422dc96860bacd6ed951234bf2eb5ca1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a422dc96860bacd6ed951234bf2eb5ca1">DUK_TVAL_GET_BUFFER</a></div><div class="ttdeci">#define DUK_TVAL_GET_BUFFER(tv)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00788">duktape-1.5.2/src-noline/duktape.c:788</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6c3a2adb6e09294c7e65f69821e5e81a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a></div><div class="ttdeci">#define DUK_DD(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">duktape-1.5.2/src-noline/duktape.c:7496</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa66ca9adc2b4187c5d549a9b117b03d3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a></div><div class="ttdeci">#define DUK_DDPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">duktape-1.5.2/src-noline/duktape.c:7508</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac44e324c8cc1777c335c7d59a50a4798"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_to_string(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duktape-1.5.2/src-noline/duktape.c:17089</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18207">duk_get_borrowed_this_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19067">duk_push_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00788">DUK_TVAL_GET_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00812">DUK_TVAL_IS_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a264f2dc3f0a630f5d1101ab4ece90b08" name="a264f2dc3f0a630f5d1101ab4ece90b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a264f2dc3f0a630f5d1101ab4ece90b08">&#9670;&#160;</a></span>duk_bi_buffer_readfield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_buffer_readfield </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02329">2329</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2329</span>                                                                 {</div>
<div class="line"><span class="lineno"> 2330</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 2331</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);</div>
<div class="line"><span class="lineno"> 2332</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_ftype;</div>
<div class="line"><span class="lineno"> 2333</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_bigendian;</div>
<div class="line"><span class="lineno"> 2334</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_signed;</div>
<div class="line"><span class="lineno"> 2335</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_typedarray;</div>
<div class="line"><span class="lineno"> 2336</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> endswap;</div>
<div class="line"><span class="lineno"> 2337</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 2338</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> no_assert;</div>
<div class="line"><span class="lineno"> 2339</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> offset_signed;</div>
<div class="line"><span class="lineno"> 2340</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> offset;</div>
<div class="line"><span class="lineno"> 2341</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> buffer_length;</div>
<div class="line"><span class="lineno"> 2342</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> check_length;</div>
<div class="line"><span class="lineno"> 2343</span>    duk_uint8_t *buf;</div>
<div class="line"><span class="lineno"> 2344</span>    <a class="code hl_union" href="unionduk__double__union.html">duk_double_union</a> du;</div>
<div class="line"><span class="lineno"> 2345</span> </div>
<div class="line"><span class="lineno"> 2346</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 2347</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 2348</span> </div>
<div class="line"><span class="lineno"> 2349</span>    magic_ftype = magic &amp; 0x0007;</div>
<div class="line"><span class="lineno"> 2350</span>    magic_bigendian = magic &amp; 0x0008;</div>
<div class="line"><span class="lineno"> 2351</span>    magic_signed = magic &amp; 0x0010;</div>
<div class="line"><span class="lineno"> 2352</span>    magic_typedarray = magic &amp; 0x0020;</div>
<div class="line"><span class="lineno"> 2353</span> </div>
<div class="line"><span class="lineno"> 2354</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 2355</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2356</span>    buffer_length = h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno"> 2357</span> </div>
<div class="line"><span class="lineno"> 2358</span>    <span class="comment">/* [ offset noAssert                 ], when ftype != DUK__FLD_VARINT */</span></div>
<div class="line"><span class="lineno"> 2359</span>    <span class="comment">/* [ offset fieldByteLength noAssert ], when ftype == DUK__FLD_VARINT */</span></div>
<div class="line"><span class="lineno"> 2360</span>    <span class="comment">/* [ offset littleEndian             ], when DUK__FLD_TYPEDARRAY (regardless of ftype) */</span></div>
<div class="line"><span class="lineno"> 2361</span> </div>
<div class="line"><span class="lineno"> 2362</span>    <span class="comment">/* Handle TypedArray vs. Node.js Buffer arg differences */</span></div>
<div class="line"><span class="lineno"> 2363</span>    <span class="keywordflow">if</span> (magic_typedarray) {</div>
<div class="line"><span class="lineno"> 2364</span>        no_assert = 0;</div>
<div class="line"><span class="lineno"> 2365</span><span class="preprocessor">#if defined(DUK_USE_INTEGER_LE)</span></div>
<div class="line"><span class="lineno"> 2366</span>        endswap = !<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, 1);  <span class="comment">/* 1=little endian */</span></div>
<div class="line"><span class="lineno"> 2367</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2368</span>        endswap = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, 1);  <span class="comment">/* 1=little endian */</span></div>
<div class="line"><span class="lineno"> 2369</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2370</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2371</span>        no_assert = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, (magic_ftype == <a class="code hl_define" href="#a820c22f992aac28df97907d0fce2dff3">DUK__FLD_VARINT</a>) ? 2 : 1);</div>
<div class="line"><span class="lineno"> 2372</span><span class="preprocessor">#if defined(DUK_USE_INTEGER_LE)</span></div>
<div class="line"><span class="lineno"> 2373</span>        endswap = magic_bigendian;</div>
<div class="line"><span class="lineno"> 2374</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2375</span>        endswap = !magic_bigendian;</div>
<div class="line"><span class="lineno"> 2376</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2377</span>    }</div>
<div class="line"><span class="lineno"> 2378</span> </div>
<div class="line"><span class="lineno"> 2379</span>    <span class="comment">/* Offset is coerced first to signed integer range and then to unsigned.</span></div>
<div class="line"><span class="lineno"> 2380</span><span class="comment">     * This ensures we can add a small byte length (1-8) to the offset in</span></div>
<div class="line"><span class="lineno"> 2381</span><span class="comment">     * bound checks and not wrap.</span></div>
<div class="line"><span class="lineno"> 2382</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2383</span>    offset_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2384</span>    offset = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) offset_signed;</div>
<div class="line"><span class="lineno"> 2385</span>    <span class="keywordflow">if</span> (offset_signed &lt; 0) {</div>
<div class="line"><span class="lineno"> 2386</span>        <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2387</span>    }</div>
<div class="line"><span class="lineno"> 2388</span> </div>
<div class="line"><span class="lineno"> 2389</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;readfield, buffer_length=%ld, offset=%ld, no_assert=%d, &quot;</span></div>
<div class="line"><span class="lineno"> 2390</span>                         <span class="stringliteral">&quot;magic=%04x, magic_fieldtype=%d, magic_bigendian=%d, magic_signed=%d, &quot;</span></div>
<div class="line"><span class="lineno"> 2391</span>                         <span class="stringliteral">&quot;endswap=%d&quot;</span>,</div>
<div class="line"><span class="lineno"> 2392</span>                         (<span class="keywordtype">long</span>) buffer_length, (<span class="keywordtype">long</span>) offset, (<span class="keywordtype">int</span>) no_assert,</div>
<div class="line"><span class="lineno"> 2393</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) magic, (<span class="keywordtype">int</span>) magic_ftype, (<span class="keywordtype">int</span>) (magic_bigendian &gt;&gt; 3),</div>
<div class="line"><span class="lineno"> 2394</span>                         (<span class="keywordtype">int</span>) (magic_signed &gt;&gt; 4), (<span class="keywordtype">int</span>) endswap));</div>
<div class="line"><span class="lineno"> 2395</span> </div>
<div class="line"><span class="lineno"> 2396</span>    <span class="comment">/* Update &#39;buffer_length&#39; to be the effective, safe limit which</span></div>
<div class="line"><span class="lineno"> 2397</span><span class="comment">     * takes into account the underlying buffer.  This value will be</span></div>
<div class="line"><span class="lineno"> 2398</span><span class="comment">     * potentially invalidated by any side effect.</span></div>
<div class="line"><span class="lineno"> 2399</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2400</span>    check_length = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a507d0f5bb3d178ad9828e162c2858e5a">DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH</a>(h_this, buffer_length);</div>
<div class="line"><span class="lineno"> 2401</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;buffer_length=%ld, check_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 2402</span>                         (<span class="keywordtype">long</span>) buffer_length, (<span class="keywordtype">long</span>) check_length));</div>
<div class="line"><span class="lineno"> 2403</span> </div>
<div class="line"><span class="lineno"> 2404</span>    <span class="keywordflow">if</span> (h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) {</div>
<div class="line"><span class="lineno"> 2405</span>        buf = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this);</div>
<div class="line"><span class="lineno"> 2406</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2407</span>        <span class="comment">/* Neutered.  We could go into the switch-case safely with</span></div>
<div class="line"><span class="lineno"> 2408</span><span class="comment">         * buf == NULL because check_length == 0.  To avoid scanbuild</span></div>
<div class="line"><span class="lineno"> 2409</span><span class="comment">         * warnings, fail directly instead.</span></div>
<div class="line"><span class="lineno"> 2410</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2411</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(check_length == 0);</div>
<div class="line"><span class="lineno"> 2412</span>        <span class="keywordflow">goto</span> fail_neutered;</div>
<div class="line"><span class="lineno"> 2413</span>    }</div>
<div class="line"><span class="lineno"> 2414</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(buf != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2415</span> </div>
<div class="line"><span class="lineno"> 2416</span>    <span class="keywordflow">switch</span> (magic_ftype) {</div>
<div class="line"><span class="lineno"> 2417</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a90e9037a38139989e547da48b3c41385">DUK__FLD_8BIT</a>: {</div>
<div class="line"><span class="lineno"> 2418</span>        duk_uint8_t tmp;</div>
<div class="line"><span class="lineno"> 2419</span>        <span class="keywordflow">if</span> (offset + 1U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2420</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2421</span>        }</div>
<div class="line"><span class="lineno"> 2422</span>        tmp = buf[offset];</div>
<div class="line"><span class="lineno"> 2423</span>        <span class="keywordflow">if</span> (magic_signed) {</div>
<div class="line"><span class="lineno"> 2424</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) ((duk_int8_t) tmp));</div>
<div class="line"><span class="lineno"> 2425</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2426</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) tmp);</div>
<div class="line"><span class="lineno"> 2427</span>        }</div>
<div class="line"><span class="lineno"> 2428</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2429</span>    }</div>
<div class="line"><span class="lineno"> 2430</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a3bbb4f0c386187d3c017674c810e2114">DUK__FLD_16BIT</a>: {</div>
<div class="line"><span class="lineno"> 2431</span>        duk_uint16_t tmp;</div>
<div class="line"><span class="lineno"> 2432</span>        <span class="keywordflow">if</span> (offset + 2U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2433</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2434</span>        }</div>
<div class="line"><span class="lineno"> 2435</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) (buf + offset), 2);</div>
<div class="line"><span class="lineno"> 2436</span>        tmp = du.<a class="code hl_variable" href="unionduk__double__union.html#aebc527f8e78cba745f24cf59a48262d4">us</a>[0];</div>
<div class="line"><span class="lineno"> 2437</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2438</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a58145764ef02b57ec67f8cfa33e0ca31">DUK_BSWAP16</a>(tmp);</div>
<div class="line"><span class="lineno"> 2439</span>        }</div>
<div class="line"><span class="lineno"> 2440</span>        <span class="keywordflow">if</span> (magic_signed) {</div>
<div class="line"><span class="lineno"> 2441</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) ((duk_int16_t) tmp));</div>
<div class="line"><span class="lineno"> 2442</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2443</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) tmp);</div>
<div class="line"><span class="lineno"> 2444</span>        }</div>
<div class="line"><span class="lineno"> 2445</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2446</span>    }</div>
<div class="line"><span class="lineno"> 2447</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a78ceb8c155dc2802eb63a145526082ff">DUK__FLD_32BIT</a>: {</div>
<div class="line"><span class="lineno"> 2448</span>        duk_uint32_t tmp;</div>
<div class="line"><span class="lineno"> 2449</span>        <span class="keywordflow">if</span> (offset + 4U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2450</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2451</span>        }</div>
<div class="line"><span class="lineno"> 2452</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) (buf + offset), 4);</div>
<div class="line"><span class="lineno"> 2453</span>        tmp = du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0];</div>
<div class="line"><span class="lineno"> 2454</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2455</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abd7703c6cf23af74189ebf3fa416f465">DUK_BSWAP32</a>(tmp);</div>
<div class="line"><span class="lineno"> 2456</span>        }</div>
<div class="line"><span class="lineno"> 2457</span>        <span class="keywordflow">if</span> (magic_signed) {</div>
<div class="line"><span class="lineno"> 2458</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) ((duk_int32_t) tmp));</div>
<div class="line"><span class="lineno"> 2459</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2460</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) tmp);</div>
<div class="line"><span class="lineno"> 2461</span>        }</div>
<div class="line"><span class="lineno"> 2462</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2463</span>    }</div>
<div class="line"><span class="lineno"> 2464</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a16180d2cb993692979f129dcd6287bf8">DUK__FLD_FLOAT</a>: {</div>
<div class="line"><span class="lineno"> 2465</span>        duk_uint32_t tmp;</div>
<div class="line"><span class="lineno"> 2466</span>        <span class="keywordflow">if</span> (offset + 4U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2467</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2468</span>        }</div>
<div class="line"><span class="lineno"> 2469</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) (buf + offset), 4);</div>
<div class="line"><span class="lineno"> 2470</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2471</span>            tmp = du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0];</div>
<div class="line"><span class="lineno"> 2472</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abd7703c6cf23af74189ebf3fa416f465">DUK_BSWAP32</a>(tmp);</div>
<div class="line"><span class="lineno"> 2473</span>            du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0] = tmp;</div>
<div class="line"><span class="lineno"> 2474</span>        }</div>
<div class="line"><span class="lineno"> 2475</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) du.<a class="code hl_variable" href="unionduk__double__union.html#a83549e0b17313d7c3de1a57dc47032a8">f</a>[0]);</div>
<div class="line"><span class="lineno"> 2476</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2477</span>    }</div>
<div class="line"><span class="lineno"> 2478</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a27292afecb94650e2a6d4d87b295c417">DUK__FLD_DOUBLE</a>: {</div>
<div class="line"><span class="lineno"> 2479</span>        <span class="keywordflow">if</span> (offset + 8U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2480</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2481</span>        }</div>
<div class="line"><span class="lineno"> 2482</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) (buf + offset), 8);</div>
<div class="line"><span class="lineno"> 2483</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2484</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab99ecf2028ba25c0fda5516b3b518101">DUK_DBLUNION_BSWAP64</a>(&amp;du);</div>
<div class="line"><span class="lineno"> 2485</span>        }</div>
<div class="line"><span class="lineno"> 2486</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) du.<a class="code hl_variable" href="unionduk__double__union.html#a6b504013c9b4d563f72e42831800af84">d</a>);</div>
<div class="line"><span class="lineno"> 2487</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2488</span>    }</div>
<div class="line"><span class="lineno"> 2489</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a820c22f992aac28df97907d0fce2dff3">DUK__FLD_VARINT</a>: {</div>
<div class="line"><span class="lineno"> 2490</span>        <span class="comment">/* Node.js Buffer variable width integer field.  We don&#39;t really</span></div>
<div class="line"><span class="lineno"> 2491</span><span class="comment">         * care about speed here, so aim for shortest algorithm.</span></div>
<div class="line"><span class="lineno"> 2492</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2493</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> field_bytelen;</div>
<div class="line"><span class="lineno"> 2494</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> i, i_step, i_end;</div>
<div class="line"><span class="lineno"> 2495</span><span class="preprocessor">#if defined(DUK_USE_64BIT_OPS)</span></div>
<div class="line"><span class="lineno"> 2496</span>        duk_int64_t tmp;</div>
<div class="line"><span class="lineno"> 2497</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> shift_tmp;</div>
<div class="line"><span class="lineno"> 2498</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2499</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a> tmp;</div>
<div class="line"><span class="lineno"> 2500</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> highbyte;</div>
<div class="line"><span class="lineno"> 2501</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2502</span>        <span class="keyword">const</span> duk_uint8_t *p;</div>
<div class="line"><span class="lineno"> 2503</span> </div>
<div class="line"><span class="lineno"> 2504</span>        field_bytelen = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a>(ctx, 1);  <span class="comment">/* avoid side effects! */</span></div>
<div class="line"><span class="lineno"> 2505</span>        <span class="keywordflow">if</span> (field_bytelen &lt; 1 || field_bytelen &gt; 6) {</div>
<div class="line"><span class="lineno"> 2506</span>            <span class="keywordflow">goto</span> fail_field_length;</div>
<div class="line"><span class="lineno"> 2507</span>        }</div>
<div class="line"><span class="lineno"> 2508</span>        <span class="keywordflow">if</span> (offset + (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) field_bytelen &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2509</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2510</span>        }</div>
<div class="line"><span class="lineno"> 2511</span>        p = (<span class="keyword">const</span> duk_uint8_t *) (buf + offset);</div>
<div class="line"><span class="lineno"> 2512</span> </div>
<div class="line"><span class="lineno"> 2513</span>        <span class="comment">/* Slow gathering of value using either 64-bit arithmetic</span></div>
<div class="line"><span class="lineno"> 2514</span><span class="comment">         * or IEEE doubles if 64-bit types not available.  Handling</span></div>
<div class="line"><span class="lineno"> 2515</span><span class="comment">         * of negative numbers is a bit non-obvious in both cases.</span></div>
<div class="line"><span class="lineno"> 2516</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2517</span> </div>
<div class="line"><span class="lineno"> 2518</span>        <span class="keywordflow">if</span> (magic_bigendian) {</div>
<div class="line"><span class="lineno"> 2519</span>            <span class="comment">/* Gather in big endian */</span></div>
<div class="line"><span class="lineno"> 2520</span>            i = 0;</div>
<div class="line"><span class="lineno"> 2521</span>            i_step = 1;</div>
<div class="line"><span class="lineno"> 2522</span>            i_end = field_bytelen;  <span class="comment">/* one i_step over */</span></div>
<div class="line"><span class="lineno"> 2523</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2524</span>            <span class="comment">/* Gather in little endian */</span></div>
<div class="line"><span class="lineno"> 2525</span>            i = field_bytelen - 1;</div>
<div class="line"><span class="lineno"> 2526</span>            i_step = -1;</div>
<div class="line"><span class="lineno"> 2527</span>            i_end = -1;  <span class="comment">/* one i_step over */</span></div>
<div class="line"><span class="lineno"> 2528</span>        }</div>
<div class="line"><span class="lineno"> 2529</span> </div>
<div class="line"><span class="lineno"> 2530</span><span class="preprocessor">#if defined(DUK_USE_64BIT_OPS)</span></div>
<div class="line"><span class="lineno"> 2531</span>        tmp = 0;</div>
<div class="line"><span class="lineno"> 2532</span>        <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2533</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &gt;= 0 &amp;&amp; i &lt; field_bytelen);</div>
<div class="line"><span class="lineno"> 2534</span>            tmp = (tmp &lt;&lt; 8) + (duk_int64_t) p[i];</div>
<div class="line"><span class="lineno"> 2535</span>            i += i_step;</div>
<div class="line"><span class="lineno"> 2536</span>        } <span class="keywordflow">while</span> (i != i_end);</div>
<div class="line"><span class="lineno"> 2537</span> </div>
<div class="line"><span class="lineno"> 2538</span>        <span class="keywordflow">if</span> (magic_signed) {</div>
<div class="line"><span class="lineno"> 2539</span>            <span class="comment">/* Shift to sign extend. */</span></div>
<div class="line"><span class="lineno"> 2540</span>            shift_tmp = 64 - (field_bytelen * 8);</div>
<div class="line"><span class="lineno"> 2541</span>            tmp = (tmp &lt;&lt; shift_tmp) &gt;&gt; shift_tmp;</div>
<div class="line"><span class="lineno"> 2542</span>        }</div>
<div class="line"><span class="lineno"> 2543</span> </div>
<div class="line"><span class="lineno"> 2544</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5edee0a5cdb390258d2050566b45ed2c">duk_push_i64</a>(ctx, tmp);</div>
<div class="line"><span class="lineno"> 2545</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2546</span>        highbyte = p[i];</div>
<div class="line"><span class="lineno"> 2547</span>        <span class="keywordflow">if</span> (magic_signed &amp;&amp; (highbyte &amp; 0x80) != 0) {</div>
<div class="line"><span class="lineno"> 2548</span>            <span class="comment">/* 0xff =&gt; 255 - 256 = -1; 0x80 =&gt; 128 - 256 = -128 */</span></div>
<div class="line"><span class="lineno"> 2549</span>            tmp = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) (highbyte - 256);</div>
<div class="line"><span class="lineno"> 2550</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2551</span>            tmp = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) highbyte;</div>
<div class="line"><span class="lineno"> 2552</span>        }</div>
<div class="line"><span class="lineno"> 2553</span>        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno"> 2554</span>            i += i_step;</div>
<div class="line"><span class="lineno"> 2555</span>            <span class="keywordflow">if</span> (i == i_end) {</div>
<div class="line"><span class="lineno"> 2556</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2557</span>            }</div>
<div class="line"><span class="lineno"> 2558</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &gt;= 0 &amp;&amp; i &lt; field_bytelen);</div>
<div class="line"><span class="lineno"> 2559</span>            tmp = (tmp * 256.0) + (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) p[i];</div>
<div class="line"><span class="lineno"> 2560</span>        }</div>
<div class="line"><span class="lineno"> 2561</span> </div>
<div class="line"><span class="lineno"> 2562</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a>(ctx, tmp);</div>
<div class="line"><span class="lineno"> 2563</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2564</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2565</span>    }</div>
<div class="line"><span class="lineno"> 2566</span>    <span class="keywordflow">default</span>: {  <span class="comment">/* should never happen but default here */</span></div>
<div class="line"><span class="lineno"> 2567</span>        <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2568</span>    }</div>
<div class="line"><span class="lineno"> 2569</span>    }</div>
<div class="line"><span class="lineno"> 2570</span> </div>
<div class="line"><span class="lineno"> 2571</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2572</span> </div>
<div class="line"><span class="lineno"> 2573</span> fail_neutered:</div>
<div class="line"><span class="lineno"> 2574</span> fail_field_length:</div>
<div class="line"><span class="lineno"> 2575</span> fail_bounds:</div>
<div class="line"><span class="lineno"> 2576</span>    <span class="keywordflow">if</span> (no_assert) {</div>
<div class="line"><span class="lineno"> 2577</span>        <span class="comment">/* Node.js return value for noAssert out-of-bounds reads is</span></div>
<div class="line"><span class="lineno"> 2578</span><span class="comment">         * usually (but not always) NaN.  Return NaN consistently.</span></div>
<div class="line"><span class="lineno"> 2579</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2580</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad0cb686846c298ff6cc4ed5f138da15b">duk_push_nan</a>(ctx);</div>
<div class="line"><span class="lineno"> 2581</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2582</span>    }</div>
<div class="line"><span class="lineno"> 2583</span> </div>
<div class="line"><span class="lineno"> 2584</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 2585</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a58145764ef02b57ec67f8cfa33e0ca31"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a58145764ef02b57ec67f8cfa33e0ca31">DUK_BSWAP16</a></div><div class="ttdeci">#define DUK_BSWAP16(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02582">duktape-1.5.2/src-noline/duk_config.h:2582</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a63e15ff4dd1c9ad036a030a80346cdc3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a></div><div class="ttdeci">double duk_double_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01877">duktape-1.5.2/src-noline/duk_config.h:1877</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_abd7703c6cf23af74189ebf3fa416f465"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abd7703c6cf23af74189ebf3fa416f465">DUK_BSWAP32</a></div><div class="ttdeci">#define DUK_BSWAP32(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02575">duktape-1.5.2/src-noline/duk_config.h:2575</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2db20d2d3b36d8491ed171cf503488bb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a></div><div class="ttdeci">#define DUK_DDD(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">duktape-1.5.2/src-noline/duktape.c:7497</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a507d0f5bb3d178ad9828e162c2858e5a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a507d0f5bb3d178ad9828e162c2858e5a">DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH(h, len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05897">duktape-1.5.2/src-noline/duktape.c:5897</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5211f0cfa2bdf8d8b151157c04a9cdd9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_to_boolean(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duktape-1.5.2/src-noline/duktape.c:16744</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5de9255ebe35cf200f417812e04a027f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a></div><div class="ttdeci">DUK_EXTERNAL duk_int_t duk_get_int(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16040">duktape-1.5.2/src-noline/duktape.c:16040</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5edee0a5cdb390258d2050566b45ed2c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5edee0a5cdb390258d2050566b45ed2c">duk_push_i64</a></div><div class="ttdeci">#define duk_push_i64(ctx, val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04260">duktape-1.5.2/src-noline/duktape.c:4260</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a794f05c66e6d8a8527c4a0fc4143e324"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_GET_SLICE_BASE(heap, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">duktape-1.5.2/src-noline/duktape.c:5856</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a97a6adfc8eb4c12296d3c2a4f8dab0a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_uint(duk_context *ctx, duk_uint_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duktape-1.5.2/src-noline/duktape.c:17956</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa6e5d41ceaba6832e5ede737f0a35fb9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a></div><div class="ttdeci">#define DUK_DDDPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">duktape-1.5.2/src-noline/duktape.c:7509</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aac0625b8415e35481f15cd16e70b3b9b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_number(duk_context *ctx, duk_double_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17909">duktape-1.5.2/src-noline/duktape.c:17909</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad0cb686846c298ff6cc4ed5f138da15b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad0cb686846c298ff6cc4ed5f138da15b">duk_push_nan</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_nan(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17990">duktape-1.5.2/src-noline/duktape.c:17990</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_ab99ecf2028ba25c0fda5516b3b518101"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab99ecf2028ba25c0fda5516b3b518101">DUK_DBLUNION_BSWAP64</a></div><div class="ttdeci">#define DUK_DBLUNION_BSWAP64(u)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01521">duktape-1.5.2/src-noline/duktape.h:1521</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a16180d2cb993692979f129dcd6287bf8"><div class="ttname"><a href="#a16180d2cb993692979f129dcd6287bf8">DUK__FLD_FLOAT</a></div><div class="ttdeci">#define DUK__FLD_FLOAT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02321">duktape-1.8.0/src-separate/duk_bi_buffer.c:2321</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a27292afecb94650e2a6d4d87b295c417"><div class="ttname"><a href="#a27292afecb94650e2a6d4d87b295c417">DUK__FLD_DOUBLE</a></div><div class="ttdeci">#define DUK__FLD_DOUBLE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02322">duktape-1.8.0/src-separate/duk_bi_buffer.c:2322</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a3bbb4f0c386187d3c017674c810e2114"><div class="ttname"><a href="#a3bbb4f0c386187d3c017674c810e2114">DUK__FLD_16BIT</a></div><div class="ttdeci">#define DUK__FLD_16BIT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02319">duktape-1.8.0/src-separate/duk_bi_buffer.c:2319</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a78ceb8c155dc2802eb63a145526082ff"><div class="ttname"><a href="#a78ceb8c155dc2802eb63a145526082ff">DUK__FLD_32BIT</a></div><div class="ttdeci">#define DUK__FLD_32BIT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02320">duktape-1.8.0/src-separate/duk_bi_buffer.c:2320</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a820c22f992aac28df97907d0fce2dff3"><div class="ttname"><a href="#a820c22f992aac28df97907d0fce2dff3">DUK__FLD_VARINT</a></div><div class="ttdeci">#define DUK__FLD_VARINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02323">duktape-1.8.0/src-separate/duk_bi_buffer.c:2323</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a90e9037a38139989e547da48b3c41385"><div class="ttname"><a href="#a90e9037a38139989e547da48b3c41385">DUK__FLD_8BIT</a></div><div class="ttdeci">#define DUK__FLD_8BIT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02318">duktape-1.8.0/src-separate/duk_bi_buffer.c:2318</a></div></div>
<div class="ttc" id="aunionduk__double__union_html"><div class="ttname"><a href="unionduk__double__union.html">duk_double_union</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01243">duktape-1.5.2/src-noline/duktape.h:1243</a></div></div>
<div class="ttc" id="aunionduk__double__union_html_a6b504013c9b4d563f72e42831800af84"><div class="ttname"><a href="unionduk__double__union.html#a6b504013c9b4d563f72e42831800af84">duk_double_union::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01244">duktape-1.5.2/src-noline/duktape.h:1244</a></div></div>
<div class="ttc" id="aunionduk__double__union_html_a83549e0b17313d7c3de1a57dc47032a8"><div class="ttname"><a href="unionduk__double__union.html#a83549e0b17313d7c3de1a57dc47032a8">duk_double_union::f</a></div><div class="ttdeci">float f[2]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01245">duktape-1.5.2/src-noline/duktape.h:1245</a></div></div>
<div class="ttc" id="aunionduk__double__union_html_aa2a9e404a0718487e853580c4bde2e3a"><div class="ttname"><a href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">duk_double_union::ui</a></div><div class="ttdeci">duk_uint32_t ui[2]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01249">duktape-1.5.2/src-noline/duktape.h:1249</a></div></div>
<div class="ttc" id="aunionduk__double__union_html_ae42563736301672d950c119f78bd52a1"><div class="ttname"><a href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">duk_double_union::uc</a></div><div class="ttdeci">duk_uint8_t uc[8]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01251">duktape-1.5.2/src-noline/duktape.h:1251</a></div></div>
<div class="ttc" id="aunionduk__double__union_html_aebc527f8e78cba745f24cf59a48262d4"><div class="ttname"><a href="unionduk__double__union.html#aebc527f8e78cba745f24cf59a48262d4">duk_double_union::us</a></div><div class="ttdeci">duk_uint16_t us[4]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01250">duktape-1.5.2/src-noline/duktape.h:1250</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01244">duk_double_union::d</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02319">DUK__FLD_16BIT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02320">DUK__FLD_32BIT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02318">DUK__FLD_8BIT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02322">DUK__FLD_DOUBLE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02321">DUK__FLD_FLOAT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02323">DUK__FLD_VARINT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02582">DUK_BSWAP16</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02575">DUK_BSWAP32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01521">DUK_DBLUNION_BSWAP64</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16040">duk_get_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05897">DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04260">duk_push_i64</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17990">duk_push_nan()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17909">duk_push_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">DUK_RET_RANGE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duk_to_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01245">duk_double_union::f</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01251">duk_double_union::uc</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01249">duk_double_union::ui</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01250">duk_double_union::us</a>.</p>

</div>
</div>
<a id="a24817da8ffb2d9af6f06b91e4a49070c" name="a24817da8ffb2d9af6f06b91e4a49070c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24817da8ffb2d9af6f06b91e4a49070c">&#9670;&#160;</a></span>duk_bi_buffer_slice_shared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_buffer_slice_shared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01976">1976</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1976</span>                                                                    {</div>
<div class="line"><span class="lineno"> 1977</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1978</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic;</div>
<div class="line"><span class="lineno"> 1979</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> res_class_num;</div>
<div class="line"><span class="lineno"> 1980</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *res_proto;</div>
<div class="line"><span class="lineno"> 1981</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 1982</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 1983</span>    <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val;</div>
<div class="line"><span class="lineno"> 1984</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> start_offset, end_offset;</div>
<div class="line"><span class="lineno"> 1985</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> slice_length;</div>
<div class="line"><span class="lineno"> 1986</span> </div>
<div class="line"><span class="lineno"> 1987</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1988</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1989</span> </div>
<div class="line"><span class="lineno"> 1990</span>    <span class="comment">/* [ start end ] */</span></div>
<div class="line"><span class="lineno"> 1991</span> </div>
<div class="line"><span class="lineno"> 1992</span>    magic = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);</div>
<div class="line"><span class="lineno"> 1993</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1994</span> </div>
<div class="line"><span class="lineno"> 1995</span>    <span class="comment">/* Slice offsets are element (not byte) offsets, which only matters</span></div>
<div class="line"><span class="lineno"> 1996</span><span class="comment">     * for TypedArray views, Node.js Buffer and ArrayBuffer have shift</span></div>
<div class="line"><span class="lineno"> 1997</span><span class="comment">     * zero so byte and element offsets are the same.  Negative indices</span></div>
<div class="line"><span class="lineno"> 1998</span><span class="comment">     * are counted from end of slice, crossed indices are allowed (and</span></div>
<div class="line"><span class="lineno"> 1999</span><span class="comment">     * result in zero length result), and final values are clamped</span></div>
<div class="line"><span class="lineno"> 2000</span><span class="comment">     * against the current slice.  There&#39;s intentionally no check</span></div>
<div class="line"><span class="lineno"> 2001</span><span class="comment">     * against the underlying buffer here.</span></div>
<div class="line"><span class="lineno"> 2002</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2003</span> </div>
<div class="line"><span class="lineno"> 2004</span>    <a class="code hl_function" href="#aee6b19a377d36318d1c2458022c7bbd1">duk__clamp_startend_negidx_shifted</a>(ctx, h_this, 0 <span class="comment">/*idx_start*/</span>, 1 <span class="comment">/*idx_end*/</span>, &amp;start_offset, &amp;end_offset);</div>
<div class="line"><span class="lineno"> 2005</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(end_offset &gt;= start_offset);</div>
<div class="line"><span class="lineno"> 2006</span>    slice_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) (end_offset - start_offset);</div>
<div class="line"><span class="lineno"> 2007</span> </div>
<div class="line"><span class="lineno"> 2008</span>    <span class="comment">/* The resulting buffer object gets the same class and prototype as</span></div>
<div class="line"><span class="lineno"> 2009</span><span class="comment">     * the buffer in &#39;this&#39;, e.g. if the input is a Node.js Buffer the</span></div>
<div class="line"><span class="lineno"> 2010</span><span class="comment">     * result is a Node.js Buffer; if the input is a Float32Array, the</span></div>
<div class="line"><span class="lineno"> 2011</span><span class="comment">     * result is a Float32Array.</span></div>
<div class="line"><span class="lineno"> 2012</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2013</span><span class="comment">     * For the class number this seems correct.  The internal prototype</span></div>
<div class="line"><span class="lineno"> 2014</span><span class="comment">     * is not so clear: if &#39;this&#39; is a bufferobject with a non-standard</span></div>
<div class="line"><span class="lineno"> 2015</span><span class="comment">     * prototype object, that value gets copied over into the result</span></div>
<div class="line"><span class="lineno"> 2016</span><span class="comment">     * (instead of using the standard prototype for that object type).</span></div>
<div class="line"><span class="lineno"> 2017</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2018</span> </div>
<div class="line"><span class="lineno"> 2019</span>    res_class_num = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acde769ef46c9a27fec925b1345d342ae">DUK_HOBJECT_GET_CLASS_NUMBER</a>((<a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *) h_this);</div>
<div class="line"><span class="lineno"> 2020</span>    h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno"> 2021</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno"> 2022</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno"> 2023</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(res_class_num),</div>
<div class="line"><span class="lineno"> 2024</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a30031b34a632fb96cd7fef08ac81eed1">DUK_BIDX_OBJECT_PROTOTYPE</a>);  <span class="comment">/* replaced */</span></div>
<div class="line"><span class="lineno"> 2025</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2026</span>    res_proto = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a117b58d5b8a3809139f42327410929b2">DUK_HOBJECT_GET_PROTOTYPE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, (<a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *) h_this);  <span class="comment">/* may be NULL */</span></div>
<div class="line"><span class="lineno"> 2027</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a53f24ac858c09344f9f800f3cac769b1">DUK_HOBJECT_SET_PROTOTYPE_UPDREF</a>(thr, (<a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *) h_bufobj, res_proto);</div>
<div class="line"><span class="lineno"> 2028</span> </div>
<div class="line"><span class="lineno"> 2029</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> == 0);</div>
<div class="line"><span class="lineno"> 2030</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a> = h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;  <span class="comment">/* inherit */</span></div>
<div class="line"><span class="lineno"> 2031</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a> = h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a>;  <span class="comment">/* inherit */</span></div>
<div class="line"><span class="lineno"> 2032</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a8ab01102747ec3dbce0586a8f5c89b55">is_view</a> = magic &amp; 0x01;</div>
<div class="line"><span class="lineno"> 2033</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a8ab01102747ec3dbce0586a8f5c89b55">is_view</a> == 0 || h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a8ab01102747ec3dbce0586a8f5c89b55">is_view</a> == 1);</div>
<div class="line"><span class="lineno"> 2034</span> </div>
<div class="line"><span class="lineno"> 2035</span>    h_val = h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>;</div>
<div class="line"><span class="lineno"> 2036</span>    <span class="keywordflow">if</span> (h_val == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 2037</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 2038</span>    }</div>
<div class="line"><span class="lineno"> 2039</span> </div>
<div class="line"><span class="lineno"> 2040</span>    <span class="keywordflow">if</span> (magic &amp; 0x02) {</div>
<div class="line"><span class="lineno"> 2041</span>        <span class="comment">/* non-zero: make copy */</span></div>
<div class="line"><span class="lineno"> 2042</span>        duk_uint8_t *p_copy;</div>
<div class="line"><span class="lineno"> 2043</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> copy_length;</div>
<div class="line"><span class="lineno"> 2044</span> </div>
<div class="line"><span class="lineno"> 2045</span>        p_copy = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) slice_length);</div>
<div class="line"><span class="lineno"> 2046</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(p_copy != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2047</span> </div>
<div class="line"><span class="lineno"> 2048</span>        <span class="comment">/* Copy slice, respecting underlying buffer limits; remainder</span></div>
<div class="line"><span class="lineno"> 2049</span><span class="comment">         * is left as zero.</span></div>
<div class="line"><span class="lineno"> 2050</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2051</span>        copy_length = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a507d0f5bb3d178ad9828e162c2858e5a">DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH</a>(h_this, slice_length);</div>
<div class="line"><span class="lineno"> 2052</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) p_copy,</div>
<div class="line"><span class="lineno"> 2053</span>                   (<span class="keyword">const</span> <span class="keywordtype">void</span> *) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this) + start_offset),</div>
<div class="line"><span class="lineno"> 2054</span>                   copy_length);</div>
<div class="line"><span class="lineno"> 2055</span> </div>
<div class="line"><span class="lineno"> 2056</span>        h_val = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 2057</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2058</span> </div>
<div class="line"><span class="lineno"> 2059</span>        h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> = h_val;</div>
<div class="line"><span class="lineno"> 2060</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a>(thr, h_val);</div>
<div class="line"><span class="lineno"> 2061</span>        h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> = slice_length;</div>
<div class="line"><span class="lineno"> 2062</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> == 0);</div>
<div class="line"><span class="lineno"> 2063</span> </div>
<div class="line"><span class="lineno"> 2064</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* reachable so pop OK */</span></div>
<div class="line"><span class="lineno"> 2065</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2066</span>        h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> = h_val;</div>
<div class="line"><span class="lineno"> 2067</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a>(thr, h_val);</div>
<div class="line"><span class="lineno"> 2068</span>        h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> = slice_length;</div>
<div class="line"><span class="lineno"> 2069</span>        h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) (h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> + start_offset);</div>
<div class="line"><span class="lineno"> 2070</span> </div>
<div class="line"><span class="lineno"> 2071</span>        <span class="comment">/* Copy the .buffer property, needed for TypedArray.prototype.subarray().</span></div>
<div class="line"><span class="lineno"> 2072</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 2073</span><span class="comment">         * XXX: limit copy only for TypedArray classes specifically?</span></div>
<div class="line"><span class="lineno"> 2074</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2075</span> </div>
<div class="line"><span class="lineno"> 2076</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1512c1813016de46ee80d93f9a0704fb">duk_push_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 2077</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a>(ctx, -1, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a159ef082bad3e3cef657631b0d22df77">DUK_STRIDX_LC_BUFFER</a>)) {</div>
<div class="line"><span class="lineno"> 2078</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad56b7a318e093d42e552c2cf25d492e8">duk_xdef_prop_stridx</a>(ctx, -3, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a159ef082bad3e3cef657631b0d22df77">DUK_STRIDX_LC_BUFFER</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a41e3f139e0538302108235e4f3db02d3">DUK_PROPDESC_FLAGS_NONE</a>);</div>
<div class="line"><span class="lineno"> 2079</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2080</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2081</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a09f116a4bcf486b3359afaa1abf4bf66">duk_pop_2</a>(ctx);</div>
<div class="line"><span class="lineno"> 2082</span>        }</div>
<div class="line"><span class="lineno"> 2083</span>    }</div>
<div class="line"><span class="lineno"> 2084</span>    <span class="comment">/* unbalanced stack on purpose */</span></div>
<div class="line"><span class="lineno"> 2085</span> </div>
<div class="line"><span class="lineno"> 2086</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno"> 2087</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2088</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a09f116a4bcf486b3359afaa1abf4bf66"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a09f116a4bcf486b3359afaa1abf4bf66">duk_pop_2</a></div><div class="ttdeci">DUK_EXTERNAL void duk_pop_2(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19167">duktape-1.5.2/src-noline/duktape.c:19167</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a117b58d5b8a3809139f42327410929b2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a117b58d5b8a3809139f42327410929b2">DUK_HOBJECT_GET_PROTOTYPE</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_PROTOTYPE(heap, h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05227">duktape-1.5.2/src-noline/duktape.c:5227</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1512c1813016de46ee80d93f9a0704fb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1512c1813016de46ee80d93f9a0704fb">duk_push_this</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_this(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18171">duktape-1.5.2/src-noline/duktape.c:18171</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1549987aa437dbcc45cfb63722c834d6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1549987aa437dbcc45cfb63722c834d6">duk_get_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_get_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duktape-1.5.2/src-noline/duktape.c:14318</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a159ef082bad3e3cef657631b0d22df77"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a159ef082bad3e3cef657631b0d22df77">DUK_STRIDX_LC_BUFFER</a></div><div class="ttdeci">#define DUK_STRIDX_LC_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01167">duktape-1.5.2/src-noline/duktape.c:1167</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a30031b34a632fb96cd7fef08ac81eed1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a30031b34a632fb96cd7fef08ac81eed1">DUK_BIDX_OBJECT_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_OBJECT_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01632">duktape-1.5.2/src-noline/duktape.c:1632</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a41e3f139e0538302108235e4f3db02d3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a41e3f139e0538302108235e4f3db02d3">DUK_PROPDESC_FLAGS_NONE</a></div><div class="ttdeci">#define DUK_PROPDESC_FLAGS_NONE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04880">duktape-1.5.2/src-noline/duktape.c:4880</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a53f24ac858c09344f9f800f3cac769b1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a53f24ac858c09344f9f800f3cac769b1">DUK_HOBJECT_SET_PROTOTYPE_UPDREF</a></div><div class="ttdeci">#define DUK_HOBJECT_SET_PROTOTYPE_UPDREF(thr, h, p)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05235">duktape-1.5.2/src-noline/duktape.c:5235</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac8da334e24a5f42f252271161d2116fb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a></div><div class="ttdeci">DUK_EXTERNAL void duk_pop(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duktape-1.5.2/src-noline/duktape.c:19146</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acde769ef46c9a27fec925b1345d342ae"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acde769ef46c9a27fec925b1345d342ae">DUK_HOBJECT_GET_CLASS_NUMBER</a></div><div class="ttdeci">#define DUK_HOBJECT_GET_CLASS_NUMBER(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04675">duktape-1.5.2/src-noline/duktape.c:4675</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad56b7a318e093d42e552c2cf25d492e8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad56b7a318e093d42e552c2cf25d492e8">duk_xdef_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_xdef_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx, duk_small_uint_t desc_flags)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14559">duktape-1.5.2/src-noline/duktape.c:14559</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_aee6b19a377d36318d1c2458022c7bbd1"><div class="ttname"><a href="#aee6b19a377d36318d1c2458022c7bbd1">duk__clamp_startend_negidx_shifted</a></div><div class="ttdeci">DUK_LOCAL void duk__clamp_startend_negidx_shifted(duk_context *ctx, duk_hbufferobject *h_bufobj, duk_idx_t idx_start, duk_idx_t idx_end, duk_int_t *out_start_offset, duk_int_t *out_end_offset)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00330">duktape-1.8.0/src-separate/duk_bi_buffer.c:330</a></div></div>
<div class="ttc" id="astructduk__hbufferobject_html_a8ab01102747ec3dbce0586a8f5c89b55"><div class="ttname"><a href="structduk__hbufferobject.html#a8ab01102747ec3dbce0586a8f5c89b55">duk_hbufferobject::is_view</a></div><div class="ttdeci">duk_uint8_t is_view</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05930">duktape-1.5.2/src-noline/duktape.c:5930</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00330">duk__clamp_startend_negidx_shifted()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01632">DUK_BIDX_OBJECT_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16314">duk_get_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14318">duk_get_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03824">DUK_HBUFFER_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05897">DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04675">DUK_HOBJECT_GET_CLASS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05227">DUK_HOBJECT_GET_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05235">DUK_HOBJECT_SET_PROTOTYPE_UPDREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19167">duk_pop_2()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04880">DUK_PROPDESC_FLAGS_NONE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duk_push_fixed_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18171">duk_push_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01167">DUK_STRIDX_LC_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14559">duk_xdef_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05930">duk_hbufferobject::is_view</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

</div>
</div>
<a id="a1ab58f9dc6019e20c1686a527f37eb10" name="a1ab58f9dc6019e20c1686a527f37eb10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab58f9dc6019e20c1686a527f37eb10">&#9670;&#160;</a></span>duk_bi_buffer_writefield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_buffer_writefield </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">2595</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2595</span>                                                                  {</div>
<div class="line"><span class="lineno"> 2596</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 2597</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);</div>
<div class="line"><span class="lineno"> 2598</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_ftype;</div>
<div class="line"><span class="lineno"> 2599</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_bigendian;</div>
<div class="line"><span class="lineno"> 2600</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_signed;</div>
<div class="line"><span class="lineno"> 2601</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> magic_typedarray;</div>
<div class="line"><span class="lineno"> 2602</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> endswap;</div>
<div class="line"><span class="lineno"> 2603</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 2604</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> no_assert;</div>
<div class="line"><span class="lineno"> 2605</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> offset_signed;</div>
<div class="line"><span class="lineno"> 2606</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> offset;</div>
<div class="line"><span class="lineno"> 2607</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> buffer_length;</div>
<div class="line"><span class="lineno"> 2608</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> check_length;</div>
<div class="line"><span class="lineno"> 2609</span>    duk_uint8_t *buf;</div>
<div class="line"><span class="lineno"> 2610</span>    <a class="code hl_union" href="unionduk__double__union.html">duk_double_union</a> du;</div>
<div class="line"><span class="lineno"> 2611</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> nbytes = 0;</div>
<div class="line"><span class="lineno"> 2612</span> </div>
<div class="line"><span class="lineno"> 2613</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 2614</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 2615</span> </div>
<div class="line"><span class="lineno"> 2616</span>    magic_ftype = magic &amp; 0x0007;</div>
<div class="line"><span class="lineno"> 2617</span>    magic_bigendian = magic &amp; 0x0008;</div>
<div class="line"><span class="lineno"> 2618</span>    magic_signed = magic &amp; 0x0010;</div>
<div class="line"><span class="lineno"> 2619</span>    magic_typedarray = magic &amp; 0x0020;</div>
<div class="line"><span class="lineno"> 2620</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(magic_signed);</div>
<div class="line"><span class="lineno"> 2621</span> </div>
<div class="line"><span class="lineno"> 2622</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 2623</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2624</span>    buffer_length = h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno"> 2625</span> </div>
<div class="line"><span class="lineno"> 2626</span>    <span class="comment">/* [ value  offset noAssert                 ], when ftype != DUK__FLD_VARINT */</span></div>
<div class="line"><span class="lineno"> 2627</span>    <span class="comment">/* [ value  offset fieldByteLength noAssert ], when ftype == DUK__FLD_VARINT */</span></div>
<div class="line"><span class="lineno"> 2628</span>    <span class="comment">/* [ offset value  littleEndian             ], when DUK__FLD_TYPEDARRAY (regardless of ftype) */</span></div>
<div class="line"><span class="lineno"> 2629</span> </div>
<div class="line"><span class="lineno"> 2630</span>    <span class="comment">/* Handle TypedArray vs. Node.js Buffer arg differences */</span></div>
<div class="line"><span class="lineno"> 2631</span>    <span class="keywordflow">if</span> (magic_typedarray) {</div>
<div class="line"><span class="lineno"> 2632</span>        no_assert = 0;</div>
<div class="line"><span class="lineno"> 2633</span><span class="preprocessor">#if defined(DUK_USE_INTEGER_LE)</span></div>
<div class="line"><span class="lineno"> 2634</span>        endswap = !<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, 2);  <span class="comment">/* 1=little endian */</span></div>
<div class="line"><span class="lineno"> 2635</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2636</span>        endswap = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, 2);  <span class="comment">/* 1=little endian */</span></div>
<div class="line"><span class="lineno"> 2637</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2638</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1c26493d53efdb7b78ea5b638afb12ea">duk_swap</a>(ctx, 0, 1);  <span class="comment">/* offset/value order different from Node.js */</span></div>
<div class="line"><span class="lineno"> 2639</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2640</span>        no_assert = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5211f0cfa2bdf8d8b151157c04a9cdd9">duk_to_boolean</a>(ctx, (magic_ftype == <a class="code hl_define" href="#a820c22f992aac28df97907d0fce2dff3">DUK__FLD_VARINT</a>) ? 3 : 2);</div>
<div class="line"><span class="lineno"> 2641</span><span class="preprocessor">#if defined(DUK_USE_INTEGER_LE)</span></div>
<div class="line"><span class="lineno"> 2642</span>        endswap = magic_bigendian;</div>
<div class="line"><span class="lineno"> 2643</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2644</span>        endswap = !magic_bigendian;</div>
<div class="line"><span class="lineno"> 2645</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2646</span>    }</div>
<div class="line"><span class="lineno"> 2647</span> </div>
<div class="line"><span class="lineno"> 2648</span>    <span class="comment">/* Offset is coerced first to signed integer range and then to unsigned.</span></div>
<div class="line"><span class="lineno"> 2649</span><span class="comment">     * This ensures we can add a small byte length (1-8) to the offset in</span></div>
<div class="line"><span class="lineno"> 2650</span><span class="comment">     * bound checks and not wrap.</span></div>
<div class="line"><span class="lineno"> 2651</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2652</span>    offset_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 2653</span>    offset = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) offset_signed;</div>
<div class="line"><span class="lineno"> 2654</span> </div>
<div class="line"><span class="lineno"> 2655</span>    <span class="comment">/* We need &#39;nbytes&#39; even for a failed offset; return value must be</span></div>
<div class="line"><span class="lineno"> 2656</span><span class="comment">     * (offset + nbytes) even when write fails due to invalid offset.</span></div>
<div class="line"><span class="lineno"> 2657</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2658</span>    <span class="keywordflow">if</span> (magic_ftype != <a class="code hl_define" href="#a820c22f992aac28df97907d0fce2dff3">DUK__FLD_VARINT</a>) {</div>
<div class="line"><span class="lineno"> 2659</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(magic_ftype &gt;= 0 &amp;&amp; magic_ftype &lt; (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a>) (<span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a689ac1d15121b224cbc1ae301223408f">duk__buffer_nbytes_from_fldtype</a>) / <span class="keyword">sizeof</span>(duk_uint8_t)));</div>
<div class="line"><span class="lineno"> 2660</span>        nbytes = <a class="code hl_variable" href="#a689ac1d15121b224cbc1ae301223408f">duk__buffer_nbytes_from_fldtype</a>[magic_ftype];</div>
<div class="line"><span class="lineno"> 2661</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2662</span>        nbytes = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5de9255ebe35cf200f417812e04a027f">duk_get_int</a>(ctx, 2);</div>
<div class="line"><span class="lineno"> 2663</span>        <span class="keywordflow">if</span> (nbytes &lt; 1 || nbytes &gt; 6) {</div>
<div class="line"><span class="lineno"> 2664</span>            <span class="keywordflow">goto</span> fail_field_length;</div>
<div class="line"><span class="lineno"> 2665</span>        }</div>
<div class="line"><span class="lineno"> 2666</span>    }</div>
<div class="line"><span class="lineno"> 2667</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(nbytes &gt;= 1 &amp;&amp; nbytes &lt;= 8);</div>
<div class="line"><span class="lineno"> 2668</span> </div>
<div class="line"><span class="lineno"> 2669</span>    <span class="comment">/* Now we can check offset validity. */</span></div>
<div class="line"><span class="lineno"> 2670</span>    <span class="keywordflow">if</span> (offset_signed &lt; 0) {</div>
<div class="line"><span class="lineno"> 2671</span>        <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2672</span>    }</div>
<div class="line"><span class="lineno"> 2673</span> </div>
<div class="line"><span class="lineno"> 2674</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;writefield, value=%!T, buffer_length=%ld, offset=%ld, no_assert=%d, &quot;</span></div>
<div class="line"><span class="lineno"> 2675</span>                         <span class="stringliteral">&quot;magic=%04x, magic_fieldtype=%d, magic_bigendian=%d, magic_signed=%d, &quot;</span></div>
<div class="line"><span class="lineno"> 2676</span>                         <span class="stringliteral">&quot;endswap=%d&quot;</span>,</div>
<div class="line"><span class="lineno"> 2677</span>                         <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, 0), (<span class="keywordtype">long</span>) buffer_length, (<span class="keywordtype">long</span>) offset, (<span class="keywordtype">int</span>) no_assert,</div>
<div class="line"><span class="lineno"> 2678</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) magic, (<span class="keywordtype">int</span>) magic_ftype, (<span class="keywordtype">int</span>) (magic_bigendian &gt;&gt; 3),</div>
<div class="line"><span class="lineno"> 2679</span>                         (<span class="keywordtype">int</span>) (magic_signed &gt;&gt; 4), (<span class="keywordtype">int</span>) endswap));</div>
<div class="line"><span class="lineno"> 2680</span> </div>
<div class="line"><span class="lineno"> 2681</span>    <span class="comment">/* Coerce value to a number before computing check_length, so that</span></div>
<div class="line"><span class="lineno"> 2682</span><span class="comment">     * the field type specific coercion below can&#39;t have side effects</span></div>
<div class="line"><span class="lineno"> 2683</span><span class="comment">     * that would invalidate check_length.</span></div>
<div class="line"><span class="lineno"> 2684</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2685</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2686</span> </div>
<div class="line"><span class="lineno"> 2687</span>    <span class="comment">/* Update &#39;buffer_length&#39; to be the effective, safe limit which</span></div>
<div class="line"><span class="lineno"> 2688</span><span class="comment">     * takes into account the underlying buffer.  This value will be</span></div>
<div class="line"><span class="lineno"> 2689</span><span class="comment">     * potentially invalidated by any side effect.</span></div>
<div class="line"><span class="lineno"> 2690</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2691</span>    check_length = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a507d0f5bb3d178ad9828e162c2858e5a">DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH</a>(h_this, buffer_length);</div>
<div class="line"><span class="lineno"> 2692</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;buffer_length=%ld, check_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 2693</span>                         (<span class="keywordtype">long</span>) buffer_length, (<span class="keywordtype">long</span>) check_length));</div>
<div class="line"><span class="lineno"> 2694</span> </div>
<div class="line"><span class="lineno"> 2695</span>    <span class="keywordflow">if</span> (h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>) {</div>
<div class="line"><span class="lineno"> 2696</span>        buf = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this);</div>
<div class="line"><span class="lineno"> 2697</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2698</span>        <span class="comment">/* Neutered.  We could go into the switch-case safely with</span></div>
<div class="line"><span class="lineno"> 2699</span><span class="comment">         * buf == NULL because check_length == 0.  To avoid scanbuild</span></div>
<div class="line"><span class="lineno"> 2700</span><span class="comment">         * warnings, fail directly instead.</span></div>
<div class="line"><span class="lineno"> 2701</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2702</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(check_length == 0);</div>
<div class="line"><span class="lineno"> 2703</span>        <span class="keywordflow">goto</span> fail_neutered;</div>
<div class="line"><span class="lineno"> 2704</span>    }</div>
<div class="line"><span class="lineno"> 2705</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(buf != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2706</span> </div>
<div class="line"><span class="lineno"> 2707</span>    <span class="keywordflow">switch</span> (magic_ftype) {</div>
<div class="line"><span class="lineno"> 2708</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a90e9037a38139989e547da48b3c41385">DUK__FLD_8BIT</a>: {</div>
<div class="line"><span class="lineno"> 2709</span>        <span class="keywordflow">if</span> (offset + 1U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2710</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2711</span>        }</div>
<div class="line"><span class="lineno"> 2712</span>        <span class="comment">/* sign doesn&#39;t matter when writing */</span></div>
<div class="line"><span class="lineno"> 2713</span>        buf[offset] = (duk_uint8_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2714</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2715</span>    }</div>
<div class="line"><span class="lineno"> 2716</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a3bbb4f0c386187d3c017674c810e2114">DUK__FLD_16BIT</a>: {</div>
<div class="line"><span class="lineno"> 2717</span>        duk_uint16_t tmp;</div>
<div class="line"><span class="lineno"> 2718</span>        <span class="keywordflow">if</span> (offset + 2U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2719</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2720</span>        }</div>
<div class="line"><span class="lineno"> 2721</span>        tmp = (duk_uint16_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2722</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2723</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a58145764ef02b57ec67f8cfa33e0ca31">DUK_BSWAP16</a>(tmp);</div>
<div class="line"><span class="lineno"> 2724</span>        }</div>
<div class="line"><span class="lineno"> 2725</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#aebc527f8e78cba745f24cf59a48262d4">us</a>[0] = tmp;</div>
<div class="line"><span class="lineno"> 2726</span>        <span class="comment">/* sign doesn&#39;t matter when writing */</span></div>
<div class="line"><span class="lineno"> 2727</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) (buf + offset), (<span class="keyword">const</span> <span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, 2);</div>
<div class="line"><span class="lineno"> 2728</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2729</span>    }</div>
<div class="line"><span class="lineno"> 2730</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a78ceb8c155dc2802eb63a145526082ff">DUK__FLD_32BIT</a>: {</div>
<div class="line"><span class="lineno"> 2731</span>        duk_uint32_t tmp;</div>
<div class="line"><span class="lineno"> 2732</span>        <span class="keywordflow">if</span> (offset + 4U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2733</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2734</span>        }</div>
<div class="line"><span class="lineno"> 2735</span>        tmp = (duk_uint32_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2736</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2737</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abd7703c6cf23af74189ebf3fa416f465">DUK_BSWAP32</a>(tmp);</div>
<div class="line"><span class="lineno"> 2738</span>        }</div>
<div class="line"><span class="lineno"> 2739</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0] = tmp;</div>
<div class="line"><span class="lineno"> 2740</span>        <span class="comment">/* sign doesn&#39;t matter when writing */</span></div>
<div class="line"><span class="lineno"> 2741</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) (buf + offset), (<span class="keyword">const</span> <span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, 4);</div>
<div class="line"><span class="lineno"> 2742</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2743</span>    }</div>
<div class="line"><span class="lineno"> 2744</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a16180d2cb993692979f129dcd6287bf8">DUK__FLD_FLOAT</a>: {</div>
<div class="line"><span class="lineno"> 2745</span>        duk_uint32_t tmp;</div>
<div class="line"><span class="lineno"> 2746</span>        <span class="keywordflow">if</span> (offset + 4U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2747</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2748</span>        }</div>
<div class="line"><span class="lineno"> 2749</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#a83549e0b17313d7c3de1a57dc47032a8">f</a>[0] = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab40afa890c5b9fe6db3eaedc3365a882">duk_float_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2750</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2751</span>            tmp = du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0];</div>
<div class="line"><span class="lineno"> 2752</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abd7703c6cf23af74189ebf3fa416f465">DUK_BSWAP32</a>(tmp);</div>
<div class="line"><span class="lineno"> 2753</span>            du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0] = tmp;</div>
<div class="line"><span class="lineno"> 2754</span>        }</div>
<div class="line"><span class="lineno"> 2755</span>        <span class="comment">/* sign doesn&#39;t matter when writing */</span></div>
<div class="line"><span class="lineno"> 2756</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) (buf + offset), (<span class="keyword">const</span> <span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, 4);</div>
<div class="line"><span class="lineno"> 2757</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2758</span>    }</div>
<div class="line"><span class="lineno"> 2759</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a27292afecb94650e2a6d4d87b295c417">DUK__FLD_DOUBLE</a>: {</div>
<div class="line"><span class="lineno"> 2760</span>        <span class="keywordflow">if</span> (offset + 8U &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2761</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2762</span>        }</div>
<div class="line"><span class="lineno"> 2763</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#a6b504013c9b4d563f72e42831800af84">d</a> = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2764</span>        <span class="keywordflow">if</span> (endswap) {</div>
<div class="line"><span class="lineno"> 2765</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab99ecf2028ba25c0fda5516b3b518101">DUK_DBLUNION_BSWAP64</a>(&amp;du);</div>
<div class="line"><span class="lineno"> 2766</span>        }</div>
<div class="line"><span class="lineno"> 2767</span>        <span class="comment">/* sign doesn&#39;t matter when writing */</span></div>
<div class="line"><span class="lineno"> 2768</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) (buf + offset), (<span class="keyword">const</span> <span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, 8);</div>
<div class="line"><span class="lineno"> 2769</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2770</span>    }</div>
<div class="line"><span class="lineno"> 2771</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#a820c22f992aac28df97907d0fce2dff3">DUK__FLD_VARINT</a>: {</div>
<div class="line"><span class="lineno"> 2772</span>        <span class="comment">/* Node.js Buffer variable width integer field.  We don&#39;t really</span></div>
<div class="line"><span class="lineno"> 2773</span><span class="comment">         * care about speed here, so aim for shortest algorithm.</span></div>
<div class="line"><span class="lineno"> 2774</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2775</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> field_bytelen;</div>
<div class="line"><span class="lineno"> 2776</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> i, i_step, i_end;</div>
<div class="line"><span class="lineno"> 2777</span><span class="preprocessor">#if defined(DUK_USE_64BIT_OPS)</span></div>
<div class="line"><span class="lineno"> 2778</span>        duk_int64_t tmp;</div>
<div class="line"><span class="lineno"> 2779</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2780</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a> tmp;</div>
<div class="line"><span class="lineno"> 2781</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2782</span>        duk_uint8_t *p;</div>
<div class="line"><span class="lineno"> 2783</span> </div>
<div class="line"><span class="lineno"> 2784</span>        field_bytelen = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) nbytes;</div>
<div class="line"><span class="lineno"> 2785</span>        <span class="keywordflow">if</span> (offset + (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) field_bytelen &gt; check_length) {</div>
<div class="line"><span class="lineno"> 2786</span>            <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2787</span>        }</div>
<div class="line"><span class="lineno"> 2788</span> </div>
<div class="line"><span class="lineno"> 2789</span>        <span class="comment">/* Slow writing of value using either 64-bit arithmetic</span></div>
<div class="line"><span class="lineno"> 2790</span><span class="comment">         * or IEEE doubles if 64-bit types not available.  There&#39;s</span></div>
<div class="line"><span class="lineno"> 2791</span><span class="comment">         * no special sign handling when writing varints.</span></div>
<div class="line"><span class="lineno"> 2792</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2793</span> </div>
<div class="line"><span class="lineno"> 2794</span>        <span class="keywordflow">if</span> (magic_bigendian) {</div>
<div class="line"><span class="lineno"> 2795</span>            <span class="comment">/* Write in big endian */</span></div>
<div class="line"><span class="lineno"> 2796</span>            i = field_bytelen;  <span class="comment">/* one i_step added at top of loop */</span></div>
<div class="line"><span class="lineno"> 2797</span>            i_step = -1;</div>
<div class="line"><span class="lineno"> 2798</span>            i_end = 0;</div>
<div class="line"><span class="lineno"> 2799</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2800</span>            <span class="comment">/* Write in little endian */</span></div>
<div class="line"><span class="lineno"> 2801</span>            i = -1;  <span class="comment">/* one i_step added at top of loop */</span></div>
<div class="line"><span class="lineno"> 2802</span>            i_step = 1;</div>
<div class="line"><span class="lineno"> 2803</span>            i_end = field_bytelen - 1;</div>
<div class="line"><span class="lineno"> 2804</span>        }</div>
<div class="line"><span class="lineno"> 2805</span> </div>
<div class="line"><span class="lineno"> 2806</span>        <span class="comment">/* XXX: The duk_to_number() cast followed by integer coercion</span></div>
<div class="line"><span class="lineno"> 2807</span><span class="comment">         * is platform specific so NaN, +/- Infinity, and out-of-bounds</span></div>
<div class="line"><span class="lineno"> 2808</span><span class="comment">         * values result in platform specific output now.</span></div>
<div class="line"><span class="lineno"> 2809</span><span class="comment">         * See: test-bi-nodejs-buffer-proto-varint-special.js</span></div>
<div class="line"><span class="lineno"> 2810</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2811</span> </div>
<div class="line"><span class="lineno"> 2812</span><span class="preprocessor">#if defined(DUK_USE_64BIT_OPS)</span></div>
<div class="line"><span class="lineno"> 2813</span>        tmp = (duk_int64_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2814</span>        p = (duk_uint8_t *) (buf + offset);</div>
<div class="line"><span class="lineno"> 2815</span>        <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2816</span>            i += i_step;</div>
<div class="line"><span class="lineno"> 2817</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &gt;= 0 &amp;&amp; i &lt; field_bytelen);</div>
<div class="line"><span class="lineno"> 2818</span>            p[i] = (duk_uint8_t) (tmp &amp; 0xff);</div>
<div class="line"><span class="lineno"> 2819</span>            tmp = tmp &gt;&gt; 8;  <span class="comment">/* unnecessary shift for last byte */</span></div>
<div class="line"><span class="lineno"> 2820</span>        } <span class="keywordflow">while</span> (i != i_end);</div>
<div class="line"><span class="lineno"> 2821</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2822</span>        tmp = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2823</span>        p = (duk_uint8_t *) (buf + offset);</div>
<div class="line"><span class="lineno"> 2824</span>        <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2825</span>            i += i_step;</div>
<div class="line"><span class="lineno"> 2826</span>            tmp = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af6a3560d3297f25295e56df25fa0f695">DUK_FLOOR</a>(tmp);</div>
<div class="line"><span class="lineno"> 2827</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i &gt;= 0 &amp;&amp; i &lt; field_bytelen);</div>
<div class="line"><span class="lineno"> 2828</span>            p[i] = (duk_uint8_t) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af0d8711e782e9f75d49ecdc04afe6b2f">DUK_FMOD</a>(tmp, 256.0));</div>
<div class="line"><span class="lineno"> 2829</span>            tmp = tmp / 256.0;  <span class="comment">/* unnecessary div for last byte */</span></div>
<div class="line"><span class="lineno"> 2830</span>        } <span class="keywordflow">while</span> (i != i_end);</div>
<div class="line"><span class="lineno"> 2831</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2832</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2833</span>    }</div>
<div class="line"><span class="lineno"> 2834</span>    <span class="keywordflow">default</span>: {  <span class="comment">/* should never happen but default here */</span></div>
<div class="line"><span class="lineno"> 2835</span>        <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 2836</span>    }</div>
<div class="line"><span class="lineno"> 2837</span>    }</div>
<div class="line"><span class="lineno"> 2838</span> </div>
<div class="line"><span class="lineno"> 2839</span>    <span class="comment">/* Node.js Buffer: return offset + #bytes written (i.e. next</span></div>
<div class="line"><span class="lineno"> 2840</span><span class="comment">     * write offset).</span></div>
<div class="line"><span class="lineno"> 2841</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2842</span>    <span class="keywordflow">if</span> (magic_typedarray) {</div>
<div class="line"><span class="lineno"> 2843</span>        <span class="comment">/* For TypedArrays &#39;undefined&#39; return value is specified</span></div>
<div class="line"><span class="lineno"> 2844</span><span class="comment">         * by ES6 (matches V8).</span></div>
<div class="line"><span class="lineno"> 2845</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2846</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2847</span>    }</div>
<div class="line"><span class="lineno"> 2848</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, offset + nbytes);</div>
<div class="line"><span class="lineno"> 2849</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2850</span> </div>
<div class="line"><span class="lineno"> 2851</span> fail_neutered:</div>
<div class="line"><span class="lineno"> 2852</span> fail_field_length:</div>
<div class="line"><span class="lineno"> 2853</span> fail_bounds:</div>
<div class="line"><span class="lineno"> 2854</span>    <span class="keywordflow">if</span> (no_assert) {</div>
<div class="line"><span class="lineno"> 2855</span>        <span class="comment">/* Node.js return value for failed writes is offset + #bytes</span></div>
<div class="line"><span class="lineno"> 2856</span><span class="comment">         * that would have been written.</span></div>
<div class="line"><span class="lineno"> 2857</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2858</span>        <span class="comment">/* XXX: for negative input offsets, &#39;offset&#39; will be a large</span></div>
<div class="line"><span class="lineno"> 2859</span><span class="comment">         * positive value so the result here is confusing.</span></div>
<div class="line"><span class="lineno"> 2860</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2861</span>        <span class="keywordflow">if</span> (magic_typedarray) {</div>
<div class="line"><span class="lineno"> 2862</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2863</span>        }</div>
<div class="line"><span class="lineno"> 2864</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, offset + nbytes);</div>
<div class="line"><span class="lineno"> 2865</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2866</span>    }</div>
<div class="line"><span class="lineno"> 2867</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 2868</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ab40afa890c5b9fe6db3eaedc3365a882"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab40afa890c5b9fe6db3eaedc3365a882">duk_float_t</a></div><div class="ttdeci">float duk_float_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01876">duktape-1.5.2/src-noline/duk_config.h:1876</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_af0d8711e782e9f75d49ecdc04afe6b2f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af0d8711e782e9f75d49ecdc04afe6b2f">DUK_FMOD</a></div><div class="ttdeci">#define DUK_FMOD</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02222">duktape-1.5.2/src-noline/duk_config.h:2222</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_af6a3560d3297f25295e56df25fa0f695"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af6a3560d3297f25295e56df25fa0f695">DUK_FLOOR</a></div><div class="ttdeci">#define DUK_FLOOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02216">duktape-1.5.2/src-noline/duk_config.h:2216</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1c26493d53efdb7b78ea5b638afb12ea"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1c26493d53efdb7b78ea5b638afb12ea">duk_swap</a></div><div class="ttdeci">DUK_EXTERNAL void duk_swap(duk_context *ctx, duk_idx_t index1, duk_idx_t index2)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15678">duktape-1.5.2/src-noline/duktape.c:15678</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a60da7a5524bcdb03fb59734d8ffa6ffc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a></div><div class="ttdeci">DUK_EXTERNAL duk_double_t duk_to_number(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duktape-1.5.2/src-noline/duktape.c:16766</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa418fc23b85532f124eb2e54696278e2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a></div><div class="ttdeci">DUK_EXTERNAL duk_uint32_t duk_to_uint32(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duktape-1.5.2/src-noline/duktape.c:16844</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_afa34aa8c7f880082f9de613ef2bc3c58"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_tval * duk_get_tval(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duktape-1.5.2/src-noline/duktape.c:15121</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a689ac1d15121b224cbc1ae301223408f"><div class="ttname"><a href="#a689ac1d15121b224cbc1ae301223408f">duk__buffer_nbytes_from_fldtype</a></div><div class="ttdeci">static const duk_uint8_t duk__buffer_nbytes_from_fldtype[6]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00048">duktape-1.8.0/src-separate/duk_bi_buffer.c:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01244">duk_double_union::d</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00048">duk__buffer_nbytes_from_fldtype</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02319">DUK__FLD_16BIT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02320">DUK__FLD_32BIT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02318">DUK__FLD_8BIT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02322">DUK__FLD_DOUBLE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02321">DUK__FLD_FLOAT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02323">DUK__FLD_VARINT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02582">DUK_BSWAP16</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02575">DUK_BSWAP32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01521">DUK_DBLUNION_BSWAP64</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02216">DUK_FLOOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02222">DUK_FMOD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16040">duk_get_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05897">DUK_HBUFFEROBJECT_CLAMP_BYTELENGTH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">DUK_RET_RANGE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15678">duk_swap()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16744">duk_to_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duk_to_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duk_to_uint32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01245">duk_double_union::f</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01251">duk_double_union::uc</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01249">duk_double_union::ui</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01250">duk_double_union::us</a>.</p>

</div>
</div>
<a id="a39e7c10af6161a3c1bd4c79ff729086a" name="a39e7c10af6161a3c1bd4c79ff729086a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39e7c10af6161a3c1bd4c79ff729086a">&#9670;&#160;</a></span>duk_bi_dataview_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_dataview_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01104">1104</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1104</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1105</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarg;</div>
<div class="line"><span class="lineno"> 1106</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 1107</span>    <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val;</div>
<div class="line"><span class="lineno"> 1108</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> offset;</div>
<div class="line"><span class="lineno"> 1109</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> length;</div>
<div class="line"><span class="lineno"> 1110</span> </div>
<div class="line"><span class="lineno"> 1111</span>    <span class="comment">/* XXX: function flag to make this automatic? */</span></div>
<div class="line"><span class="lineno"> 1112</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9b9ef102c56eca816cb236e3c2dac030">duk_is_constructor_call</a>(ctx)) {</div>
<div class="line"><span class="lineno"> 1113</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1114</span>    }</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>    h_bufarg = <a class="code hl_function" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1117</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>    <a class="code hl_function" href="#a95b33adf4b8ce3ab334ef0290bf3f293">duk__resolve_offset_opt_length</a>(ctx, h_bufarg, 1, 2, &amp;offset, &amp;length, 1 <span class="comment">/*throw_flag*/</span>);</div>
<div class="line"><span class="lineno"> 1120</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset &lt;= h_bufarg-&gt;length);</div>
<div class="line"><span class="lineno"> 1121</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset + length &lt;= h_bufarg-&gt;length);</div>
<div class="line"><span class="lineno"> 1122</span> </div>
<div class="line"><span class="lineno"> 1123</span>    h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno"> 1124</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno"> 1125</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno"> 1126</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae7391533b851254943b0ef9c269dd335">DUK_HOBJECT_CLASS_DATAVIEW</a>),</div>
<div class="line"><span class="lineno"> 1127</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a452fd631e9fc73dcd5ba8757e425c291">DUK_BIDX_DATAVIEW_PROTOTYPE</a>);</div>
<div class="line"><span class="lineno"> 1128</span> </div>
<div class="line"><span class="lineno"> 1129</span>    h_val = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>;</div>
<div class="line"><span class="lineno"> 1130</span>    <span class="keywordflow">if</span> (h_val == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 1131</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1132</span>    }</div>
<div class="line"><span class="lineno"> 1133</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> = h_val;</div>
<div class="line"><span class="lineno"> 1134</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a>(thr, h_val);</div>
<div class="line"><span class="lineno"> 1135</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> + offset;</div>
<div class="line"><span class="lineno"> 1136</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> = length;</div>
<div class="line"><span class="lineno"> 1137</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a> == 0);</div>
<div class="line"><span class="lineno"> 1138</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a> == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>);</div>
<div class="line"><span class="lineno"> 1139</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a8ab01102747ec3dbce0586a8f5c89b55">is_view</a> = 1;</div>
<div class="line"><span class="lineno"> 1140</span> </div>
<div class="line"><span class="lineno"> 1141</span>    <span class="comment">/* The DataView .buffer property is ordinarily set to the argument</span></div>
<div class="line"><span class="lineno"> 1142</span><span class="comment">     * which is an ArrayBuffer.  We accept any duk_hbufferobject as</span></div>
<div class="line"><span class="lineno"> 1143</span><span class="comment">     * an argument and .buffer will be set to the argument regardless</span></div>
<div class="line"><span class="lineno"> 1144</span><span class="comment">     * of what it is.  This may be a bit confusing if the argument</span></div>
<div class="line"><span class="lineno"> 1145</span><span class="comment">     * is e.g. a DataView or another TypedArray view.</span></div>
<div class="line"><span class="lineno"> 1146</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 1147</span><span class="comment">     * XXX: Copy .buffer property from a DataView/TypedArray argument?</span></div>
<div class="line"><span class="lineno"> 1148</span><span class="comment">     * Create a fresh ArrayBuffer for Duktape.Buffer and Node.js Buffer</span></div>
<div class="line"><span class="lineno"> 1149</span><span class="comment">     * arguments?  See: test-bug-dataview-buffer-prop.js.</span></div>
<div class="line"><span class="lineno"> 1150</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1151</span> </div>
<div class="line"><span class="lineno"> 1152</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1153</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad56b7a318e093d42e552c2cf25d492e8">duk_xdef_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a159ef082bad3e3cef657631b0d22df77">DUK_STRIDX_LC_BUFFER</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a41e3f139e0538302108235e4f3db02d3">DUK_PROPDESC_FLAGS_NONE</a>);</div>
<div class="line"><span class="lineno"> 1154</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a3d9427123c2512d568fd64bbed8f7c">duk_compact</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1155</span> </div>
<div class="line"><span class="lineno"> 1156</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno"> 1157</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1158</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2a3d9427123c2512d568fd64bbed8f7c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a3d9427123c2512d568fd64bbed8f7c">duk_compact</a></div><div class="ttdeci">DUK_EXTERNAL void duk_compact(duk_context *ctx, duk_idx_t obj_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14704">duktape-1.5.2/src-noline/duktape.c:14704</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a452fd631e9fc73dcd5ba8757e425c291"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a452fd631e9fc73dcd5ba8757e425c291">DUK_BIDX_DATAVIEW_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_DATAVIEW_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01678">duktape-1.5.2/src-noline/duktape.c:1678</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8566105ab847d4151b62c29ceab53a0d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a></div><div class="ttdeci">DUK_EXTERNAL void duk_dup(duk_context *ctx, duk_idx_t from_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duktape-1.5.2/src-noline/duktape.c:15702</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae7391533b851254943b0ef9c269dd335"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae7391533b851254943b0ef9c269dd335">DUK_HOBJECT_CLASS_DATAVIEW</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_DATAVIEW</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04711">duktape-1.5.2/src-noline/duktape.c:4711</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a95b33adf4b8ce3ab334ef0290bf3f293"><div class="ttname"><a href="#a95b33adf4b8ce3ab334ef0290bf3f293">duk__resolve_offset_opt_length</a></div><div class="ttdeci">DUK_LOCAL void duk__resolve_offset_opt_length(duk_context *ctx, duk_hbufferobject *h_bufarg, duk_idx_t idx_offset, duk_idx_t idx_length, duk_uint_t *out_offset, duk_uint_t *out_length, duk_bool_t throw_flag)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00224">duktape-1.8.0/src-separate/duk_bi_buffer.c:224</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00152">duk__require_bufobj_value()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00224">duk__resolve_offset_opt_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01678">DUK_BIDX_DATAVIEW_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14704">duk_compact()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03824">DUK_HBUFFER_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05818">DUK_HBUFFEROBJECT_ELEM_UINT8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04711">DUK_HOBJECT_CLASS_DATAVIEW</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12775">duk_is_constructor_call()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04880">DUK_PROPDESC_FLAGS_NONE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01167">DUK_STRIDX_LC_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14559">duk_xdef_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05930">duk_hbufferobject::is_view</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

</div>
</div>
<a id="a697b4fe14ab2b8e0b6e34b046f8f727a" name="a697b4fe14ab2b8e0b6e34b046f8f727a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a697b4fe14ab2b8e0b6e34b046f8f727a">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_byte_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_byte_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02164">2164</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2164</span>                                                                          {</div>
<div class="line"><span class="lineno"> 2165</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *str;</div>
<div class="line"><span class="lineno"> 2166</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> len;</div>
<div class="line"><span class="lineno"> 2167</span> </div>
<div class="line"><span class="lineno"> 2168</span>    <span class="comment">/* At the moment Buffer(&lt;str&gt;) will just use the string bytes as</span></div>
<div class="line"><span class="lineno"> 2169</span><span class="comment">     * is (ignoring encoding), so we return the string length here</span></div>
<div class="line"><span class="lineno"> 2170</span><span class="comment">     * unconditionally.</span></div>
<div class="line"><span class="lineno"> 2171</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2172</span> </div>
<div class="line"><span class="lineno"> 2173</span>    str = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a483d04f67df61c1966927128a06731b1">duk_to_lstring</a>(ctx, 0, &amp;len);</div>
<div class="line"><span class="lineno"> 2174</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(str);</div>
<div class="line"><span class="lineno"> 2175</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a453ace2d74fc43a7a24cabca2d6fa6c9">duk_push_size_t</a>(ctx, len);</div>
<div class="line"><span class="lineno"> 2176</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2177</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a453ace2d74fc43a7a24cabca2d6fa6c9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a453ace2d74fc43a7a24cabca2d6fa6c9">duk_push_size_t</a></div><div class="ttdeci">#define duk_push_size_t(ctx, val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04274">duktape-1.5.2/src-noline/duktape.c:4274</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a483d04f67df61c1966927128a06731b1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a483d04f67df61c1966927128a06731b1">duk_to_lstring</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_to_lstring(duk_context *ctx, duk_idx_t index, duk_size_t *out_len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16915">duktape-1.5.2/src-noline/duktape.c:16915</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04274">duk_push_size_t</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16915">duk_to_lstring()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>.</p>

</div>
</div>
<a id="a09a7c6bc6e47b190db6de8183cd78ab0" name="a09a7c6bc6e47b190db6de8183cd78ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a7c6bc6e47b190db6de8183cd78ab0">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_concat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_concat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02190">2190</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2190</span>                                                                     {</div>
<div class="line"><span class="lineno"> 2191</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 2192</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_arg;</div>
<div class="line"><span class="lineno"> 2193</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> total_length = 0;</div>
<div class="line"><span class="lineno"> 2194</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno"> 2195</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufres;</div>
<div class="line"><span class="lineno"> 2196</span>    <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val;</div>
<div class="line"><span class="lineno"> 2197</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> i, n;</div>
<div class="line"><span class="lineno"> 2198</span>    duk_uint8_t *p;</div>
<div class="line"><span class="lineno"> 2199</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> space_left;</div>
<div class="line"><span class="lineno"> 2200</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> copy_size;</div>
<div class="line"><span class="lineno"> 2201</span> </div>
<div class="line"><span class="lineno"> 2202</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 2203</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 2204</span> </div>
<div class="line"><span class="lineno"> 2205</span>    <span class="comment">/* Node.js accepts only actual Arrays. */</span></div>
<div class="line"><span class="lineno"> 2206</span>    h_arg = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2207</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acde769ef46c9a27fec925b1345d342ae">DUK_HOBJECT_GET_CLASS_NUMBER</a>(h_arg) != <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b9d518cbbdc7303a95eff81d95da25e">DUK_HOBJECT_CLASS_ARRAY</a>) {</div>
<div class="line"><span class="lineno"> 2208</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 2209</span>    }</div>
<div class="line"><span class="lineno"> 2210</span> </div>
<div class="line"><span class="lineno"> 2211</span>    <span class="comment">/* Compute result length and validate argument buffers. */</span></div>
<div class="line"><span class="lineno"> 2212</span>    n = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2213</span>    <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {</div>
<div class="line"><span class="lineno"> 2214</span>        <span class="comment">/* Neutered checks not necessary here: neutered buffers have</span></div>
<div class="line"><span class="lineno"> 2215</span><span class="comment">         * zero &#39;length&#39; so we&#39;ll effectively skip them.</span></div>
<div class="line"><span class="lineno"> 2216</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2217</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 2);  <span class="comment">/* [ array totalLength ] */</span></div>
<div class="line"><span class="lineno"> 2218</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 0, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) i);  <span class="comment">/* -&gt; [ array totalLength buf ] */</span></div>
<div class="line"><span class="lineno"> 2219</span>        h_bufobj = <a class="code hl_function" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a>(ctx, 2);</div>
<div class="line"><span class="lineno"> 2220</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2221</span>        total_length += h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno"> 2222</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2223</span>    }</div>
<div class="line"><span class="lineno"> 2224</span>    <span class="keywordflow">if</span> (n == 1) {</div>
<div class="line"><span class="lineno"> 2225</span>        <span class="comment">/* For the case n==1 Node.js doesn&#39;t seem to type check</span></div>
<div class="line"><span class="lineno"> 2226</span><span class="comment">         * the sole member but we do it before returning it.</span></div>
<div class="line"><span class="lineno"> 2227</span><span class="comment">         * For this case only the original buffer object is</span></div>
<div class="line"><span class="lineno"> 2228</span><span class="comment">         * returned (not a copy).</span></div>
<div class="line"><span class="lineno"> 2229</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2230</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 0, 0);</div>
<div class="line"><span class="lineno"> 2231</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2232</span>    }</div>
<div class="line"><span class="lineno"> 2233</span> </div>
<div class="line"><span class="lineno"> 2234</span>    <span class="comment">/* User totalLength overrides a computed length, but we&#39;ll check</span></div>
<div class="line"><span class="lineno"> 2235</span><span class="comment">     * every copy in the copy loop.  Note that duk_to_uint() can</span></div>
<div class="line"><span class="lineno"> 2236</span><span class="comment">     * technically have arbitrary side effects so we need to recheck</span></div>
<div class="line"><span class="lineno"> 2237</span><span class="comment">     * the buffers in the copy loop.</span></div>
<div class="line"><span class="lineno"> 2238</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 2239</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 1) &amp;&amp; n &gt; 0) {</div>
<div class="line"><span class="lineno"> 2240</span>        <span class="comment">/* For n == 0, Node.js ignores totalLength argument and</span></div>
<div class="line"><span class="lineno"> 2241</span><span class="comment">         * returns a zero length buffer.</span></div>
<div class="line"><span class="lineno"> 2242</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 2243</span>        total_length = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 2244</span>    }</div>
<div class="line"><span class="lineno"> 2245</span>    <span class="keywordflow">if</span> (total_length &lt; 0) {</div>
<div class="line"><span class="lineno"> 2246</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 2247</span>    }</div>
<div class="line"><span class="lineno"> 2248</span> </div>
<div class="line"><span class="lineno"> 2249</span>    h_bufres = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno"> 2250</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno"> 2251</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno"> 2252</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14d77fb82090d94505df8663c053dfb0">DUK_HOBJECT_CLASS_BUFFER</a>),</div>
<div class="line"><span class="lineno"> 2253</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab1312696c0ab7052cd609bab683e101e">DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</a>);</div>
<div class="line"><span class="lineno"> 2254</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufres != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2255</span> </div>
<div class="line"><span class="lineno"> 2256</span>    p = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, total_length);</div>
<div class="line"><span class="lineno"> 2257</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(p != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2258</span>    space_left = total_length;</div>
<div class="line"><span class="lineno"> 2259</span> </div>
<div class="line"><span class="lineno"> 2260</span>    <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {</div>
<div class="line"><span class="lineno"> 2261</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 4);  <span class="comment">/* [ array totalLength bufres buf ] */</span></div>
<div class="line"><span class="lineno"> 2262</span> </div>
<div class="line"><span class="lineno"> 2263</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 0, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) i);</div>
<div class="line"><span class="lineno"> 2264</span>        h_bufobj = <a class="code hl_function" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a>(ctx, 4);</div>
<div class="line"><span class="lineno"> 2265</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2266</span> </div>
<div class="line"><span class="lineno"> 2267</span>        copy_size = h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno"> 2268</span>        <span class="keywordflow">if</span> (copy_size &gt; space_left) {</div>
<div class="line"><span class="lineno"> 2269</span>            copy_size = space_left;</div>
<div class="line"><span class="lineno"> 2270</span>        }</div>
<div class="line"><span class="lineno"> 2271</span> </div>
<div class="line"><span class="lineno"> 2272</span>        <span class="keywordflow">if</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2273</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufobj)) {</div>
<div class="line"><span class="lineno"> 2274</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) p,</div>
<div class="line"><span class="lineno"> 2275</span>                       (<span class="keyword">const</span> <span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufobj),</div>
<div class="line"><span class="lineno"> 2276</span>                       copy_size);</div>
<div class="line"><span class="lineno"> 2277</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2278</span>            <span class="comment">/* Just skip, leaving zeroes in the result. */</span></div>
<div class="line"><span class="lineno"> 2279</span>            ;</div>
<div class="line"><span class="lineno"> 2280</span>        }</div>
<div class="line"><span class="lineno"> 2281</span>        p += copy_size;</div>
<div class="line"><span class="lineno"> 2282</span>        space_left -= copy_size;</div>
<div class="line"><span class="lineno"> 2283</span> </div>
<div class="line"><span class="lineno"> 2284</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 2285</span>    }</div>
<div class="line"><span class="lineno"> 2286</span> </div>
<div class="line"><span class="lineno"> 2287</span>    h_val = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 2288</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2289</span> </div>
<div class="line"><span class="lineno"> 2290</span>    <a class="code hl_function" href="#af25e538719df2199bb71373146d79717">duk__set_bufobj_buffer</a>(ctx, h_bufres, h_val);</div>
<div class="line"><span class="lineno"> 2291</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufres);</div>
<div class="line"><span class="lineno"> 2292</span> </div>
<div class="line"><span class="lineno"> 2293</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);  <span class="comment">/* pop plain buffer, now reachable through h_bufres */</span></div>
<div class="line"><span class="lineno"> 2294</span> </div>
<div class="line"><span class="lineno"> 2295</span>    <span class="keywordflow">return</span> 1;  <span class="comment">/* return h_bufres */</span></div>
<div class="line"><span class="lineno"> 2296</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a66a83b11b322fb452d3677f28ee7067f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a></div><div class="ttdeci">duk_uint_t duk_uarridx_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01842">duktape-1.5.2/src-noline/duk_config.h:1842</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a11bee89b8ec58fdddc9de03af4475bdc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_hobject * duk_require_hobject(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16305">duktape-1.5.2/src-noline/duktape.c:16305</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3ed5f27e2216e110734e3bbe7c91d00c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a></div><div class="ttdeci">DUK_EXTERNAL duk_size_t duk_get_length(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16575">duktape-1.5.2/src-noline/duktape.c:16575</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4b9d518cbbdc7303a95eff81d95da25e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4b9d518cbbdc7303a95eff81d95da25e">DUK_HOBJECT_CLASS_ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04693">duktape-1.5.2/src-noline/duktape.c:4693</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9077276f5224f3985b570a4d82322253"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_get_prop_index(duk_context *ctx, duk_idx_t obj_index, duk_uarridx_t arr_index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duktape-1.5.2/src-noline/duktape.c:14310</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab01286cf716e36b9089bd434841ed9eb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a></div><div class="ttdeci">#define DUK_ASSERT_TOP(ctx, n)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">duktape-1.5.2/src-noline/duktape.c:7784</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab1312696c0ab7052cd609bab683e101e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab1312696c0ab7052cd609bab683e101e">DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01699">duktape-1.5.2/src-noline/duktape.c:1699</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00152">duk__require_bufobj_value()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00178">duk__set_bufobj_buffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">DUK_ASSERT_TOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01699">DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16314">duk_get_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16575">duk_get_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duk_get_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05872">DUK_HBUFFEROBJECT_VALID_SLICE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04693">DUK_HOBJECT_CLASS_ARRAY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04707">DUK_HOBJECT_CLASS_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04675">DUK_HOBJECT_GET_CLASS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duk_push_fixed_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16305">duk_require_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">DUK_RET_RANGE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a942920c544855f8f9639dd2d25799718" name="a942920c544855f8f9639dd2d25799718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a942920c544855f8f9639dd2d25799718">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00591">591</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  591</span>                                                                          {</div>
<div class="line"><span class="lineno">  592</span>    <span class="comment">/* Internal class is Object: Object.prototype.toString.call(new Buffer(0))</span></div>
<div class="line"><span class="lineno">  593</span><span class="comment">     * prints &quot;[object Object]&quot;.</span></div>
<div class="line"><span class="lineno">  594</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  595</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> len;</div>
<div class="line"><span class="lineno">  596</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> i;</div>
<div class="line"><span class="lineno">  597</span>    <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_buf;</div>
<div class="line"><span class="lineno">  598</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj;</div>
<div class="line"><span class="lineno">  599</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> buf_size;</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a68bf049624e2514c28ac233d2600472b">duk_get_type</a>(ctx, 0)) {</div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#abd656aa5461810e73c33e7a3aeb2f3e8">DUK_TYPE_BUFFER</a>: {</div>
<div class="line"><span class="lineno">  603</span>        <span class="comment">/* Custom behavior: plain buffer is used as internal buffer</span></div>
<div class="line"><span class="lineno">  604</span><span class="comment">         * without making a copy (matches Duktape.Buffer).</span></div>
<div class="line"><span class="lineno">  605</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  606</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a808471cbdda897175b2e4d50528c430d">duk_set_top</a>(ctx, 1);  <span class="comment">/* -&gt; [ buffer ] */</span></div>
<div class="line"><span class="lineno">  607</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  608</span>    }</div>
<div class="line"><span class="lineno">  609</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ac0b5ffc7fe88e6b3bce1809e61fc9863">DUK_TYPE_NUMBER</a>: {</div>
<div class="line"><span class="lineno">  610</span>        len = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, 0, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a48e45512fcecab8de9e5703d222e9ddf">DUK_INT_MAX</a>);</div>
<div class="line"><span class="lineno">  611</span>        (void) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) len);</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  613</span>    }</div>
<div class="line"><span class="lineno">  614</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#ab78347382186c262f9d56e0a2f58b4a9">DUK_TYPE_OBJECT</a>: {</div>
<div class="line"><span class="lineno">  615</span>        duk_uint8_t *buf;</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>        (void) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa4fc8e381c9e8ef4493dcec141976261">duk_get_prop_string</a>(ctx, 0, <span class="stringliteral">&quot;length&quot;</span>);</div>
<div class="line"><span class="lineno">  618</span>        len = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a469d9148d5bf602548d99f053ce2d6">duk_to_int_clamped</a>(ctx, -1, 0, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a48e45512fcecab8de9e5703d222e9ddf">DUK_INT_MAX</a>);</div>
<div class="line"><span class="lineno">  619</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  620</span>        buf = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) len);</div>
<div class="line"><span class="lineno">  621</span>        <span class="keywordflow">for</span> (i = 0; i &lt; len; i++) {</div>
<div class="line"><span class="lineno">  622</span>            <span class="comment">/* XXX: fast path for array arguments? */</span></div>
<div class="line"><span class="lineno">  623</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 0, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) i);</div>
<div class="line"><span class="lineno">  624</span>            buf[i] = (duk_uint8_t) (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, -1) &amp; 0xffU);</div>
<div class="line"><span class="lineno">  625</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno">  626</span>        }</div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  628</span>    }</div>
<div class="line"><span class="lineno">  629</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7671e251cf3bfd34fcb95d768a589366">DUK_TYPE_STRING</a>: {</div>
<div class="line"><span class="lineno">  630</span>        <span class="comment">/* ignore encoding for now */</span></div>
<div class="line"><span class="lineno">  631</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  632</span>        (void) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a07f597bbdad9981b467c4e2c0b7ecdbe">duk_to_buffer</a>(ctx, -1, &amp;buf_size);</div>
<div class="line"><span class="lineno">  633</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  634</span>    }</div>
<div class="line"><span class="lineno">  635</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  636</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  637</span>    }</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ab9162221f387ea077799b42cc46998">duk_is_buffer</a>(ctx, -1));</div>
<div class="line"><span class="lineno">  640</span>    h_buf = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a87e94fbbe1084b9ae7b83b65b2423eb9">duk_get_hbuffer</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  641</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_buf != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>    h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno">  644</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno">  645</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno">  646</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a14d77fb82090d94505df8663c053dfb0">DUK_HOBJECT_CLASS_BUFFER</a>),</div>
<div class="line"><span class="lineno">  647</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab1312696c0ab7052cd609bab683e101e">DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</a>);</div>
<div class="line"><span class="lineno">  648</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> = h_buf;</div>
<div class="line"><span class="lineno">  651</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a>(thr, h_buf);</div>
<div class="line"><span class="lineno">  652</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> == 0);</div>
<div class="line"><span class="lineno">  653</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a>(h_buf);</div>
<div class="line"><span class="lineno">  654</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a> == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>);</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  659</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a48e45512fcecab8de9e5703d222e9ddf"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a48e45512fcecab8de9e5703d222e9ddf">DUK_INT_MAX</a></div><div class="ttdeci">#define DUK_INT_MAX</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01788">duktape-1.5.2/src-noline/duk_config.h:1788</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa4fc8e381c9e8ef4493dcec141976261"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa4fc8e381c9e8ef4493dcec141976261">duk_get_prop_string</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_get_prop_string(duk_context *ctx, duk_idx_t obj_index, const char *key)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14301">duktape-1.5.2/src-noline/duktape.c:14301</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8h_html_a07f597bbdad9981b467c4e2c0b7ecdbe"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8h.html#a07f597bbdad9981b467c4e2c0b7ecdbe">duk_to_buffer</a></div><div class="ttdeci">#define duk_to_buffer(ctx, index, out_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00763">duktape-1.5.2/src-noline/duktape.h:763</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01699">DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16314">duk_get_hbuffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duk_get_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14301">duk_get_prop_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17478">duk_get_type()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">DUK_HBUFFER_GET_SIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03824">DUK_HBUFFER_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05818">DUK_HBUFFEROBJECT_ELEM_UINT8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04707">DUK_HOBJECT_CLASS_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01788">DUK_INT_MAX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17676">duk_is_buffer()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duk_push_fixed_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15216">duk_set_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00763">duk_to_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17080">duk_to_int_clamped()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duk_to_uint32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00260">DUK_TYPE_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00257">DUK_TYPE_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00259">DUK_TYPE_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00258">DUK_TYPE_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>.</p>

</div>
</div>
<a id="a7f5234d675d4bedd64bd84f347710da8" name="a7f5234d675d4bedd64bd84f347710da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f5234d675d4bedd64bd84f347710da8">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01551">1551</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1551</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1552</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1553</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 1554</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarg;</div>
<div class="line"><span class="lineno"> 1555</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> source_length;</div>
<div class="line"><span class="lineno"> 1556</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> target_length;</div>
<div class="line"><span class="lineno"> 1557</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> target_start, source_start, source_end;</div>
<div class="line"><span class="lineno"> 1558</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> target_ustart, source_ustart, source_uend;</div>
<div class="line"><span class="lineno"> 1559</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> copy_size = 0;</div>
<div class="line"><span class="lineno"> 1560</span> </div>
<div class="line"><span class="lineno"> 1561</span>    <span class="comment">/* [ targetBuffer targetStart sourceStart sourceEnd ] */</span></div>
<div class="line"><span class="lineno"> 1562</span> </div>
<div class="line"><span class="lineno"> 1563</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1564</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1565</span> </div>
<div class="line"><span class="lineno"> 1566</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1567</span>    h_bufarg = <a class="code hl_function" href="#ae0a9c0e1a83906e68f823eb03aa2e31a">duk__require_bufobj_value</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1568</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1569</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1570</span>    source_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno"> 1571</span>    target_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) h_bufarg-&gt;length;</div>
<div class="line"><span class="lineno"> 1572</span> </div>
<div class="line"><span class="lineno"> 1573</span>    target_start = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 1574</span>    source_start = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 2);</div>
<div class="line"><span class="lineno"> 1575</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 3)) {</div>
<div class="line"><span class="lineno"> 1576</span>        source_end = source_length;</div>
<div class="line"><span class="lineno"> 1577</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1578</span>        source_end = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 3);</div>
<div class="line"><span class="lineno"> 1579</span>    }</div>
<div class="line"><span class="lineno"> 1580</span> </div>
<div class="line"><span class="lineno"> 1581</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;checking copy args: target_start=%ld, target_length=%ld, &quot;</span></div>
<div class="line"><span class="lineno"> 1582</span>                         <span class="stringliteral">&quot;source_start=%ld, source_end=%ld, source_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1583</span>                         (<span class="keywordtype">long</span>) target_start, (<span class="keywordtype">long</span>) h_bufarg-&gt;length,</div>
<div class="line"><span class="lineno"> 1584</span>                         (<span class="keywordtype">long</span>) source_start, (<span class="keywordtype">long</span>) source_end, (<span class="keywordtype">long</span>) source_length));</div>
<div class="line"><span class="lineno"> 1585</span> </div>
<div class="line"><span class="lineno"> 1586</span>    <span class="comment">/* This behavior mostly mimics Node.js now. */</span></div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>    <span class="keywordflow">if</span> (source_start &lt; 0 || source_end &lt; 0 || target_start &lt; 0) {</div>
<div class="line"><span class="lineno"> 1589</span>        <span class="comment">/* Negative offsets cause a RangeError. */</span></div>
<div class="line"><span class="lineno"> 1590</span>        <span class="keywordflow">goto</span> fail_bounds;</div>
<div class="line"><span class="lineno"> 1591</span>    }</div>
<div class="line"><span class="lineno"> 1592</span>    source_ustart = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) source_start;</div>
<div class="line"><span class="lineno"> 1593</span>    source_uend = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) source_end;</div>
<div class="line"><span class="lineno"> 1594</span>    target_ustart = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) target_start;</div>
<div class="line"><span class="lineno"> 1595</span>    <span class="keywordflow">if</span> (source_ustart &gt;= source_uend ||  <span class="comment">/* crossed offsets or zero size */</span></div>
<div class="line"><span class="lineno"> 1596</span>        source_ustart &gt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) source_length ||  <span class="comment">/* source out-of-bounds (but positive) */</span></div>
<div class="line"><span class="lineno"> 1597</span>        target_ustart &gt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) target_length) {  <span class="comment">/* target out-of-bounds (but positive) */</span></div>
<div class="line"><span class="lineno"> 1598</span>        <span class="keywordflow">goto</span> silent_ignore;</div>
<div class="line"><span class="lineno"> 1599</span>    }</div>
<div class="line"><span class="lineno"> 1600</span>    <span class="keywordflow">if</span> (source_uend &gt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) source_length) {</div>
<div class="line"><span class="lineno"> 1601</span>        <span class="comment">/* Source end clamped silently to available length. */</span></div>
<div class="line"><span class="lineno"> 1602</span>        source_uend = source_length;</div>
<div class="line"><span class="lineno"> 1603</span>    }</div>
<div class="line"><span class="lineno"> 1604</span>    copy_size = source_uend - source_ustart;</div>
<div class="line"><span class="lineno"> 1605</span>    <span class="keywordflow">if</span> (target_ustart + copy_size &gt; (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) target_length) {</div>
<div class="line"><span class="lineno"> 1606</span>        <span class="comment">/* Clamp to target&#39;s end if too long.</span></div>
<div class="line"><span class="lineno"> 1607</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 1608</span><span class="comment">         * NOTE: there&#39;s no overflow possibility in the comparison;</span></div>
<div class="line"><span class="lineno"> 1609</span><span class="comment">         * both target_ustart and copy_size are &gt;= 0 and based on</span></div>
<div class="line"><span class="lineno"> 1610</span><span class="comment">         * values in duk_int_t range.  Adding them as duk_uint_t</span></div>
<div class="line"><span class="lineno"> 1611</span><span class="comment">         * values is then guaranteed not to overflow.</span></div>
<div class="line"><span class="lineno"> 1612</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1613</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(target_ustart + copy_size &gt;= target_ustart);  <span class="comment">/* no overflow */</span></div>
<div class="line"><span class="lineno"> 1614</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(target_ustart + copy_size &gt;= copy_size);  <span class="comment">/* no overflow */</span></div>
<div class="line"><span class="lineno"> 1615</span>        copy_size = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) target_length - target_ustart;</div>
<div class="line"><span class="lineno"> 1616</span>    }</div>
<div class="line"><span class="lineno"> 1617</span> </div>
<div class="line"><span class="lineno"> 1618</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;making copy: target_ustart=%lu source_ustart=%lu copy_size=%lu&quot;</span>,</div>
<div class="line"><span class="lineno"> 1619</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) target_ustart, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) source_ustart,</div>
<div class="line"><span class="lineno"> 1620</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) copy_size));</div>
<div class="line"><span class="lineno"> 1621</span> </div>
<div class="line"><span class="lineno"> 1622</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(copy_size &gt;= 1);</div>
<div class="line"><span class="lineno"> 1623</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(source_ustart &lt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) source_length);</div>
<div class="line"><span class="lineno"> 1624</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(source_ustart + copy_size &lt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) source_length);</div>
<div class="line"><span class="lineno"> 1625</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(target_ustart &lt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) target_length);</div>
<div class="line"><span class="lineno"> 1626</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(target_ustart + copy_size &lt;= (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) target_length);</div>
<div class="line"><span class="lineno"> 1627</span> </div>
<div class="line"><span class="lineno"> 1628</span>    <span class="comment">/* Ensure copy is covered by underlying buffers. */</span></div>
<div class="line"><span class="lineno"> 1629</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg-&gt;buf != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);  <span class="comment">/* length check */</span></div>
<div class="line"><span class="lineno"> 1630</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this-&gt;buf != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);    <span class="comment">/* length check */</span></div>
<div class="line"><span class="lineno"> 1631</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_bufarg, target_ustart + copy_size) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1632</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_this, source_ustart + copy_size)) {</div>
<div class="line"><span class="lineno"> 1633</span>        <span class="comment">/* Must use memmove() because copy area may overlap (source and target</span></div>
<div class="line"><span class="lineno"> 1634</span><span class="comment">         * buffer may be the same, or from different slices.</span></div>
<div class="line"><span class="lineno"> 1635</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1636</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a09ab8a505a526bb93f8b2dda6167c7f1">DUK_MEMMOVE</a>((<span class="keywordtype">void</span> *) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;heap, h_bufarg) + target_ustart),</div>
<div class="line"><span class="lineno"> 1637</span>                    (<span class="keyword">const</span> <span class="keywordtype">void</span> *) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;heap, h_this) + source_ustart),</div>
<div class="line"><span class="lineno"> 1638</span>                    (<span class="keywordtype">size_t</span>) copy_size);</div>
<div class="line"><span class="lineno"> 1639</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1640</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;buffer copy not covered by underlying buffer(s), ignoring&quot;</span>));</div>
<div class="line"><span class="lineno"> 1641</span>    }</div>
<div class="line"><span class="lineno"> 1642</span> </div>
<div class="line"><span class="lineno"> 1643</span> silent_ignore:</div>
<div class="line"><span class="lineno"> 1644</span>    <span class="comment">/* Return value is like write(), number of bytes written.</span></div>
<div class="line"><span class="lineno"> 1645</span><span class="comment">     * The return value matters because of code like:</span></div>
<div class="line"><span class="lineno"> 1646</span><span class="comment">     * &quot;off += buf.copy(...)&quot;.</span></div>
<div class="line"><span class="lineno"> 1647</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1648</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, copy_size);</div>
<div class="line"><span class="lineno"> 1649</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1650</span> </div>
<div class="line"><span class="lineno"> 1651</span> fail_bounds:</div>
<div class="line"><span class="lineno"> 1652</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1653</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a09ab8a505a526bb93f8b2dda6167c7f1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a09ab8a505a526bb93f8b2dda6167c7f1">DUK_MEMMOVE</a></div><div class="ttdeci">#define DUK_MEMMOVE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01988">duktape-1.5.2/src-noline/duk_config.h:1988</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a32ae6fee09b79acb415e7cdfdf47b719"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL(h, off)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">duktape-1.5.2/src-noline/duktape.c:5887</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00152">duk__require_bufobj_value()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01988">DUK_MEMMOVE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">DUK_RET_RANGE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a13b2120c513806229efc1f1447360431" name="a13b2120c513806229efc1f1447360431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13b2120c513806229efc1f1447360431">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_fill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_fill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01423">1423</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1423</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1424</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1425</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 1426</span>    <span class="keyword">const</span> duk_uint8_t *fill_str_ptr;</div>
<div class="line"><span class="lineno"> 1427</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> fill_str_len;</div>
<div class="line"><span class="lineno"> 1428</span>    duk_uint8_t fill_value;</div>
<div class="line"><span class="lineno"> 1429</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> fill_offset;</div>
<div class="line"><span class="lineno"> 1430</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> fill_end;</div>
<div class="line"><span class="lineno"> 1431</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> fill_length;</div>
<div class="line"><span class="lineno"> 1432</span>    duk_uint8_t *p;</div>
<div class="line"><span class="lineno"> 1433</span> </div>
<div class="line"><span class="lineno"> 1434</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1435</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1436</span> </div>
<div class="line"><span class="lineno"> 1437</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1438</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1439</span>    <span class="keywordflow">if</span> (h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 1440</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1441</span>    }</div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span>    <span class="comment">/* [ value offset end ] */</span></div>
<div class="line"><span class="lineno"> 1444</span> </div>
<div class="line"><span class="lineno"> 1445</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a>(ctx, 0)) {</div>
<div class="line"><span class="lineno"> 1446</span>        fill_str_ptr = (<span class="keyword">const</span> duk_uint8_t *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0cb428198828c732174048ea91e28800">duk_get_lstring</a>(ctx, 0, &amp;fill_str_len);</div>
<div class="line"><span class="lineno"> 1447</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(fill_str_ptr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1448</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1449</span>        fill_value = (duk_uint8_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1450</span>        fill_str_ptr = (<span class="keyword">const</span> duk_uint8_t *) &amp;fill_value;</div>
<div class="line"><span class="lineno"> 1451</span>        fill_str_len = 1;</div>
<div class="line"><span class="lineno"> 1452</span>    }</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>    <span class="comment">/* Fill offset handling is more lenient than in Node.js. */</span></div>
<div class="line"><span class="lineno"> 1455</span> </div>
<div class="line"><span class="lineno"> 1456</span>    <a class="code hl_function" href="#a0d1d5b31362075274f6228cd0a433a98">duk__clamp_startend_nonegidx_noshift</a>(ctx, h_this, 1 <span class="comment">/*idx_start*/</span>, 2 <span class="comment">/*idx_end*/</span>, &amp;fill_offset, &amp;fill_end);</div>
<div class="line"><span class="lineno"> 1457</span> </div>
<div class="line"><span class="lineno"> 1458</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;fill: fill_value=%02x, fill_offset=%ld, fill_end=%ld, view length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1459</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) fill_value, (<span class="keywordtype">long</span>) fill_offset, (<span class="keywordtype">long</span>) fill_end, (<span class="keywordtype">long</span>) h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>));</div>
<div class="line"><span class="lineno"> 1460</span> </div>
<div class="line"><span class="lineno"> 1461</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(fill_end - fill_offset &gt;= 0);</div>
<div class="line"><span class="lineno"> 1462</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1463</span> </div>
<div class="line"><span class="lineno"> 1464</span>    p = (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this) + fill_offset);</div>
<div class="line"><span class="lineno"> 1465</span>    fill_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (fill_end - fill_offset);</div>
<div class="line"><span class="lineno"> 1466</span>    <span class="keywordflow">if</span> (fill_str_len == 1) {</div>
<div class="line"><span class="lineno"> 1467</span>        <span class="comment">/* Handle single character fills as memset() even when</span></div>
<div class="line"><span class="lineno"> 1468</span><span class="comment">         * the fill data comes from a one-char argument.</span></div>
<div class="line"><span class="lineno"> 1469</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1470</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6fc676d518bd1be6649d3625fdfe4b83">DUK_MEMSET</a>((<span class="keywordtype">void</span> *) p, (<span class="keywordtype">int</span>) fill_str_ptr[0], (<span class="keywordtype">size_t</span>) fill_length);</div>
<div class="line"><span class="lineno"> 1471</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fill_str_len &gt; 1) {</div>
<div class="line"><span class="lineno"> 1472</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> i, n, t;</div>
<div class="line"><span class="lineno"> 1473</span> </div>
<div class="line"><span class="lineno"> 1474</span>        <span class="keywordflow">for</span> (i = 0, n = (fill_end - fill_offset), t = 0; i &lt; n; i++) {</div>
<div class="line"><span class="lineno"> 1475</span>            p[i] = fill_str_ptr[t++];</div>
<div class="line"><span class="lineno"> 1476</span>            <span class="keywordflow">if</span> (t &gt;= fill_str_len) {</div>
<div class="line"><span class="lineno"> 1477</span>                t = 0;</div>
<div class="line"><span class="lineno"> 1478</span>            }</div>
<div class="line"><span class="lineno"> 1479</span>        }</div>
<div class="line"><span class="lineno"> 1480</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1481</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;zero size fill pattern, ignore silently&quot;</span>));</div>
<div class="line"><span class="lineno"> 1482</span>    }</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>    <span class="comment">/* Return the Buffer to allow chaining: b.fill(0x11).fill(0x22, 3, 5).toString() */</span></div>
<div class="line"><span class="lineno"> 1485</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1512c1813016de46ee80d93f9a0704fb">duk_push_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1486</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1487</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a6fc676d518bd1be6649d3625fdfe4b83"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a6fc676d518bd1be6649d3625fdfe4b83">DUK_MEMSET</a></div><div class="ttdeci">#define DUK_MEMSET</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01994">duktape-1.5.2/src-noline/duk_config.h:1994</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ada14d1be1c027a164a237f1402c321ab"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_is_string(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duktape-1.5.2/src-noline/duktape.c:17666</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a0d1d5b31362075274f6228cd0a433a98"><div class="ttname"><a href="#a0d1d5b31362075274f6228cd0a433a98">duk__clamp_startend_nonegidx_noshift</a></div><div class="ttdeci">DUK_LOCAL void duk__clamp_startend_nonegidx_noshift(duk_context *ctx, duk_hbufferobject *h_bufobj, duk_idx_t idx_start, duk_idx_t idx_end, duk_int_t *out_start_offset, duk_int_t *out_end_offset)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00288">duktape-1.8.0/src-separate/duk_bi_buffer.c:288</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00288">duk__clamp_startend_nonegidx_noshift()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16064">duk_get_lstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duk_is_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01994">DUK_MEMSET</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18171">duk_push_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duk_to_uint32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="ac2df7232083d243275c4594dbe3a885d" name="ac2df7232083d243275c4594dbe3a885d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2df7232083d243275c4594dbe3a885d">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_is_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_is_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02123">2123</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2123</span>                                                                        {</div>
<div class="line"><span class="lineno"> 2124</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 2125</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno"> 2126</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h;</div>
<div class="line"><span class="lineno"> 2127</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_proto;</div>
<div class="line"><span class="lineno"> 2128</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> ret = 0;</div>
<div class="line"><span class="lineno"> 2129</span> </div>
<div class="line"><span class="lineno"> 2130</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 2131</span> </div>
<div class="line"><span class="lineno"> 2132</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx) &gt;= 1);  <span class="comment">/* nargs */</span></div>
<div class="line"><span class="lineno"> 2133</span>    tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2134</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2135</span> </div>
<div class="line"><span class="lineno"> 2136</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv)) {</div>
<div class="line"><span class="lineno"> 2137</span>        h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv);</div>
<div class="line"><span class="lineno"> 2138</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2139</span> </div>
<div class="line"><span class="lineno"> 2140</span>        h_proto = thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a2411e86e6389e09885c986c311430c76">builtins</a>[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab1312696c0ab7052cd609bab683e101e">DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</a>];</div>
<div class="line"><span class="lineno"> 2141</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_proto != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 2142</span> </div>
<div class="line"><span class="lineno"> 2143</span>        h = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a117b58d5b8a3809139f42327410929b2">DUK_HOBJECT_GET_PROTOTYPE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h);</div>
<div class="line"><span class="lineno"> 2144</span>        <span class="keywordflow">if</span> (h) {</div>
<div class="line"><span class="lineno"> 2145</span>            ret = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa05d1bd83b7254005904b8f8420fcf54">duk_hobject_prototype_chain_contains</a>(thr, h, h_proto, 0 <span class="comment">/*ignore_loop*/</span>);</div>
<div class="line"><span class="lineno"> 2146</span>        }</div>
<div class="line"><span class="lineno"> 2147</span>    }</div>
<div class="line"><span class="lineno"> 2148</span> </div>
<div class="line"><span class="lineno"> 2149</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, ret);</div>
<div class="line"><span class="lineno"> 2150</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2151</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8c8653fcd951809042c23c42e534c421"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_get_top(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duktape-1.5.2/src-noline/duktape.c:15204</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa05d1bd83b7254005904b8f8420fcf54"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa05d1bd83b7254005904b8f8420fcf54">duk_hobject_prototype_chain_contains</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_hobject_prototype_chain_contains(duk_hthread *thr, duk_hobject *h, duk_hobject *p, duk_bool_t ignore_loop)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l46773">duktape-1.5.2/src-noline/duktape.c:46773</a></div></div>
<div class="ttc" id="astructduk__hthread_html_a2411e86e6389e09885c986c311430c76"><div class="ttname"><a href="structduk__hthread.html#a2411e86e6389e09885c986c311430c76">duk_hthread::builtins</a></div><div class="ttdeci">duk_hobject * builtins[DUK_NUM_BUILTINS]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06274">duktape-1.5.2/src-noline/duktape.c:6274</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06274">duk_hthread::builtins</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01699">DUK_BIDX_NODEJS_BUFFER_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duk_get_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05227">DUK_HOBJECT_GET_PROTOTYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l46773">duk_hobject_prototype_chain_contains()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duk_push_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a3de71e926985c93884af87c247a410bd" name="a3de71e926985c93884af87c247a410bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3de71e926985c93884af87c247a410bd">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_is_encoding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_is_encoding </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02101">2101</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2101</span>                                                                          {</div>
<div class="line"><span class="lineno"> 2102</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *encoding;</div>
<div class="line"><span class="lineno"> 2103</span> </div>
<div class="line"><span class="lineno"> 2104</span>    <span class="comment">/* only accept lowercase &#39;utf8&#39; now. */</span></div>
<div class="line"><span class="lineno"> 2105</span> </div>
<div class="line"><span class="lineno"> 2106</span>    encoding = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 2107</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ada14d1be1c027a164a237f1402c321ab">duk_is_string</a>(ctx, 0));  <span class="comment">/* guaranteed by duk_to_string() */</span></div>
<div class="line"><span class="lineno"> 2108</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2c95d944cae60d05c6596ee0cc19d3ee">duk_push_boolean</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aca7bb5e5039ff77598345f8b79cccd9a">DUK_STRCMP</a>(encoding, <span class="stringliteral">&quot;utf8&quot;</span>) == 0);</div>
<div class="line"><span class="lineno"> 2109</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 2110</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_aca7bb5e5039ff77598345f8b79cccd9a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aca7bb5e5039ff77598345f8b79cccd9a">DUK_STRCMP</a></div><div class="ttdeci">#define DUK_STRCMP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02000">duktape-1.5.2/src-noline/duk_config.h:2000</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17666">duk_is_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17873">duk_push_boolean()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02000">DUK_STRCMP</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>.</p>

</div>
</div>
<a id="a071f52a7c659740b8f62beed6fd81ce5" name="a071f52a7c659740b8f62beed6fd81ce5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a071f52a7c659740b8f62beed6fd81ce5">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_tojson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_tojson </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01312">1312</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1312</span>                                                                     {</div>
<div class="line"><span class="lineno"> 1313</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1314</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 1315</span>    duk_uint8_t *buf;</div>
<div class="line"><span class="lineno"> 1316</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> i;</div>
<div class="line"><span class="lineno"> 1317</span> </div>
<div class="line"><span class="lineno"> 1318</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1319</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1320</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1321</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1322</span> </div>
<div class="line"><span class="lineno"> 1323</span>    <span class="keywordflow">if</span> (h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_this)) {</div>
<div class="line"><span class="lineno"> 1324</span>        <span class="comment">/* Serialize uncovered backing buffer as a null; doesn&#39;t</span></div>
<div class="line"><span class="lineno"> 1325</span><span class="comment">         * really matter as long we&#39;re memory safe.</span></div>
<div class="line"><span class="lineno"> 1326</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1327</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5ca681ec14862f1f365b2e93fc050fa2">duk_push_null</a>(ctx);</div>
<div class="line"><span class="lineno"> 1328</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1329</span>    }</div>
<div class="line"><span class="lineno"> 1330</span> </div>
<div class="line"><span class="lineno"> 1331</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a81dddbc46ac7dd85b73412b852f708b8">duk_push_object</a>(ctx);</div>
<div class="line"><span class="lineno"> 1332</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a42b9810a4cfe02e7f9ff037960edff65">duk_push_hstring_stridx</a>(ctx, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afec95cc413c0ce14f4af34529efc35b3">DUK_STRIDX_UC_BUFFER</a>);</div>
<div class="line"><span class="lineno"> 1333</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a321e943868acbb4d4a15338f62739395">DUK_STRIDX_TYPE</a>);</div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="line"><span class="lineno"> 1335</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acce5984e6f3a97978d46a8280fcc3fed">duk_push_array</a>(ctx);</div>
<div class="line"><span class="lineno"> 1336</span>    <span class="keywordflow">for</span> (i = 0; i &lt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>; i++) {</div>
<div class="line"><span class="lineno"> 1337</span>        <span class="comment">/* XXX: regetting the pointer may be overkill - we&#39;re writing</span></div>
<div class="line"><span class="lineno"> 1338</span><span class="comment">         * to a side-effect free array here.</span></div>
<div class="line"><span class="lineno"> 1339</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1340</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1341</span>        buf = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this);</div>
<div class="line"><span class="lineno"> 1342</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) buf[i]);</div>
<div class="line"><span class="lineno"> 1343</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, -2, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a>) i);</div>
<div class="line"><span class="lineno"> 1344</span>    }</div>
<div class="line"><span class="lineno"> 1345</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7865b6f04699f9c379344f7ff75b41e4">DUK_STRIDX_DATA</a>);</div>
<div class="line"><span class="lineno"> 1346</span> </div>
<div class="line"><span class="lineno"> 1347</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1348</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a3e3bb369382aab50155c1d18bdf73923"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3e3bb369382aab50155c1d18bdf73923">duk_idx_t</a></div><div class="ttdeci">duk_int_t duk_idx_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01830">duktape-1.5.2/src-noline/duk_config.h:1830</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a10d47af3b4037f03aed29def292d3dda"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10d47af3b4037f03aed29def292d3dda">duk_put_prop_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_bool_t duk_put_prop_stridx(duk_context *ctx, duk_idx_t obj_index, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duktape-1.5.2/src-noline/duktape.c:14404</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2e084d5315f93ecef64a4bdb9ef67ae2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a></div><div class="ttdeci">DUK_EXTERNAL duk_bool_t duk_put_prop_index(duk_context *ctx, duk_idx_t obj_idx, duk_uarridx_t arr_idx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14396">duktape-1.5.2/src-noline/duktape.c:14396</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a321e943868acbb4d4a15338f62739395"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a321e943868acbb4d4a15338f62739395">DUK_STRIDX_TYPE</a></div><div class="ttdeci">#define DUK_STRIDX_TYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01128">duktape-1.5.2/src-noline/duktape.c:1128</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a42b9810a4cfe02e7f9ff037960edff65"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a42b9810a4cfe02e7f9ff037960edff65">duk_push_hstring_stridx</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_push_hstring_stridx(duk_context *ctx, duk_small_int_t stridx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19052">duktape-1.5.2/src-noline/duktape.c:19052</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5ca681ec14862f1f365b2e93fc050fa2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5ca681ec14862f1f365b2e93fc050fa2">duk_push_null</a></div><div class="ttdeci">DUK_EXTERNAL void duk_push_null(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17862">duktape-1.5.2/src-noline/duktape.c:17862</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7865b6f04699f9c379344f7ff75b41e4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7865b6f04699f9c379344f7ff75b41e4">DUK_STRIDX_DATA</a></div><div class="ttdeci">#define DUK_STRIDX_DATA</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01131">duktape-1.5.2/src-noline/duktape.c:1131</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a81dddbc46ac7dd85b73412b852f708b8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a81dddbc46ac7dd85b73412b852f708b8">duk_push_object</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_push_object(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18449">duktape-1.5.2/src-noline/duktape.c:18449</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_acce5984e6f3a97978d46a8280fcc3fed"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#acce5984e6f3a97978d46a8280fcc3fed">duk_push_array</a></div><div class="ttdeci">DUK_EXTERNAL duk_idx_t duk_push_array(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18458">duktape-1.5.2/src-noline/duktape.c:18458</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_afec95cc413c0ce14f4af34529efc35b3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#afec95cc413c0ce14f4af34529efc35b3">DUK_STRIDX_UC_BUFFER</a></div><div class="ttdeci">#define DUK_STRIDX_UC_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00966">duktape-1.5.2/src-noline/duktape.c:966</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05872">DUK_HBUFFEROBJECT_VALID_SLICE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18458">duk_push_array()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19052">duk_push_hstring_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17862">duk_push_null()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18449">duk_push_object()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14396">duk_put_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14404">duk_put_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01131">DUK_STRIDX_DATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01128">DUK_STRIDX_TYPE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00966">DUK_STRIDX_UC_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a915678c7dd69f63799a5206fc4534aa4" name="a915678c7dd69f63799a5206fc4534aa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a915678c7dd69f63799a5206fc4534aa4">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_tostring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_tostring </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01194">1194</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1194</span>                                                                       {</div>
<div class="line"><span class="lineno"> 1195</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1196</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 1197</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> start_offset, end_offset;</div>
<div class="line"><span class="lineno"> 1198</span>    duk_uint8_t *buf_slice;</div>
<div class="line"><span class="lineno"> 1199</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> slice_length;</div>
<div class="line"><span class="lineno"> 1200</span> </div>
<div class="line"><span class="lineno"> 1201</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1202</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1203</span> </div>
<div class="line"><span class="lineno"> 1204</span>    h_this = <a class="code hl_function" href="#ab7d613ea1ca36247bc43e13c50f1c273">duk__get_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1205</span>    <span class="keywordflow">if</span> (h_this == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 1206</span>        <span class="comment">/* XXX: happens e.g. when evaluating: String(Buffer.prototype). */</span></div>
<div class="line"><span class="lineno"> 1207</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0af4923a11f54a9e005acef0c4a0b424">duk_push_string</a>(ctx, <span class="stringliteral">&quot;[object Object]&quot;</span>);</div>
<div class="line"><span class="lineno"> 1208</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1209</span>    }</div>
<div class="line"><span class="lineno"> 1210</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_this);</div>
<div class="line"><span class="lineno"> 1211</span> </div>
<div class="line"><span class="lineno"> 1212</span>    <span class="comment">/* ignore encoding for now */</span></div>
<div class="line"><span class="lineno"> 1213</span> </div>
<div class="line"><span class="lineno"> 1214</span>    <a class="code hl_function" href="#a0d1d5b31362075274f6228cd0a433a98">duk__clamp_startend_nonegidx_noshift</a>(ctx, h_this, 1 <span class="comment">/*idx_start*/</span>, 2 <span class="comment">/*idx_end*/</span>, &amp;start_offset, &amp;end_offset);</div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span>    slice_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (end_offset - start_offset);</div>
<div class="line"><span class="lineno"> 1217</span>    buf_slice = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, slice_length);</div>
<div class="line"><span class="lineno"> 1218</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(buf_slice != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>    <span class="keywordflow">if</span> (h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 1221</span>        <span class="keywordflow">goto</span> type_error;</div>
<div class="line"><span class="lineno"> 1222</span>    }</div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_this, start_offset + slice_length)) {</div>
<div class="line"><span class="lineno"> 1225</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) buf_slice,</div>
<div class="line"><span class="lineno"> 1226</span>                   (<span class="keyword">const</span> <span class="keywordtype">void</span> *) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this) + start_offset),</div>
<div class="line"><span class="lineno"> 1227</span>                   (<span class="keywordtype">size_t</span>) slice_length);</div>
<div class="line"><span class="lineno"> 1228</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1229</span>        <span class="comment">/* not covered, return all zeroes */</span></div>
<div class="line"><span class="lineno"> 1230</span>        ;</div>
<div class="line"><span class="lineno"> 1231</span>    }</div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac44e324c8cc1777c335c7d59a50a4798">duk_to_string</a>(ctx, -1);</div>
<div class="line"><span class="lineno"> 1234</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span> type_error:</div>
<div class="line"><span class="lineno"> 1237</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1238</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0af4923a11f54a9e005acef0c4a0b424"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0af4923a11f54a9e005acef0c4a0b424">duk_push_string</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_push_string(duk_context *ctx, const char *str)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18040">duktape-1.5.2/src-noline/duktape.c:18040</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_ab7d613ea1ca36247bc43e13c50f1c273"><div class="ttname"><a href="#ab7d613ea1ca36247bc43e13c50f1c273">duk__get_bufobj_this</a></div><div class="ttdeci">DUK_LOCAL duk_hbufferobject * duk__get_bufobj_this(duk_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00136">duktape-1.8.0/src-separate/duk_bi_buffer.c:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00288">duk__clamp_startend_nonegidx_noshift()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00136">duk__get_bufobj_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duk_push_fixed_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18040">duk_push_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17089">duk_to_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

</div>
</div>
<a id="a35d5b1d593b8432a829f01d60586e671" name="a35d5b1d593b8432a829f01d60586e671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35d5b1d593b8432a829f01d60586e671">&#9670;&#160;</a></span>duk_bi_nodejs_buffer_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_nodejs_buffer_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01500">1500</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1500</span>                                                                    {</div>
<div class="line"><span class="lineno"> 1501</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1502</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 1503</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> offset;</div>
<div class="line"><span class="lineno"> 1504</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> length;</div>
<div class="line"><span class="lineno"> 1505</span>    <span class="keyword">const</span> duk_uint8_t *str_data;</div>
<div class="line"><span class="lineno"> 1506</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> <a class="code hl_function" href="lua-5_81_85_2src_2lstrlib_8c.html#a357ce37478dde24252724e3c4c66ce11">str_len</a>;</div>
<div class="line"><span class="lineno"> 1507</span> </div>
<div class="line"><span class="lineno"> 1508</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1509</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1510</span> </div>
<div class="line"><span class="lineno"> 1511</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1512</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1513</span> </div>
<div class="line"><span class="lineno"> 1514</span>    <span class="comment">/* Argument must be a string, e.g. a buffer is not allowed. */</span></div>
<div class="line"><span class="lineno"> 1515</span>    str_data = (<span class="keyword">const</span> duk_uint8_t *) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab273afb86bf46a45ec20f6f38489638b">duk_require_lstring</a>(ctx, 0, &amp;<a class="code hl_function" href="lua-5_81_85_2src_2lstrlib_8c.html#a357ce37478dde24252724e3c4c66ce11">str_len</a>);</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span>    <a class="code hl_function" href="#a95b33adf4b8ce3ab334ef0290bf3f293">duk__resolve_offset_opt_length</a>(ctx, h_this, 1, 2, &amp;offset, &amp;length, 0 <span class="comment">/*throw_flag*/</span>);</div>
<div class="line"><span class="lineno"> 1518</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset &lt;= h_this-&gt;length);</div>
<div class="line"><span class="lineno"> 1519</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset + length &lt;= h_this-&gt;length);</div>
<div class="line"><span class="lineno"> 1520</span> </div>
<div class="line"><span class="lineno"> 1521</span>    <span class="comment">/* XXX: encoding is ignored now. */</span></div>
<div class="line"><span class="lineno"> 1522</span> </div>
<div class="line"><span class="lineno"> 1523</span>    <span class="keywordflow">if</span> (length &gt; <a class="code hl_function" href="lua-5_81_85_2src_2lstrlib_8c.html#a357ce37478dde24252724e3c4c66ce11">str_len</a>) {</div>
<div class="line"><span class="lineno"> 1524</span>        length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) <a class="code hl_function" href="lua-5_81_85_2src_2lstrlib_8c.html#a357ce37478dde24252724e3c4c66ce11">str_len</a>;</div>
<div class="line"><span class="lineno"> 1525</span>    }</div>
<div class="line"><span class="lineno"> 1526</span> </div>
<div class="line"><span class="lineno"> 1527</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_this)) {</div>
<div class="line"><span class="lineno"> 1528</span>        <span class="comment">/* Cannot overlap. */</span></div>
<div class="line"><span class="lineno"> 1529</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this) + offset),</div>
<div class="line"><span class="lineno"> 1530</span>                   (<span class="keyword">const</span> <span class="keywordtype">void</span> *) str_data,</div>
<div class="line"><span class="lineno"> 1531</span>                   (<span class="keywordtype">size_t</span>) length);</div>
<div class="line"><span class="lineno"> 1532</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1533</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;write() target buffer is not covered, silent ignore&quot;</span>));</div>
<div class="line"><span class="lineno"> 1534</span>    }</div>
<div class="line"><span class="lineno"> 1535</span> </div>
<div class="line"><span class="lineno"> 1536</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, length);</div>
<div class="line"><span class="lineno"> 1537</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1538</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ab273afb86bf46a45ec20f6f38489638b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab273afb86bf46a45ec20f6f38489638b">duk_require_lstring</a></div><div class="ttdeci">DUK_EXTERNAL const char * duk_require_lstring(duk_context *ctx, duk_idx_t index, duk_size_t *out_len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16092">duktape-1.5.2/src-noline/duktape.c:16092</a></div></div>
<div class="ttc" id="alua-5_81_85_2src_2lstrlib_8c_html_a357ce37478dde24252724e3c4c66ce11"><div class="ttname"><a href="lua-5_81_85_2src_2lstrlib_8c.html#a357ce37478dde24252724e3c4c66ce11">str_len</a></div><div class="ttdeci">static int str_len(lua_State *L)</div><div class="ttdef"><b>Definition</b> <a href="lua-5_81_85_2src_2lstrlib_8c_source.html#l00028">lua-5.1.5/src/lstrlib.c:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00224">duk__resolve_offset_opt_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05872">DUK_HBUFFEROBJECT_VALID_SLICE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16092">duk_require_lstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="lua-5_81_85_2src_2lstrlib_8c_source.html#l00028">str_len()</a>.</p>

</div>
</div>
<a id="ac7b2397b99e38ea242e381d5bc782da1" name="ac7b2397b99e38ea242e381d5bc782da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7b2397b99e38ea242e381d5bc782da1">&#9670;&#160;</a></span>duk_bi_typedarray_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_typedarray_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00743">743</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  743</span>                                                                       {</div>
<div class="line"><span class="lineno">  744</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno">  745</span>    <a class="code hl_struct" href="structduk__tval__struct.html">duk_tval</a> *tv;</div>
<div class="line"><span class="lineno">  746</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_obj;</div>
<div class="line"><span class="lineno">  747</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufobj = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  748</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarr = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  749</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarg = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  750</span>    <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_val;</div>
<div class="line"><span class="lineno">  751</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> magic;</div>
<div class="line"><span class="lineno">  752</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> shift;</div>
<div class="line"><span class="lineno">  753</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_type;</div>
<div class="line"><span class="lineno">  754</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> elem_size;</div>
<div class="line"><span class="lineno">  755</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> class_num;</div>
<div class="line"><span class="lineno">  756</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> proto_bidx;</div>
<div class="line"><span class="lineno">  757</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> align_mask;</div>
<div class="line"><span class="lineno">  758</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> elem_length;</div>
<div class="line"><span class="lineno">  759</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> elem_length_signed;</div>
<div class="line"><span class="lineno">  760</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> byte_length;</div>
<div class="line"><span class="lineno">  761</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> copy_mode;</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno">  764</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>    <span class="comment">/* XXX: function flag to make this automatic? */</span></div>
<div class="line"><span class="lineno">  767</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9b9ef102c56eca816cb236e3c2dac030">duk_is_constructor_call</a>(ctx)) {</div>
<div class="line"><span class="lineno">  768</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  769</span>    }</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>    <span class="comment">/* We could fit built-in index into magic but that&#39;d make the magic</span></div>
<div class="line"><span class="lineno">  772</span><span class="comment">     * number dependent on built-in numbering (genbuiltins.py doesn&#39;t</span></div>
<div class="line"><span class="lineno">  773</span><span class="comment">     * handle that yet).  So map both class and prototype from the</span></div>
<div class="line"><span class="lineno">  774</span><span class="comment">     * element type.</span></div>
<div class="line"><span class="lineno">  775</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  776</span>    magic = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acf451d0ba0fad208572ab5f5c9f092b9">duk_get_current_magic</a>(ctx);</div>
<div class="line"><span class="lineno">  777</span>    shift = magic &amp; 0x03;               <span class="comment">/* bits 0...1: shift */</span></div>
<div class="line"><span class="lineno">  778</span>    elem_type = (magic &gt;&gt; 2) &amp; 0x0f;    <span class="comment">/* bits 2...5: type */</span></div>
<div class="line"><span class="lineno">  779</span>    elem_size = 1 &lt;&lt; shift;</div>
<div class="line"><span class="lineno">  780</span>    align_mask = elem_size - 1;</div>
<div class="line"><span class="lineno">  781</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(elem_type &lt; <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a768a8fb484ad2db508114924900d9450">duk__buffer_proto_from_elemtype</a>) / <span class="keyword">sizeof</span>(duk_uint8_t));</div>
<div class="line"><span class="lineno">  782</span>    proto_bidx = <a class="code hl_variable" href="#a768a8fb484ad2db508114924900d9450">duk__buffer_proto_from_elemtype</a>[elem_type];</div>
<div class="line"><span class="lineno">  783</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(proto_bidx &lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca6eebaa5d3f54c9809d6d3c6696c122">DUK_NUM_BUILTINS</a>);</div>
<div class="line"><span class="lineno">  784</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(elem_type &lt; <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a36d0e74f91871c4baeb1957d55eb044f">duk__buffer_class_from_elemtype</a>) / <span class="keyword">sizeof</span>(duk_uint8_t));</div>
<div class="line"><span class="lineno">  785</span>    class_num = <a class="code hl_variable" href="#a36d0e74f91871c4baeb1957d55eb044f">duk__buffer_class_from_elemtype</a>[elem_type];</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;typedarray constructor, magic=%d, shift=%d, elem_type=%d, &quot;</span></div>
<div class="line"><span class="lineno">  788</span>                       <span class="stringliteral">&quot;elem_size=%d, proto_bidx=%d, class_num=%d&quot;</span>,</div>
<div class="line"><span class="lineno">  789</span>                       (<span class="keywordtype">int</span>) magic, (<span class="keywordtype">int</span>) shift, (<span class="keywordtype">int</span>) elem_type, (<span class="keywordtype">int</span>) elem_size,</div>
<div class="line"><span class="lineno">  790</span>                       (<span class="keywordtype">int</span>) proto_bidx, (<span class="keywordtype">int</span>) class_num));</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>    <span class="comment">/* Argument variants.  When the argument is an ArrayBuffer a view to</span></div>
<div class="line"><span class="lineno">  793</span><span class="comment">     * the same buffer is created; otherwise a new ArrayBuffer is always</span></div>
<div class="line"><span class="lineno">  794</span><span class="comment">     * created.</span></div>
<div class="line"><span class="lineno">  795</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>    tv = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#afa34aa8c7f880082f9de613ef2bc3c58">duk_get_tval</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  798</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(tv != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);  <span class="comment">/* arg count */</span></div>
<div class="line"><span class="lineno">  799</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e6da5a54e90086602a9d6f44997d640">DUK_TVAL_IS_OBJECT</a>(tv)) {</div>
<div class="line"><span class="lineno">  800</span>        h_obj = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a196d761c3a7789fcc2ac3cf61ad601">DUK_TVAL_GET_OBJECT</a>(tv);</div>
<div class="line"><span class="lineno">  801</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  802</span> </div>
<div class="line"><span class="lineno">  803</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#acde769ef46c9a27fec925b1345d342ae">DUK_HOBJECT_GET_CLASS_NUMBER</a>(h_obj) == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2f5f0b3d50debc94a7e26d59ae9c09b">DUK_HOBJECT_CLASS_ARRAYBUFFER</a>) {</div>
<div class="line"><span class="lineno">  804</span>            <span class="comment">/* ArrayBuffer: unlike any other argument variant, create</span></div>
<div class="line"><span class="lineno">  805</span><span class="comment">             * a view into the existing buffer.</span></div>
<div class="line"><span class="lineno">  806</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> byte_offset_signed;</div>
<div class="line"><span class="lineno">  809</span>            <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> byte_offset;</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>            h_bufarg = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) h_obj;</div>
<div class="line"><span class="lineno">  812</span> </div>
<div class="line"><span class="lineno">  813</span>            byte_offset_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 1);</div>
<div class="line"><span class="lineno">  814</span>            <span class="keywordflow">if</span> (byte_offset_signed &lt; 0) {</div>
<div class="line"><span class="lineno">  815</span>                <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  816</span>            }</div>
<div class="line"><span class="lineno">  817</span>            byte_offset = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) byte_offset_signed;</div>
<div class="line"><span class="lineno">  818</span>            <span class="keywordflow">if</span> (byte_offset &gt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> ||</div>
<div class="line"><span class="lineno">  819</span>                (byte_offset &amp; align_mask) != 0) {</div>
<div class="line"><span class="lineno">  820</span>                <span class="comment">/* Must be &gt;= 0 and multiple of element size. */</span></div>
<div class="line"><span class="lineno">  821</span>                <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  822</span>            }</div>
<div class="line"><span class="lineno">  823</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a10838caaff9e74b1e3904c78df71d53a">duk_is_undefined</a>(ctx, 2)) {</div>
<div class="line"><span class="lineno">  824</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;= byte_offset);</div>
<div class="line"><span class="lineno">  825</span>                byte_length = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> - byte_offset;</div>
<div class="line"><span class="lineno">  826</span>                <span class="keywordflow">if</span> ((byte_length &amp; align_mask) != 0) {</div>
<div class="line"><span class="lineno">  827</span>                    <span class="comment">/* Must be element size multiple from</span></div>
<div class="line"><span class="lineno">  828</span><span class="comment">                     * start offset to end of buffer.</span></div>
<div class="line"><span class="lineno">  829</span><span class="comment">                     */</span></div>
<div class="line"><span class="lineno">  830</span>                    <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  831</span>                }</div>
<div class="line"><span class="lineno">  832</span>                elem_length = (byte_length &gt;&gt; shift);</div>
<div class="line"><span class="lineno">  833</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  834</span>                elem_length_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 2);</div>
<div class="line"><span class="lineno">  835</span>                <span class="keywordflow">if</span> (elem_length_signed &lt; 0) {</div>
<div class="line"><span class="lineno">  836</span>                    <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  837</span>                }</div>
<div class="line"><span class="lineno">  838</span>                elem_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) elem_length_signed;</div>
<div class="line"><span class="lineno">  839</span>                byte_length = elem_length &lt;&lt; shift;</div>
<div class="line"><span class="lineno">  840</span>                <span class="keywordflow">if</span> ((byte_length &gt;&gt; shift) != elem_length) {</div>
<div class="line"><span class="lineno">  841</span>                    <span class="comment">/* Byte length would overflow. */</span></div>
<div class="line"><span class="lineno">  842</span>                    <span class="comment">/* XXX: easier check with less code? */</span></div>
<div class="line"><span class="lineno">  843</span>                    <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  844</span>                }</div>
<div class="line"><span class="lineno">  845</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;= byte_offset);</div>
<div class="line"><span class="lineno">  846</span>                <span class="keywordflow">if</span> (byte_length &gt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> - byte_offset) {</div>
<div class="line"><span class="lineno">  847</span>                    <span class="comment">/* Not enough data. */</span></div>
<div class="line"><span class="lineno">  848</span>                    <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  849</span>                }</div>
<div class="line"><span class="lineno">  850</span>            }</div>
<div class="line"><span class="lineno">  851</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(elem_length);</div>
<div class="line"><span class="lineno">  852</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(byte_offset &gt;= 0);</div>
<div class="line"><span class="lineno">  853</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(byte_offset &lt;= h_bufarg-&gt;length);</div>
<div class="line"><span class="lineno">  854</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5b32dd67a8481ffa404a403c0cfac2a6">DUK_ASSERT_DISABLE</a>(byte_length &gt;= 0);</div>
<div class="line"><span class="lineno">  855</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(byte_offset + byte_length &lt;= h_bufarg-&gt;length);</div>
<div class="line"><span class="lineno">  856</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((elem_length &lt;&lt; shift) == byte_length);</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>            h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno">  859</span>                                                 <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno">  860</span>                                                 <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno">  861</span>                                                 <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(class_num),</div>
<div class="line"><span class="lineno">  862</span>                                                 proto_bidx);</div>
<div class="line"><span class="lineno">  863</span>            h_val = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>;</div>
<div class="line"><span class="lineno">  864</span>            <span class="keywordflow">if</span> (h_val == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno">  865</span>                <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  866</span>            }</div>
<div class="line"><span class="lineno">  867</span>            h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> = h_val;</div>
<div class="line"><span class="lineno">  868</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a>(thr, h_val);</div>
<div class="line"><span class="lineno">  869</span>            h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> + byte_offset;</div>
<div class="line"><span class="lineno">  870</span>            h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> = byte_length;</div>
<div class="line"><span class="lineno">  871</span>            h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a> = (duk_uint8_t) shift;</div>
<div class="line"><span class="lineno">  872</span>            h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a> = (duk_uint8_t) elem_type;</div>
<div class="line"><span class="lineno">  873</span>            h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a8ab01102747ec3dbce0586a8f5c89b55">is_view</a> = 1;</div>
<div class="line"><span class="lineno">  874</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  875</span> </div>
<div class="line"><span class="lineno">  876</span>            <span class="comment">/* Set .buffer to the argument ArrayBuffer. */</span></div>
<div class="line"><span class="lineno">  877</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  878</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad56b7a318e093d42e552c2cf25d492e8">duk_xdef_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a159ef082bad3e3cef657631b0d22df77">DUK_STRIDX_LC_BUFFER</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a41e3f139e0538302108235e4f3db02d3">DUK_PROPDESC_FLAGS_NONE</a>);</div>
<div class="line"><span class="lineno">  879</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a3d9427123c2512d568fd64bbed8f7c">duk_compact</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  880</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  881</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(h_obj)) {</div>
<div class="line"><span class="lineno">  882</span>            <span class="comment">/* TypedArray (or other non-ArrayBuffer duk_hbufferobject).</span></div>
<div class="line"><span class="lineno">  883</span><span class="comment">             * Conceptually same behavior as for an Array-like argument,</span></div>
<div class="line"><span class="lineno">  884</span><span class="comment">             * with a few fast paths.</span></div>
<div class="line"><span class="lineno">  885</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>            h_bufarg = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) h_obj;</div>
<div class="line"><span class="lineno">  888</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufarg);</div>
<div class="line"><span class="lineno">  889</span>            elem_length_signed = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) (h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> &gt;&gt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>);</div>
<div class="line"><span class="lineno">  890</span>            <span class="keywordflow">if</span> (h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno">  891</span>                <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  892</span>            }</div>
<div class="line"><span class="lineno">  893</span> </div>
<div class="line"><span class="lineno">  894</span>            <span class="comment">/* Select copy mode.  Must take into account element</span></div>
<div class="line"><span class="lineno">  895</span><span class="comment">             * compatibility and validity of the underlying source</span></div>
<div class="line"><span class="lineno">  896</span><span class="comment">             * buffer.</span></div>
<div class="line"><span class="lineno">  897</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;selecting copy mode for bufobj arg, &quot;</span></div>
<div class="line"><span class="lineno">  900</span>                                 <span class="stringliteral">&quot;src byte_length=%ld, src shift=%d, &quot;</span></div>
<div class="line"><span class="lineno">  901</span>                                 <span class="stringliteral">&quot;src/dst elem_length=%ld; &quot;</span></div>
<div class="line"><span class="lineno">  902</span>                                 <span class="stringliteral">&quot;dst shift=%d -&gt; dst byte_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno">  903</span>                                 (<span class="keywordtype">long</span>) h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>, (<span class="keywordtype">int</span>) h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>,</div>
<div class="line"><span class="lineno">  904</span>                                 (<span class="keywordtype">long</span>) elem_length_signed, (<span class="keywordtype">int</span>) shift,</div>
<div class="line"><span class="lineno">  905</span>                                 (<span class="keywordtype">long</span>) (elem_length_signed &lt;&lt; shift)));</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>            copy_mode = 2;  <span class="comment">/* default is explicit index read/write copy */</span></div>
<div class="line"><span class="lineno">  908</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(elem_type &lt; <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#ac3c076de8ac3c96667d04e61230595ad">duk__buffer_elemtype_copy_compatible</a>) / <span class="keyword">sizeof</span>(duk_uint16_t));</div>
<div class="line"><span class="lineno">  909</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufarg)) {</div>
<div class="line"><span class="lineno">  910</span>                <span class="keywordflow">if</span> ((<a class="code hl_variable" href="#ac3c076de8ac3c96667d04e61230595ad">duk__buffer_elemtype_copy_compatible</a>[elem_type] &amp; (1 &lt;&lt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a>)) != 0) {</div>
<div class="line"><span class="lineno">  911</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;source/target are copy compatible, memcpy&quot;</span>));</div>
<div class="line"><span class="lineno">  912</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(shift == h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>);  <span class="comment">/* byte sizes will match */</span></div>
<div class="line"><span class="lineno">  913</span>                    copy_mode = 0;</div>
<div class="line"><span class="lineno">  914</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  915</span>                    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;source/target not copy compatible but valid, fast copy&quot;</span>));</div>
<div class="line"><span class="lineno">  916</span>                    copy_mode = 1;</div>
<div class="line"><span class="lineno">  917</span>                }</div>
<div class="line"><span class="lineno">  918</span>            }</div>
<div class="line"><span class="lineno">  919</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  920</span>            <span class="comment">/* Array or Array-like */</span></div>
<div class="line"><span class="lineno">  921</span>            elem_length_signed = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  922</span>            copy_mode = 2;</div>
<div class="line"><span class="lineno">  923</span>        }</div>
<div class="line"><span class="lineno">  924</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a35257e9c4c8cacc0bf42affe264e0da2">DUK_TVAL_IS_BUFFER</a>(tv)) {</div>
<div class="line"><span class="lineno">  925</span>        <span class="comment">/* Accept plain buffer values like array initializers</span></div>
<div class="line"><span class="lineno">  926</span><span class="comment">         * (new in Duktape 1.4.0).</span></div>
<div class="line"><span class="lineno">  927</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  928</span>        <a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *h_srcbuf;</div>
<div class="line"><span class="lineno">  929</span>        h_srcbuf = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a422dc96860bacd6ed951234bf2eb5ca1">DUK_TVAL_GET_BUFFER</a>(tv);</div>
<div class="line"><span class="lineno">  930</span>        elem_length_signed = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af69926b8cd52fd8f4379883fb74b8d40">DUK_HBUFFER_GET_SIZE</a>(h_srcbuf);</div>
<div class="line"><span class="lineno">  931</span>        copy_mode = 2;  <span class="comment">/* XXX: could add fast path for u8 compatible views */</span></div>
<div class="line"><span class="lineno">  932</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  933</span>        <span class="comment">/* Non-object argument is simply int coerced, matches</span></div>
<div class="line"><span class="lineno">  934</span><span class="comment">         * V8 behavior (except for &quot;null&quot;, which we coerce to</span></div>
<div class="line"><span class="lineno">  935</span><span class="comment">         * 0 but V8 TypeErrors).</span></div>
<div class="line"><span class="lineno">  936</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  937</span>        elem_length_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  938</span>        copy_mode = 3;</div>
<div class="line"><span class="lineno">  939</span>    }</div>
<div class="line"><span class="lineno">  940</span>    <span class="keywordflow">if</span> (elem_length_signed &lt; 0) {</div>
<div class="line"><span class="lineno">  941</span>        <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  942</span>    }</div>
<div class="line"><span class="lineno">  943</span>    elem_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) elem_length_signed;</div>
<div class="line"><span class="lineno">  944</span>    byte_length = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) (elem_length &lt;&lt; shift);</div>
<div class="line"><span class="lineno">  945</span>    <span class="keywordflow">if</span> ((byte_length &gt;&gt; shift) != elem_length) {</div>
<div class="line"><span class="lineno">  946</span>        <span class="comment">/* Byte length would overflow. */</span></div>
<div class="line"><span class="lineno">  947</span>        <span class="comment">/* XXX: easier check with less code? */</span></div>
<div class="line"><span class="lineno">  948</span>        <span class="keywordflow">goto</span> fail_arguments;</div>
<div class="line"><span class="lineno">  949</span>    }</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;elem_length=%ld, byte_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno">  952</span>                         (<span class="keywordtype">long</span>) elem_length, (<span class="keywordtype">long</span>) byte_length));</div>
<div class="line"><span class="lineno">  953</span> </div>
<div class="line"><span class="lineno">  954</span>    <span class="comment">/* ArrayBuffer argument is handled specially above; the rest of the</span></div>
<div class="line"><span class="lineno">  955</span><span class="comment">     * argument variants are handled by shared code below.</span></div>
<div class="line"><span class="lineno">  956</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span>    <span class="comment">/* Push a new ArrayBuffer (becomes view .buffer) */</span></div>
<div class="line"><span class="lineno">  959</span>    h_bufarr = <a class="code hl_function" href="#a28497a33da5217959aebc22602926df6">duk__push_arraybuffer_with_length</a>(ctx, byte_length);</div>
<div class="line"><span class="lineno">  960</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarr != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  961</span>    h_val = h_bufarr-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a>;</div>
<div class="line"><span class="lineno">  962</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_val != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno">  963</span> </div>
<div class="line"><span class="lineno">  964</span>    <span class="comment">/* Push the resulting view object and attach the ArrayBuffer. */</span></div>
<div class="line"><span class="lineno">  965</span>    h_bufobj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a96abfbcb4381b5e520bf087234184766">duk_push_bufferobject_raw</a>(ctx,</div>
<div class="line"><span class="lineno">  966</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab3861bb2fd293559d606a43da9dca18c">DUK_HOBJECT_FLAG_EXTENSIBLE</a> |</div>
<div class="line"><span class="lineno">  967</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a572f32346933291f0ccd575b73d89071">DUK_HOBJECT_FLAG_BUFFEROBJECT</a> |</div>
<div class="line"><span class="lineno">  968</span>                                         <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e79d13530031f2f54f993cd89668356">DUK_HOBJECT_CLASS_AS_FLAGS</a>(class_num),</div>
<div class="line"><span class="lineno">  969</span>                                         proto_bidx);</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> = h_val;</div>
<div class="line"><span class="lineno">  972</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a15db69f8efd0b06323f643fb8807ce94">DUK_HBUFFER_INCREF</a>(thr, h_val);</div>
<div class="line"><span class="lineno">  973</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a53eb36165e0fa60b0238d5426021cc32">offset</a> == 0);</div>
<div class="line"><span class="lineno">  974</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> = byte_length;</div>
<div class="line"><span class="lineno">  975</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a> = (duk_uint8_t) shift;</div>
<div class="line"><span class="lineno">  976</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a> = (duk_uint8_t) elem_type;</div>
<div class="line"><span class="lineno">  977</span>    h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a8ab01102747ec3dbce0586a8f5c89b55">is_view</a> = 1;</div>
<div class="line"><span class="lineno">  978</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufobj);</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>    <span class="comment">/* Set .buffer */</span></div>
<div class="line"><span class="lineno">  981</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8566105ab847d4151b62c29ceab53a0d">duk_dup</a>(ctx, -2);</div>
<div class="line"><span class="lineno">  982</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad56b7a318e093d42e552c2cf25d492e8">duk_xdef_prop_stridx</a>(ctx, -2, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a159ef082bad3e3cef657631b0d22df77">DUK_STRIDX_LC_BUFFER</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a41e3f139e0538302108235e4f3db02d3">DUK_PROPDESC_FLAGS_NONE</a>);</div>
<div class="line"><span class="lineno">  983</span>    <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2a3d9427123c2512d568fd64bbed8f7c">duk_compact</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span>    <span class="comment">/* Copy values, the copy method depends on the arguments.</span></div>
<div class="line"><span class="lineno">  986</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  987</span><span class="comment">     * Copy mode decision may depend on the validity of the underlying</span></div>
<div class="line"><span class="lineno">  988</span><span class="comment">     * buffer of the source argument; there must be no harmful side effects</span></div>
<div class="line"><span class="lineno">  989</span><span class="comment">     * from there to here for copy_mode to still be valid.</span></div>
<div class="line"><span class="lineno">  990</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  991</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;copy mode: %d&quot;</span>, (<span class="keywordtype">int</span>) copy_mode));</div>
<div class="line"><span class="lineno">  992</span>    <span class="keywordflow">switch</span> (copy_mode) {</div>
<div class="line"><span class="lineno">  993</span>    <span class="keywordflow">case</span> 0: {</div>
<div class="line"><span class="lineno">  994</span>        <span class="comment">/* Use byte copy. */</span></div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span>        duk_uint8_t *p_src;</div>
<div class="line"><span class="lineno">  997</span>        duk_uint8_t *p_dst;</div>
<div class="line"><span class="lineno">  998</span> </div>
<div class="line"><span class="lineno">  999</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1000</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1001</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufobj));</div>
<div class="line"><span class="lineno"> 1002</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1003</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1004</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufarg));</div>
<div class="line"><span class="lineno"> 1005</span> </div>
<div class="line"><span class="lineno"> 1006</span>        p_dst = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufobj);</div>
<div class="line"><span class="lineno"> 1007</span>        p_src = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufarg);</div>
<div class="line"><span class="lineno"> 1008</span> </div>
<div class="line"><span class="lineno"> 1009</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;using memcpy: p_src=%p, p_dst=%p, byte_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1010</span>                             (<span class="keywordtype">void</span> *) p_src, (<span class="keywordtype">void</span> *) p_dst, (<span class="keywordtype">long</span>) byte_length));</div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) p_dst, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) p_src, (<span class="keywordtype">size_t</span>) byte_length);</div>
<div class="line"><span class="lineno"> 1013</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1014</span>    }</div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keywordflow">case</span> 1: {</div>
<div class="line"><span class="lineno"> 1016</span>        <span class="comment">/* Copy values through direct validated reads and writes. */</span></div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> src_elem_size;</div>
<div class="line"><span class="lineno"> 1019</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> dst_elem_size;</div>
<div class="line"><span class="lineno"> 1020</span>        duk_uint8_t *p_src;</div>
<div class="line"><span class="lineno"> 1021</span>        duk_uint8_t *p_src_end;</div>
<div class="line"><span class="lineno"> 1022</span>        duk_uint8_t *p_dst;</div>
<div class="line"><span class="lineno"> 1023</span> </div>
<div class="line"><span class="lineno"> 1024</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1025</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1026</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufobj));</div>
<div class="line"><span class="lineno"> 1027</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1028</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1029</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufarg));</div>
<div class="line"><span class="lineno"> 1030</span> </div>
<div class="line"><span class="lineno"> 1031</span>        src_elem_size = 1 &lt;&lt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 1032</span>        dst_elem_size = elem_size;</div>
<div class="line"><span class="lineno"> 1033</span> </div>
<div class="line"><span class="lineno"> 1034</span>        p_src = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufarg);</div>
<div class="line"><span class="lineno"> 1035</span>        p_dst = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufobj);</div>
<div class="line"><span class="lineno"> 1036</span>        p_src_end = p_src + h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;using fast copy: p_src=%p, p_src_end=%p, p_dst=%p, &quot;</span></div>
<div class="line"><span class="lineno"> 1039</span>                             <span class="stringliteral">&quot;src_elem_size=%d, dst_elem_size=%d&quot;</span>,</div>
<div class="line"><span class="lineno"> 1040</span>                             (<span class="keywordtype">void</span> *) p_src, (<span class="keywordtype">void</span> *) p_src_end, (<span class="keywordtype">void</span> *) p_dst,</div>
<div class="line"><span class="lineno"> 1041</span>                             (<span class="keywordtype">int</span>) src_elem_size, (<span class="keywordtype">int</span>) dst_elem_size));</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>        <span class="keywordflow">while</span> (p_src != p_src_end) {</div>
<div class="line"><span class="lineno"> 1044</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;fast path per element copy loop: &quot;</span></div>
<div class="line"><span class="lineno"> 1045</span>                                 <span class="stringliteral">&quot;p_src=%p, p_src_end=%p, p_dst=%p&quot;</span>,</div>
<div class="line"><span class="lineno"> 1046</span>                                 (<span class="keywordtype">void</span> *) p_src, (<span class="keywordtype">void</span> *) p_src_end, (<span class="keywordtype">void</span> *) p_dst));</div>
<div class="line"><span class="lineno"> 1047</span>            <span class="comment">/* A validated read() is always a number, so it&#39;s write coercion</span></div>
<div class="line"><span class="lineno"> 1048</span><span class="comment">             * is always side effect free an won&#39;t invalidate pointers etc.</span></div>
<div class="line"><span class="lineno"> 1049</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1050</span>            <a class="code hl_function" href="#a02c9a7adb2cc34d1aa73bfe7654ccd87">duk_hbufferobject_push_validated_read</a>(ctx, h_bufarg, p_src, src_elem_size);</div>
<div class="line"><span class="lineno"> 1051</span>            <a class="code hl_function" href="#a1472e966ace67a5533431d7e197898ed">duk_hbufferobject_validated_write</a>(ctx, h_bufobj, p_dst, dst_elem_size);</div>
<div class="line"><span class="lineno"> 1052</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 1053</span>            p_src += src_elem_size;</div>
<div class="line"><span class="lineno"> 1054</span>            p_dst += dst_elem_size;</div>
<div class="line"><span class="lineno"> 1055</span>        }</div>
<div class="line"><span class="lineno"> 1056</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1057</span>    }</div>
<div class="line"><span class="lineno"> 1058</span>    <span class="keywordflow">case</span> 2: {</div>
<div class="line"><span class="lineno"> 1059</span>        <span class="comment">/* Copy values by index reads and writes.  Let virtual</span></div>
<div class="line"><span class="lineno"> 1060</span><span class="comment">         * property handling take care of coercion.</span></div>
<div class="line"><span class="lineno"> 1061</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1062</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> i;</div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;using slow copy&quot;</span>));</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>        <span class="keywordflow">for</span> (i = 0; i &lt; elem_length; i++) {</div>
<div class="line"><span class="lineno"> 1067</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 0, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) i);</div>
<div class="line"><span class="lineno"> 1068</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, -2, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) i);</div>
<div class="line"><span class="lineno"> 1069</span>        }</div>
<div class="line"><span class="lineno"> 1070</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1071</span>    }</div>
<div class="line"><span class="lineno"> 1072</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1073</span>    <span class="keywordflow">case</span> 3: {</div>
<div class="line"><span class="lineno"> 1074</span>        <span class="comment">/* No copy, leave zero bytes in the buffer.  There&#39;s no</span></div>
<div class="line"><span class="lineno"> 1075</span><span class="comment">         * ambiguity with Float32/Float64 because zero bytes also</span></div>
<div class="line"><span class="lineno"> 1076</span><span class="comment">         * represent 0.0.</span></div>
<div class="line"><span class="lineno"> 1077</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1078</span><span class="preprocessor">#if !defined(DUK_USE_ZERO_BUFFER_DATA)</span></div>
<div class="line"><span class="lineno"> 1079</span>        <span class="comment">/* Khronos/ES6 requires zeroing even when DUK_USE_ZERO_BUFFER_DATA</span></div>
<div class="line"><span class="lineno"> 1080</span><span class="comment">         * is not set.</span></div>
<div class="line"><span class="lineno"> 1081</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1082</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae2b937e7c05c2ec0f0f16352c69cdd82">DUK_HBUFFER_HAS_DYNAMIC</a>((<a class="code hl_struct" href="structduk__hbuffer.html">duk_hbuffer</a> *) h_val));</div>
<div class="line"><span class="lineno"> 1083</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a>((<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9ca3aa8b48e03765e99162448f7a664a">DUK_HBUFFER_FIXED_GET_DATA_PTR</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_val), (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) byte_length);</div>
<div class="line"><span class="lineno"> 1084</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;using no copy&quot;</span>));</div>
<div class="line"><span class="lineno"> 1087</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1088</span>    }</div>
<div class="line"><span class="lineno"> 1089</span>    }</div>
<div class="line"><span class="lineno"> 1090</span> </div>
<div class="line"><span class="lineno"> 1091</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span> fail_arguments:</div>
<div class="line"><span class="lineno"> 1094</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1095</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aca6eebaa5d3f54c9809d6d3c6696c122"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aca6eebaa5d3f54c9809d6d3c6696c122">DUK_NUM_BUILTINS</a></div><div class="ttdeci">#define DUK_NUM_BUILTINS</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01700">duktape-1.5.2/src-noline/duktape.c:1700</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a02c9a7adb2cc34d1aa73bfe7654ccd87"><div class="ttname"><a href="#a02c9a7adb2cc34d1aa73bfe7654ccd87">duk_hbufferobject_push_validated_read</a></div><div class="ttdeci">DUK_INTERNAL void duk_hbufferobject_push_validated_read(duk_context *ctx, duk_hbufferobject *h_bufobj, duk_uint8_t *p, duk_small_uint_t elem_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00394">duktape-1.8.0/src-separate/duk_bi_buffer.c:394</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a1472e966ace67a5533431d7e197898ed"><div class="ttname"><a href="#a1472e966ace67a5533431d7e197898ed">duk_hbufferobject_validated_write</a></div><div class="ttdeci">DUK_INTERNAL void duk_hbufferobject_validated_write(duk_context *ctx, duk_hbufferobject *h_bufobj, duk_uint8_t *p, duk_small_uint_t elem_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00435">duktape-1.8.0/src-separate/duk_bi_buffer.c:435</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a28497a33da5217959aebc22602926df6"><div class="ttname"><a href="#a28497a33da5217959aebc22602926df6">duk__push_arraybuffer_with_length</a></div><div class="ttdeci">DUK_LOCAL duk_hbufferobject * duk__push_arraybuffer_with_length(duk_context *ctx, duk_uint_t len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00200">duktape-1.8.0/src-separate/duk_bi_buffer.c:200</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a36d0e74f91871c4baeb1957d55eb044f"><div class="ttname"><a href="#a36d0e74f91871c4baeb1957d55eb044f">duk__buffer_class_from_elemtype</a></div><div class="ttdeci">static const duk_uint8_t duk__buffer_class_from_elemtype[9]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00015">duktape-1.8.0/src-separate/duk_bi_buffer.c:15</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_a768a8fb484ad2db508114924900d9450"><div class="ttname"><a href="#a768a8fb484ad2db508114924900d9450">duk__buffer_proto_from_elemtype</a></div><div class="ttdeci">static const duk_uint8_t duk__buffer_proto_from_elemtype[9]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00032">duktape-1.8.0/src-separate/duk_bi_buffer.c:32</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__bi__buffer_8c_html_ac3c076de8ac3c96667d04e61230595ad"><div class="ttname"><a href="#ac3c076de8ac3c96667d04e61230595ad">duk__buffer_elemtype_copy_compatible</a></div><div class="ttdeci">static duk_uint16_t duk__buffer_elemtype_copy_compatible[9]</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00065">duktape-1.8.0/src-separate/duk_bi_buffer.c:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00015">duk__buffer_class_from_elemtype</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00065">duk__buffer_elemtype_copy_compatible</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00032">duk__buffer_proto_from_elemtype</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00200">duk__push_arraybuffer_with_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07764">DUK_ASSERT_DISABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14704">duk_compact()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15702">duk_dup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12817">duk_get_current_magic()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16575">duk_get_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duk_get_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15121">duk_get_tval()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06416">DUK_HBUFFER_FIXED_GET_DATA_PTR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06393">DUK_HBUFFER_GET_SIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06342">DUK_HBUFFER_HAS_DYNAMIC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03824">DUK_HBUFFER_INCREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00394">duk_hbufferobject_push_validated_read()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05872">DUK_HBUFFEROBJECT_VALID_SLICE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00435">duk_hbufferobject_validated_write()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04710">DUK_HOBJECT_CLASS_ARRAYBUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04688">DUK_HOBJECT_CLASS_AS_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04657">DUK_HOBJECT_FLAG_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04652">DUK_HOBJECT_FLAG_EXTENSIBLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04675">DUK_HOBJECT_GET_CLASS_NUMBER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l12775">duk_is_constructor_call()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17600">duk_is_undefined()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">DUK_MEMZERO</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01700">DUK_NUM_BUILTINS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04880">DUK_PROPDESC_FLAGS_NONE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18735">duk_push_bufferobject_raw()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14396">duk_put_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">DUK_RET_RANGE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01167">DUK_STRIDX_LC_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00788">DUK_TVAL_GET_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00787">DUK_TVAL_GET_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00812">DUK_TVAL_IS_BUFFER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l00811">DUK_TVAL_IS_OBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14559">duk_xdef_prop_stridx()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05930">duk_hbufferobject::is_view</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05921">duk_hbufferobject::offset</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

</div>
</div>
<a id="a72e9349ede4614a30410744c5457f722" name="a72e9349ede4614a30410744c5457f722"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72e9349ede4614a30410744c5457f722">&#9670;&#160;</a></span>duk_bi_typedarray_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3cd45ada834d9a7fcfcaf2d654435c6c">duk_ret_t</a> duk_bi_typedarray_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01698">1698</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1698</span>                                                               {</div>
<div class="line"><span class="lineno"> 1699</span>    <a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *thr;</div>
<div class="line"><span class="lineno"> 1700</span>    <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_this;</div>
<div class="line"><span class="lineno"> 1701</span>    <a class="code hl_struct" href="structduk__hobject.html">duk_hobject</a> *h_obj;</div>
<div class="line"><span class="lineno"> 1702</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a> i, n;</div>
<div class="line"><span class="lineno"> 1703</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> offset_signed;</div>
<div class="line"><span class="lineno"> 1704</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> offset_elems;</div>
<div class="line"><span class="lineno"> 1705</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> offset_bytes;</div>
<div class="line"><span class="lineno"> 1706</span> </div>
<div class="line"><span class="lineno"> 1707</span>    thr = (<a class="code hl_struct" href="structduk__hthread.html">duk_hthread</a> *) ctx;</div>
<div class="line"><span class="lineno"> 1708</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(thr);</div>
<div class="line"><span class="lineno"> 1709</span> </div>
<div class="line"><span class="lineno"> 1710</span>    h_this = <a class="code hl_function" href="#aed6be9238d2f5c5a423f041174ef5580">duk__require_bufobj_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1711</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1712</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_this);</div>
<div class="line"><span class="lineno"> 1713</span> </div>
<div class="line"><span class="lineno"> 1714</span>    <span class="keywordflow">if</span> (h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 1715</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;source neutered, skip copy&quot;</span>));</div>
<div class="line"><span class="lineno"> 1716</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1717</span>    }</div>
<div class="line"><span class="lineno"> 1718</span> </div>
<div class="line"><span class="lineno"> 1719</span>    h_obj = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a11bee89b8ec58fdddc9de03af4475bdc">duk_require_hobject</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1720</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_obj != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1721</span> </div>
<div class="line"><span class="lineno"> 1722</span>    <span class="comment">/* XXX: V8 throws a TypeError for negative values.  Would it</span></div>
<div class="line"><span class="lineno"> 1723</span><span class="comment">     * be more useful to interpret negative offsets here from the</span></div>
<div class="line"><span class="lineno"> 1724</span><span class="comment">     * end of the buffer too?</span></div>
<div class="line"><span class="lineno"> 1725</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1726</span>    offset_signed = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af160d8202dc25eefbc1b56aa2fc95632">duk_to_int</a>(ctx, 1);</div>
<div class="line"><span class="lineno"> 1727</span>    <span class="keywordflow">if</span> (offset_signed &lt; 0) {</div>
<div class="line"><span class="lineno"> 1728</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a56f85f8e2627dbcfa5575c3b57ad652b">DUK_RET_TYPE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1729</span>    }</div>
<div class="line"><span class="lineno"> 1730</span>    offset_elems = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) offset_signed;</div>
<div class="line"><span class="lineno"> 1731</span>    offset_bytes = offset_elems &lt;&lt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 1732</span>    <span class="keywordflow">if</span> ((offset_bytes &gt;&gt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>) != offset_elems) {</div>
<div class="line"><span class="lineno"> 1733</span>        <span class="comment">/* Byte length would overflow. */</span></div>
<div class="line"><span class="lineno"> 1734</span>        <span class="comment">/* XXX: easier check with less code? */</span></div>
<div class="line"><span class="lineno"> 1735</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1736</span>    }</div>
<div class="line"><span class="lineno"> 1737</span>    <span class="keywordflow">if</span> (offset_bytes &gt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>) {</div>
<div class="line"><span class="lineno"> 1738</span>        <span class="comment">/* Equality may be OK but &gt;length not.  Checking</span></div>
<div class="line"><span class="lineno"> 1739</span><span class="comment">         * this explicitly avoids some overflow cases</span></div>
<div class="line"><span class="lineno"> 1740</span><span class="comment">         * below.</span></div>
<div class="line"><span class="lineno"> 1741</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1742</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1743</span>    }</div>
<div class="line"><span class="lineno"> 1744</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset_bytes &lt;= h_this-&gt;length);</div>
<div class="line"><span class="lineno"> 1745</span> </div>
<div class="line"><span class="lineno"> 1746</span>    <span class="comment">/* Fast path: source is a TypedArray (or any bufferobject). */</span></div>
<div class="line"><span class="lineno"> 1747</span> </div>
<div class="line"><span class="lineno"> 1748</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7f4ff3d6f73d0aa5f0eee7b7544f49fd">DUK_HOBJECT_IS_BUFFEROBJECT</a>(h_obj)) {</div>
<div class="line"><span class="lineno"> 1749</span>        <a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *h_bufarg;</div>
<div class="line"><span class="lineno"> 1750</span>        duk_uint16_t comp_mask;</div>
<div class="line"><span class="lineno"> 1751</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a041e9b0b2d41c5af8429259808290726">duk_small_int_t</a> no_overlap = 0;</div>
<div class="line"><span class="lineno"> 1752</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> src_length;</div>
<div class="line"><span class="lineno"> 1753</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> dst_length;</div>
<div class="line"><span class="lineno"> 1754</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a> dst_length_elems;</div>
<div class="line"><span class="lineno"> 1755</span>        duk_uint8_t *p_src_base;</div>
<div class="line"><span class="lineno"> 1756</span>        duk_uint8_t *p_src_end;</div>
<div class="line"><span class="lineno"> 1757</span>        duk_uint8_t *p_src;</div>
<div class="line"><span class="lineno"> 1758</span>        duk_uint8_t *p_dst_base;</div>
<div class="line"><span class="lineno"> 1759</span>        duk_uint8_t *p_dst;</div>
<div class="line"><span class="lineno"> 1760</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> src_elem_size;</div>
<div class="line"><span class="lineno"> 1761</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> dst_elem_size;</div>
<div class="line"><span class="lineno"> 1762</span> </div>
<div class="line"><span class="lineno"> 1763</span>        h_bufarg = (<a class="code hl_struct" href="structduk__hbufferobject.html">duk_hbufferobject</a> *) h_obj;</div>
<div class="line"><span class="lineno"> 1764</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a55b936422ab7344b888bbe0478e83aee">DUK_ASSERT_HBUFFEROBJECT_VALID</a>(h_bufarg);</div>
<div class="line"><span class="lineno"> 1765</span> </div>
<div class="line"><span class="lineno"> 1766</span>        <span class="keywordflow">if</span> (h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#a048ef6abd4eb20f28dacd8c361bad4f0">buf</a> == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno"> 1767</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;target neutered, skip copy&quot;</span>));</div>
<div class="line"><span class="lineno"> 1768</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1769</span>        }</div>
<div class="line"><span class="lineno"> 1770</span> </div>
<div class="line"><span class="lineno"> 1771</span>        <span class="comment">/* Nominal size check. */</span></div>
<div class="line"><span class="lineno"> 1772</span>        src_length = h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a>;  <span class="comment">/* bytes in source */</span></div>
<div class="line"><span class="lineno"> 1773</span>        dst_length_elems = (src_length &gt;&gt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>);  <span class="comment">/* elems in source and dest */</span></div>
<div class="line"><span class="lineno"> 1774</span>        dst_length = dst_length_elems &lt;&lt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;  <span class="comment">/* bytes in dest */</span></div>
<div class="line"><span class="lineno"> 1775</span>        <span class="keywordflow">if</span> ((dst_length &gt;&gt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>) != dst_length_elems) {</div>
<div class="line"><span class="lineno"> 1776</span>            <span class="comment">/* Byte length would overflow. */</span></div>
<div class="line"><span class="lineno"> 1777</span>            <span class="comment">/* XXX: easier check with less code? */</span></div>
<div class="line"><span class="lineno"> 1778</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1779</span>        }</div>
<div class="line"><span class="lineno"> 1780</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;nominal size check: src_length=%ld, dst_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1781</span>                             (<span class="keywordtype">long</span>) src_length, (<span class="keywordtype">long</span>) dst_length));</div>
<div class="line"><span class="lineno"> 1782</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset_bytes &lt;= h_this-&gt;length);</div>
<div class="line"><span class="lineno"> 1783</span>        <span class="keywordflow">if</span> (dst_length &gt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> - offset_bytes) {</div>
<div class="line"><span class="lineno"> 1784</span>            <span class="comment">/* Overflow not an issue because subtraction is used on the right</span></div>
<div class="line"><span class="lineno"> 1785</span><span class="comment">             * side and guaranteed to be &gt;= 0.</span></div>
<div class="line"><span class="lineno"> 1786</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1787</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;copy exceeds target buffer nominal length&quot;</span>));</div>
<div class="line"><span class="lineno"> 1788</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1789</span>        }</div>
<div class="line"><span class="lineno"> 1790</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a32ae6fee09b79acb415e7cdfdf47b719">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>(h_this, offset_bytes + dst_length)) {</div>
<div class="line"><span class="lineno"> 1791</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;copy not covered by underlying target buffer, ignore&quot;</span>));</div>
<div class="line"><span class="lineno"> 1792</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1793</span>        }</div>
<div class="line"><span class="lineno"> 1794</span> </div>
<div class="line"><span class="lineno"> 1795</span>        p_src_base = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_bufarg);</div>
<div class="line"><span class="lineno"> 1796</span>        p_dst_base = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f05c66e6d8a8527c4a0fc4143e324">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, h_this) + offset_bytes;</div>
<div class="line"><span class="lineno"> 1797</span> </div>
<div class="line"><span class="lineno"> 1798</span>        <span class="comment">/* Check actual underlying buffers for validity and that they</span></div>
<div class="line"><span class="lineno"> 1799</span><span class="comment">         * cover the copy.  No side effects are allowed after the check</span></div>
<div class="line"><span class="lineno"> 1800</span><span class="comment">         * so that the validity status doesn&#39;t change.</span></div>
<div class="line"><span class="lineno"> 1801</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1802</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_this) ||</div>
<div class="line"><span class="lineno"> 1803</span>            !<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a472e7ad35428d895f471b4db51613a42">DUK_HBUFFEROBJECT_VALID_SLICE</a>(h_bufarg)) {</div>
<div class="line"><span class="lineno"> 1804</span>            <span class="comment">/* The condition could be more narrow and check for the</span></div>
<div class="line"><span class="lineno"> 1805</span><span class="comment">             * copy area only, but there&#39;s no need for fine grained</span></div>
<div class="line"><span class="lineno"> 1806</span><span class="comment">             * behavior when the underlying buffer is misconfigured.</span></div>
<div class="line"><span class="lineno"> 1807</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1808</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;source and/or target not covered by underlying buffer, skip copy&quot;</span>));</div>
<div class="line"><span class="lineno"> 1809</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1810</span>        }</div>
<div class="line"><span class="lineno"> 1811</span> </div>
<div class="line"><span class="lineno"> 1812</span>        <span class="comment">/* We want to do a straight memory copy if possible: this is</span></div>
<div class="line"><span class="lineno"> 1813</span><span class="comment">         * an important operation because .set() is the TypedArray</span></div>
<div class="line"><span class="lineno"> 1814</span><span class="comment">         * way to copy chunks of memory.  However, because set()</span></div>
<div class="line"><span class="lineno"> 1815</span><span class="comment">         * conceptually works in terms of elements, not all views are</span></div>
<div class="line"><span class="lineno"> 1816</span><span class="comment">         * compatible with direct byte copying.</span></div>
<div class="line"><span class="lineno"> 1817</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 1818</span><span class="comment">         * If we do manage a direct copy, the &quot;overlap issue&quot; handled</span></div>
<div class="line"><span class="lineno"> 1819</span><span class="comment">         * below can just be solved using memmove() because the source</span></div>
<div class="line"><span class="lineno"> 1820</span><span class="comment">         * and destination element sizes are necessarily equal.</span></div>
<div class="line"><span class="lineno"> 1821</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1822</span> </div>
<div class="line"><span class="lineno"> 1823</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a> &lt; <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#ac3c076de8ac3c96667d04e61230595ad">duk__buffer_elemtype_copy_compatible</a>) / <span class="keyword">sizeof</span>(duk_uint16_t));</div>
<div class="line"><span class="lineno"> 1824</span>        comp_mask = <a class="code hl_variable" href="#ac3c076de8ac3c96667d04e61230595ad">duk__buffer_elemtype_copy_compatible</a>[h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a>];</div>
<div class="line"><span class="lineno"> 1825</span>        <span class="keywordflow">if</span> (comp_mask &amp; (1 &lt;&lt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a>)) {</div>
<div class="line"><span class="lineno"> 1826</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(src_length == dst_length);</div>
<div class="line"><span class="lineno"> 1827</span> </div>
<div class="line"><span class="lineno"> 1828</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;fast path: able to use memmove() because views are compatible&quot;</span>));</div>
<div class="line"><span class="lineno"> 1829</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a09ab8a505a526bb93f8b2dda6167c7f1">DUK_MEMMOVE</a>((<span class="keywordtype">void</span> *) p_dst_base, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) p_src_base, (<span class="keywordtype">size_t</span>) dst_length);</div>
<div class="line"><span class="lineno"> 1830</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1831</span>        }</div>
<div class="line"><span class="lineno"> 1832</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;fast path: views are not compatible with a byte copy, copy by item&quot;</span>));</div>
<div class="line"><span class="lineno"> 1833</span> </div>
<div class="line"><span class="lineno"> 1834</span>        <span class="comment">/* We want to avoid making a copy to process set() but that&#39;s</span></div>
<div class="line"><span class="lineno"> 1835</span><span class="comment">         * not always possible: the source and the target may overlap</span></div>
<div class="line"><span class="lineno"> 1836</span><span class="comment">         * and because element sizes are different, the overlap cannot</span></div>
<div class="line"><span class="lineno"> 1837</span><span class="comment">         * always be handled with a memmove() or choosing the copy</span></div>
<div class="line"><span class="lineno"> 1838</span><span class="comment">         * direction in a certain way.  For example, if source type is</span></div>
<div class="line"><span class="lineno"> 1839</span><span class="comment">         * uint8 and target type is uint32, the target area may exceed</span></div>
<div class="line"><span class="lineno"> 1840</span><span class="comment">         * the source area from both ends!</span></div>
<div class="line"><span class="lineno"> 1841</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 1842</span><span class="comment">         * Note that because external buffers may point to the same</span></div>
<div class="line"><span class="lineno"> 1843</span><span class="comment">         * memory areas, we must ultimately make this check using</span></div>
<div class="line"><span class="lineno"> 1844</span><span class="comment">         * pointers.</span></div>
<div class="line"><span class="lineno"> 1845</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 1846</span><span class="comment">         * NOTE: careful with side effects: any side effect may cause</span></div>
<div class="line"><span class="lineno"> 1847</span><span class="comment">         * a buffer resize (or external buffer pointer/length update)!</span></div>
<div class="line"><span class="lineno"> 1848</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1849</span> </div>
<div class="line"><span class="lineno"> 1850</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;overlap check: p_src_base=%p, src_length=%ld, &quot;</span></div>
<div class="line"><span class="lineno"> 1851</span>                             <span class="stringliteral">&quot;p_dst_base=%p, dst_length=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1852</span>                             (<span class="keywordtype">void</span> *) p_src_base, (<span class="keywordtype">long</span>) src_length,</div>
<div class="line"><span class="lineno"> 1853</span>                             (<span class="keywordtype">void</span> *) p_dst_base, (<span class="keywordtype">long</span>) dst_length));</div>
<div class="line"><span class="lineno"> 1854</span> </div>
<div class="line"><span class="lineno"> 1855</span>        <span class="keywordflow">if</span> (p_src_base &gt;= p_dst_base + dst_length ||  <span class="comment">/* source starts after dest ends */</span></div>
<div class="line"><span class="lineno"> 1856</span>            p_src_base + src_length &lt;= p_dst_base) {   <span class="comment">/* source ends before dest starts */</span></div>
<div class="line"><span class="lineno"> 1857</span>            no_overlap = 1;</div>
<div class="line"><span class="lineno"> 1858</span>        }</div>
<div class="line"><span class="lineno"> 1859</span> </div>
<div class="line"><span class="lineno"> 1860</span>        <span class="keywordflow">if</span> (!no_overlap) {</div>
<div class="line"><span class="lineno"> 1861</span>            <span class="comment">/* There&#39;s overlap: the desired end result is that</span></div>
<div class="line"><span class="lineno"> 1862</span><span class="comment">             * conceptually a copy is made to avoid &quot;trampling&quot;</span></div>
<div class="line"><span class="lineno"> 1863</span><span class="comment">             * of source data by destination writes.  We make</span></div>
<div class="line"><span class="lineno"> 1864</span><span class="comment">             * an actual temporary copy to handle this case.</span></div>
<div class="line"><span class="lineno"> 1865</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1866</span>            duk_uint8_t *p_src_copy;</div>
<div class="line"><span class="lineno"> 1867</span> </div>
<div class="line"><span class="lineno"> 1868</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;there is overlap, make a copy of the source&quot;</span>));</div>
<div class="line"><span class="lineno"> 1869</span>            p_src_copy = (duk_uint8_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a3424cb2e60649186c8c195c2e114124d">duk_push_fixed_buffer</a>(ctx, src_length);</div>
<div class="line"><span class="lineno"> 1870</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(p_src_copy != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1871</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) p_src_copy, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) p_src_base, (<span class="keywordtype">size_t</span>) src_length);</div>
<div class="line"><span class="lineno"> 1872</span> </div>
<div class="line"><span class="lineno"> 1873</span>            p_src_base = p_src_copy;  <span class="comment">/* use p_src_base from now on */</span></div>
<div class="line"><span class="lineno"> 1874</span>        }</div>
<div class="line"><span class="lineno"> 1875</span>        <span class="comment">/* Value stack intentionally mixed size here. */</span></div>
<div class="line"><span class="lineno"> 1876</span> </div>
<div class="line"><span class="lineno"> 1877</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;after overlap check: p_src_base=%p, src_length=%ld, &quot;</span></div>
<div class="line"><span class="lineno"> 1878</span>                             <span class="stringliteral">&quot;p_dst_base=%p, dst_length=%ld, valstack top=%ld&quot;</span>,</div>
<div class="line"><span class="lineno"> 1879</span>                             (<span class="keywordtype">void</span> *) p_src_base, (<span class="keywordtype">long</span>) src_length,</div>
<div class="line"><span class="lineno"> 1880</span>                             (<span class="keywordtype">void</span> *) p_dst_base, (<span class="keywordtype">long</span>) dst_length,</div>
<div class="line"><span class="lineno"> 1881</span>                             (<span class="keywordtype">long</span>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c8653fcd951809042c23c42e534c421">duk_get_top</a>(ctx)));</div>
<div class="line"><span class="lineno"> 1882</span> </div>
<div class="line"><span class="lineno"> 1883</span>        <span class="comment">/* Ready to make the copy.  We must proceed element by element</span></div>
<div class="line"><span class="lineno"> 1884</span><span class="comment">         * and must avoid any side effects that might cause the buffer</span></div>
<div class="line"><span class="lineno"> 1885</span><span class="comment">         * validity check above to become invalid.</span></div>
<div class="line"><span class="lineno"> 1886</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 1887</span><span class="comment">         * Although we work through the value stack here, only plain</span></div>
<div class="line"><span class="lineno"> 1888</span><span class="comment">         * numbers are handled which should be side effect safe.</span></div>
<div class="line"><span class="lineno"> 1889</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1890</span> </div>
<div class="line"><span class="lineno"> 1891</span>        src_elem_size = 1 &lt;&lt; h_bufarg-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 1892</span>        dst_elem_size = 1 &lt;&lt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>;</div>
<div class="line"><span class="lineno"> 1893</span>        p_src = p_src_base;</div>
<div class="line"><span class="lineno"> 1894</span>        p_dst = p_dst_base;</div>
<div class="line"><span class="lineno"> 1895</span>        p_src_end = p_src_base + src_length;</div>
<div class="line"><span class="lineno"> 1896</span> </div>
<div class="line"><span class="lineno"> 1897</span>        <span class="keywordflow">while</span> (p_src != p_src_end) {</div>
<div class="line"><span class="lineno"> 1898</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;fast path per element copy loop: &quot;</span></div>
<div class="line"><span class="lineno"> 1899</span>                                 <span class="stringliteral">&quot;p_src=%p, p_src_end=%p, p_dst=%p&quot;</span>,</div>
<div class="line"><span class="lineno"> 1900</span>                                 (<span class="keywordtype">void</span> *) p_src, (<span class="keywordtype">void</span> *) p_src_end, (<span class="keywordtype">void</span> *) p_dst));</div>
<div class="line"><span class="lineno"> 1901</span>            <span class="comment">/* A validated read() is always a number, so it&#39;s write coercion</span></div>
<div class="line"><span class="lineno"> 1902</span><span class="comment">             * is always side effect free an won&#39;t invalidate pointers etc.</span></div>
<div class="line"><span class="lineno"> 1903</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1904</span>            <a class="code hl_function" href="#a02c9a7adb2cc34d1aa73bfe7654ccd87">duk_hbufferobject_push_validated_read</a>(ctx, h_bufarg, p_src, src_elem_size);</div>
<div class="line"><span class="lineno"> 1905</span>            <a class="code hl_function" href="#a1472e966ace67a5533431d7e197898ed">duk_hbufferobject_validated_write</a>(ctx, h_this, p_dst, dst_elem_size);</div>
<div class="line"><span class="lineno"> 1906</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac8da334e24a5f42f252271161d2116fb">duk_pop</a>(ctx);</div>
<div class="line"><span class="lineno"> 1907</span>            p_src += src_elem_size;</div>
<div class="line"><span class="lineno"> 1908</span>            p_dst += dst_elem_size;</div>
<div class="line"><span class="lineno"> 1909</span>        }</div>
<div class="line"><span class="lineno"> 1910</span> </div>
<div class="line"><span class="lineno"> 1911</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1912</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1913</span>        <span class="comment">/* Slow path: quite slow, but we save space by using the property code</span></div>
<div class="line"><span class="lineno"> 1914</span><span class="comment">         * to write coerce target values.  We don&#39;t need to worry about overlap</span></div>
<div class="line"><span class="lineno"> 1915</span><span class="comment">         * here because the source is not a TypedArray.</span></div>
<div class="line"><span class="lineno"> 1916</span><span class="comment">         *</span></div>
<div class="line"><span class="lineno"> 1917</span><span class="comment">         * We could use the bufferobject write coercion helper but since the</span></div>
<div class="line"><span class="lineno"> 1918</span><span class="comment">         * property read may have arbitrary side effects, full validity checks</span></div>
<div class="line"><span class="lineno"> 1919</span><span class="comment">         * would be needed for every element anyway.</span></div>
<div class="line"><span class="lineno"> 1920</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1921</span> </div>
<div class="line"><span class="lineno"> 1922</span>        n = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3ed5f27e2216e110734e3bbe7c91d00c">duk_get_length</a>(ctx, 0);</div>
<div class="line"><span class="lineno"> 1923</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(offset_bytes &lt;= h_this-&gt;length);</div>
<div class="line"><span class="lineno"> 1924</span>        <span class="keywordflow">if</span> ((n &lt;&lt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aefc78592db50bd2f5b23ac2b9ec87d25">shift</a>) &gt; h_this-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#aaa3fd592a16d517b22eedefbaec1b71e">length</a> - offset_bytes) {</div>
<div class="line"><span class="lineno"> 1925</span>            <span class="comment">/* Overflow not an issue because subtraction is used on the right</span></div>
<div class="line"><span class="lineno"> 1926</span><span class="comment">             * side and guaranteed to be &gt;= 0.</span></div>
<div class="line"><span class="lineno"> 1927</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno"> 1928</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;copy exceeds target buffer nominal length&quot;</span>));</div>
<div class="line"><span class="lineno"> 1929</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8h.html#a7546a68bcdfde55cd362646c614ccd9d">DUK_RET_RANGE_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1930</span>        }</div>
<div class="line"><span class="lineno"> 1931</span> </div>
<div class="line"><span class="lineno"> 1932</span>        <span class="comment">/* There&#39;s no need to check for buffer validity status for the</span></div>
<div class="line"><span class="lineno"> 1933</span><span class="comment">         * target here: the property access code will do that for each</span></div>
<div class="line"><span class="lineno"> 1934</span><span class="comment">         * element.  Moreover, if we did check the validity here, side</span></div>
<div class="line"><span class="lineno"> 1935</span><span class="comment">         * effects from reading the source argument might invalidate</span></div>
<div class="line"><span class="lineno"> 1936</span><span class="comment">         * the results anyway.</span></div>
<div class="line"><span class="lineno"> 1937</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno"> 1938</span> </div>
<div class="line"><span class="lineno"> 1939</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ab01286cf716e36b9089bd434841ed9eb">DUK_ASSERT_TOP</a>(ctx, 2);</div>
<div class="line"><span class="lineno"> 1940</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1512c1813016de46ee80d93f9a0704fb">duk_push_this</a>(ctx);</div>
<div class="line"><span class="lineno"> 1941</span> </div>
<div class="line"><span class="lineno"> 1942</span>        <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {</div>
<div class="line"><span class="lineno"> 1943</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9077276f5224f3985b570a4d82322253">duk_get_prop_index</a>(ctx, 0, i);</div>
<div class="line"><span class="lineno"> 1944</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2e084d5315f93ecef64a4bdb9ef67ae2">duk_put_prop_index</a>(ctx, 2, offset_elems + i);</div>
<div class="line"><span class="lineno"> 1945</span>        }</div>
<div class="line"><span class="lineno"> 1946</span>    }</div>
<div class="line"><span class="lineno"> 1947</span> </div>
<div class="line"><span class="lineno"> 1948</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1949</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05906">duk_hbufferobject::buf</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00065">duk__buffer_elemtype_copy_compatible</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00145">duk__require_bufobj_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05829">DUK_ASSERT_HBUFFEROBJECT_VALID</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07784">DUK_ASSERT_TOP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16575">duk_get_length()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14310">duk_get_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l15204">duk_get_top()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05856">DUK_HBUFFEROBJECT_GET_SLICE_BASE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00394">duk_hbufferobject_push_validated_read()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05887">DUK_HBUFFEROBJECT_VALID_BYTEOFFSET_EXCL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05872">DUK_HBUFFEROBJECT_VALID_SLICE</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00435">duk_hbufferobject_validated_write()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04776">DUK_HOBJECT_IS_BUFFEROBJECT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01988">DUK_MEMMOVE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l19146">duk_pop()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00570">duk_push_fixed_buffer</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l18171">duk_push_this()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l14396">duk_put_prop_index()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16305">duk_require_hobject()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00358">DUK_RET_RANGE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l00361">DUK_RET_TYPE_ERROR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16809">duk_to_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05922">duk_hbufferobject::length</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05923">duk_hbufferobject::shift</a>.</p>

</div>
</div>
<a id="a02c9a7adb2cc34d1aa73bfe7654ccd87" name="a02c9a7adb2cc34d1aa73bfe7654ccd87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c9a7adb2cc34d1aa73bfe7654ccd87">&#9670;&#160;</a></span>duk_hbufferobject_push_validated_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hbufferobject_push_validated_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *</td>          <td class="paramname"><span class="paramname"><em>h_bufobj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>p</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>elem_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00394">394</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  394</span>                                                                                                                                                   {</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_union" href="unionduk__double__union.html">duk_double_union</a> du;</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) p, (<span class="keywordtype">size_t</span>) elem_size);</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">switch</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a>) {</div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>:</div>
<div class="line"><span class="lineno">  401</span><span class="preprocessor">#if defined(DUK_USE_BUFFEROBJECT_SUPPORT)</span></div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad350ceb7b6fc0183e5296ee2183eebf8">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a>:</div>
<div class="line"><span class="lineno">  403</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  404</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>[0]);</div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  406</span><span class="preprocessor">#if defined(DUK_USE_BUFFEROBJECT_SUPPORT)</span></div>
<div class="line"><span class="lineno">  407</span>    <span class="comment">/* These are not needed when only Duktape.Buffer is supported. */</span></div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af717879d142260fabd8c53089e3e0f53">DUK_HBUFFEROBJECT_ELEM_INT8</a>:</div>
<div class="line"><span class="lineno">  409</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) (duk_int8_t) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>[0]);</div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c4c909e26fb65ae6c33a8a152a5c505">DUK_HBUFFEROBJECT_ELEM_UINT16</a>:</div>
<div class="line"><span class="lineno">  412</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) du.<a class="code hl_variable" href="unionduk__double__union.html#aebc527f8e78cba745f24cf59a48262d4">us</a>[0]);</div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a53eb36e3873d7b27c0f0c044adc0f7a7">DUK_HBUFFEROBJECT_ELEM_INT16</a>:</div>
<div class="line"><span class="lineno">  415</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) (duk_int16_t) du.<a class="code hl_variable" href="unionduk__double__union.html#aebc527f8e78cba745f24cf59a48262d4">us</a>[0]);</div>
<div class="line"><span class="lineno">  416</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a89979fdf2b8ee2303d9676e09fce32c7">DUK_HBUFFEROBJECT_ELEM_UINT32</a>:</div>
<div class="line"><span class="lineno">  418</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a97a6adfc8eb4c12296d3c2a4f8dab0a6">duk_push_uint</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac176f6049a9cba3519cc353c879e614b">duk_uint_t</a>) du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0]);</div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  420</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a21def94e81a54aa84c0b3a05aa700770">DUK_HBUFFEROBJECT_ELEM_INT32</a>:</div>
<div class="line"><span class="lineno">  421</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5d2b6c5f1be0d673b074d167c9ff7d4d">duk_push_int</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>) (duk_int32_t) du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0]);</div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  423</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac08079bc0bbca5cd1c3b2836e0078f2d">DUK_HBUFFEROBJECT_ELEM_FLOAT32</a>:</div>
<div class="line"><span class="lineno">  424</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) du.<a class="code hl_variable" href="unionduk__double__union.html#a83549e0b17313d7c3de1a57dc47032a8">f</a>[0]);</div>
<div class="line"><span class="lineno">  425</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a878cf2c6efb5e6fa7b6b78d0a41aaa6b">DUK_HBUFFEROBJECT_ELEM_FLOAT64</a>:</div>
<div class="line"><span class="lineno">  427</span>        <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aac0625b8415e35481f15cd16e70b3b9b">duk_push_number</a>(ctx, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) du.<a class="code hl_variable" href="unionduk__double__union.html#a6b504013c9b4d563f72e42831800af84">d</a>);</div>
<div class="line"><span class="lineno">  428</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  429</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_BUFFEROBJECT_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  431</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno">  432</span>    }</div>
<div class="line"><span class="lineno">  433</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a0f457284c000920f86441b7ca7cbfe08"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a></div><div class="ttdeci">#define DUK_UNREACHABLE()</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">duktape-1.5.2/src-noline/duk_config.h:2504</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a21def94e81a54aa84c0b3a05aa700770"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a21def94e81a54aa84c0b3a05aa700770">DUK_HBUFFEROBJECT_ELEM_INT32</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_INT32</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05824">duktape-1.5.2/src-noline/duktape.c:5824</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a53eb36e3873d7b27c0f0c044adc0f7a7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a53eb36e3873d7b27c0f0c044adc0f7a7">DUK_HBUFFEROBJECT_ELEM_INT16</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_INT16</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05822">duktape-1.5.2/src-noline/duktape.c:5822</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a878cf2c6efb5e6fa7b6b78d0a41aaa6b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a878cf2c6efb5e6fa7b6b78d0a41aaa6b">DUK_HBUFFEROBJECT_ELEM_FLOAT64</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_FLOAT64</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05826">duktape-1.5.2/src-noline/duktape.c:5826</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a89979fdf2b8ee2303d9676e09fce32c7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a89979fdf2b8ee2303d9676e09fce32c7">DUK_HBUFFEROBJECT_ELEM_UINT32</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_UINT32</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05823">duktape-1.5.2/src-noline/duktape.c:5823</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8c4c909e26fb65ae6c33a8a152a5c505"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c4c909e26fb65ae6c33a8a152a5c505">DUK_HBUFFEROBJECT_ELEM_UINT16</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_UINT16</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05821">duktape-1.5.2/src-noline/duktape.c:5821</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac08079bc0bbca5cd1c3b2836e0078f2d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac08079bc0bbca5cd1c3b2836e0078f2d">DUK_HBUFFEROBJECT_ELEM_FLOAT32</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_FLOAT32</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05825">duktape-1.5.2/src-noline/duktape.c:5825</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad350ceb7b6fc0183e5296ee2183eebf8"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad350ceb7b6fc0183e5296ee2183eebf8">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05819">duktape-1.5.2/src-noline/duktape.c:5819</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af717879d142260fabd8c53089e3e0f53"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af717879d142260fabd8c53089e3e0f53">DUK_HBUFFEROBJECT_ELEM_INT8</a></div><div class="ttdeci">#define DUK_HBUFFEROBJECT_ELEM_INT8</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05820">duktape-1.5.2/src-noline/duktape.c:5820</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01244">duk_double_union::d</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05825">DUK_HBUFFEROBJECT_ELEM_FLOAT32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05826">DUK_HBUFFEROBJECT_ELEM_FLOAT64</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05822">DUK_HBUFFEROBJECT_ELEM_INT16</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05824">DUK_HBUFFEROBJECT_ELEM_INT32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05820">DUK_HBUFFEROBJECT_ELEM_INT8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05821">DUK_HBUFFEROBJECT_ELEM_UINT16</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05823">DUK_HBUFFEROBJECT_ELEM_UINT32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05818">DUK_HBUFFEROBJECT_ELEM_UINT8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05819">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17923">duk_push_int()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17909">duk_push_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l17956">duk_push_uint()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01245">duk_double_union::f</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01251">duk_double_union::uc</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01249">duk_double_union::ui</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01250">duk_double_union::us</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00743">duk_bi_typedarray_constructor()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01698">duk_bi_typedarray_set()</a>.</p>

</div>
</div>
<a id="a1472e966ace67a5533431d7e197898ed" name="a1472e966ace67a5533431d7e197898ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1472e966ace67a5533431d7e197898ed">&#9670;&#160;</a></span>duk_hbufferobject_validated_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_hbufferobject_validated_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#aedf99a449ea72d41f16606f6c8ced70d">duk_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hbufferobject.html">duk_hbufferobject</a> *</td>          <td class="paramname"><span class="paramname"><em>h_bufobj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>p</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></td>          <td class="paramname"><span class="paramname"><em>elem_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00435">435</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  435</span>                                                                                                                                               {</div>
<div class="line"><span class="lineno">  436</span>    <a class="code hl_union" href="unionduk__double__union.html">duk_double_union</a> du;</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>    <span class="comment">/* NOTE! Caller must ensure that any side effects from the</span></div>
<div class="line"><span class="lineno">  439</span><span class="comment">     * coercions below are safe.  If that cannot be guaranteed</span></div>
<div class="line"><span class="lineno">  440</span><span class="comment">     * (which is normally the case), caller must coerce the</span></div>
<div class="line"><span class="lineno">  441</span><span class="comment">     * argument using duk_to_number() before any pointer</span></div>
<div class="line"><span class="lineno">  442</span><span class="comment">     * validations; the result of duk_to_number() always coerces</span></div>
<div class="line"><span class="lineno">  443</span><span class="comment">     * without side effects here.</span></div>
<div class="line"><span class="lineno">  444</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    <span class="keywordflow">switch</span> (h_bufobj-&gt;<a class="code hl_variable" href="structduk__hbufferobject.html#acf4c9f72abb1cd0dc945746aa5794b50">elem_type</a>) {</div>
<div class="line"><span class="lineno">  447</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>:</div>
<div class="line"><span class="lineno">  448</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>[0] = (duk_uint8_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  450</span><span class="preprocessor">#if defined(DUK_USE_BUFFEROBJECT_SUPPORT)</span></div>
<div class="line"><span class="lineno">  451</span>    <span class="comment">/* These are not needed when only Duktape.Buffer is supported. */</span></div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad350ceb7b6fc0183e5296ee2183eebf8">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a>:</div>
<div class="line"><span class="lineno">  453</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>[0] = (duk_uint8_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6de44cfb5485e7cedd4f294deb610274">duk_to_uint8clamped</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  454</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af717879d142260fabd8c53089e3e0f53">DUK_HBUFFEROBJECT_ELEM_INT8</a>:</div>
<div class="line"><span class="lineno">  456</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>[0] = (duk_uint8_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa2797fe05518b3b0e00765ebd890868d">duk_to_int32</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  458</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c4c909e26fb65ae6c33a8a152a5c505">DUK_HBUFFEROBJECT_ELEM_UINT16</a>:</div>
<div class="line"><span class="lineno">  459</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#aebc527f8e78cba745f24cf59a48262d4">us</a>[0] = (duk_uint16_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  461</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a53eb36e3873d7b27c0f0c044adc0f7a7">DUK_HBUFFEROBJECT_ELEM_INT16</a>:</div>
<div class="line"><span class="lineno">  462</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#aebc527f8e78cba745f24cf59a48262d4">us</a>[0] = (duk_uint16_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa2797fe05518b3b0e00765ebd890868d">duk_to_int32</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a89979fdf2b8ee2303d9676e09fce32c7">DUK_HBUFFEROBJECT_ELEM_UINT32</a>:</div>
<div class="line"><span class="lineno">  465</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0] = (duk_uint32_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa418fc23b85532f124eb2e54696278e2">duk_to_uint32</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  466</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a21def94e81a54aa84c0b3a05aa700770">DUK_HBUFFEROBJECT_ELEM_INT32</a>:</div>
<div class="line"><span class="lineno">  468</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#aa2a9e404a0718487e853580c4bde2e3a">ui</a>[0] = (duk_uint32_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa2797fe05518b3b0e00765ebd890868d">duk_to_int32</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  469</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  470</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac08079bc0bbca5cd1c3b2836e0078f2d">DUK_HBUFFEROBJECT_ELEM_FLOAT32</a>:</div>
<div class="line"><span class="lineno">  471</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#a83549e0b17313d7c3de1a57dc47032a8">f</a>[0] = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab40afa890c5b9fe6db3eaedc3365a882">duk_float_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  472</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a878cf2c6efb5e6fa7b6b78d0a41aaa6b">DUK_HBUFFEROBJECT_ELEM_FLOAT64</a>:</div>
<div class="line"><span class="lineno">  474</span>        du.<a class="code hl_variable" href="unionduk__double__union.html#a6b504013c9b4d563f72e42831800af84">d</a> = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a63e15ff4dd1c9ad036a030a80346cdc3">duk_double_t</a>) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a60da7a5524bcdb03fb59734d8ffa6ffc">duk_to_number</a>(ctx, -1);</div>
<div class="line"><span class="lineno">  475</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  476</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_BUFFEROBJECT_SUPPORT */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  478</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno">  479</span>    }</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>((<span class="keywordtype">void</span> *) p, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) du.<a class="code hl_variable" href="unionduk__double__union.html#ae42563736301672d950c119f78bd52a1">uc</a>, (<span class="keywordtype">size_t</span>) elem_size);</div>
<div class="line"><span class="lineno">  482</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6de44cfb5485e7cedd4f294deb610274"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6de44cfb5485e7cedd4f294deb610274">duk_to_uint8clamped</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_uint8_t duk_to_uint8clamped(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16880">duktape-1.5.2/src-noline/duktape.c:16880</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa2797fe05518b3b0e00765ebd890868d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa2797fe05518b3b0e00765ebd890868d">duk_to_int32</a></div><div class="ttdeci">DUK_EXTERNAL duk_int32_t duk_to_int32(duk_context *ctx, duk_idx_t index)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16827">duktape-1.5.2/src-noline/duktape.c:16827</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01244">duk_double_union::d</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05825">DUK_HBUFFEROBJECT_ELEM_FLOAT32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05826">DUK_HBUFFEROBJECT_ELEM_FLOAT64</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05822">DUK_HBUFFEROBJECT_ELEM_INT16</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05824">DUK_HBUFFEROBJECT_ELEM_INT32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05820">DUK_HBUFFEROBJECT_ELEM_INT8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05821">DUK_HBUFFEROBJECT_ELEM_UINT16</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05823">DUK_HBUFFEROBJECT_ELEM_UINT32</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05818">DUK_HBUFFEROBJECT_ELEM_UINT8</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05819">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16827">duk_to_int32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16766">duk_to_number()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16844">duk_to_uint32()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l16880">duk_to_uint8clamped()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l05929">duk_hbufferobject::elem_type</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01245">duk_double_union::f</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01251">duk_double_union::uc</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01249">duk_double_union::ui</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8h_source.html#l01250">duk_double_union::us</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00743">duk_bi_typedarray_constructor()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01698">duk_bi_typedarray_set()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a36d0e74f91871c4baeb1957d55eb044f" name="a36d0e74f91871c4baeb1957d55eb044f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d0e74f91871c4baeb1957d55eb044f">&#9670;&#160;</a></span>duk__buffer_class_from_elemtype</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const duk_uint8_t duk__buffer_class_from_elemtype[9]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a817666f8fbf72074d769692b6818d34b">DUK_HOBJECT_CLASS_UINT8ARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a552ac123fd8d9db6f74b14a6653de758">DUK_HOBJECT_CLASS_UINT8CLAMPEDARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa5f4c38801c82f8e0441ade56e1fbb4">DUK_HOBJECT_CLASS_INT8ARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abb93b40742d7ab30cb2f7b3d13543cfe">DUK_HOBJECT_CLASS_UINT16ARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e917834030acf007285b58643674965">DUK_HOBJECT_CLASS_INT16ARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e958e60fe646b02fe6db53efbcc04da">DUK_HOBJECT_CLASS_UINT32ARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1fb0eab0110aa9a567fb1d6c3ba199aa">DUK_HOBJECT_CLASS_INT32ARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b18a53001a5dec54f36e631fd61dfae">DUK_HOBJECT_CLASS_FLOAT32ARRAY</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af8efe658c851001db7ff2e037535a98c">DUK_HOBJECT_CLASS_FLOAT64ARRAY</a></div>
<div class="line">}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1fb0eab0110aa9a567fb1d6c3ba199aa"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1fb0eab0110aa9a567fb1d6c3ba199aa">DUK_HOBJECT_CLASS_INT32ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_INT32ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04717">duktape-1.5.2/src-noline/duktape.c:4717</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a3e917834030acf007285b58643674965"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e917834030acf007285b58643674965">DUK_HOBJECT_CLASS_INT16ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_INT16ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04715">duktape-1.5.2/src-noline/duktape.c:4715</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a552ac123fd8d9db6f74b14a6653de758"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a552ac123fd8d9db6f74b14a6653de758">DUK_HOBJECT_CLASS_UINT8CLAMPEDARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_UINT8CLAMPEDARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04714">duktape-1.5.2/src-noline/duktape.c:4714</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a7b18a53001a5dec54f36e631fd61dfae"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b18a53001a5dec54f36e631fd61dfae">DUK_HOBJECT_CLASS_FLOAT32ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_FLOAT32ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04719">duktape-1.5.2/src-noline/duktape.c:4719</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a817666f8fbf72074d769692b6818d34b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a817666f8fbf72074d769692b6818d34b">DUK_HOBJECT_CLASS_UINT8ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_UINT8ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04713">duktape-1.5.2/src-noline/duktape.c:4713</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8e958e60fe646b02fe6db53efbcc04da"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e958e60fe646b02fe6db53efbcc04da">DUK_HOBJECT_CLASS_UINT32ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_UINT32ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04718">duktape-1.5.2/src-noline/duktape.c:4718</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaa5f4c38801c82f8e0441ade56e1fbb4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa5f4c38801c82f8e0441ade56e1fbb4">DUK_HOBJECT_CLASS_INT8ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_INT8ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04712">duktape-1.5.2/src-noline/duktape.c:4712</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_abb93b40742d7ab30cb2f7b3d13543cfe"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#abb93b40742d7ab30cb2f7b3d13543cfe">DUK_HOBJECT_CLASS_UINT16ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_UINT16ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04716">duktape-1.5.2/src-noline/duktape.c:4716</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af8efe658c851001db7ff2e037535a98c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af8efe658c851001db7ff2e037535a98c">DUK_HOBJECT_CLASS_FLOAT64ARRAY</a></div><div class="ttdeci">#define DUK_HOBJECT_CLASS_FLOAT64ARRAY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04720">duktape-1.5.2/src-noline/duktape.c:4720</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00015">15</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   15</span>                                                              {</div>
<div class="line"><span class="lineno">   16</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a817666f8fbf72074d769692b6818d34b">DUK_HOBJECT_CLASS_UINT8ARRAY</a>,</div>
<div class="line"><span class="lineno">   17</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a552ac123fd8d9db6f74b14a6653de758">DUK_HOBJECT_CLASS_UINT8CLAMPEDARRAY</a>,</div>
<div class="line"><span class="lineno">   18</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaa5f4c38801c82f8e0441ade56e1fbb4">DUK_HOBJECT_CLASS_INT8ARRAY</a>,</div>
<div class="line"><span class="lineno">   19</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abb93b40742d7ab30cb2f7b3d13543cfe">DUK_HOBJECT_CLASS_UINT16ARRAY</a>,</div>
<div class="line"><span class="lineno">   20</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a3e917834030acf007285b58643674965">DUK_HOBJECT_CLASS_INT16ARRAY</a>,</div>
<div class="line"><span class="lineno">   21</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8e958e60fe646b02fe6db53efbcc04da">DUK_HOBJECT_CLASS_UINT32ARRAY</a>,</div>
<div class="line"><span class="lineno">   22</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1fb0eab0110aa9a567fb1d6c3ba199aa">DUK_HOBJECT_CLASS_INT32ARRAY</a>,</div>
<div class="line"><span class="lineno">   23</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a7b18a53001a5dec54f36e631fd61dfae">DUK_HOBJECT_CLASS_FLOAT32ARRAY</a>,</div>
<div class="line"><span class="lineno">   24</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af8efe658c851001db7ff2e037535a98c">DUK_HOBJECT_CLASS_FLOAT64ARRAY</a></div>
<div class="line"><span class="lineno">   25</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00743">duk_bi_typedarray_constructor()</a>.</p>

</div>
</div>
<a id="ac3c076de8ac3c96667d04e61230595ad" name="ac3c076de8ac3c96667d04e61230595ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c076de8ac3c96667d04e61230595ad">&#9670;&#160;</a></span>duk__buffer_elemtype_copy_compatible</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">duk_uint16_t duk__buffer_elemtype_copy_compatible[9]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00065">65</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>                                                              {</div>
<div class="line"><span class="lineno">   66</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_UINT8 */</span></div>
<div class="line"><span class="lineno">   67</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>) |</div>
<div class="line"><span class="lineno">   68</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad350ceb7b6fc0183e5296ee2183eebf8">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a>) |</div>
<div class="line"><span class="lineno">   69</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af717879d142260fabd8c53089e3e0f53">DUK_HBUFFEROBJECT_ELEM_INT8</a>),</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</span></div>
<div class="line"><span class="lineno">   72</span><span class="comment">     * Note: INT8 is -not- copy compatible, e.g. -1 would coerce to 0x00.</span></div>
<div class="line"><span class="lineno">   73</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">   74</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>) |</div>
<div class="line"><span class="lineno">   75</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad350ceb7b6fc0183e5296ee2183eebf8">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a>),</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_INT8 */</span></div>
<div class="line"><span class="lineno">   78</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af882085849a2612a4787b305d269921a">DUK_HBUFFEROBJECT_ELEM_UINT8</a>) |</div>
<div class="line"><span class="lineno">   79</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad350ceb7b6fc0183e5296ee2183eebf8">DUK_HBUFFEROBJECT_ELEM_UINT8CLAMPED</a>) |</div>
<div class="line"><span class="lineno">   80</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af717879d142260fabd8c53089e3e0f53">DUK_HBUFFEROBJECT_ELEM_INT8</a>),</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_UINT16 */</span></div>
<div class="line"><span class="lineno">   83</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c4c909e26fb65ae6c33a8a152a5c505">DUK_HBUFFEROBJECT_ELEM_UINT16</a>) |</div>
<div class="line"><span class="lineno">   84</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a53eb36e3873d7b27c0f0c044adc0f7a7">DUK_HBUFFEROBJECT_ELEM_INT16</a>),</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_INT16 */</span></div>
<div class="line"><span class="lineno">   87</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8c4c909e26fb65ae6c33a8a152a5c505">DUK_HBUFFEROBJECT_ELEM_UINT16</a>) |</div>
<div class="line"><span class="lineno">   88</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a53eb36e3873d7b27c0f0c044adc0f7a7">DUK_HBUFFEROBJECT_ELEM_INT16</a>),</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_UINT32 */</span></div>
<div class="line"><span class="lineno">   91</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a89979fdf2b8ee2303d9676e09fce32c7">DUK_HBUFFEROBJECT_ELEM_UINT32</a>) |</div>
<div class="line"><span class="lineno">   92</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a21def94e81a54aa84c0b3a05aa700770">DUK_HBUFFEROBJECT_ELEM_INT32</a>),</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_INT32 */</span></div>
<div class="line"><span class="lineno">   95</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a89979fdf2b8ee2303d9676e09fce32c7">DUK_HBUFFEROBJECT_ELEM_UINT32</a>) |</div>
<div class="line"><span class="lineno">   96</span>        (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a21def94e81a54aa84c0b3a05aa700770">DUK_HBUFFEROBJECT_ELEM_INT32</a>),</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_FLOAT32 */</span></div>
<div class="line"><span class="lineno">   99</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac08079bc0bbca5cd1c3b2836e0078f2d">DUK_HBUFFEROBJECT_ELEM_FLOAT32</a>),</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>    <span class="comment">/* xxx -&gt; DUK_HBUFFEROBJECT_ELEM_FLOAT64 */</span></div>
<div class="line"><span class="lineno">  102</span>    (1U &lt;&lt; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a878cf2c6efb5e6fa7b6b78d0a41aaa6b">DUK_HBUFFEROBJECT_ELEM_FLOAT64</a>)</div>
<div class="line"><span class="lineno">  103</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00743">duk_bi_typedarray_constructor()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l01698">duk_bi_typedarray_set()</a>.</p>

</div>
</div>
<a id="a689ac1d15121b224cbc1ae301223408f" name="a689ac1d15121b224cbc1ae301223408f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a689ac1d15121b224cbc1ae301223408f">&#9670;&#160;</a></span>duk__buffer_nbytes_from_fldtype</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const duk_uint8_t duk__buffer_nbytes_from_fldtype[6]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    1,  </div>
<div class="line">    2,  </div>
<div class="line">    4,  </div>
<div class="line">    4,  </div>
<div class="line">    8,  </div>
<div class="line">    0   </div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00048">48</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>                                                              {</div>
<div class="line"><span class="lineno">   49</span>    1,  <span class="comment">/* DUK__FLD_8BIT */</span></div>
<div class="line"><span class="lineno">   50</span>    2,  <span class="comment">/* DUK__FLD_16BIT */</span></div>
<div class="line"><span class="lineno">   51</span>    4,  <span class="comment">/* DUK__FLD_32BIT */</span></div>
<div class="line"><span class="lineno">   52</span>    4,  <span class="comment">/* DUK__FLD_FLOAT */</span></div>
<div class="line"><span class="lineno">   53</span>    8,  <span class="comment">/* DUK__FLD_DOUBLE */</span></div>
<div class="line"><span class="lineno">   54</span>    0   <span class="comment">/* DUK__FLD_VARINT; not relevant here */</span></div>
<div class="line"><span class="lineno">   55</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l02595">duk_bi_buffer_writefield()</a>.</p>

</div>
</div>
<a id="a768a8fb484ad2db508114924900d9450" name="a768a8fb484ad2db508114924900d9450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768a8fb484ad2db508114924900d9450">&#9670;&#160;</a></span>duk__buffer_proto_from_elemtype</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const duk_uint8_t duk__buffer_proto_from_elemtype[9]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a050470caeea5c68b4913c520a166383d">DUK_BIDX_UINT8ARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a590a29ceb8bf816eaa972f8286b74ab2">DUK_BIDX_UINT8CLAMPEDARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2de1e63e7144223d3573e635dab63982">DUK_BIDX_INT8ARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af5320b73566f1708d855020a0b93894b">DUK_BIDX_UINT16ARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeffd0d7955a606d71d306a8bdb674dae">DUK_BIDX_INT16ARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8306835eb9c2f0ba5705a06b9bc810c4">DUK_BIDX_UINT32ARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59f4f4344fd82a94e3c7db88d895b21c">DUK_BIDX_INT32ARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e4af70cf5277f1bdd7aa2ee7e78e809">DUK_BIDX_FLOAT32ARRAY_PROTOTYPE</a>,</div>
<div class="line">    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a88a3711be4310bcc17e6d7c4dd9fe09a">DUK_BIDX_FLOAT64ARRAY_PROTOTYPE</a></div>
<div class="line">}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a050470caeea5c68b4913c520a166383d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a050470caeea5c68b4913c520a166383d">DUK_BIDX_UINT8ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_UINT8ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01683">duktape-1.5.2/src-noline/duktape.c:1683</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2de1e63e7144223d3573e635dab63982"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2de1e63e7144223d3573e635dab63982">DUK_BIDX_INT8ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_INT8ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01681">duktape-1.5.2/src-noline/duktape.c:1681</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a590a29ceb8bf816eaa972f8286b74ab2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a590a29ceb8bf816eaa972f8286b74ab2">DUK_BIDX_UINT8CLAMPEDARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_UINT8CLAMPEDARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01685">duktape-1.5.2/src-noline/duktape.c:1685</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a59f4f4344fd82a94e3c7db88d895b21c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59f4f4344fd82a94e3c7db88d895b21c">DUK_BIDX_INT32ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_INT32ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01691">duktape-1.5.2/src-noline/duktape.c:1691</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5e4af70cf5277f1bdd7aa2ee7e78e809"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e4af70cf5277f1bdd7aa2ee7e78e809">DUK_BIDX_FLOAT32ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_FLOAT32ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01695">duktape-1.5.2/src-noline/duktape.c:1695</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8306835eb9c2f0ba5705a06b9bc810c4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8306835eb9c2f0ba5705a06b9bc810c4">DUK_BIDX_UINT32ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_UINT32ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01693">duktape-1.5.2/src-noline/duktape.c:1693</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a88a3711be4310bcc17e6d7c4dd9fe09a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a88a3711be4310bcc17e6d7c4dd9fe09a">DUK_BIDX_FLOAT64ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_FLOAT64ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01697">duktape-1.5.2/src-noline/duktape.c:1697</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aeffd0d7955a606d71d306a8bdb674dae"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeffd0d7955a606d71d306a8bdb674dae">DUK_BIDX_INT16ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_INT16ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01687">duktape-1.5.2/src-noline/duktape.c:1687</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_af5320b73566f1708d855020a0b93894b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#af5320b73566f1708d855020a0b93894b">DUK_BIDX_UINT16ARRAY_PROTOTYPE</a></div><div class="ttdeci">#define DUK_BIDX_UINT16ARRAY_PROTOTYPE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l01689">duktape-1.5.2/src-noline/duktape.c:1689</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00032">32</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html">duktape-1.8.0/src-separate/duk_bi_buffer.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>                                                              {</div>
<div class="line"><span class="lineno">   33</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a050470caeea5c68b4913c520a166383d">DUK_BIDX_UINT8ARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   34</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a590a29ceb8bf816eaa972f8286b74ab2">DUK_BIDX_UINT8CLAMPEDARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   35</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2de1e63e7144223d3573e635dab63982">DUK_BIDX_INT8ARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#af5320b73566f1708d855020a0b93894b">DUK_BIDX_UINT16ARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeffd0d7955a606d71d306a8bdb674dae">DUK_BIDX_INT16ARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8306835eb9c2f0ba5705a06b9bc810c4">DUK_BIDX_UINT32ARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a59f4f4344fd82a94e3c7db88d895b21c">DUK_BIDX_INT32ARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5e4af70cf5277f1bdd7aa2ee7e78e809">DUK_BIDX_FLOAT32ARRAY_PROTOTYPE</a>,</div>
<div class="line"><span class="lineno">   41</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a88a3711be4310bcc17e6d7c4dd9fe09a">DUK_BIDX_FLOAT64ARRAY_PROTOTYPE</a></div>
<div class="line"><span class="lineno">   42</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c_source.html#l00743">duk_bi_typedarray_constructor()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1e03628437b642463b7b6eb98fac43e1.html">vendor</a></li><li class="navelem"><a class="el" href="dir_84591d08937a968859b7757c3b203700.html">civetweb</a></li><li class="navelem"><a class="el" href="dir_34c971402fa1824d9c500953fc75cb63.html">third_party</a></li><li class="navelem"><a class="el" href="dir_00bee2651a8e543911ee9ac473617819.html">duktape-1.8.0</a></li><li class="navelem"><a class="el" href="dir_27bca86221c24c635a9197b9d0b1c3d5.html">src-separate</a></li><li class="navelem"><a class="el" href="duktape-1_88_80_2src-separate_2duk__bi__buffer_8c.html">duk_bi_buffer.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
