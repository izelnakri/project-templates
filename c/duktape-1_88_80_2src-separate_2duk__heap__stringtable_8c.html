<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Github User Fetcher: duk_heap_stringtable.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Github User Fetcher<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">C/C++ Application with Server and GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">duk_heap_stringtable.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="duktape-1_88_80_2src-separate_2duk__internal_8h_source.html">duk_internal.h</a>&quot;</code><br />
</div>
<p><a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6286b0f2c1cfd532a5f7047877afec54" id="r_a6286b0f2c1cfd532a5f7047877afec54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(hash,  h_size)&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeea88ba5b2930438ec6500e3cfcbdd1b">DUK_STRTAB_HASH_INITIAL</a>((hash),(h_size))</td></tr>
<tr class="separator:a6286b0f2c1cfd532a5f7047877afec54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d41695de6e417ad8ee1d548fe2c03fd" id="r_a8d41695de6e417ad8ee1d548fe2c03fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(hash)&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a318b26dfeb86508ed73ddda70cd29d8b">DUK_STRTAB_HASH_PROBE_STEP</a>((hash))</td></tr>
<tr class="separator:a8d41695de6e417ad8ee1d548fe2c03fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45b6b1b1c54b48bb3c61db232dc94356" id="r_a45b6b1b1c54b48bb3c61db232dc94356"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a45b6b1b1c54b48bb3c61db232dc94356">DUK__DELETED_MARKER</a>(heap)&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03a6b2ef1626b68ab1751f404f51cc22">DUK_STRTAB_DELETED_MARKER</a>((heap))</td></tr>
<tr class="separator:a45b6b1b1c54b48bb3c61db232dc94356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f7f9b1e1896c74cdf96eb2862c61ac" id="r_a93f7f9b1e1896c74cdf96eb2862c61ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a93f7f9b1e1896c74cdf96eb2862c61ac">DUK__PREVENT_MS_SIDE_EFFECTS</a>(heap)</td></tr>
<tr class="separator:a93f7f9b1e1896c74cdf96eb2862c61ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3b05fde10aa9d6a1dea9b3b0b3332db7" id="r_a3b05fde10aa9d6a1dea9b3b0b3332db7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3b05fde10aa9d6a1dea9b3b0b3332db7">duk__alloc_init_hstring</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t strhash, const duk_uint8_t *extdata)</td></tr>
<tr class="separator:a3b05fde10aa9d6a1dea9b3b0b3332db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f130d796bf547b5487612fb3c979d46" id="r_a9f130d796bf547b5487612fb3c979d46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f130d796bf547b5487612fb3c979d46">duk__count_used_probe</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap)</td></tr>
<tr class="separator:a9f130d796bf547b5487612fb3c979d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3428e8f3a818815ad550b1f36b525716" id="r_a3428e8f3a818815ad550b1f36b525716"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3428e8f3a818815ad550b1f36b525716">duk__insert_hstring_probe</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hstring.html">duk_hstring</a> **entries, duk_uint32_t size, duk_uint32_t *p_used, <a class="el" href="structduk__hstring.html">duk_hstring</a> *h)</td></tr>
<tr class="separator:a3428e8f3a818815ad550b1f36b525716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab75aa1b37a85056863039ccd41e08d39" id="r_ab75aa1b37a85056863039ccd41e08d39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab75aa1b37a85056863039ccd41e08d39">duk__find_matching_string_probe</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hstring.html">duk_hstring</a> **entries, duk_uint32_t size, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t strhash)</td></tr>
<tr class="separator:ab75aa1b37a85056863039ccd41e08d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a3cf3658806992f97407c5ca2b9d6c" id="r_aa0a3cf3658806992f97407c5ca2b9d6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0a3cf3658806992f97407c5ca2b9d6c">duk__remove_matching_hstring_probe</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hstring.html">duk_hstring</a> **entries, duk_uint32_t size, <a class="el" href="structduk__hstring.html">duk_hstring</a> *h)</td></tr>
<tr class="separator:aa0a3cf3658806992f97407c5ca2b9d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a738e7f4b92146cc124054b0a5311f738" id="r_a738e7f4b92146cc124054b0a5311f738"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a738e7f4b92146cc124054b0a5311f738">duk__resize_strtab_raw_probe</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, duk_uint32_t new_size)</td></tr>
<tr class="separator:a738e7f4b92146cc124054b0a5311f738"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59b1aeceb1237746618278c7c03d699b" id="r_a59b1aeceb1237746618278c7c03d699b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a59b1aeceb1237746618278c7c03d699b">duk__resize_strtab_probe</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap)</td></tr>
<tr class="separator:a59b1aeceb1237746618278c7c03d699b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2990d43bcd9db7bc7d40c49e4a740e1d" id="r_a2990d43bcd9db7bc7d40c49e4a740e1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2990d43bcd9db7bc7d40c49e4a740e1d">duk__recheck_strtab_size_probe</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, duk_uint32_t new_used)</td></tr>
<tr class="separator:a2990d43bcd9db7bc7d40c49e4a740e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad00665675a49c44398e62e8fe26283cf" id="r_ad00665675a49c44398e62e8fe26283cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad00665675a49c44398e62e8fe26283cf">duk__do_intern</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t strhash)</td></tr>
<tr class="separator:ad00665675a49c44398e62e8fe26283cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4448feb38a6ba3056b574b94a2d0dbf3" id="r_a4448feb38a6ba3056b574b94a2d0dbf3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4448feb38a6ba3056b574b94a2d0dbf3">duk__do_lookup</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t *out_strhash)</td></tr>
<tr class="separator:a4448feb38a6ba3056b574b94a2d0dbf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed81ab4a8814a9d9436cbf93cb08a98" id="r_a5ed81ab4a8814a9d9436cbf93cb08a98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5ed81ab4a8814a9d9436cbf93cb08a98">duk_heap_string_intern</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, const duk_uint8_t *str, duk_uint32_t blen)</td></tr>
<tr class="separator:a5ed81ab4a8814a9d9436cbf93cb08a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada75ea49a94180ac0da1ee0982a9b9fa" id="r_ada75ea49a94180ac0da1ee0982a9b9fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada75ea49a94180ac0da1ee0982a9b9fa">duk_heap_string_intern_checked</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, const duk_uint8_t *str, duk_uint32_t blen)</td></tr>
<tr class="separator:ada75ea49a94180ac0da1ee0982a9b9fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a587f5f9db6b84ab93099e1d2d510546c" id="r_a587f5f9db6b84ab93099e1d2d510546c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a587f5f9db6b84ab93099e1d2d510546c">duk_heap_string_intern_u32</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, duk_uint32_t val)</td></tr>
<tr class="separator:a587f5f9db6b84ab93099e1d2d510546c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3fafdd6a320062dfc084f6ead62ff5" id="r_a8e3fafdd6a320062dfc084f6ead62ff5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8e3fafdd6a320062dfc084f6ead62ff5">duk_heap_string_intern_u32_checked</a> (<a class="el" href="structduk__hthread.html">duk_hthread</a> *thr, duk_uint32_t val)</td></tr>
<tr class="separator:a8e3fafdd6a320062dfc084f6ead62ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fb1986721cef2f17686d7913b82200" id="r_a99fb1986721cef2f17686d7913b82200"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99fb1986721cef2f17686d7913b82200">duk_heap_string_remove</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap, <a class="el" href="structduk__hstring.html">duk_hstring</a> *h)</td></tr>
<tr class="separator:a99fb1986721cef2f17686d7913b82200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add3d0c22690534acde25576d27a740c0" id="r_add3d0c22690534acde25576d27a740c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add3d0c22690534acde25576d27a740c0">duk_heap_force_strtab_resize</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap)</td></tr>
<tr class="separator:add3d0c22690534acde25576d27a740c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad142e6936dcbc8b2e885cc76c59b318f" id="r_ad142e6936dcbc8b2e885cc76c59b318f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad142e6936dcbc8b2e885cc76c59b318f">duk_heap_free_strtab</a> (<a class="el" href="structduk__heap.html">duk_heap</a> *heap)</td></tr>
<tr class="separator:ad142e6936dcbc8b2e885cc76c59b318f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a45b6b1b1c54b48bb3c61db232dc94356" name="a45b6b1b1c54b48bb3c61db232dc94356"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45b6b1b1c54b48bb3c61db232dc94356">&#9670;&#160;</a></span>DUK__DELETED_MARKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__DELETED_MARKER</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">heap</span></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03a6b2ef1626b68ab1751f404f51cc22">DUK_STRTAB_DELETED_MARKER</a>((heap))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00010">10</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00469">duk__count_used_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00554">duk__find_matching_string_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duk__insert_hstring_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00594">duk__remove_matching_hstring_probe()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00647">duk__resize_strtab_raw_probe()</a>.</p>

</div>
</div>
<a id="a6286b0f2c1cfd532a5f7047877afec54" name="a6286b0f2c1cfd532a5f7047877afec54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6286b0f2c1cfd532a5f7047877afec54">&#9670;&#160;</a></span>DUK__HASH_INITIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__HASH_INITIAL</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">hash, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">h_size</span>&#160;)&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aeea88ba5b2930438ec6500e3cfcbdd1b">DUK_STRTAB_HASH_INITIAL</a>((hash),(h_size))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00008">8</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00554">duk__find_matching_string_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duk__insert_hstring_probe()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00594">duk__remove_matching_hstring_probe()</a>.</p>

</div>
</div>
<a id="a8d41695de6e417ad8ee1d548fe2c03fd" name="a8d41695de6e417ad8ee1d548fe2c03fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d41695de6e417ad8ee1d548fe2c03fd">&#9670;&#160;</a></span>DUK__HASH_PROBE_STEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__HASH_PROBE_STEP</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">hash</span></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a318b26dfeb86508ed73ddda70cd29d8b">DUK_STRTAB_HASH_PROBE_STEP</a>((hash))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00009">9</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00554">duk__find_matching_string_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duk__insert_hstring_probe()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00594">duk__remove_matching_hstring_probe()</a>.</p>

</div>
</div>
<a id="a93f7f9b1e1896c74cdf96eb2862c61ac" name="a93f7f9b1e1896c74cdf96eb2862c61ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f7f9b1e1896c74cdf96eb2862c61ac">&#9670;&#160;</a></span>DUK__PREVENT_MS_SIDE_EFFECTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUK__PREVENT_MS_SIDE_EFFECTS</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">heap</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keywordflow">do</span> { \</div>
<div class="line">        (heap)-&gt;mark_and_sweep_base_flags |= \</div>
<div class="line">                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a94161c2cd17bbd439cef64cc8467b504">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a> |  <span class="comment">/* avoid recursive string table call */</span> \</div>
<div class="line">                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5a28b04424e5e385313e2e5821eb3a97">DUK_MS_FLAG_NO_FINALIZERS</a> |          <span class="comment">/* avoid pressure to add/remove strings, invalidation of call data argument, etc. */</span> \</div>
<div class="line">                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0305cbeb6c7973f1ac43e4c9553fd69b">DUK_MS_FLAG_NO_OBJECT_COMPACTION</a>;    <span class="comment">/* avoid array abandoning which interns strings */</span> \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0305cbeb6c7973f1ac43e4c9553fd69b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0305cbeb6c7973f1ac43e4c9553fd69b">DUK_MS_FLAG_NO_OBJECT_COMPACTION</a></div><div class="ttdeci">#define DUK_MS_FLAG_NO_OBJECT_COMPACTION</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06720">duktape-1.5.2/src-noline/duktape.c:6720</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5a28b04424e5e385313e2e5821eb3a97"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5a28b04424e5e385313e2e5821eb3a97">DUK_MS_FLAG_NO_FINALIZERS</a></div><div class="ttdeci">#define DUK_MS_FLAG_NO_FINALIZERS</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06721">duktape-1.5.2/src-noline/duktape.c:6721</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a94161c2cd17bbd439cef64cc8467b504"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a94161c2cd17bbd439cef64cc8467b504">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a></div><div class="ttdeci">#define DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06719">duktape-1.5.2/src-noline/duktape.c:6719</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00014">14</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   14</span><span class="preprocessor">#define DUK__PREVENT_MS_SIDE_EFFECTS(heap) do { \</span></div>
<div class="line"><span class="lineno">   15</span><span class="preprocessor">        (heap)-&gt;mark_and_sweep_base_flags |= \</span></div>
<div class="line"><span class="lineno">   16</span><span class="preprocessor">                DUK_MS_FLAG_NO_STRINGTABLE_RESIZE |  </span><span class="comment">/* avoid recursive string table call */</span><span class="preprocessor"> \</span></div>
<div class="line"><span class="lineno">   17</span><span class="preprocessor">                DUK_MS_FLAG_NO_FINALIZERS |          </span><span class="comment">/* avoid pressure to add/remove strings, invalidation of call data argument, etc. */</span><span class="preprocessor"> \</span></div>
<div class="line"><span class="lineno">   18</span><span class="preprocessor">                DUK_MS_FLAG_NO_OBJECT_COMPACTION;    </span><span class="comment">/* avoid array abandoning which interns strings */</span><span class="preprocessor"> \</span></div>
<div class="line"><span class="lineno">   19</span><span class="preprocessor">    } while (0)</span></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00833">duk__do_intern()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01053">duk_heap_force_strtab_resize()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3b05fde10aa9d6a1dea9b3b0b3332db7" name="a3b05fde10aa9d6a1dea9b3b0b3332db7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b05fde10aa9d6a1dea9b3b0b3332db7">&#9670;&#160;</a></span>duk__alloc_init_hstring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk__alloc_init_hstring </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>str</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>blen</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>strhash</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>extdata</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00032">32</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>                                                                 {</div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *res = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">   38</span>    duk_uint8_t *data;</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> alloc_size;</div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a> <a class="code hl_variable" href="lua-5_83_86_2src_2lstrlib_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>;</div>
<div class="line"><span class="lineno">   41</span>    duk_uint32_t clen;</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span><span class="preprocessor">#if defined(DUK_USE_STRLEN16)</span></div>
<div class="line"><span class="lineno">   44</span>    <span class="comment">/* If blen &lt;= 0xffffUL, clen is also guaranteed to be &lt;= 0xffffUL. */</span></div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">if</span> (blen &gt; 0xffffUL) {</div>
<div class="line"><span class="lineno">   46</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a>(<span class="stringliteral">&quot;16-bit string blen/clen active and blen over 16 bits, reject intern&quot;</span>));</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">   48</span>    }</div>
<div class="line"><span class="lineno">   49</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">if</span> (extdata) {</div>
<div class="line"><span class="lineno">   52</span>        alloc_size = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring__external.html">duk_hstring_external</a>);</div>
<div class="line"><span class="lineno">   53</span>        res = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1749cfba8c899b635e9adfb4ee2c647f">DUK_ALLOC</a>(heap, alloc_size);</div>
<div class="line"><span class="lineno">   54</span>        <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><span class="lineno">   55</span>            <span class="keywordflow">goto</span> alloc_error;</div>
<div class="line"><span class="lineno">   56</span>        }</div>
<div class="line"><span class="lineno">   57</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a>(res, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring__external.html">duk_hstring_external</a>));</div>
<div class="line"><span class="lineno">   58</span><span class="preprocessor">#if defined(DUK_USE_EXPLICIT_NULL_INIT)</span></div>
<div class="line"><span class="lineno">   59</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1e4f11391d7ea10d2791fbafb0d673b7">DUK_HEAPHDR_STRING_INIT_NULLS</a>(&amp;res-&gt;<a class="code hl_variable" href="structduk__hstring.html#ad39573461877e663fa96a3d994c1e6a3">hdr</a>);</div>
<div class="line"><span class="lineno">   60</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   61</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaec5089c6e9d600e55c41a33c9c7a552">DUK_HEAPHDR_SET_TYPE_AND_FLAGS</a>(&amp;res-&gt;<a class="code hl_variable" href="structduk__hstring.html#ad39573461877e663fa96a3d994c1e6a3">hdr</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae20fb3a64aa5d78e689513fd5e9095bb">DUK_HTYPE_STRING</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a893ab69ddca3f842ab20e9b3a7e32839">DUK_HSTRING_FLAG_EXTDATA</a>);</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>        ((<a class="code hl_struct" href="structduk__hstring__external.html">duk_hstring_external</a> *) res)-&gt;extdata = extdata;</div>
<div class="line"><span class="lineno">   64</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   65</span>        <span class="comment">/* NUL terminate for convenient C access */</span></div>
<div class="line"><span class="lineno">   66</span>        alloc_size = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) (<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a>) + blen + 1);</div>
<div class="line"><span class="lineno">   67</span>        res = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1749cfba8c899b635e9adfb4ee2c647f">DUK_ALLOC</a>(heap, alloc_size);</div>
<div class="line"><span class="lineno">   68</span>        <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><span class="lineno">   69</span>            <span class="keywordflow">goto</span> alloc_error;</div>
<div class="line"><span class="lineno">   70</span>        }</div>
<div class="line"><span class="lineno">   71</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a>(res, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a>));</div>
<div class="line"><span class="lineno">   72</span><span class="preprocessor">#if defined(DUK_USE_EXPLICIT_NULL_INIT)</span></div>
<div class="line"><span class="lineno">   73</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1e4f11391d7ea10d2791fbafb0d673b7">DUK_HEAPHDR_STRING_INIT_NULLS</a>(&amp;res-&gt;<a class="code hl_variable" href="structduk__hstring.html#ad39573461877e663fa96a3d994c1e6a3">hdr</a>);</div>
<div class="line"><span class="lineno">   74</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   75</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaec5089c6e9d600e55c41a33c9c7a552">DUK_HEAPHDR_SET_TYPE_AND_FLAGS</a>(&amp;res-&gt;<a class="code hl_variable" href="structduk__hstring.html#ad39573461877e663fa96a3d994c1e6a3">hdr</a>, <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae20fb3a64aa5d78e689513fd5e9095bb">DUK_HTYPE_STRING</a>, 0);</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>        data = (duk_uint8_t *) (res + 1);</div>
<div class="line"><span class="lineno">   78</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a>(data, str, blen);</div>
<div class="line"><span class="lineno">   79</span>        data[blen] = (duk_uint8_t) 0;</div>
<div class="line"><span class="lineno">   80</span>    }</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a>(res));</div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f020e3c3eca6e8bff6e30ad4d6c1d">duk_js_to_arrayindex_raw_string</a>(str, blen, &amp;<a class="code hl_variable" href="lua-5_83_86_2src_2lstrlib_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>)) {</div>
<div class="line"><span class="lineno">   84</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa0211fae3a88f941119872cdcfd28c36">DUK_HSTRING_SET_ARRIDX</a>(res);</div>
<div class="line"><span class="lineno">   85</span>    }</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">/* All strings beginning with 0xff are treated as &quot;internal&quot;,</span></div>
<div class="line"><span class="lineno">   88</span><span class="comment">     * even strings interned by the user.  This allows user code to</span></div>
<div class="line"><span class="lineno">   89</span><span class="comment">     * create internal properties too, and makes behavior consistent</span></div>
<div class="line"><span class="lineno">   90</span><span class="comment">     * in case user code happens to use a string also used by Duktape</span></div>
<div class="line"><span class="lineno">   91</span><span class="comment">     * (such as string has already been interned and has the &#39;internal&#39;</span></div>
<div class="line"><span class="lineno">   92</span><span class="comment">     * flag set).</span></div>
<div class="line"><span class="lineno">   93</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa0b320581b741da4c9929dc9ab9555b5">DUK_HSTRING_HAS_INTERNAL</a>(res));</div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">if</span> (blen &gt; 0 &amp;&amp; str[0] == (duk_uint8_t) 0xff) {</div>
<div class="line"><span class="lineno">   96</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac222802fa2475f3a1f0c072c33cfd062">DUK_HSTRING_SET_INTERNAL</a>(res);</div>
<div class="line"><span class="lineno">   97</span>    }</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9d2e19e0c7220638df844e713c0060cd">DUK_HSTRING_SET_HASH</a>(res, strhash);</div>
<div class="line"><span class="lineno">  100</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac87ec07c2e5309a78f3c9f6cdb3e0e09">DUK_HSTRING_SET_BYTELEN</a>(res, blen);</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    clen = (duk_uint32_t) <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0dfd2f35f9df3e9cb779fc53495a42ab">duk_unicode_unvalidated_utf8_length</a>(str, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) blen);</div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(clen &lt;= blen);</div>
<div class="line"><span class="lineno">  104</span><span class="preprocessor">#if defined(DUK_USE_HSTRING_CLEN)</span></div>
<div class="line"><span class="lineno">  105</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8704b72d1f3fa177ededd1c06ce8a6db">DUK_HSTRING_SET_CHARLEN</a>(res, clen);</div>
<div class="line"><span class="lineno">  106</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="comment">/* Using an explicit &#39;ASCII&#39; flag has larger footprint (one call site</span></div>
<div class="line"><span class="lineno">  109</span><span class="comment">     * only) but is quite useful for the case when there&#39;s no explicit</span></div>
<div class="line"><span class="lineno">  110</span><span class="comment">     * &#39;clen&#39; in duk_hstring.</span></div>
<div class="line"><span class="lineno">  111</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  112</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(!<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a063a69890b02606e47e67bb1fbf86ebd">DUK_HSTRING_HAS_ASCII</a>(res));</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">if</span> (clen == blen) {</div>
<div class="line"><span class="lineno">  114</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aab7aae247d2e549d233d6b3398de3fe4">DUK_HSTRING_SET_ASCII</a>(res);</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;interned string, hash=0x%08lx, blen=%ld, clen=%ld, has_arridx=%ld, has_extdata=%ld&quot;</span>,</div>
<div class="line"><span class="lineno">  118</span>                         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(res),</div>
<div class="line"><span class="lineno">  119</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(res),</div>
<div class="line"><span class="lineno">  120</span>                         (<span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a>(res),</div>
<div class="line"><span class="lineno">  121</span>                         (<span class="keywordtype">long</span>) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a>(res) ? 1 : 0),</div>
<div class="line"><span class="lineno">  122</span>                         (long) (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a606cd61e4cbb2e8b933f1c8bcce0e727">DUK_HSTRING_HAS_EXTDATA</a>(res) ? 1 : 0)));</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span> alloc_error:</div>
<div class="line"><span class="lineno">  127</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, res);</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  129</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a66a83b11b322fb452d3677f28ee7067f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a66a83b11b322fb452d3677f28ee7067f">duk_uarridx_t</a></div><div class="ttdeci">duk_uint_t duk_uarridx_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01842">duktape-1.5.2/src-noline/duk_config.h:1842</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ab0a71934d59f38f195fea2f353032392"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a></div><div class="ttdeci">size_t duk_size_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01770">duktape-1.5.2/src-noline/duk_config.h:1770</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ac7d67e911a142526da07c087049e1c90"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ac7d67e911a142526da07c087049e1c90">DUK_MEMCPY</a></div><div class="ttdeci">#define DUK_MEMCPY</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">duktape-1.5.2/src-noline/duk_config.h:1984</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ace325eaae44f64bffe3918e912d80ffc"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a></div><div class="ttdeci">#define DUK_MEMZERO(p, n)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">duktape-1.5.2/src-noline/duk_config.h:2056</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a063a69890b02606e47e67bb1fbf86ebd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a063a69890b02606e47e67bb1fbf86ebd">DUK_HSTRING_HAS_ASCII</a></div><div class="ttdeci">#define DUK_HSTRING_HAS_ASCII(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04444">duktape-1.5.2/src-noline/duktape.c:4444</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0dfd2f35f9df3e9cb779fc53495a42ab"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0dfd2f35f9df3e9cb779fc53495a42ab">duk_unicode_unvalidated_utf8_length</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_size_t duk_unicode_unvalidated_utf8_length(const duk_uint8_t *data, duk_size_t blen)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l10205">duktape-1.5.2/src-noline/duktape.c:10205</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1749cfba8c899b635e9adfb4ee2c647f"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1749cfba8c899b635e9adfb4ee2c647f">DUK_ALLOC</a></div><div class="ttdeci">#define DUK_ALLOC(heap, size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06862">duktape-1.5.2/src-noline/duktape.c:6862</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1e4f11391d7ea10d2791fbafb0d673b7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1e4f11391d7ea10d2791fbafb0d673b7">DUK_HEAPHDR_STRING_INIT_NULLS</a></div><div class="ttdeci">#define DUK_HEAPHDR_STRING_INIT_NULLS(h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03689">duktape-1.5.2/src-noline/duktape.c:3689</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2db20d2d3b36d8491ed171cf503488bb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a></div><div class="ttdeci">#define DUK_DDD(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">duktape-1.5.2/src-noline/duktape.c:7497</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a4a5456d628992ecc1075eaf902052bd7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a4a5456d628992ecc1075eaf902052bd7">DUK_HSTRING_GET_CHARLEN</a></div><div class="ttdeci">#define DUK_HSTRING_GET_CHARLEN(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">duktape-1.5.2/src-noline/duktape.c:4509</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a50dbac8614f67a4a6d575791664ebc07"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a50dbac8614f67a4a6d575791664ebc07">DUK_DPRINT</a></div><div class="ttdeci">#define DUK_DPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">duktape-1.5.2/src-noline/duktape.c:7507</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a52bc112231cf556000de414bca74c712"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a></div><div class="ttdeci">#define DUK_ASSERT(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">duktape-1.5.2/src-noline/duktape.c:7755</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5714704a21829a0ddc9de7c966cac20e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a></div><div class="ttdeci">#define DUK_HSTRING_GET_HASH(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">duktape-1.5.2/src-noline/duktape.c:4482</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a571cb7da08d904b60be353682be305a6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a></div><div class="ttdeci">#define DUK_FREE(heap, ptr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06866">duktape-1.5.2/src-noline/duktape.c:6866</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a606cd61e4cbb2e8b933f1c8bcce0e727"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a606cd61e4cbb2e8b933f1c8bcce0e727">DUK_HSTRING_HAS_EXTDATA</a></div><div class="ttdeci">#define DUK_HSTRING_HAS_EXTDATA(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04450">duktape-1.5.2/src-noline/duktape.c:4450</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a794f020e3c3eca6e8bff6e30ad4d6c1d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a794f020e3c3eca6e8bff6e30ad4d6c1d">duk_js_to_arrayindex_raw_string</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_small_int_t duk_js_to_arrayindex_raw_string(const duk_uint8_t *str, duk_uint32_t blen, duk_uarridx_t *out_idx)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l71043">duktape-1.5.2/src-noline/duktape.c:71043</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8067240555ec3eaebfa234e10a0ff5db"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a></div><div class="ttdeci">#define DUK_HSTRING_GET_BYTELEN(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">duktape-1.5.2/src-noline/duktape.c:4505</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a8704b72d1f3fa177ededd1c06ce8a6db"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8704b72d1f3fa177ededd1c06ce8a6db">DUK_HSTRING_SET_CHARLEN</a></div><div class="ttdeci">#define DUK_HSTRING_SET_CHARLEN(x, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04510">duktape-1.5.2/src-noline/duktape.c:4510</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a893ab69ddca3f842ab20e9b3a7e32839"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a893ab69ddca3f842ab20e9b3a7e32839">DUK_HSTRING_FLAG_EXTDATA</a></div><div class="ttdeci">#define DUK_HSTRING_FLAG_EXTDATA</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04442">duktape-1.5.2/src-noline/duktape.c:4442</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9d2e19e0c7220638df844e713c0060cd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9d2e19e0c7220638df844e713c0060cd">DUK_HSTRING_SET_HASH</a></div><div class="ttdeci">#define DUK_HSTRING_SET_HASH(x, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04483">duktape-1.5.2/src-noline/duktape.c:4483</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a9e1528b8eb0a41bc4b37a09a77961e6c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a9e1528b8eb0a41bc4b37a09a77961e6c">DUK_D</a></div><div class="ttdeci">#define DUK_D(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">duktape-1.5.2/src-noline/duktape.c:7495</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa0211fae3a88f941119872cdcfd28c36"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa0211fae3a88f941119872cdcfd28c36">DUK_HSTRING_SET_ARRIDX</a></div><div class="ttdeci">#define DUK_HSTRING_SET_ARRIDX(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04453">duktape-1.5.2/src-noline/duktape.c:4453</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa0b320581b741da4c9929dc9ab9555b5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa0b320581b741da4c9929dc9ab9555b5">DUK_HSTRING_HAS_INTERNAL</a></div><div class="ttdeci">#define DUK_HSTRING_HAS_INTERNAL(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04446">duktape-1.5.2/src-noline/duktape.c:4446</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa6e5d41ceaba6832e5ede737f0a35fb9"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a></div><div class="ttdeci">#define DUK_DDDPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">duktape-1.5.2/src-noline/duktape.c:7509</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aab7aae247d2e549d233d6b3398de3fe4"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aab7aae247d2e549d233d6b3398de3fe4">DUK_HSTRING_SET_ASCII</a></div><div class="ttdeci">#define DUK_HSTRING_SET_ASCII(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04452">duktape-1.5.2/src-noline/duktape.c:4452</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aaec5089c6e9d600e55c41a33c9c7a552"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aaec5089c6e9d600e55c41a33c9c7a552">DUK_HEAPHDR_SET_TYPE_AND_FLAGS</a></div><div class="ttdeci">#define DUK_HEAPHDR_SET_TYPE_AND_FLAGS(h, tval, fval)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03631">duktape-1.5.2/src-noline/duktape.c:3631</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_abccf8dd63a28559f531dbf155b82d44d"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#abccf8dd63a28559f531dbf155b82d44d">DUK_HSTRING_HAS_ARRIDX</a></div><div class="ttdeci">#define DUK_HSTRING_HAS_ARRIDX(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04445">duktape-1.5.2/src-noline/duktape.c:4445</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac222802fa2475f3a1f0c072c33cfd062"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac222802fa2475f3a1f0c072c33cfd062">DUK_HSTRING_SET_INTERNAL</a></div><div class="ttdeci">#define DUK_HSTRING_SET_INTERNAL(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04454">duktape-1.5.2/src-noline/duktape.c:4454</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac87ec07c2e5309a78f3c9f6cdb3e0e09"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac87ec07c2e5309a78f3c9f6cdb3e0e09">DUK_HSTRING_SET_BYTELEN</a></div><div class="ttdeci">#define DUK_HSTRING_SET_BYTELEN(x, v)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04506">duktape-1.5.2/src-noline/duktape.c:4506</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ae20fb3a64aa5d78e689513fd5e9095bb"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ae20fb3a64aa5d78e689513fd5e9095bb">DUK_HTYPE_STRING</a></div><div class="ttdeci">#define DUK_HTYPE_STRING</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03556">duktape-1.5.2/src-noline/duktape.c:3556</a></div></div>
<div class="ttc" id="agmacros_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="gmacros_8h_source.html#l00924">gmacros.h:924</a></div></div>
<div class="ttc" id="alua-5_83_86_2src_2lstrlib_8c_html_a7c1d654b7b6114d7a0abc8d351dd1bcd"><div class="ttname"><a href="lua-5_83_86_2src_2lstrlib_8c.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a></div><div class="ttdeci">int dummy</div><div class="ttdef"><b>Definition</b> <a href="lua-5_83_86_2src_2lstrlib_8c_source.html#l01125">lua-5.3.6/src/lstrlib.c:1125</a></div></div>
<div class="ttc" id="astructduk__hstring__external_html"><div class="ttname"><a href="structduk__hstring__external.html">duk_hstring_external</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04592">duktape-1.5.2/src-noline/duktape.c:4592</a></div></div>
<div class="ttc" id="astructduk__hstring_html"><div class="ttname"><a href="structduk__hstring.html">duk_hstring</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04546">duktape-1.5.2/src-noline/duktape.c:4546</a></div></div>
<div class="ttc" id="astructduk__hstring_html_ad39573461877e663fa96a3d994c1e6a3"><div class="ttname"><a href="structduk__hstring.html#ad39573461877e663fa96a3d994c1e6a3">duk_hstring::hdr</a></div><div class="ttdeci">duk_heaphdr_string hdr</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04552">duktape-1.5.2/src-noline/duktape.c:4552</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06862">DUK_ALLOC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07495">DUK_D</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07507">DUK_DPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06866">DUK_FREE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03631">DUK_HEAPHDR_SET_TYPE_AND_FLAGS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03689">DUK_HEAPHDR_STRING_INIT_NULLS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04442">DUK_HSTRING_FLAG_EXTDATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">DUK_HSTRING_GET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04509">DUK_HSTRING_GET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">DUK_HSTRING_GET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04445">DUK_HSTRING_HAS_ARRIDX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04444">DUK_HSTRING_HAS_ASCII</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04450">DUK_HSTRING_HAS_EXTDATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04446">DUK_HSTRING_HAS_INTERNAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04453">DUK_HSTRING_SET_ARRIDX</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04452">DUK_HSTRING_SET_ASCII</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04506">DUK_HSTRING_SET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04510">DUK_HSTRING_SET_CHARLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04483">DUK_HSTRING_SET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04454">DUK_HSTRING_SET_INTERNAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03556">DUK_HTYPE_STRING</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l71043">duk_js_to_arrayindex_raw_string()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01984">DUK_MEMCPY</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">DUK_MEMZERO</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l10205">duk_unicode_unvalidated_utf8_length()</a>, <a class="el" href="lua-5_83_86_2src_2lstrlib_8c_source.html#l01125">dummy</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04552">duk_hstring::hdr</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00833">duk__do_intern()</a>.</p>

</div>
</div>
<a id="a9f130d796bf547b5487612fb3c979d46" name="a9f130d796bf547b5487612fb3c979d46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f130d796bf547b5487612fb3c979d46">&#9670;&#160;</a></span>duk__count_used_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> duk__count_used_probe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00469">469</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  469</span>                                                          {</div>
<div class="line"><span class="lineno">  470</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a> res = 0;</div>
<div class="line"><span class="lineno">  471</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i, n;</div>
<div class="line"><span class="lineno">  472</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  473</span>    duk_uint16_t null16 = heap-&gt;heapptr_null16;</div>
<div class="line"><span class="lineno">  474</span>    duk_uint16_t deleted16 = heap-&gt;heapptr_deleted16;</div>
<div class="line"><span class="lineno">  475</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>    n = (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a>) heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a>;</div>
<div class="line"><span class="lineno">  478</span>    <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {</div>
<div class="line"><span class="lineno">  479</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  480</span>        <span class="keywordflow">if</span> (heap-&gt;strtable16[i] != null16 &amp;&amp; heap-&gt;strtable16[i] != deleted16) {</div>
<div class="line"><span class="lineno">  481</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  482</span>        <span class="keywordflow">if</span> (heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>[i] != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>[i] != <a class="code hl_define" href="#a45b6b1b1c54b48bb3c61db232dc94356">DUK__DELETED_MARKER</a>(heap)) {</div>
<div class="line"><span class="lineno">  483</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  484</span>            res++;</div>
<div class="line"><span class="lineno">  485</span>        }</div>
<div class="line"><span class="lineno">  486</span>    }</div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  488</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9dbc0fdd27e7326d21cbf56e6d40d8a5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9dbc0fdd27e7326d21cbf56e6d40d8a5">duk_int_t</a></div><div class="ttdeci">duk_int_fast32_t duk_int_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01785">duktape-1.5.2/src-noline/duk_config.h:1785</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_afb6f9b695c07e55f671ddef49a2c0fbd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a></div><div class="ttdeci">duk_uint32_t duk_uint_fast32_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01631">duktape-1.5.2/src-noline/duk_config.h:1631</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a45b6b1b1c54b48bb3c61db232dc94356"><div class="ttname"><a href="#a45b6b1b1c54b48bb3c61db232dc94356">DUK__DELETED_MARKER</a></div><div class="ttdeci">#define DUK__DELETED_MARKER(heap)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00010">duktape-1.8.0/src-separate/duk_heap_stringtable.c:10</a></div></div>
<div class="ttc" id="astructduk__heap_html_a465d9e78f80bec2ccad5459a2d869603"><div class="ttname"><a href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">duk_heap::strtable</a></div><div class="ttdeci">duk_hstring ** strtable</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07111">duktape-1.5.2/src-noline/duktape.c:7111</a></div></div>
<div class="ttc" id="astructduk__heap_html_aa249660205399aec495d86034217c9ee"><div class="ttname"><a href="structduk__heap.html#aa249660205399aec495d86034217c9ee">duk_heap::st_size</a></div><div class="ttdeci">duk_uint32_t st_size</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duktape-1.5.2/src-noline/duktape.c:7113</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00010">DUK__DELETED_MARKER</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duk__insert_hstring_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02555">DUK_LOCAL</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duk_heap::st_size</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07111">duk_heap::strtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00758">duk__resize_strtab_probe()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00647">duk__resize_strtab_raw_probe()</a>.</p>

</div>
</div>
<a id="ad00665675a49c44398e62e8fe26283cf" name="ad00665675a49c44398e62e8fe26283cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad00665675a49c44398e62e8fe26283cf">&#9670;&#160;</a></span>duk__do_intern()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk__do_intern </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>str</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>blen</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>strhash</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00833">833</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  833</span>                                                                                                                       {</div>
<div class="line"><span class="lineno">  834</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *res;</div>
<div class="line"><span class="lineno">  835</span>    <span class="keyword">const</span> duk_uint8_t *extdata;</div>
<div class="line"><span class="lineno">  836</span><span class="preprocessor">#if defined(DUK_USE_MARK_AND_SWEEP)</span></div>
<div class="line"><span class="lineno">  837</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> prev_mark_and_sweep_base_flags;</div>
<div class="line"><span class="lineno">  838</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>    <span class="comment">/* Prevent any side effects on the string table and the caller provided</span></div>
<div class="line"><span class="lineno">  841</span><span class="comment">     * str/blen arguments while interning is in progress.  For example, if</span></div>
<div class="line"><span class="lineno">  842</span><span class="comment">     * the caller provided str/blen from a dynamic buffer, a finalizer might</span></div>
<div class="line"><span class="lineno">  843</span><span class="comment">     * resize that dynamic buffer, invalidating the call arguments.</span></div>
<div class="line"><span class="lineno">  844</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  845</span><span class="preprocessor">#if defined(DUK_USE_MARK_AND_SWEEP)</span></div>
<div class="line"><span class="lineno">  846</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a94161c2cd17bbd439cef64cc8467b504">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a>) == 0);</div>
<div class="line"><span class="lineno">  847</span>    prev_mark_and_sweep_base_flags = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a>;</div>
<div class="line"><span class="lineno">  848</span>    <a class="code hl_define" href="#a93f7f9b1e1896c74cdf96eb2862c61ac">DUK__PREVENT_MS_SIDE_EFFECTS</a>(heap);</div>
<div class="line"><span class="lineno">  849</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span><span class="preprocessor">#if defined(DUK_USE_STRTAB_PROBE)</span></div>
<div class="line"><span class="lineno">  852</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#a2990d43bcd9db7bc7d40c49e4a740e1d">duk__recheck_strtab_size_probe</a>(heap, heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a5d596da450737ed3b0fa10c98a3609f8">st_used</a> + 1)) {</div>
<div class="line"><span class="lineno">  853</span>        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><span class="lineno">  854</span>    }</div>
<div class="line"><span class="lineno">  855</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  856</span> </div>
<div class="line"><span class="lineno">  857</span>    <span class="comment">/* For manual testing only. */</span></div>
<div class="line"><span class="lineno">  858</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno">  859</span>    {</div>
<div class="line"><span class="lineno">  860</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a> i;</div>
<div class="line"><span class="lineno">  861</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ae089cfe4107a5a3722fbc7afca7d361c">DUK_PRINTF</a>(<span class="stringliteral">&quot;INTERN: \&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  862</span>        <span class="keywordflow">for</span> (i = 0; i &lt; blen; i++) {</div>
<div class="line"><span class="lineno">  863</span>            duk_uint8_t x = str[i];</div>
<div class="line"><span class="lineno">  864</span>            <span class="keywordflow">if</span> (x &gt;= 0x20 &amp;&amp; x &lt;= 0x7e &amp;&amp; x != <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; x != <span class="charliteral">&#39;\\&#39;</span>) {</div>
<div class="line"><span class="lineno">  865</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ae089cfe4107a5a3722fbc7afca7d361c">DUK_PRINTF</a>(<span class="stringliteral">&quot;%c&quot;</span>, (<span class="keywordtype">int</span>) x);  <span class="comment">/* char: use int cast */</span></div>
<div class="line"><span class="lineno">  866</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  867</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ae089cfe4107a5a3722fbc7afca7d361c">DUK_PRINTF</a>(<span class="stringliteral">&quot;\\x%02lx&quot;</span>, (<span class="keywordtype">long</span>) x);</div>
<div class="line"><span class="lineno">  868</span>            }</div>
<div class="line"><span class="lineno">  869</span>        }</div>
<div class="line"><span class="lineno">  870</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ae089cfe4107a5a3722fbc7afca7d361c">DUK_PRINTF</a>(<span class="stringliteral">&quot;\&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  871</span>    }</div>
<div class="line"><span class="lineno">  872</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span><span class="preprocessor">#if defined(DUK_USE_HSTRING_EXTDATA) &amp;&amp; defined(DUK_USE_EXTSTR_INTERN_CHECK)</span></div>
<div class="line"><span class="lineno">  875</span>    extdata = (<span class="keyword">const</span> duk_uint8_t *) DUK_USE_EXTSTR_INTERN_CHECK(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">heap_udata</a>, (<span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3dca1621276fd32511c1425eb94a6609">DUK_LOSE_CONST</a>(str), (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) blen);</div>
<div class="line"><span class="lineno">  876</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  877</span>    extdata = (<span class="keyword">const</span> duk_uint8_t *) <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  878</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  879</span>    res = <a class="code hl_function" href="#a3b05fde10aa9d6a1dea9b3b0b3332db7">duk__alloc_init_hstring</a>(heap, str, blen, strhash, extdata);</div>
<div class="line"><span class="lineno">  880</span>    <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><span class="lineno">  881</span>        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><span class="lineno">  882</span>    }</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span><span class="preprocessor">#if defined(DUK_USE_STRTAB_CHAIN)</span></div>
<div class="line"><span class="lineno">  885</span>    <span class="keywordflow">if</span> (duk__insert_hstring_chain(heap, res)) {</div>
<div class="line"><span class="lineno">  886</span>        <span class="comment">/* failed */</span></div>
<div class="line"><span class="lineno">  887</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, res);</div>
<div class="line"><span class="lineno">  888</span>        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><span class="lineno">  889</span>    }</div>
<div class="line"><span class="lineno">  890</span><span class="preprocessor">#elif defined(DUK_USE_STRTAB_PROBE)</span></div>
<div class="line"><span class="lineno">  891</span>    <span class="comment">/* guaranteed to succeed */</span></div>
<div class="line"><span class="lineno">  892</span>    <a class="code hl_function" href="#a3428e8f3a818815ad550b1f36b525716">duk__insert_hstring_probe</a>(heap,</div>
<div class="line"><span class="lineno">  893</span>#<span class="keywordflow">if</span> defined(DUK_USE_HEAPPTR16)</div>
<div class="line"><span class="lineno">  894</span>                              heap-&gt;strtable16,</div>
<div class="line"><span class="lineno">  895</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  896</span>                              heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>,</div>
<div class="line"><span class="lineno">  897</span>#endif</div>
<div class="line"><span class="lineno">  898</span>                              heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a>,</div>
<div class="line"><span class="lineno">  899</span>                              &amp;heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a5d596da450737ed3b0fa10c98a3609f8">st_used</a>,</div>
<div class="line"><span class="lineno">  900</span>                              res);</div>
<div class="line"><span class="lineno">  901</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  902</span><span class="preprocessor">#error internal error, invalid strtab options</span></div>
<div class="line"><span class="lineno">  903</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>    <span class="comment">/* Note: hstring is in heap but has refcount zero and is not strongly reachable.</span></div>
<div class="line"><span class="lineno">  906</span><span class="comment">     * Caller should increase refcount and make the hstring reachable before any</span></div>
<div class="line"><span class="lineno">  907</span><span class="comment">     * operations which require allocation (and possible gc).</span></div>
<div class="line"><span class="lineno">  908</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  909</span> </div>
<div class="line"><span class="lineno">  910</span> done:</div>
<div class="line"><span class="lineno">  911</span><span class="preprocessor">#if defined(DUK_USE_MARK_AND_SWEEP)</span></div>
<div class="line"><span class="lineno">  912</span>    heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> = prev_mark_and_sweep_base_flags;</div>
<div class="line"><span class="lineno">  913</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  914</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span> failed:</div>
<div class="line"><span class="lineno">  917</span>    res = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  918</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  919</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a2b7ba45bf826058a9b7720b5e258efc6"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a></div><div class="ttdeci">unsigned int duk_small_uint_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01808">duktape-1.5.2/src-noline/duk_config.h:1808</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a3dca1621276fd32511c1425eb94a6609"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3dca1621276fd32511c1425eb94a6609">DUK_LOSE_CONST</a></div><div class="ttdeci">#define DUK_LOSE_CONST(src)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02511">duktape-1.5.2/src-noline/duk_config.h:2511</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ae089cfe4107a5a3722fbc7afca7d361c"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ae089cfe4107a5a3722fbc7afca7d361c">DUK_PRINTF</a></div><div class="ttdeci">#define DUK_PRINTF</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02006">duktape-1.5.2/src-noline/duk_config.h:2006</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a2990d43bcd9db7bc7d40c49e4a740e1d"><div class="ttname"><a href="#a2990d43bcd9db7bc7d40c49e4a740e1d">duk__recheck_strtab_size_probe</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__recheck_strtab_size_probe(duk_heap *heap, duk_uint32_t new_used)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00780">duktape-1.8.0/src-separate/duk_heap_stringtable.c:780</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a3428e8f3a818815ad550b1f36b525716"><div class="ttname"><a href="#a3428e8f3a818815ad550b1f36b525716">duk__insert_hstring_probe</a></div><div class="ttdeci">DUK_LOCAL void duk__insert_hstring_probe(duk_heap *heap, duk_hstring **entries, duk_uint32_t size, duk_uint32_t *p_used, duk_hstring *h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duktape-1.8.0/src-separate/duk_heap_stringtable.c:493</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a3b05fde10aa9d6a1dea9b3b0b3332db7"><div class="ttname"><a href="#a3b05fde10aa9d6a1dea9b3b0b3332db7">duk__alloc_init_hstring</a></div><div class="ttdeci">DUK_LOCAL duk_hstring * duk__alloc_init_hstring(duk_heap *heap, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t strhash, const duk_uint8_t *extdata)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00032">duktape-1.8.0/src-separate/duk_heap_stringtable.c:32</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a93f7f9b1e1896c74cdf96eb2862c61ac"><div class="ttname"><a href="#a93f7f9b1e1896c74cdf96eb2862c61ac">DUK__PREVENT_MS_SIDE_EFFECTS</a></div><div class="ttdeci">#define DUK__PREVENT_MS_SIDE_EFFECTS(heap)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00014">duktape-1.8.0/src-separate/duk_heap_stringtable.c:14</a></div></div>
<div class="ttc" id="astructduk__heap_html_a5d596da450737ed3b0fa10c98a3609f8"><div class="ttname"><a href="structduk__heap.html#a5d596da450737ed3b0fa10c98a3609f8">duk_heap::st_used</a></div><div class="ttdeci">duk_uint32_t st_used</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07114">duktape-1.5.2/src-noline/duktape.c:7114</a></div></div>
<div class="ttc" id="astructduk__heap_html_a6e176bfba7eee4c2986a33bc29387328"><div class="ttname"><a href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">duk_heap::heap_udata</a></div><div class="ttdeci">void * heap_udata</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06993">duktape-1.5.2/src-noline/duktape.c:6993</a></div></div>
<div class="ttc" id="astructduk__heap_html_a7a87c08de7b8e78f276558f447220229"><div class="ttname"><a href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">duk_heap::mark_and_sweep_base_flags</a></div><div class="ttdeci">duk_small_uint_t mark_and_sweep_base_flags</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07028">duktape-1.5.2/src-noline/duktape.c:7028</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00032">duk__alloc_init_hstring()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duk__insert_hstring_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00014">DUK__PREVENT_MS_SIDE_EFFECTS</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00780">duk__recheck_strtab_size_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06866">DUK_FREE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02511">DUK_LOSE_CONST</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06719">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02006">DUK_PRINTF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06993">duk_heap::heap_udata</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07028">duk_heap::mark_and_sweep_base_flags</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duk_heap::st_size</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07114">duk_heap::st_used</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07111">duk_heap::strtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00980">duk_heap_string_intern()</a>.</p>

</div>
</div>
<a id="a4448feb38a6ba3056b574b94a2d0dbf3" name="a4448feb38a6ba3056b574b94a2d0dbf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4448feb38a6ba3056b574b94a2d0dbf3">&#9670;&#160;</a></span>duk__do_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk__do_lookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>str</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>blen</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t *</td>          <td class="paramname"><span class="paramname"><em>out_strhash</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00921">921</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  921</span>                                                                                                                            {</div>
<div class="line"><span class="lineno">  922</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *res;</div>
<div class="line"><span class="lineno">  923</span> </div>
<div class="line"><span class="lineno">  924</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(out_strhash);</div>
<div class="line"><span class="lineno">  925</span> </div>
<div class="line"><span class="lineno">  926</span>    *out_strhash = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac0a875f0d34a13cb7e911edb44a94ea2">duk_heap_hashstring</a>(heap, str, (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ab0a71934d59f38f195fea2f353032392">duk_size_t</a>) blen);</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span><span class="preprocessor">#if defined(DUK_USE_ROM_STRINGS)</span></div>
<div class="line"><span class="lineno">  929</span>    {</div>
<div class="line"><span class="lineno">  930</span>        <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> i;</div>
<div class="line"><span class="lineno">  931</span>        <span class="comment">/* XXX: This is VERY inefficient now, and should be e.g. a</span></div>
<div class="line"><span class="lineno">  932</span><span class="comment">         * binary search or perfect hash, to be fixed.</span></div>
<div class="line"><span class="lineno">  933</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  934</span>        <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a>) (<span class="keyword">sizeof</span>(duk_rom_strings) / <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *)); i++) {</div>
<div class="line"><span class="lineno">  935</span>            <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *romstr;</div>
<div class="line"><span class="lineno">  936</span>            romstr = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a3dca1621276fd32511c1425eb94a6609">DUK_LOSE_CONST</a>(duk_rom_strings[i]);</div>
<div class="line"><span class="lineno">  937</span>            <span class="keywordflow">if</span> (blen == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(romstr) &amp;&amp;</div>
<div class="line"><span class="lineno">  938</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a>((<span class="keyword">const</span> <span class="keywordtype">void</span> *) str, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(romstr), blen) == 0) {</div>
<div class="line"><span class="lineno">  939</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;intern check: rom string: %!O, computed hash 0x%08lx, rom hash 0x%08lx&quot;</span>,</div>
<div class="line"><span class="lineno">  940</span>                                   romstr, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) *out_strhash, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(romstr)));</div>
<div class="line"><span class="lineno">  941</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(*out_strhash == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(romstr));</div>
<div class="line"><span class="lineno">  942</span>                *out_strhash = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(romstr);</div>
<div class="line"><span class="lineno">  943</span>                <span class="keywordflow">return</span> romstr;</div>
<div class="line"><span class="lineno">  944</span>            }</div>
<div class="line"><span class="lineno">  945</span>        }</div>
<div class="line"><span class="lineno">  946</span>    }</div>
<div class="line"><span class="lineno">  947</span><span class="preprocessor">#endif  </span><span class="comment">/* DUK_USE_ROM_STRINGS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span><span class="preprocessor">#if defined(DUK_USE_STRTAB_CHAIN)</span></div>
<div class="line"><span class="lineno">  950</span>    res = duk__find_matching_string_chain(heap, str, blen, *out_strhash);</div>
<div class="line"><span class="lineno">  951</span><span class="preprocessor">#elif defined(DUK_USE_STRTAB_PROBE)</span></div>
<div class="line"><span class="lineno">  952</span>    res = <a class="code hl_function" href="#ab75aa1b37a85056863039ccd41e08d39">duk__find_matching_string_probe</a>(heap,</div>
<div class="line"><span class="lineno">  953</span>#<span class="keywordflow">if</span> defined(DUK_USE_HEAPPTR16)</div>
<div class="line"><span class="lineno">  954</span>                                          heap-&gt;strtable16,</div>
<div class="line"><span class="lineno">  955</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  956</span>                                          heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>,</div>
<div class="line"><span class="lineno">  957</span>#endif</div>
<div class="line"><span class="lineno">  958</span>                                          heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a>,</div>
<div class="line"><span class="lineno">  959</span>                                          str,</div>
<div class="line"><span class="lineno">  960</span>                                          blen,</div>
<div class="line"><span class="lineno">  961</span>                                          *out_strhash);</div>
<div class="line"><span class="lineno">  962</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  963</span><span class="preprocessor">#error internal error, invalid strtab options</span></div>
<div class="line"><span class="lineno">  964</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  965</span> </div>
<div class="line"><span class="lineno">  966</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  967</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a5748c5ede90636bdffe6aeda7714bc93"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a></div><div class="ttdeci">#define DUK_MEMCMP</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">duktape-1.5.2/src-noline/duk_config.h:1991</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a0d205166ff35a99b65ad9032423e6c42"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a></div><div class="ttdeci">#define DUK_HSTRING_GET_DATA(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">duktape-1.5.2/src-noline/duktape.c:4522</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6c3a2adb6e09294c7e65f69821e5e81a"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a></div><div class="ttdeci">#define DUK_DD(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">duktape-1.5.2/src-noline/duktape.c:7496</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_aa66ca9adc2b4187c5d549a9b117b03d3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a></div><div class="ttdeci">#define DUK_DDPRINT</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">duktape-1.5.2/src-noline/duktape.c:7508</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ac0a875f0d34a13cb7e911edb44a94ea2"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ac0a875f0d34a13cb7e911edb44a94ea2">duk_heap_hashstring</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_uint32_t duk_heap_hashstring(duk_heap *heap, const duk_uint8_t *str, duk_size_t len)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l41829">duktape-1.5.2/src-noline/duktape.c:41829</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_ab75aa1b37a85056863039ccd41e08d39"><div class="ttname"><a href="#ab75aa1b37a85056863039ccd41e08d39">duk__find_matching_string_probe</a></div><div class="ttdeci">DUK_LOCAL duk_hstring * duk__find_matching_string_probe(duk_heap *heap, duk_hstring **entries, duk_uint32_t size, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t strhash)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00554">duktape-1.8.0/src-separate/duk_heap_stringtable.c:554</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00554">duk__find_matching_string_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l41829">duk_heap_hashstring()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">DUK_HSTRING_GET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">DUK_HSTRING_GET_DATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">DUK_HSTRING_GET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02511">DUK_LOSE_CONST</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">DUK_MEMCMP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duk_heap::st_size</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07111">duk_heap::strtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00980">duk_heap_string_intern()</a>.</p>

</div>
</div>
<a id="ab75aa1b37a85056863039ccd41e08d39" name="ab75aa1b37a85056863039ccd41e08d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab75aa1b37a85056863039ccd41e08d39">&#9670;&#160;</a></span>duk__find_matching_string_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk__find_matching_string_probe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> **</td>          <td class="paramname"><span class="paramname"><em>entries</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>size</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>str</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>blen</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>strhash</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00554">554</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  554</span>                                                                                                                                                                                  {</div>
<div class="line"><span class="lineno">  555</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  556</span>    duk_uint32_t i;</div>
<div class="line"><span class="lineno">  557</span>    duk_uint32_t step;</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(size &gt; 0);</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>    i = <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(strhash, size);</div>
<div class="line"><span class="lineno">  562</span>    step = <a class="code hl_define" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(strhash);</div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  564</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *e;</div>
<div class="line"><span class="lineno">  565</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  566</span>        e = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) DUK_USE_HEAPPTR_DEC16(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">heap_udata</a>, entries16[i]);</div>
<div class="line"><span class="lineno">  567</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  568</span>        e = entries[i];</div>
<div class="line"><span class="lineno">  569</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>        <span class="keywordflow">if</span> (!e) {</div>
<div class="line"><span class="lineno">  572</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  573</span>        }</div>
<div class="line"><span class="lineno">  574</span>        <span class="keywordflow">if</span> (e != <a class="code hl_define" href="#a45b6b1b1c54b48bb3c61db232dc94356">DUK__DELETED_MARKER</a>(heap) &amp;&amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a8067240555ec3eaebfa234e10a0ff5db">DUK_HSTRING_GET_BYTELEN</a>(e) == blen) {</div>
<div class="line"><span class="lineno">  575</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a5748c5ede90636bdffe6aeda7714bc93">DUK_MEMCMP</a>((<span class="keyword">const</span> <span class="keywordtype">void</span> *) str, (<span class="keyword">const</span> <span class="keywordtype">void</span> *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0d205166ff35a99b65ad9032423e6c42">DUK_HSTRING_GET_DATA</a>(e), (<span class="keywordtype">size_t</span>) blen) == 0) {</div>
<div class="line"><span class="lineno">  576</span>                <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;find matching hit: %ld (step %ld, size %ld)&quot;</span>,</div>
<div class="line"><span class="lineno">  577</span>                                     (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) step, (<span class="keywordtype">long</span>) size));</div>
<div class="line"><span class="lineno">  578</span>                <span class="keywordflow">return</span> e;</div>
<div class="line"><span class="lineno">  579</span>            }</div>
<div class="line"><span class="lineno">  580</span>        }</div>
<div class="line"><span class="lineno">  581</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;find matching miss: %ld (step %ld, size %ld)&quot;</span>,</div>
<div class="line"><span class="lineno">  582</span>                             (<span class="keywordtype">long</span>) i, (<span class="keywordtype">long</span>) step, (<span class="keywordtype">long</span>) size));</div>
<div class="line"><span class="lineno">  583</span>        i = (i + step) % size;</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>        <span class="comment">/* looping should never happen */</span></div>
<div class="line"><span class="lineno">  586</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i != <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(strhash, size));</div>
<div class="line"><span class="lineno">  587</span>    }</div>
<div class="line"><span class="lineno">  588</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno">  589</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a0f457284c000920f86441b7ca7cbfe08"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a></div><div class="ttdeci">#define DUK_UNREACHABLE()</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">duktape-1.5.2/src-noline/duk_config.h:2504</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a6286b0f2c1cfd532a5f7047877afec54"><div class="ttname"><a href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a></div><div class="ttdeci">#define DUK__HASH_INITIAL(hash, h_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00008">duktape-1.8.0/src-separate/duk_heap_stringtable.c:8</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a8d41695de6e417ad8ee1d548fe2c03fd"><div class="ttname"><a href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a></div><div class="ttdeci">#define DUK__HASH_PROBE_STEP(hash)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00009">duktape-1.8.0/src-separate/duk_heap_stringtable.c:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00010">DUK__DELETED_MARKER</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00008">DUK__HASH_INITIAL</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00009">DUK__HASH_PROBE_STEP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04505">DUK_HSTRING_GET_BYTELEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04522">DUK_HSTRING_GET_DATA</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01991">DUK_MEMCMP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06993">duk_heap::heap_udata</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00921">duk__do_lookup()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duk__insert_hstring_probe()</a>.</p>

</div>
</div>
<a id="a3428e8f3a818815ad550b1f36b525716" name="a3428e8f3a818815ad550b1f36b525716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3428e8f3a818815ad550b1f36b525716">&#9670;&#160;</a></span>duk__insert_hstring_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__insert_hstring_probe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> **</td>          <td class="paramname"><span class="paramname"><em>entries</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>size</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t *</td>          <td class="paramname"><span class="paramname"><em>p_used</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>h</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">493</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  493</span>                                                                                                                                         {</div>
<div class="line"><span class="lineno">  494</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  495</span>    duk_uint32_t i;</div>
<div class="line"><span class="lineno">  496</span>    duk_uint32_t step;</div>
<div class="line"><span class="lineno">  497</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  498</span>    duk_uint16_t null16 = heap-&gt;heapptr_null16;</div>
<div class="line"><span class="lineno">  499</span>    duk_uint16_t deleted16 = heap-&gt;heapptr_deleted16;</div>
<div class="line"><span class="lineno">  500</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(size &gt; 0);</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>    i = <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(h), size);</div>
<div class="line"><span class="lineno">  505</span>    step = <a class="code hl_define" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(h));</div>
<div class="line"><span class="lineno">  506</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  507</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  508</span>        duk_uint16_t e16 = entries16[i];</div>
<div class="line"><span class="lineno">  509</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  510</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *e = entries[i];</div>
<div class="line"><span class="lineno">  511</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  514</span>        <span class="comment">/* XXX: could check for e16 == 0 because NULL is guaranteed to</span></div>
<div class="line"><span class="lineno">  515</span><span class="comment">         * encode to zero.</span></div>
<div class="line"><span class="lineno">  516</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  517</span>        <span class="keywordflow">if</span> (e16 == null16) {</div>
<div class="line"><span class="lineno">  518</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">if</span> (e == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="lineno">  520</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  521</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;insert hit (null): %ld&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno">  522</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  523</span>            entries16[i] = DUK_USE_HEAPPTR_ENC16(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">heap_udata</a>, (<span class="keywordtype">void</span> *) h);</div>
<div class="line"><span class="lineno">  524</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  525</span>            entries[i] = h;</div>
<div class="line"><span class="lineno">  526</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  527</span>            (*p_used)++;</div>
<div class="line"><span class="lineno">  528</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  529</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  530</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e16 == deleted16) {</div>
<div class="line"><span class="lineno">  531</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  532</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e == <a class="code hl_define" href="#a45b6b1b1c54b48bb3c61db232dc94356">DUK__DELETED_MARKER</a>(heap)) {</div>
<div class="line"><span class="lineno">  533</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  534</span>            <span class="comment">/* st_used remains the same, DELETED is counted as used */</span></div>
<div class="line"><span class="lineno">  535</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;insert hit (deleted): %ld&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno">  536</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  537</span>            entries16[i] = DUK_USE_HEAPPTR_ENC16(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">heap_udata</a>, (<span class="keywordtype">void</span> *) h);</div>
<div class="line"><span class="lineno">  538</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  539</span>            entries[i] = h;</div>
<div class="line"><span class="lineno">  540</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  541</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  542</span>        }</div>
<div class="line"><span class="lineno">  543</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;insert miss: %ld&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno">  544</span>        i = (i + step) % size;</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>        <span class="comment">/* looping should never happen */</span></div>
<div class="line"><span class="lineno">  547</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i != <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(h), size));</div>
<div class="line"><span class="lineno">  548</span>    }</div>
<div class="line"><span class="lineno">  549</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00010">DUK__DELETED_MARKER</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00554">duk__find_matching_string_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00008">DUK__HASH_INITIAL</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00009">DUK__HASH_PROBE_STEP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">DUK_HSTRING_GET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02555">DUK_LOCAL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06993">duk_heap::heap_udata</a>, and <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00469">duk__count_used_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00833">duk__do_intern()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00647">duk__resize_strtab_raw_probe()</a>.</p>

</div>
</div>
<a id="a2990d43bcd9db7bc7d40c49e4a740e1d" name="a2990d43bcd9db7bc7d40c49e4a740e1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2990d43bcd9db7bc7d40c49e4a740e1d">&#9670;&#160;</a></span>duk__recheck_strtab_size_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__recheck_strtab_size_probe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>new_used</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00780">780</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  780</span>                                                                                           {</div>
<div class="line"><span class="lineno">  781</span>    duk_uint32_t new_free;</div>
<div class="line"><span class="lineno">  782</span>    duk_uint32_t tmp1;</div>
<div class="line"><span class="lineno">  783</span>    duk_uint32_t tmp2;</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_used &lt;= heap-&gt;st_size);  <span class="comment">/* grow by at most one */</span></div>
<div class="line"><span class="lineno">  786</span>    new_free = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a> - new_used;    <span class="comment">/* unsigned intentionally */</span></div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>    <span class="comment">/* new_free / size &lt;= 1 / DIV  &lt;=&gt;  new_free &lt;= size / DIV */</span></div>
<div class="line"><span class="lineno">  789</span>    <span class="comment">/* new_used / size &lt;= 1 / DIV  &lt;=&gt;  new_used &lt;= size / DIV */</span></div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>    tmp1 = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a> / <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2f66b85480a244981dcb6832036ae1dd">DUK_STRTAB_MIN_FREE_DIVISOR</a>;</div>
<div class="line"><span class="lineno">  792</span>    tmp2 = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a> / <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1f6625c1edf0439f90b31d12dbc9c13e">DUK_STRTAB_MIN_USED_DIVISOR</a>;</div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>    <span class="keywordflow">if</span> (new_free &lt;= tmp1 || new_used &lt;= tmp2) {</div>
<div class="line"><span class="lineno">  795</span>        <span class="comment">/* load factor too low or high, count actually used entries and resize */</span></div>
<div class="line"><span class="lineno">  796</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="#a59b1aeceb1237746618278c7c03d699b">duk__resize_strtab_probe</a>(heap);</div>
<div class="line"><span class="lineno">  797</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  798</span>        <span class="keywordflow">return</span> 0;  <span class="comment">/* OK */</span></div>
<div class="line"><span class="lineno">  799</span>    }</div>
<div class="line"><span class="lineno">  800</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a1f6625c1edf0439f90b31d12dbc9c13e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1f6625c1edf0439f90b31d12dbc9c13e">DUK_STRTAB_MIN_USED_DIVISOR</a></div><div class="ttdeci">#define DUK_STRTAB_MIN_USED_DIVISOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06787">duktape-1.5.2/src-noline/duktape.c:6787</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a2f66b85480a244981dcb6832036ae1dd"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2f66b85480a244981dcb6832036ae1dd">DUK_STRTAB_MIN_FREE_DIVISOR</a></div><div class="ttdeci">#define DUK_STRTAB_MIN_FREE_DIVISOR</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06786">duktape-1.5.2/src-noline/duktape.c:6786</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a59b1aeceb1237746618278c7c03d699b"><div class="ttname"><a href="#a59b1aeceb1237746618278c7c03d699b">duk__resize_strtab_probe</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__resize_strtab_probe(duk_heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00758">duktape-1.8.0/src-separate/duk_heap_stringtable.c:758</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00758">duk__resize_strtab_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06786">DUK_STRTAB_MIN_FREE_DIVISOR</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06787">DUK_STRTAB_MIN_USED_DIVISOR</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duk_heap::st_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00833">duk__do_intern()</a>.</p>

</div>
</div>
<a id="aa0a3cf3658806992f97407c5ca2b9d6c" name="aa0a3cf3658806992f97407c5ca2b9d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0a3cf3658806992f97407c5ca2b9d6c">&#9670;&#160;</a></span>duk__remove_matching_hstring_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> void duk__remove_matching_hstring_probe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> **</td>          <td class="paramname"><span class="paramname"><em>entries</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>size</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>h</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00594">594</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  594</span>                                                                                                                            {</div>
<div class="line"><span class="lineno">  595</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  596</span>    duk_uint32_t i;</div>
<div class="line"><span class="lineno">  597</span>    duk_uint32_t step;</div>
<div class="line"><span class="lineno">  598</span>    duk_uint32_t hash;</div>
<div class="line"><span class="lineno">  599</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  600</span>    duk_uint16_t null16 = heap-&gt;heapptr_null16;</div>
<div class="line"><span class="lineno">  601</span>    duk_uint16_t h16 = DUK_USE_HEAPPTR_ENC16(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">heap_udata</a>, (<span class="keywordtype">void</span> *) h);</div>
<div class="line"><span class="lineno">  602</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(size &gt; 0);</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>    hash = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5714704a21829a0ddc9de7c966cac20e">DUK_HSTRING_GET_HASH</a>(h);</div>
<div class="line"><span class="lineno">  607</span>    i = <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(hash, size);</div>
<div class="line"><span class="lineno">  608</span>    step = <a class="code hl_define" href="#a8d41695de6e417ad8ee1d548fe2c03fd">DUK__HASH_PROBE_STEP</a>(hash);</div>
<div class="line"><span class="lineno">  609</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  610</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  611</span>        duk_uint16_t e16 = entries16[i];</div>
<div class="line"><span class="lineno">  612</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  613</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *e = entries[i];</div>
<div class="line"><span class="lineno">  614</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  617</span>        <span class="keywordflow">if</span> (e16 == null16) {</div>
<div class="line"><span class="lineno">  618</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  619</span>        <span class="keywordflow">if</span> (!e) {</div>
<div class="line"><span class="lineno">  620</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  621</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a0f457284c000920f86441b7ca7cbfe08">DUK_UNREACHABLE</a>();</div>
<div class="line"><span class="lineno">  622</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  623</span>        }</div>
<div class="line"><span class="lineno">  624</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  625</span>        <span class="keywordflow">if</span> (e16 == h16) {</div>
<div class="line"><span class="lineno">  626</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">if</span> (e == h) {</div>
<div class="line"><span class="lineno">  628</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  629</span>            <span class="comment">/* st_used remains the same, DELETED is counted as used */</span></div>
<div class="line"><span class="lineno">  630</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;free matching hit: %ld&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno">  631</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  632</span>            entries16[i] = heap-&gt;heapptr_deleted16;</div>
<div class="line"><span class="lineno">  633</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  634</span>            entries[i] = <a class="code hl_define" href="#a45b6b1b1c54b48bb3c61db232dc94356">DUK__DELETED_MARKER</a>(heap);</div>
<div class="line"><span class="lineno">  635</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  636</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  637</span>        }</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;free matching miss: %ld&quot;</span>, (<span class="keywordtype">long</span>) i));</div>
<div class="line"><span class="lineno">  640</span>        i = (i + step) % size;</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>        <span class="comment">/* looping should never happen */</span></div>
<div class="line"><span class="lineno">  643</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(i != <a class="code hl_define" href="#a6286b0f2c1cfd532a5f7047877afec54">DUK__HASH_INITIAL</a>(hash, size));</div>
<div class="line"><span class="lineno">  644</span>    }</div>
<div class="line"><span class="lineno">  645</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00010">DUK__DELETED_MARKER</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00008">DUK__HASH_INITIAL</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00009">DUK__HASH_PROBE_STEP</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04482">DUK_HSTRING_GET_HASH</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02504">DUK_UNREACHABLE</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06993">duk_heap::heap_udata</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01032">duk_heap_string_remove()</a>.</p>

</div>
</div>
<a id="a59b1aeceb1237746618278c7c03d699b" name="a59b1aeceb1237746618278c7c03d699b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59b1aeceb1237746618278c7c03d699b">&#9670;&#160;</a></span>duk__resize_strtab_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__resize_strtab_probe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00758">758</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  758</span>                                                              {</div>
<div class="line"><span class="lineno">  759</span>    duk_uint32_t new_size;</div>
<div class="line"><span class="lineno">  760</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> ret;</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>    new_size = (duk_uint32_t) <a class="code hl_function" href="#a9f130d796bf547b5487612fb3c979d46">duk__count_used_probe</a>(heap);</div>
<div class="line"><span class="lineno">  763</span>    <span class="keywordflow">if</span> (new_size &gt;= 0x80000000UL) {</div>
<div class="line"><span class="lineno">  764</span>        new_size = <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6cc8d3b647a6afc26f8809d6412e3c34">DUK_STRTAB_HIGHEST_32BIT_PRIME</a>;</div>
<div class="line"><span class="lineno">  765</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  766</span>        new_size = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#add081b8d394737cd2d305367a92db894">duk_util_get_hash_prime</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a82de04feb816d7032f5521b44317a6ed">DUK_STRTAB_GROW_ST_SIZE</a>(new_size));</div>
<div class="line"><span class="lineno">  767</span>        new_size = <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#add081b8d394737cd2d305367a92db894">duk_util_get_hash_prime</a>(new_size);</div>
<div class="line"><span class="lineno">  768</span>    }</div>
<div class="line"><span class="lineno">  769</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_size &gt; 0);</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>    <span class="comment">/* rehash even if old and new sizes are the same to get rid of</span></div>
<div class="line"><span class="lineno">  772</span><span class="comment">     * DELETED entries.</span></div>
<div class="line"><span class="lineno">  773</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>    ret = <a class="code hl_function" href="#a738e7f4b92146cc124054b0a5311f738">duk__resize_strtab_raw_probe</a>(heap, new_size);</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  778</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_af32ca4c30431e819676401ce2b11c2e7"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a></div><div class="ttdeci">duk_small_int_t duk_bool_t</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01825">duktape-1.5.2/src-noline/duk_config.h:1825</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a6cc8d3b647a6afc26f8809d6412e3c34"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6cc8d3b647a6afc26f8809d6412e3c34">DUK_STRTAB_HIGHEST_32BIT_PRIME</a></div><div class="ttdeci">#define DUK_STRTAB_HIGHEST_32BIT_PRIME</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06791">duktape-1.5.2/src-noline/duktape.c:6791</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a82de04feb816d7032f5521b44317a6ed"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a82de04feb816d7032f5521b44317a6ed">DUK_STRTAB_GROW_ST_SIZE</a></div><div class="ttdeci">#define DUK_STRTAB_GROW_ST_SIZE(n)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06788">duktape-1.5.2/src-noline/duktape.c:6788</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_add081b8d394737cd2d305367a92db894"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#add081b8d394737cd2d305367a92db894">duk_util_get_hash_prime</a></div><div class="ttdeci">DUK_INTERNAL_DECL duk_uint32_t duk_util_get_hash_prime(duk_uint32_t size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l11326">duktape-1.5.2/src-noline/duktape.c:11326</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a738e7f4b92146cc124054b0a5311f738"><div class="ttname"><a href="#a738e7f4b92146cc124054b0a5311f738">duk__resize_strtab_raw_probe</a></div><div class="ttdeci">DUK_LOCAL duk_bool_t duk__resize_strtab_raw_probe(duk_heap *heap, duk_uint32_t new_size)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00647">duktape-1.8.0/src-separate/duk_heap_stringtable.c:647</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a9f130d796bf547b5487612fb3c979d46"><div class="ttname"><a href="#a9f130d796bf547b5487612fb3c979d46">duk__count_used_probe</a></div><div class="ttdeci">DUK_LOCAL duk_int_t duk__count_used_probe(duk_heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00469">duktape-1.8.0/src-separate/duk_heap_stringtable.c:469</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00469">duk__count_used_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00647">duk__resize_strtab_raw_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06788">DUK_STRTAB_GROW_ST_SIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06791">DUK_STRTAB_HIGHEST_32BIT_PRIME</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l11326">duk_util_get_hash_prime()</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00780">duk__recheck_strtab_size_probe()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01053">duk_heap_force_strtab_resize()</a>.</p>

</div>
</div>
<a id="a738e7f4b92146cc124054b0a5311f738" name="a738e7f4b92146cc124054b0a5311f738"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a738e7f4b92146cc124054b0a5311f738">&#9670;&#160;</a></span>duk__resize_strtab_raw_probe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a245b431abb36cac1ac8d0eae054ed5c1">DUK_LOCAL</a> <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#af32ca4c30431e819676401ce2b11c2e7">duk_bool_t</a> duk__resize_strtab_raw_probe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>new_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00647">647</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  647</span>                                                                                         {</div>
<div class="line"><span class="lineno">  648</span><span class="preprocessor">#if defined(DUK_USE_DEBUG)</span></div>
<div class="line"><span class="lineno">  649</span>    duk_uint32_t old_used = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a5d596da450737ed3b0fa10c98a3609f8">st_used</a>;</div>
<div class="line"><span class="lineno">  650</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  651</span>    duk_uint32_t old_size = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a>;</div>
<div class="line"><span class="lineno">  652</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  653</span>    duk_uint16_t *old_entries = heap-&gt;strtable16;</div>
<div class="line"><span class="lineno">  654</span>    duk_uint16_t *new_entries = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  655</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  656</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> **old_entries = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>;</div>
<div class="line"><span class="lineno">  657</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> **new_entries = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  658</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  659</span>    duk_uint32_t new_used = 0;</div>
<div class="line"><span class="lineno">  660</span>    duk_uint32_t i;</div>
<div class="line"><span class="lineno">  661</span> </div>
<div class="line"><span class="lineno">  662</span><span class="preprocessor">#if defined(DUK_USE_DEBUG)</span></div>
<div class="line"><span class="lineno">  663</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(old_used);  <span class="comment">/* unused with some debug level combinations */</span></div>
<div class="line"><span class="lineno">  664</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span><span class="preprocessor">#ifdef DUK_USE_DDDPRINT</span></div>
<div class="line"><span class="lineno">  667</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;attempt to resize stringtable: %ld entries, %ld bytes, %ld used, %ld%% load -&gt; %ld entries, %ld bytes, %ld used, %ld%% load&quot;</span>,</div>
<div class="line"><span class="lineno">  668</span>                         (<span class="keywordtype">long</span>) old_size, (<span class="keywordtype">long</span>) (<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) * old_size), (<span class="keywordtype">long</span>) old_used,</div>
<div class="line"><span class="lineno">  669</span>                         (<span class="keywordtype">long</span>) (((<span class="keywordtype">double</span>) old_used) / ((<span class="keywordtype">double</span>) old_size) * 100.0),</div>
<div class="line"><span class="lineno">  670</span>                         (<span class="keywordtype">long</span>) new_size, (<span class="keywordtype">long</span>) (<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) * new_size), (<span class="keywordtype">long</span>) <a class="code hl_function" href="#a9f130d796bf547b5487612fb3c979d46">duk__count_used_probe</a>(heap),</div>
<div class="line"><span class="lineno">  671</span>                         (<span class="keywordtype">long</span>) (((<span class="keywordtype">double</span>) <a class="code hl_function" href="#a9f130d796bf547b5487612fb3c979d46">duk__count_used_probe</a>(heap)) / ((<span class="keywordtype">double</span>) new_size) * 100.0)));</div>
<div class="line"><span class="lineno">  672</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  673</span> </div>
<div class="line"><span class="lineno">  674</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(new_size &gt; (duk_uint32_t) <a class="code hl_function" href="#a9f130d796bf547b5487612fb3c979d46">duk__count_used_probe</a>(heap));  <span class="comment">/* required for rehash to succeed, equality not that useful */</span></div>
<div class="line"><span class="lineno">  675</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(old_entries);</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  678</span><span class="comment">     *  The attempt to allocate may cause a GC.  Such a GC must not attempt to resize</span></div>
<div class="line"><span class="lineno">  679</span><span class="comment">     *  the stringtable (though it can be swept); finalizer execution and object</span></div>
<div class="line"><span class="lineno">  680</span><span class="comment">     *  compaction must also be postponed to avoid the pressure to add strings to the</span></div>
<div class="line"><span class="lineno">  681</span><span class="comment">     *  string table.  Call site must prevent these.</span></div>
<div class="line"><span class="lineno">  682</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span><span class="preprocessor">#if defined(DUK_USE_MARK_AND_SWEEP)</span></div>
<div class="line"><span class="lineno">  685</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a94161c2cd17bbd439cef64cc8467b504">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a>);</div>
<div class="line"><span class="lineno">  686</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5a28b04424e5e385313e2e5821eb3a97">DUK_MS_FLAG_NO_FINALIZERS</a>);</div>
<div class="line"><span class="lineno">  687</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a0305cbeb6c7973f1ac43e4c9553fd69b">DUK_MS_FLAG_NO_OBJECT_COMPACTION</a>);</div>
<div class="line"><span class="lineno">  688</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  691</span>    new_entries = (duk_uint16_t *) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1749cfba8c899b635e9adfb4ee2c647f">DUK_ALLOC</a>(heap, <span class="keyword">sizeof</span>(duk_uint16_t) * new_size);</div>
<div class="line"><span class="lineno">  692</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  693</span>    new_entries = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> **) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a1749cfba8c899b635e9adfb4ee2c647f">DUK_ALLOC</a>(heap, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) * new_size);</div>
<div class="line"><span class="lineno">  694</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  695</span> </div>
<div class="line"><span class="lineno">  696</span>    <span class="keywordflow">if</span> (!new_entries) {</div>
<div class="line"><span class="lineno">  697</span>        <span class="keywordflow">goto</span> resize_error;</div>
<div class="line"><span class="lineno">  698</span>    }</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span><span class="preprocessor">#if defined(DUK_USE_EXPLICIT_NULL_INIT)</span></div>
<div class="line"><span class="lineno">  701</span>    <span class="keywordflow">for</span> (i = 0; i &lt; new_size; i++) {</div>
<div class="line"><span class="lineno">  702</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  703</span>        new_entries[i] = heap-&gt;heapptr_null16;</div>
<div class="line"><span class="lineno">  704</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  705</span>        new_entries[i] = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno">  706</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  707</span>    }</div>
<div class="line"><span class="lineno">  708</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  709</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  710</span>    <span class="comment">/* Relies on NULL encoding to zero. */</span></div>
<div class="line"><span class="lineno">  711</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a>(new_entries, <span class="keyword">sizeof</span>(duk_uint16_t) * new_size);</div>
<div class="line"><span class="lineno">  712</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  713</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ace325eaae44f64bffe3918e912d80ffc">DUK_MEMZERO</a>(new_entries, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) * new_size);</div>
<div class="line"><span class="lineno">  714</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  715</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>    <span class="comment">/* Because new_size &gt; duk__count_used_probe(heap), guaranteed to work */</span></div>
<div class="line"><span class="lineno">  718</span>    <span class="keywordflow">for</span> (i = 0; i &lt; old_size; i++) {</div>
<div class="line"><span class="lineno">  719</span>        <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *e;</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  722</span>        e = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) DUK_USE_HEAPPTR_DEC16(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">heap_udata</a>, old_entries[i]);</div>
<div class="line"><span class="lineno">  723</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  724</span>        e = old_entries[i];</div>
<div class="line"><span class="lineno">  725</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  726</span>        <span class="keywordflow">if</span> (e == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || e == <a class="code hl_define" href="#a45b6b1b1c54b48bb3c61db232dc94356">DUK__DELETED_MARKER</a>(heap)) {</div>
<div class="line"><span class="lineno">  727</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  728</span>        }</div>
<div class="line"><span class="lineno">  729</span>        <span class="comment">/* checking for DUK__DELETED_MARKER is not necessary here, but helper does it now */</span></div>
<div class="line"><span class="lineno">  730</span>        <a class="code hl_function" href="#a3428e8f3a818815ad550b1f36b525716">duk__insert_hstring_probe</a>(heap, new_entries, new_size, &amp;new_used, e);</div>
<div class="line"><span class="lineno">  731</span>    }</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span><span class="preprocessor">#ifdef DUK_USE_DDPRINT</span></div>
<div class="line"><span class="lineno">  734</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a6c3a2adb6e09294c7e65f69821e5e81a">DUK_DD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa66ca9adc2b4187c5d549a9b117b03d3">DUK_DDPRINT</a>(<span class="stringliteral">&quot;resized stringtable: %ld entries, %ld bytes, %ld used, %ld%% load -&gt; %ld entries, %ld bytes, %ld used, %ld%% load&quot;</span>,</div>
<div class="line"><span class="lineno">  735</span>                       (<span class="keywordtype">long</span>) old_size, (<span class="keywordtype">long</span>) (<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) * old_size), (<span class="keywordtype">long</span>) old_used,</div>
<div class="line"><span class="lineno">  736</span>                       (<span class="keywordtype">long</span>) (((<span class="keywordtype">double</span>) old_used) / ((<span class="keywordtype">double</span>) old_size) * 100.0),</div>
<div class="line"><span class="lineno">  737</span>                       (<span class="keywordtype">long</span>) new_size, (<span class="keywordtype">long</span>) (<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) * new_size), (<span class="keywordtype">long</span>) new_used,</div>
<div class="line"><span class="lineno">  738</span>                       (<span class="keywordtype">long</span>) (((<span class="keywordtype">double</span>) new_used) / ((<span class="keywordtype">double</span>) new_size) * 100.0)));</div>
<div class="line"><span class="lineno">  739</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno">  742</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, heap-&gt;strtable16);</div>
<div class="line"><span class="lineno">  743</span>    heap-&gt;strtable16 = new_entries;</div>
<div class="line"><span class="lineno">  744</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  745</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>);</div>
<div class="line"><span class="lineno">  746</span>    heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a> = new_entries;</div>
<div class="line"><span class="lineno">  747</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  748</span>    heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a> = new_size;</div>
<div class="line"><span class="lineno">  749</span>    heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a5d596da450737ed3b0fa10c98a3609f8">st_used</a> = new_used;  <span class="comment">/* may be less, since DELETED entries are NULLed by rehash */</span></div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>    <span class="keywordflow">return</span> 0;  <span class="comment">/* OK */</span></div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span> resize_error:</div>
<div class="line"><span class="lineno">  754</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, new_entries);</div>
<div class="line"><span class="lineno">  755</span>    <span class="keywordflow">return</span> 1;  <span class="comment">/* FAIL */</span></div>
<div class="line"><span class="lineno">  756</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a9170138f330dbcaabfae9d2c59cc9684"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a></div><div class="ttdeci">#define DUK_UNREF(x)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">duktape-1.5.2/src-noline/duk_config.h:2494</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00469">duk__count_used_probe()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00010">DUK__DELETED_MARKER</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00493">duk__insert_hstring_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06862">DUK_ALLOC</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07496">DUK_DD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07508">DUK_DDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06866">DUK_FREE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02056">DUK_MEMZERO</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06721">DUK_MS_FLAG_NO_FINALIZERS</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06720">DUK_MS_FLAG_NO_OBJECT_COMPACTION</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06719">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06993">duk_heap::heap_udata</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07028">duk_heap::mark_and_sweep_base_flags</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duk_heap::st_size</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07114">duk_heap::st_used</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07111">duk_heap::strtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00758">duk__resize_strtab_probe()</a>.</p>

</div>
</div>
<a id="add3d0c22690534acde25576d27a740c0" name="add3d0c22690534acde25576d27a740c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add3d0c22690534acde25576d27a740c0">&#9670;&#160;</a></span>duk_heap_force_strtab_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_heap_force_strtab_resize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01053">1053</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1053</span>                                                               {</div>
<div class="line"><span class="lineno"> 1054</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a2b7ba45bf826058a9b7720b5e258efc6">duk_small_uint_t</a> prev_mark_and_sweep_base_flags;</div>
<div class="line"><span class="lineno"> 1055</span>    <span class="comment">/* Force a resize so that DELETED entries are eliminated.</span></div>
<div class="line"><span class="lineno"> 1056</span><span class="comment">     * Another option would be duk__recheck_strtab_size_probe();</span></div>
<div class="line"><span class="lineno"> 1057</span><span class="comment">     * but since that happens on every intern anyway, this whole</span></div>
<div class="line"><span class="lineno"> 1058</span><span class="comment">     * check can now be disabled.</span></div>
<div class="line"><span class="lineno"> 1059</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1060</span> </div>
<div class="line"><span class="lineno"> 1061</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>((heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> &amp; <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a94161c2cd17bbd439cef64cc8467b504">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a>) == 0);</div>
<div class="line"><span class="lineno"> 1062</span>    prev_mark_and_sweep_base_flags = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a>;</div>
<div class="line"><span class="lineno"> 1063</span>    <a class="code hl_define" href="#a93f7f9b1e1896c74cdf96eb2862c61ac">DUK__PREVENT_MS_SIDE_EFFECTS</a>(heap);</div>
<div class="line"><span class="lineno"> 1064</span> </div>
<div class="line"><span class="lineno"> 1065</span><span class="preprocessor">#if defined(DUK_USE_STRTAB_CHAIN)</span></div>
<div class="line"><span class="lineno"> 1066</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a9170138f330dbcaabfae9d2c59cc9684">DUK_UNREF</a>(heap);</div>
<div class="line"><span class="lineno"> 1067</span><span class="preprocessor">#elif defined(DUK_USE_STRTAB_PROBE)</span></div>
<div class="line"><span class="lineno"> 1068</span>    (void) <a class="code hl_function" href="#a59b1aeceb1237746618278c7c03d699b">duk__resize_strtab_probe</a>(heap);</div>
<div class="line"><span class="lineno"> 1069</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1070</span> </div>
<div class="line"><span class="lineno"> 1071</span>    heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a7a87c08de7b8e78f276558f447220229">mark_and_sweep_base_flags</a> = prev_mark_and_sweep_base_flags;</div>
<div class="line"><span class="lineno"> 1072</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00014">DUK__PREVENT_MS_SIDE_EFFECTS</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00758">duk__resize_strtab_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06719">DUK_MS_FLAG_NO_STRINGTABLE_RESIZE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02494">DUK_UNREF</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07028">duk_heap::mark_and_sweep_base_flags</a>.</p>

</div>
</div>
<a id="ad142e6936dcbc8b2e885cc76c59b318f" name="ad142e6936dcbc8b2e885cc76c59b318f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad142e6936dcbc8b2e885cc76c59b318f">&#9670;&#160;</a></span>duk_heap_free_strtab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_heap_free_strtab </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01139">1139</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1139</span>                                                       {</div>
<div class="line"><span class="lineno"> 1140</span>    <a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a> i;</div>
<div class="line"><span class="lineno"> 1141</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *h;</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno"> 1144</span>    <span class="keywordflow">if</span> (heap-&gt;strtable16) {</div>
<div class="line"><span class="lineno"> 1145</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1146</span>    <span class="keywordflow">if</span> (heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>) {</div>
<div class="line"><span class="lineno"> 1147</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1148</span>        <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code hl_typedef" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#afb6f9b695c07e55f671ddef49a2c0fbd">duk_uint_fast32_t</a>) heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a>; i++) {</div>
<div class="line"><span class="lineno"> 1149</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno"> 1150</span>            h = (<a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *) DUK_USE_HEAPPTR_DEC16(heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a6e176bfba7eee4c2986a33bc29387328">heap_udata</a>, heap-&gt;strtable16[i]);</div>
<div class="line"><span class="lineno"> 1151</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1152</span>            h = heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>[i];</div>
<div class="line"><span class="lineno"> 1153</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1154</span>            <span class="keywordflow">if</span> (h == <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || h == <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03a6b2ef1626b68ab1751f404f51cc22">DUK_STRTAB_DELETED_MARKER</a>(heap)) {</div>
<div class="line"><span class="lineno"> 1155</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1156</span>            }</div>
<div class="line"><span class="lineno"> 1157</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(h != <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="lineno"> 1158</span> </div>
<div class="line"><span class="lineno"> 1159</span>            <span class="comment">/* strings may have inner refs (extdata) in some cases */</span></div>
<div class="line"><span class="lineno"> 1160</span>            <a class="code hl_function" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a57e933dd38b986a357486784a4b1a88e">duk_free_hstring_inner</a>(heap, h);</div>
<div class="line"><span class="lineno"> 1161</span>            <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, h);</div>
<div class="line"><span class="lineno"> 1162</span><span class="preprocessor">#if 0  </span><span class="comment">/* not strictly necessary */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1163</span>            heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>[i] = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1164</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1165</span>        }</div>
<div class="line"><span class="lineno"> 1166</span><span class="preprocessor">#if defined(DUK_USE_HEAPPTR16)</span></div>
<div class="line"><span class="lineno"> 1167</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, heap-&gt;strtable16);</div>
<div class="line"><span class="lineno"> 1168</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1169</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a571cb7da08d904b60be353682be305a6">DUK_FREE</a>(heap, heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>);</div>
<div class="line"><span class="lineno"> 1170</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1171</span><span class="preprocessor">#if 0  </span><span class="comment">/* not strictly necessary */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1172</span>        heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a> = <a class="code hl_define" href="gmacros_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 1173</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1174</span>    }</div>
<div class="line"><span class="lineno"> 1175</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a03a6b2ef1626b68ab1751f404f51cc22"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a03a6b2ef1626b68ab1751f404f51cc22">DUK_STRTAB_DELETED_MARKER</a></div><div class="ttdeci">#define DUK_STRTAB_DELETED_MARKER(heap)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06783">duktape-1.5.2/src-noline/duktape.c:6783</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a57e933dd38b986a357486784a4b1a88e"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a57e933dd38b986a357486784a4b1a88e">duk_free_hstring_inner</a></div><div class="ttdeci">DUK_INTERNAL_DECL void duk_free_hstring_inner(duk_heap *heap, duk_hstring *h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l40770">duktape-1.5.2/src-noline/duktape.c:40770</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06866">DUK_FREE</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l40770">duk_free_hstring_inner()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06783">DUK_STRTAB_DELETED_MARKER</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06993">duk_heap::heap_udata</a>, <a class="el" href="gmacros_8h_source.html#l00924">NULL</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duk_heap::st_size</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07111">duk_heap::strtable</a>.</p>

</div>
</div>
<a id="a5ed81ab4a8814a9d9436cbf93cb08a98" name="a5ed81ab4a8814a9d9436cbf93cb08a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ed81ab4a8814a9d9436cbf93cb08a98">&#9670;&#160;</a></span>duk_heap_string_intern()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk_heap_string_intern </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>str</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>blen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00980">980</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  980</span>                                                                                                            {</div>
<div class="line"><span class="lineno">  981</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *res;</div>
<div class="line"><span class="lineno">  982</span>    duk_uint32_t strhash;</div>
<div class="line"><span class="lineno">  983</span> </div>
<div class="line"><span class="lineno">  984</span>    <span class="comment">/* caller is responsible for ensuring this */</span></div>
<div class="line"><span class="lineno">  985</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(blen &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a911b8e16727851b6925e934ae7d449b0">DUK_HSTRING_MAX_BYTELEN</a>);</div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span>    res = <a class="code hl_function" href="#a4448feb38a6ba3056b574b94a2d0dbf3">duk__do_lookup</a>(heap, str, blen, &amp;strhash);</div>
<div class="line"><span class="lineno">  988</span>    <span class="keywordflow">if</span> (res) {</div>
<div class="line"><span class="lineno">  989</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  990</span>    }</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span>    res = <a class="code hl_function" href="#ad00665675a49c44398e62e8fe26283cf">duk__do_intern</a>(heap, str, blen, strhash);</div>
<div class="line"><span class="lineno">  993</span>    <span class="keywordflow">return</span> res;  <span class="comment">/* may be NULL */</span></div>
<div class="line"><span class="lineno">  994</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a911b8e16727851b6925e934ae7d449b0"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a911b8e16727851b6925e934ae7d449b0">DUK_HSTRING_MAX_BYTELEN</a></div><div class="ttdeci">#define DUK_HSTRING_MAX_BYTELEN</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04427">duktape-1.5.2/src-noline/duktape.c:4427</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a4448feb38a6ba3056b574b94a2d0dbf3"><div class="ttname"><a href="#a4448feb38a6ba3056b574b94a2d0dbf3">duk__do_lookup</a></div><div class="ttdeci">DUK_LOCAL duk_hstring * duk__do_lookup(duk_heap *heap, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t *out_strhash)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00921">duktape-1.8.0/src-separate/duk_heap_stringtable.c:921</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_ad00665675a49c44398e62e8fe26283cf"><div class="ttname"><a href="#ad00665675a49c44398e62e8fe26283cf">duk__do_intern</a></div><div class="ttdeci">DUK_LOCAL duk_hstring * duk__do_intern(duk_heap *heap, const duk_uint8_t *str, duk_uint32_t blen, duk_uint32_t strhash)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00833">duktape-1.8.0/src-separate/duk_heap_stringtable.c:833</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00833">duk__do_intern()</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00921">duk__do_lookup()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l04427">DUK_HSTRING_MAX_BYTELEN</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00996">duk_heap_string_intern_checked()</a>, and <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01014">duk_heap_string_intern_u32()</a>.</p>

</div>
</div>
<a id="ada75ea49a94180ac0da1ee0982a9b9fa" name="ada75ea49a94180ac0da1ee0982a9b9fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada75ea49a94180ac0da1ee0982a9b9fa">&#9670;&#160;</a></span>duk_heap_string_intern_checked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk_heap_string_intern_checked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const duk_uint8_t *</td>          <td class="paramname"><span class="paramname"><em>str</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>blen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00996">996</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  996</span>                                                                                                                      {</div>
<div class="line"><span class="lineno">  997</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *res = <a class="code hl_function" href="#a5ed81ab4a8814a9d9436cbf93cb08a98">duk_heap_string_intern</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, str, blen);</div>
<div class="line"><span class="lineno">  998</span>    <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><span class="lineno">  999</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5fc109d385b92565eabeee85564cbfd3">DUK_ERROR_ALLOC_DEFMSG</a>(thr);</div>
<div class="line"><span class="lineno"> 1000</span>    }</div>
<div class="line"><span class="lineno"> 1001</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1002</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_a5fc109d385b92565eabeee85564cbfd3"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5fc109d385b92565eabeee85564cbfd3">DUK_ERROR_ALLOC_DEFMSG</a></div><div class="ttdeci">#define DUK_ERROR_ALLOC_DEFMSG(thr)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07862">duktape-1.5.2/src-noline/duktape.c:7862</a></div></div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a5ed81ab4a8814a9d9436cbf93cb08a98"><div class="ttname"><a href="#a5ed81ab4a8814a9d9436cbf93cb08a98">duk_heap_string_intern</a></div><div class="ttdeci">DUK_INTERNAL duk_hstring * duk_heap_string_intern(duk_heap *heap, const duk_uint8_t *str, duk_uint32_t blen)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00980">duktape-1.8.0/src-separate/duk_heap_stringtable.c:980</a></div></div>
<div class="ttc" id="astructduk__hthread_html_a1c6d2e1f36b0b7011f0e52343ca5ed05"><div class="ttname"><a href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">duk_hthread::heap</a></div><div class="ttdeci">duk_heap * heap</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duktape-1.5.2/src-noline/duktape.c:6202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07862">DUK_ERROR_ALLOC_DEFMSG</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00980">duk_heap_string_intern()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>.</p>

</div>
</div>
<a id="a587f5f9db6b84ab93099e1d2d510546c" name="a587f5f9db6b84ab93099e1d2d510546c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a587f5f9db6b84ab93099e1d2d510546c">&#9670;&#160;</a></span>duk_heap_string_intern_u32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk_heap_string_intern_u32 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01014">1014</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1014</span>                                                                                       {</div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keywordtype">char</span> buf[<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad795e6f23fa46d46f505333337b4c9b5">DUK_STRTAB_U32_MAX_STRLEN</a>+1];</div>
<div class="line"><span class="lineno"> 1016</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ae9f6c09f56ebaf403fb5ac57cd2814e1">DUK_SNPRINTF</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%lu&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) val);</div>
<div class="line"><span class="lineno"> 1017</span>    buf[<span class="keyword">sizeof</span>(buf) - 1] = (<span class="keywordtype">char</span>) 0;</div>
<div class="line"><span class="lineno"> 1018</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a52bc112231cf556000de414bca74c712">DUK_ASSERT</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abe9e971fadd59b3f6819f140e3981bc5">DUK_STRLEN</a>(buf) &lt;= <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a992ae923a8767c4099c2a7c9fe1ecb0b">DUK_UINT32_MAX</a>);  <span class="comment">/* formatted result limited */</span></div>
<div class="line"><span class="lineno"> 1019</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#a5ed81ab4a8814a9d9436cbf93cb08a98">duk_heap_string_intern</a>(heap, (<span class="keyword">const</span> duk_uint8_t *) buf, (duk_uint32_t) <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abe9e971fadd59b3f6819f140e3981bc5">DUK_STRLEN</a>(buf));</div>
<div class="line"><span class="lineno"> 1020</span>}</div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_a992ae923a8767c4099c2a7c9fe1ecb0b"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a992ae923a8767c4099c2a7c9fe1ecb0b">DUK_UINT32_MAX</a></div><div class="ttdeci">#define DUK_UINT32_MAX</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01676">duktape-1.5.2/src-noline/duk_config.h:1676</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_abe9e971fadd59b3f6819f140e3981bc5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#abe9e971fadd59b3f6819f140e3981bc5">DUK_STRLEN</a></div><div class="ttdeci">#define DUK_STRLEN</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01997">duktape-1.5.2/src-noline/duk_config.h:1997</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duk__config_8h_html_ae9f6c09f56ebaf403fb5ac57cd2814e1"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duk__config_8h.html#ae9f6c09f56ebaf403fb5ac57cd2814e1">DUK_SNPRINTF</a></div><div class="ttdeci">#define DUK_SNPRINTF</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02016">duktape-1.5.2/src-noline/duk_config.h:2016</a></div></div>
<div class="ttc" id="aduktape-1_85_82_2src-noline_2duktape_8c_html_ad795e6f23fa46d46f505333337b4c9b5"><div class="ttname"><a href="duktape-1_85_82_2src-noline_2duktape_8c.html#ad795e6f23fa46d46f505333337b4c9b5">DUK_STRTAB_U32_MAX_STRLEN</a></div><div class="ttdeci">#define DUK_STRTAB_U32_MAX_STRLEN</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06790">duktape-1.5.2/src-noline/duktape.c:6790</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07755">DUK_ASSERT</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00980">duk_heap_string_intern()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l02016">DUK_SNPRINTF</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01997">DUK_STRLEN</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06790">DUK_STRTAB_U32_MAX_STRLEN</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h_source.html#l01676">DUK_UINT32_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01022">duk_heap_string_intern_u32_checked()</a>.</p>

</div>
</div>
<a id="a8e3fafdd6a320062dfc084f6ead62ff5" name="a8e3fafdd6a320062dfc084f6ead62ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e3fafdd6a320062dfc084f6ead62ff5">&#9670;&#160;</a></span>duk_heap_string_intern_u32_checked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> <a class="el" href="structduk__hstring.html">duk_hstring</a> * duk_heap_string_intern_u32_checked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__hthread.html">duk_hthread</a> *</td>          <td class="paramname"><span class="paramname"><em>thr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duk_uint32_t</td>          <td class="paramname"><span class="paramname"><em>val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01022">1022</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1022</span>                                                                                                 {</div>
<div class="line"><span class="lineno"> 1023</span>    <a class="code hl_struct" href="structduk__hstring.html">duk_hstring</a> *res = <a class="code hl_function" href="#a587f5f9db6b84ab93099e1d2d510546c">duk_heap_string_intern_u32</a>(thr-&gt;<a class="code hl_variable" href="structduk__hthread.html#a1c6d2e1f36b0b7011f0e52343ca5ed05">heap</a>, val);</div>
<div class="line"><span class="lineno"> 1024</span>    <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><span class="lineno"> 1025</span>        <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a5fc109d385b92565eabeee85564cbfd3">DUK_ERROR_ALLOC_DEFMSG</a>(thr);</div>
<div class="line"><span class="lineno"> 1026</span>    }</div>
<div class="line"><span class="lineno"> 1027</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1028</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_a587f5f9db6b84ab93099e1d2d510546c"><div class="ttname"><a href="#a587f5f9db6b84ab93099e1d2d510546c">duk_heap_string_intern_u32</a></div><div class="ttdeci">DUK_INTERNAL duk_hstring * duk_heap_string_intern_u32(duk_heap *heap, duk_uint32_t val)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01014">duktape-1.8.0/src-separate/duk_heap_stringtable.c:1014</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07862">DUK_ERROR_ALLOC_DEFMSG</a>, <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01014">duk_heap_string_intern_u32()</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l06202">duk_hthread::heap</a>.</p>

</div>
</div>
<a id="a99fb1986721cef2f17686d7913b82200" name="a99fb1986721cef2f17686d7913b82200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99fb1986721cef2f17686d7913b82200">&#9670;&#160;</a></span>duk_heap_string_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="duktape-1_85_82_2src-noline_2duk__config_8h.html#a19032f251b36af6bfb17f4450b829521">DUK_INTERNAL</a> void duk_heap_string_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structduk__heap.html">duk_heap</a> *</td>          <td class="paramname"><span class="paramname"><em>heap</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structduk__hstring.html">duk_hstring</a> *</td>          <td class="paramname"><span class="paramname"><em>h</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l01032">1032</a> of file <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html">duktape-1.8.0/src-separate/duk_heap_stringtable.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1032</span>                                                                         {</div>
<div class="line"><span class="lineno"> 1033</span>    <a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#a2db20d2d3b36d8491ed171cf503488bb">DUK_DDD</a>(<a class="code hl_define" href="duktape-1_85_82_2src-noline_2duktape_8c.html#aa6e5d41ceaba6832e5ede737f0a35fb9">DUK_DDDPRINT</a>(<span class="stringliteral">&quot;remove string from stringtable: %!O&quot;</span>, (<a class="code hl_struct" href="structduk__heaphdr.html">duk_heaphdr</a> *) h));</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span><span class="preprocessor">#if defined(DUK_USE_STRTAB_CHAIN)</span></div>
<div class="line"><span class="lineno"> 1036</span>    duk__remove_matching_hstring_chain(heap, h);</div>
<div class="line"><span class="lineno"> 1037</span><span class="preprocessor">#elif defined(DUK_USE_STRTAB_PROBE)</span></div>
<div class="line"><span class="lineno"> 1038</span>    <a class="code hl_function" href="#aa0a3cf3658806992f97407c5ca2b9d6c">duk__remove_matching_hstring_probe</a>(heap,</div>
<div class="line"><span class="lineno"> 1039</span>#<span class="keywordflow">if</span> defined(DUK_USE_HEAPPTR16)</div>
<div class="line"><span class="lineno"> 1040</span>                                       heap-&gt;strtable16,</div>
<div class="line"><span class="lineno"> 1041</span>#<span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1042</span>                                       heap-&gt;<a class="code hl_variable" href="structduk__heap.html#a465d9e78f80bec2ccad5459a2d869603">strtable</a>,</div>
<div class="line"><span class="lineno"> 1043</span>#endif</div>
<div class="line"><span class="lineno"> 1044</span>                                       heap-&gt;<a class="code hl_variable" href="structduk__heap.html#aa249660205399aec495d86034217c9ee">st_size</a>,</div>
<div class="line"><span class="lineno"> 1045</span>                                       h);</div>
<div class="line"><span class="lineno"> 1046</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1047</span><span class="preprocessor">#error internal error, invalid strtab options</span></div>
<div class="line"><span class="lineno"> 1048</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1049</span>}</div>
<div class="ttc" id="aduktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_html_aa0a3cf3658806992f97407c5ca2b9d6c"><div class="ttname"><a href="#aa0a3cf3658806992f97407c5ca2b9d6c">duk__remove_matching_hstring_probe</a></div><div class="ttdeci">DUK_LOCAL void duk__remove_matching_hstring_probe(duk_heap *heap, duk_hstring **entries, duk_uint32_t size, duk_hstring *h)</div><div class="ttdef"><b>Definition</b> <a href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00594">duktape-1.8.0/src-separate/duk_heap_stringtable.c:594</a></div></div>
<div class="ttc" id="astructduk__heaphdr_html"><div class="ttname"><a href="structduk__heaphdr.html">duk_heaphdr</a></div><div class="ttdef"><b>Definition</b> <a href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l03479">duktape-1.5.2/src-noline/duktape.c:3479</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c_source.html#l00594">duk__remove_matching_hstring_probe()</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07497">DUK_DDD</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07509">DUK_DDDPRINT</a>, <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07113">duk_heap::st_size</a>, and <a class="el" href="duktape-1_85_82_2src-noline_2duktape_8c_source.html#l07111">duk_heap::strtable</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1e03628437b642463b7b6eb98fac43e1.html">vendor</a></li><li class="navelem"><a class="el" href="dir_84591d08937a968859b7757c3b203700.html">civetweb</a></li><li class="navelem"><a class="el" href="dir_34c971402fa1824d9c500953fc75cb63.html">third_party</a></li><li class="navelem"><a class="el" href="dir_00bee2651a8e543911ee9ac473617819.html">duktape-1.8.0</a></li><li class="navelem"><a class="el" href="dir_27bca86221c24c635a9197b9d0b1c3d5.html">src-separate</a></li><li class="navelem"><a class="el" href="duktape-1_88_80_2src-separate_2duk__heap__stringtable_8c.html">duk_heap_stringtable.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
